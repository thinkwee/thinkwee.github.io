{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next-reloaded/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/me.jpg","path":"images/me.jpg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"source/baidu_verify_l3vacuMD8f.html","hash":"a960f42945b99b15d34d7ae9a694d91cdd0553da","modified":1533184748099},{"_id":"themes/next-reloaded/.bowerrc","hash":"334da94ca6f024d60d012cc26ea655681e724ad8","modified":1537587774444},{"_id":"themes/next-reloaded/.editorconfig","hash":"211d2c92bfdddb3e81ea946f4ca7a539f150f4da","modified":1537587774444},{"_id":"themes/next-reloaded/.eslintrc.json","hash":"d3c11de434171d55d70daadd3914bc33544b74b8","modified":1537587774444},{"_id":"themes/next-reloaded/.gitattributes","hash":"8454b9313cb1a97b63fb87e2d29daee497ce6249","modified":1537587774444},{"_id":"themes/next-reloaded/.gitignore","hash":"0378adb9c2dc4855b3198184df4863cb30e4059c","modified":1537587774446},{"_id":"themes/next-reloaded/.stylintrc","hash":"3b7f9785e9ad0dab764e1c535b40df02f4ff5fd6","modified":1537587774446},{"_id":"themes/next-reloaded/.travis.yml","hash":"fb9ac54e875f6ea16d5c83db497f6bd70ae83198","modified":1537587774446},{"_id":"themes/next-reloaded/LICENSE.md","hash":"f0190c7d83a98464549a6b3a51bb206148d88e1b","modified":1537587774446},{"_id":"themes/next-reloaded/README.md","hash":"460ef40953c2eccea4f87bc67043aac2eb87b1a9","modified":1537587774447},{"_id":"themes/next-reloaded/_config.yml","hash":"98335c39dc948d15008af4b9984912210a75c39c","modified":1537595075780},{"_id":"themes/next-reloaded/bower.json","hash":"960159e57be380d14aef75360412575cd8cb938f","modified":1537587774447},{"_id":"themes/next-reloaded/crowdin.yml","hash":"4a53f5985e545c635cb56b2a57ed290cb8cf8942","modified":1537587774447},{"_id":"themes/next-reloaded/gulpfile.coffee","hash":"67eaf2515100971f6195b60eeebbfe5e8de895ab","modified":1537587774453},{"_id":"themes/next-reloaded/package.json","hash":"2e6d67099c08a38d46bf3c43b580f7315284aeb8","modified":1537587774471},{"_id":"source/_posts/AM-Model-for-ASS.md","hash":"a0f57db2e3011f63574447c654c968d801a32674","modified":1532309318487},{"_id":"source/_posts/Lagrange.md","hash":"9dc62493ae5bf10807933e47168b82a9f0b3d8f8","modified":1535449407016},{"_id":"source/_posts/LinearAlgebra1.md","hash":"67b9da5f9ca78631570702f2bb083bf3354dc98a","modified":1537104405179},{"_id":"source/_posts/LinearAlgebra3.md","hash":"6492c8bb8865fb766376b079b12a8b4ea11dd30a","modified":1537278267280},{"_id":"source/_posts/LinearAlgebra2.md","hash":"5ad2abcbcf513e0cb96a0d5c5dde1ce54782bc11","modified":1535937714832},{"_id":"source/_posts/MachineLearningNote.md","hash":"5e7c8e658eaf6f2da5f83bfbaf89ffea6bdc4385","modified":1536977034578},{"_id":"source/_posts/NeuralNetworks1.md","hash":"97370f102f3422e63d36de50eca50c1fcaf0e648","modified":1532309318487},{"_id":"source/_posts/NLPBasic.md","hash":"833812d1d5b34fec3bdd1ba259d31bbf8c99ebfa","modified":1532309318487},{"_id":"source/_posts/PaperReading.md","hash":"8f833a121b69d4e4627a62fa3461d44de675af24","modified":1537451354711},{"_id":"source/_posts/PythonNotes.md","hash":"7fb9bb8f52148028daec19de9b763365ebc27840","modified":1532309318502},{"_id":"source/_posts/PaperReading2.md","hash":"aaa8e857ebc8d8ccbcf2b4b78ac490bdcc742a96","modified":1536411640145},{"_id":"source/_posts/TitanicLinearRegression.md","hash":"86522f39e1832997143dbddf5f5303102eabef43","modified":1532309318502},{"_id":"source/_posts/buptroomreview.md","hash":"94878f32bdb337bd769b429f80fddf662ad176a1","modified":1532309318502},{"_id":"source/_posts/convex-optimization.md","hash":"6e25b559cd9025e7948eedd91e38bf15a783397b","modified":1533348888460},{"_id":"source/_posts/cvxopt.md","hash":"f597df32c14b83e5efbb9e7385dd7b973dc29082","modified":1530862631346},{"_id":"source/_posts/dachuang.md","hash":"28b353549bef237fbdf485aac5a84291cfad5aa9","modified":1532309318502},{"_id":"source/_posts/dachuangserver.md","hash":"13140c83c3dc10e4121e29df8cf0bdb1c86a936e","modified":1532309318502},{"_id":"source/_posts/deepbayes2018.md","hash":"14ead7116772858334db9120e7cb1b2fe64c0f48","modified":1537594911054},{"_id":"source/_posts/dpp.md","hash":"aa4315b4fcfe608cddd1606cccdc48373cfefe03","modified":1537018955426},{"_id":"source/_posts/hlda.md","hash":"964cef6db5d7115a9f11176896a367e97e5a070c","modified":1535967579248},{"_id":"source/_posts/inference-algorithm.md","hash":"62fa849aff228061552484532dcabaf637ad0516","modified":1537515923962},{"_id":"source/_posts/kmeans.md","hash":"66e5f4fa9e4c8491ed9645eb274cc124f8133678","modified":1535879760160},{"_id":"source/_posts/lda.md","hash":"b312aaaac96e4114c6e6a632d4b86182ff841f87","modified":1535941882157},{"_id":"source/_posts/mnist.md","hash":"6c386b59f7487cd6a647756986a159376d182cdf","modified":1532309318502},{"_id":"source/_posts/numpycookbook.md","hash":"825205ee8785deee60e69b66a767eb684632e961","modified":1532309318502},{"_id":"source/_posts/oj.md","hash":"8d875ddfdf996a4612755002ac8dae643d0f625c","modified":1532309318502},{"_id":"source/_posts/pandas-skill.md","hash":"18bb8f8b0e291e079374e949b60805234f9c5896","modified":1532309318518},{"_id":"source/_posts/pandas-func.md","hash":"2eb497dcc35bfcc52ff043cd47d0bf4c2c54e639","modified":1532309318502},{"_id":"source/_posts/seq2seq-summarization.md","hash":"5372b810567701ed081aa6b4052c6dc9c9801f3b","modified":1532309318518},{"_id":"source/_posts/setupmywebsite.md","hash":"a5d25b49492f5f63a59a4793fe032772fee29444","modified":1532309318518},{"_id":"source/_posts/statistical-handwriting.md","hash":"b6eba22f3d3c3d890688ad49c33c90bd9c858a5f","modified":1535449410992},{"_id":"source/_posts/tensorflowtutorial.md","hash":"a96730eecda5b2b3b677044bc66ddae82167bda6","modified":1532309318518},{"_id":"source/_posts/trie.md","hash":"67475a3c018d3d7b56e1b7132355ab961c2efbbd","modified":1532309318518},{"_id":"source/about/index.md","hash":"2f356ce3252b176d8051e1d3ad77840a18c27bb6","modified":1537019239097},{"_id":"source/categories/index.md","hash":"ba5ab51915c24815b4a73993e9f71c408ce03bcc","modified":1532309318518},{"_id":"source/tags/index.md","hash":"94074ed5c8e4bb909be5edb0c9124ca5ae2ff5ef","modified":1532309318518},{"_id":"themes/next-reloaded/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1537587774435},{"_id":"themes/next-reloaded/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1537587765315},{"_id":"themes/next-reloaded/.git/config","hash":"7f8b507977a695e25b27d4c2e8aaed71410536bf","modified":1537587774437},{"_id":"themes/next-reloaded/.git/index","hash":"ed7f001fc78b574a2b346530f8bb559c2e13c9f5","modified":1537587774509},{"_id":"themes/next-reloaded/.git/packed-refs","hash":"cfff1327f48418de87782f5c317e0f5e898e217e","modified":1537587774433},{"_id":"themes/next-reloaded/.github/CODE_OF_CONDUCT.md","hash":"22f2ccc5522563b67c8663849fc1d6cbae93a8ff","modified":1537587774445},{"_id":"themes/next-reloaded/.github/CONTRIBUTING.md","hash":"40b0fd9fdb8586fab98e23f713940e7a2f80e2f9","modified":1537587774445},{"_id":"themes/next-reloaded/.github/ISSUE_TEMPLATE.md","hash":"1e212fe229bd659726b4a3bcf4b5b14e0310ba3a","modified":1537587774445},{"_id":"themes/next-reloaded/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1537587774446},{"_id":"themes/next-reloaded/.github/PULL_REQUEST_TEMPLATE.md","hash":"36201119490a04107c8179b10202548a9d0e5e60","modified":1537587774445},{"_id":"themes/next-reloaded/.github/stale.yml","hash":"dbd5e6bf89b76ad1f2b081578b239c7ae32755af","modified":1537587774446},{"_id":"themes/next-reloaded/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1537587774448},{"_id":"themes/next-reloaded/docs/DATA-FILES.md","hash":"9a1895c0a0db705c4c48f512e86917f9af1ec3fb","modified":1537587774448},{"_id":"themes/next-reloaded/docs/ALGOLIA-SEARCH.md","hash":"1dada3c3404445a00367882b8f97cdf092b7943d","modified":1537587774448},{"_id":"themes/next-reloaded/docs/AUTHORS.md","hash":"51a0a13da55ff3d596970b2f9ab4531c6b2211f2","modified":1537587774448},{"_id":"themes/next-reloaded/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"f2fd611a84dd6f9ed5395b63e187e29e9effbcd3","modified":1537587774449},{"_id":"themes/next-reloaded/docs/INSTALLATION.md","hash":"b74ef6fedf76cdb156e2265759ee0a789ddd49cc","modified":1537587774449},{"_id":"themes/next-reloaded/docs/LICENSE","hash":"5b702310012d480b40529fd10cf1872f687277a0","modified":1537587774449},{"_id":"themes/next-reloaded/docs/MATH.md","hash":"34a46ca9a05b4570903beaadd4807e6759afb52e","modified":1537587774449},{"_id":"themes/next-reloaded/docs/UPDATE-FROM-5.1.X.md","hash":"c9f2ed8e15c137b1885d9ca8b7197d9f457971e9","modified":1537587774449},{"_id":"themes/next-reloaded/layout/_layout.swig","hash":"2db9b03efc68be842b8f79fe2f0fd7fb09e8885a","modified":1537587774456},{"_id":"themes/next-reloaded/layout/archive.swig","hash":"4b53070008775ecfd03953bd1b4adfcb0fabcaac","modified":1537587774470},{"_id":"themes/next-reloaded/layout/category.swig","hash":"f0e3338bfa5efb205d2c28e635e9611f1fff3b55","modified":1537587774470},{"_id":"themes/next-reloaded/layout/index.swig","hash":"bdcc9f57adef49706b16b107791cacecbc23c1dc","modified":1537587774470},{"_id":"themes/next-reloaded/layout/page.swig","hash":"9ddf40303f82e3db76d59dc82b6d4eadfed203c6","modified":1537587774470},{"_id":"themes/next-reloaded/layout/post.swig","hash":"0554f42f90f4a524666c2b520be30b689c1d6a87","modified":1537587774471},{"_id":"themes/next-reloaded/layout/schedule.swig","hash":"d99b9eff0cff38caf095445f27c08aaf11a5b862","modified":1537587774471},{"_id":"themes/next-reloaded/layout/tag.swig","hash":"7cda2822e50b9fee9848a6b81e6c2d1aca830aeb","modified":1537587774471},{"_id":"themes/next-reloaded/languages/de.yml","hash":"641e49587d41bb87e4d5932dc3d975754ded7953","modified":1537587774453},{"_id":"themes/next-reloaded/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1537587774453},{"_id":"themes/next-reloaded/languages/en.yml","hash":"d66b8b48840443a4f9c72c7696a21e292f685a47","modified":1537587774453},{"_id":"themes/next-reloaded/languages/fr.yml","hash":"ebcd1f188af8c3f5ef1f0923e794c839fbfae2d4","modified":1537587774453},{"_id":"themes/next-reloaded/languages/id.yml","hash":"9709a4dbacc56a1571a96b139b872128d6959e90","modified":1537587774453},{"_id":"themes/next-reloaded/languages/it.yml","hash":"4e3adeb10c0fa627935d69ae1783ce0894f5dee5","modified":1537587774454},{"_id":"themes/next-reloaded/languages/ja.yml","hash":"82afb0a5637ad67065fa5b2624fa56c7c240c3c6","modified":1537587774454},{"_id":"themes/next-reloaded/languages/ko.yml","hash":"33e065ceb21590b8eb32430a69e76c2f057eb758","modified":1537587774454},{"_id":"themes/next-reloaded/languages/nl.yml","hash":"060efc260c1c529469d739d97dcee79683e8f411","modified":1537587774454},{"_id":"themes/next-reloaded/languages/pt-BR.yml","hash":"dc09e290e908744ca28e093dbdd859ca2a20290e","modified":1537587774454},{"_id":"themes/next-reloaded/languages/pt.yml","hash":"53e2a52b9d5dc20c04080acd4f5b954e8699780f","modified":1537587774454},{"_id":"themes/next-reloaded/languages/ru.yml","hash":"720b92a9ec075b68737d296b1f29ad8e01151c85","modified":1537587774455},{"_id":"themes/next-reloaded/languages/tr.yml","hash":"6d2f53d3687a7a46c67c78ab47908accd8812add","modified":1537587774455},{"_id":"themes/next-reloaded/languages/vi.yml","hash":"e2b3b18359ab41d58c64b2002acfedd60a7505a4","modified":1537587774455},{"_id":"themes/next-reloaded/languages/zh-CN.yml","hash":"069f15da910d6f9756be448167c07ea5aa5dc346","modified":1537587774455},{"_id":"themes/next-reloaded/languages/zh-HK.yml","hash":"c22113c4a6c748c18093dae56da5a9e8c5b963cd","modified":1537587774455},{"_id":"themes/next-reloaded/languages/zh-TW.yml","hash":"dbf4dd87716babb2db4f5332fae9ec190a6f636a","modified":1537587774455},{"_id":"themes/next-reloaded/scripts/helpers.js","hash":"7849f9b9a86fc82d6e186e32a5e26e1f27c49b47","modified":1537587774471},{"_id":"themes/next-reloaded/scripts/merge-configs.js","hash":"5f96f63e86825fd7028c2522e4111103e261a758","modified":1537587774471},{"_id":"themes/next-reloaded/scripts/merge.js","hash":"39b84b937b2a9608b94e5872349a47200e1800ff","modified":1537587774472},{"_id":"themes/next-reloaded/test/.jshintrc","hash":"c9fca43ae0d99718e45a6f5ce736a18ba5fc8fb6","modified":1537587774508},{"_id":"themes/next-reloaded/test/helpers.js","hash":"f25e7f3265eb5a6e1ccbb5e5012fa9bebf134105","modified":1537587774508},{"_id":"themes/next-reloaded/test/intern.js","hash":"db90b1063356727d72be0d77054fdc32fa882a66","modified":1537587774508},{"_id":"themes/next-reloaded/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774493},{"_id":"source/_posts/task_em_files/task_em_35_1.png","hash":"9e8e18921f19ca3a15820d5b793b2568ba9be60a","modified":1537584002367},{"_id":"source/_posts/task_em_files/task_em_9_1.png","hash":"08546d7019a45bc175aafc6aed6556ef46e1ca55","modified":1537584002367},{"_id":"themes/next-reloaded/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1537587765315},{"_id":"themes/next-reloaded/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1537587765316},{"_id":"themes/next-reloaded/.git/hooks/fsmonitor-watchman.sample","hash":"f7c0aa40cb0d620ff0bca3efe3521ec79e5d7156","modified":1537587765316},{"_id":"themes/next-reloaded/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1537587765317},{"_id":"themes/next-reloaded/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1537587765317},{"_id":"themes/next-reloaded/.git/hooks/pre-commit.sample","hash":"33729ad4ce51acda35094e581e4088f3167a0af8","modified":1537587765317},{"_id":"themes/next-reloaded/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1537587765318},{"_id":"themes/next-reloaded/.git/hooks/pre-rebase.sample","hash":"288efdc0027db4cfd8b7c47c4aeddba09b6ded12","modified":1537587765318},{"_id":"themes/next-reloaded/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1537587765319},{"_id":"themes/next-reloaded/.git/hooks/prepare-commit-msg.sample","hash":"2584806ba147152ae005cb675aa4f01d5d068456","modified":1537587765319},{"_id":"themes/next-reloaded/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1537587765320},{"_id":"themes/next-reloaded/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1537587765320},{"_id":"themes/next-reloaded/.git/logs/HEAD","hash":"ed4a8308bc7529fece74ead0ad0d6c2042e26dfa","modified":1537587774436},{"_id":"themes/next-reloaded/docs/ru/DATA-FILES.md","hash":"a51de08657f5946f4028b11373280ddc04639525","modified":1537587774450},{"_id":"themes/next-reloaded/docs/ru/INSTALLATION.md","hash":"7b2963daac19b0c14f98ebef375d5fbce8fc3f44","modified":1537587774450},{"_id":"themes/next-reloaded/docs/ru/README.md","hash":"caaad965f9d54f82382c934f44a507d37a863fa3","modified":1537587774450},{"_id":"themes/next-reloaded/docs/ru/UPDATE-FROM-5.1.X.md","hash":"1a4e41adcf5831057f3f7b3025ed4a5ef7c442b4","modified":1537587774450},{"_id":"themes/next-reloaded/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"e771c5b745608c6fb5ae2fa1c06c61b3699627ec","modified":1537587774451},{"_id":"themes/next-reloaded/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"9b512cb820627fcc45c9f77c7a122aa99e021bd5","modified":1537587774451},{"_id":"themes/next-reloaded/docs/zh-CN/CONTRIBUTING.md","hash":"6ea741f380dc3e90661d12db7e115a94b77643a4","modified":1537587774451},{"_id":"themes/next-reloaded/docs/zh-CN/INSTALLATION.md","hash":"baca12cc24be082f1db28c7f283493569666321c","modified":1537587774452},{"_id":"themes/next-reloaded/docs/zh-CN/DATA-FILES.md","hash":"67f4a987e7db0ab1ce1ea4c311f2961df07b6681","modified":1537587774451},{"_id":"themes/next-reloaded/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"7214fcd1b5830e62b3ac0836ad2d1b0fa391ae12","modified":1537587774452},{"_id":"themes/next-reloaded/docs/zh-CN/MATH.md","hash":"4d68054b062b3c8404b146a155d9624d2d25dd9b","modified":1537587774452},{"_id":"themes/next-reloaded/docs/zh-CN/README.md","hash":"0e6652be1b6bca87479f2601ff89105def200b4c","modified":1537587774452},{"_id":"themes/next-reloaded/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"2095d1214a4e519a1d31b67b41c89080fa3285d3","modified":1537587774452},{"_id":"themes/next-reloaded/layout/_custom/head.swig","hash":"a223919d2e1bf17ca4d6abb2c86f2efca9883dc1","modified":1537587774456},{"_id":"themes/next-reloaded/layout/_custom/header.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1537587774456},{"_id":"themes/next-reloaded/layout/_custom/sidebar.swig","hash":"ba8ab5a0280b953aa97435ff8946cbcbb2755a27","modified":1537587774456},{"_id":"themes/next-reloaded/layout/_macro/post-copyright.swig","hash":"8ff97c3f4eb888207bdc50066053c97d890e0202","modified":1537587774457},{"_id":"themes/next-reloaded/layout/_macro/post-collapse.swig","hash":"8c56dd26157cbc580ae41d97ac34b90ab48ced3f","modified":1537587774457},{"_id":"themes/next-reloaded/layout/_macro/post-related.swig","hash":"e8dfb86eb62b9c2bc1435d6d1afa95d3b4c7b931","modified":1537587774457},{"_id":"themes/next-reloaded/layout/_macro/post.swig","hash":"00cd242c032341ab0fb5d7f66d4a9aa652eab183","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_macro/reward.swig","hash":"56733f92352b891b0bb1baca293f68f6c8928b0b","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_macro/sidebar.swig","hash":"a9519b4f82aa516e516317d0447bf5c5c7ffb544","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_macro/wechat-subscriber.swig","hash":"7a9b687087793bf5e218cbc345214f927fa5601a","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_partials/breadcrumb.swig","hash":"4b48fdbfe3bf41ddeda4ff74c1ff17ab9f15c14e","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_partials/comments.swig","hash":"412d2a0e18a237e490e1b8bce5547558768b9da3","modified":1537587774458},{"_id":"themes/next-reloaded/layout/_partials/footer.swig","hash":"ec4f8a69dbb2d8ebab7ef28e342eae543eaee241","modified":1537587774459},{"_id":"themes/next-reloaded/layout/_partials/page-header.swig","hash":"206cbd6ac9ca6a219a8516f59beae25b3c770199","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_partials/pagination.swig","hash":"914155d5d758306cff405beefd4a07973fd8fc77","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_third-party/bookmark.swig","hash":"ed62ea83d3f2c9db2ea57bf23a7d765ed82504c2","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/copy-code.swig","hash":"c62c37474c8de78cf34e54c6219b503ec28d9815","modified":1537587774467},{"_id":"themes/next-reloaded/layout/_third-party/exturl.swig","hash":"53861f78a1fb52e96a43cf6909e1530dcf6cbff8","modified":1537587774467},{"_id":"themes/next-reloaded/layout/_third-party/github-banner.swig","hash":"736cb278fa09d3b4ed6f305b56353941ea918793","modified":1537587774467},{"_id":"themes/next-reloaded/layout/_third-party/needsharebutton.swig","hash":"debba9b7110f635204a15df148194d4c2fd2668b","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/pangu.swig","hash":"ccf0035086e14dcefa24c2907301edf4c37d5448","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/rating.swig","hash":"554ec568e9d2c71e4a624a8de3cb5929050811d6","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/schedule.swig","hash":"db15d7e1552aa2d2386a6b8a33b3b3a40bf9e43d","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/scroll-cookie.swig","hash":"a174d4a0c9188f9c4a2652f49bfa7a60ad0a83e3","modified":1537587774469},{"_id":"themes/next-reloaded/layout/_scripts/boostrap.swig","hash":"27fb1d81151b9b79683e488579df19eee7e654d6","modified":1537587774462},{"_id":"themes/next-reloaded/layout/_scripts/commons.swig","hash":"f544e21883d249d5a341c684c97bd25831008f07","modified":1537587774462},{"_id":"themes/next-reloaded/layout/_scripts/noscript.swig","hash":"f8c7e729ad6e72b4c705a2c5d5041589c2b4cc52","modified":1537587774462},{"_id":"themes/next-reloaded/layout/_scripts/vendors.swig","hash":"f134aeb8d5bee351e5277edb92ac694af314b75f","modified":1537587774463},{"_id":"themes/next-reloaded/scripts/tags/button.js","hash":"510f3711a9c9d3e2a844250647d90e8359e7d130","modified":1537587774472},{"_id":"themes/next-reloaded/scripts/tags/center-quote.js","hash":"4519ab8e6898f2ee90d05cde060375462b937a7d","modified":1537587774472},{"_id":"themes/next-reloaded/scripts/tags/exturl.js","hash":"83e48148d2f4f8543f6833effa8a26eb0b60f2f0","modified":1537587774472},{"_id":"themes/next-reloaded/scripts/tags/full-image.js","hash":"ef2c2985a3edb9f69740740c5bc42d4b692c86fd","modified":1537587774472},{"_id":"themes/next-reloaded/scripts/tags/group-pictures.js","hash":"aface11629970a5c4ee38aaa15550d2caee59560","modified":1537587774473},{"_id":"themes/next-reloaded/scripts/tags/include-raw.js","hash":"ab4a82a7246265717556c7a42f897430340b88cf","modified":1537587774473},{"_id":"themes/next-reloaded/scripts/tags/note.js","hash":"bd3310a5890bded1bda9ba3ad6f98ee44ecb101a","modified":1537587774473},{"_id":"themes/next-reloaded/scripts/tags/label.js","hash":"bb502616bfabe85de5de903074ec6afe627f8413","modified":1537587774473},{"_id":"themes/next-reloaded/scripts/tags/tabs.js","hash":"2d257e26718d4011509fd6f530d2ea37e50e3e66","modified":1537587774473},{"_id":"themes/next-reloaded/source/css/main.styl","hash":"2a62e2a11e9cdcc69e538d856d6f9ce228a07c93","modified":1537587774493},{"_id":"themes/next-reloaded/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1537587774494},{"_id":"themes/next-reloaded/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1537587774494},{"_id":"themes/next-reloaded/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1537587774494},{"_id":"themes/next-reloaded/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1537587774494},{"_id":"themes/next-reloaded/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1537587774495},{"_id":"themes/next-reloaded/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/me.jpg","hash":"18e72cb16043219176b3cefe8b330f27f0cc502d","modified":1532309318791},{"_id":"themes/next-reloaded/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/quote-l.svg","hash":"cd108d6f44351cadf8e6742565217f88818a0458","modified":1537587774496},{"_id":"themes/next-reloaded/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1537587774497},{"_id":"themes/next-reloaded/source/images/quote-r.svg","hash":"2a2a250b32a87c69dcc1b1976c74b747bedbfb41","modified":1537587774496},{"_id":"themes/next-reloaded/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774463},{"_id":"themes/next-reloaded/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774463},{"_id":"themes/next-reloaded/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774488},{"_id":"themes/next-reloaded/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774492},{"_id":"themes/next-reloaded/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1537587774493},{"_id":"themes/next-reloaded/.git/refs/heads/master","hash":"7bdd38a064aad0ca1621c8222a31faf91187ed57","modified":1537587774436},{"_id":"themes/next-reloaded/layout/_macro/menu/menu-badge.swig","hash":"4eb8e222dc337211efb0d3bbdb5e29af3e6ecdb8","modified":1537587774456},{"_id":"themes/next-reloaded/layout/_macro/menu/menu-item.swig","hash":"aab518204d3125e948796a9ba6b56b09cade2d92","modified":1537587774457},{"_id":"themes/next-reloaded/layout/_partials/head/external-fonts.swig","hash":"f5e487b0d213ca0bd94aa30bc23b240d65081627","modified":1537587774459},{"_id":"themes/next-reloaded/layout/_partials/head/head-unique.swig","hash":"0b8349710caf9691741a457aa746add35245048e","modified":1537587774459},{"_id":"themes/next-reloaded/layout/_partials/head/head.swig","hash":"09109a5c5a301e7cc5e3c7aec32b0164739fc7d4","modified":1537587774459},{"_id":"themes/next-reloaded/layout/_partials/header/brand.swig","hash":"19050627bc23b0b2c2e65e7248c0f88468eb8ea5","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_partials/header/index.swig","hash":"c909f6e96373c151dea325bcddfdd8c9522421b6","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_partials/header/menu.swig","hash":"f3ae3168801304af3d80ec3b84264e1d4201cb89","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_partials/header/sub-menu.swig","hash":"3f11ae8e9084f39628cd2006931d39a2069b9dd6","modified":1537587774460},{"_id":"themes/next-reloaded/layout/_partials/search/index.swig","hash":"f6454c452b2e90a8c760321bce7e3dc6119b71fa","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/search/localsearch.swig","hash":"b2f0d247b213e4cf8de47af6a304d98070cc7256","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/search/swiftype.swig","hash":"a8c7f9ca7c605d039a1f3bf4e4d3183700a3dd62","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/search/tinysou.swig","hash":"b25002a83cbd2ca0c4a5df87ad5bff26477c0457","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/share/add-this.swig","hash":"9e3d133ac5bcc6cb51702c83b2611a49811abad1","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/share/baidushare.swig","hash":"d9e2d9282f9be6e04eae105964abb81e512bffed","modified":1537587774461},{"_id":"themes/next-reloaded/layout/_partials/share/duoshuo_share.swig","hash":"d4fbffd7fa8f2090eb32a871872665d90a885fac","modified":1537587774462},{"_id":"themes/next-reloaded/layout/_third-party/analytics/analytics-with-widget.swig","hash":"ff947f3561b229bc528cb1837d4ca19612219411","modified":1537587774464},{"_id":"themes/next-reloaded/layout/_third-party/analytics/application-insights.swig","hash":"71397a5823e8ec8aad3b68aace13150623b3e19d","modified":1537587774464},{"_id":"themes/next-reloaded/layout/_third-party/analytics/baidu-analytics.swig","hash":"753d262911c27baf663fcaf199267133528656af","modified":1537587774464},{"_id":"themes/next-reloaded/layout/_third-party/analytics/busuanzi-counter.swig","hash":"1ce5fa218a44cf6e620583e9013e0b674dd6a989","modified":1537587774464},{"_id":"themes/next-reloaded/layout/_third-party/analytics/facebook-sdk.swig","hash":"7d94845f96197d9d84a405fa5d4ede75fb81b225","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/cnzz-analytics.swig","hash":"a10b7f19d7b5725527514622899df413a34a89db","modified":1537587774464},{"_id":"themes/next-reloaded/layout/_third-party/analytics/firestore.swig","hash":"8ab040fccba41675bc835973515530af8a51f8bd","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/google-analytics.swig","hash":"cfc932c5db04fef64cc56d3ba0b8ddf3a15a63bd","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/index.swig","hash":"45f3f629c2aacc381095750e1c8649041a71a84b","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/lean-analytics.swig","hash":"bd8382d4f12df207ed52f75f6e5fb06527970167","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/tencent-analytics.swig","hash":"8a399df90dadba5ad4e781445b58f4765aeb701e","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/tencent-mta.swig","hash":"5a8027328f060f965b3014060bebec1d7cf149c1","modified":1537587774465},{"_id":"themes/next-reloaded/layout/_third-party/analytics/vkontakte-api.swig","hash":"f9a1647a8f1866deeb94052d1f87a5df99cb1e70","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/comments/changyan.swig","hash":"4c501ea0b9c494181eb3c607c5526a5754e7fbd8","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/comments/disqus.swig","hash":"2440f1e66cb8e39cc2bacfd783fb6fe904a628e9","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/comments/gitment.swig","hash":"292cdd1059b76d3d10486b71c99d9afb3e59ea44","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/comments/index.swig","hash":"34cc66d4dbada2d561ba6f70fd9a75207c5adbd4","modified":1537587774466},{"_id":"themes/next-reloaded/layout/_third-party/comments/livere.swig","hash":"c49a3b10b2f2f64a7ac41fa3d436fd2c8d31cca8","modified":1537587774467},{"_id":"themes/next-reloaded/layout/_third-party/comments/valine.swig","hash":"d05e70a416963023ee1978e4168d58bcfd956ed3","modified":1537587774467},{"_id":"themes/next-reloaded/layout/_third-party/math/index.swig","hash":"30e9e55d9af2ced6e6b156a042026a8b480f0ab0","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/math/katex.swig","hash":"860de4ce6fccc516d2f779a4b600a4214d8c18e2","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/math/mathjax.swig","hash":"c0c2fd87e71f0beb542aa50c0bc875da5aa5c44b","modified":1537587774468},{"_id":"themes/next-reloaded/layout/_third-party/search/index.swig","hash":"34599633658f3b0ffb487728b7766e1c7b551f5a","modified":1537587774469},{"_id":"themes/next-reloaded/layout/_third-party/search/localsearch.swig","hash":"71c897f9b107dd0de1b7f649633cf583c206a9db","modified":1537587774469},{"_id":"themes/next-reloaded/layout/_third-party/search/tinysou.swig","hash":"fe95dd3d166634c466e19aa756e65ad6e8254d3e","modified":1537587774470},{"_id":"themes/next-reloaded/layout/_third-party/seo/baidu-push.swig","hash":"d8c98938719284fa06492c114d99a1904652a555","modified":1537587774470},{"_id":"themes/next-reloaded/layout/_scripts/pages/post-details.swig","hash":"580e9d9c4d8783ee6200d845ae16c98979bf1ea3","modified":1537587774463},{"_id":"themes/next-reloaded/layout/_scripts/schemes/gemini.swig","hash":"c381f638315a007b1baf5fea879161001fe50cd0","modified":1537587774463},{"_id":"themes/next-reloaded/layout/_scripts/schemes/pisces.swig","hash":"c381f638315a007b1baf5fea879161001fe50cd0","modified":1537587774463},{"_id":"themes/next-reloaded/source/css/_custom/custom.styl","hash":"3403fdd8efde1a0afd11ae8a5a97673f5903087f","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_mixins/Gemini.styl","hash":"07f7da320689f828f6e36a6123807964a45157a0","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_mixins/Pisces.styl","hash":"8aa98ae349908736ba43196c42498fd5bdeb780a","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_mixins/base.styl","hash":"0882d76333ab409e8d3362c284b91a0f0ae761ae","modified":1537587774487},{"_id":"themes/next-reloaded/source/css/_variables/Gemini.styl","hash":"8d6cf29f63c90364f4d3c336f7c9bb794b4c46cc","modified":1537587774492},{"_id":"themes/next-reloaded/source/css/_variables/Mist.styl","hash":"a25408534f8fe6e321db4bbf9dd03335d648fe17","modified":1537587774492},{"_id":"themes/next-reloaded/source/css/_variables/Pisces.styl","hash":"72927abd51d3a607a6ba32cf882390792b34e834","modified":1537587774493},{"_id":"themes/next-reloaded/source/css/_variables/base.styl","hash":"1625e3e1da6c453108526e027dae25e311b18adf","modified":1537587774493},{"_id":"themes/next-reloaded/source/js/src/affix.js","hash":"ad343aa406fd8181b5f310434817ce98fc2219e3","modified":1537587774497},{"_id":"themes/next-reloaded/source/js/src/algolia-search.js","hash":"84906eeae57bd06744dd20160b93eacf658f97e2","modified":1537587774497},{"_id":"themes/next-reloaded/source/js/src/exturl.js","hash":"c48aa4b3c0e578a807fd3661e6cd4f3890777437","modified":1537587774497},{"_id":"themes/next-reloaded/source/js/src/bootstrap.js","hash":"c7e2a588b679d46379124141bb2f30bc2f3210e2","modified":1537587774497},{"_id":"themes/next-reloaded/source/js/src/motion.js","hash":"4c7f94e499743f4cc958f6cd1260a93d765d3051","modified":1537587774498},{"_id":"themes/next-reloaded/source/js/src/js.cookie.js","hash":"1512c751d219577d338ac0780fb2bbd9075d5298","modified":1537587774498},{"_id":"themes/next-reloaded/source/js/src/post-details.js","hash":"7d309b771e86c7e22ce11cc25625481ef7d5985c","modified":1537587774498},{"_id":"themes/next-reloaded/source/js/src/scroll-cookie.js","hash":"c4867626afab749404daf321367f9b6b8e223f69","modified":1537587774498},{"_id":"themes/next-reloaded/source/js/src/scrollspy.js","hash":"68d3690152c89e7adb08bb35ec28dbda2bd93686","modified":1537587774499},{"_id":"themes/next-reloaded/source/js/src/utils.js","hash":"fa3aab0ba7bc5138c6f8fac436efe5b8dcb97567","modified":1537587774499},{"_id":"themes/next-reloaded/source/lib/font-awesome/.bower.json","hash":"b4aefc910578d76b267e86dfffdd5121c8db9aec","modified":1537587774499},{"_id":"themes/next-reloaded/source/lib/font-awesome/.gitignore","hash":"03ddbf76c1dd1afb93eed0b670d2eee747472ef1","modified":1537587774499},{"_id":"themes/next-reloaded/source/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1537587774500},{"_id":"themes/next-reloaded/source/lib/font-awesome/.npmignore","hash":"c31ff06a740955e44edd4403902e653ccabfd4db","modified":1537587774500},{"_id":"themes/next-reloaded/source/lib/font-awesome/bower.json","hash":"71e7183634dc1b9449f590f15ebd7201add22ca7","modified":1537587774500},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1537587774507},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.ui.js","hash":"dbbfb50f6502f6b81dcc9fee7b31f1e812da3464","modified":1537587774508},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1537587774508},{"_id":"themes/next-reloaded/.git/objects/pack/pack-3e52764a8afa019df9f67388c6a7bda8276f576c.idx","hash":"2336e2ab2f148df64e14a0751475a63ee4688833","modified":1537587774410},{"_id":"themes/next-reloaded/source/lib/jquery/index.js","hash":"17a740d68a1c330876c198b6a4d9319f379f3af2","modified":1537587774505},{"_id":"themes/next-reloaded/.git/logs/refs/heads/master","hash":"ed4a8308bc7529fece74ead0ad0d6c2042e26dfa","modified":1537587774436},{"_id":"themes/next-reloaded/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1537587774434},{"_id":"themes/next-reloaded/layout/_third-party/search/algolia-search/assets.swig","hash":"6e076b5e183eedf425a445e99851f938789c3194","modified":1537587774469},{"_id":"themes/next-reloaded/layout/_third-party/search/algolia-search/dom.swig","hash":"2530de0f3125a912756f6c0e9090cd012134a4c5","modified":1537587774469},{"_id":"themes/next-reloaded/source/css/_common/components/back-to-top.styl","hash":"237d185ac62ec9877e300947fa0109c44fb8db19","modified":1537587774474},{"_id":"themes/next-reloaded/source/css/_common/components/back-to-top-sidebar.styl","hash":"8f86f694c0749a18ab3ad6f6df75466ca137a4bc","modified":1537587774474},{"_id":"themes/next-reloaded/source/css/_common/components/components.styl","hash":"7ad4081466b397e2a6204141bb7768b7c01bd93c","modified":1537587774474},{"_id":"themes/next-reloaded/source/css/_common/components/buttons.styl","hash":"8b32928686c327151e13d3ab100157f9a03cd59f","modified":1537587774474},{"_id":"themes/next-reloaded/source/css/_common/components/comments.styl","hash":"ff4489cd582f518bba6909a301ac1292a38b4e96","modified":1537587774474},{"_id":"themes/next-reloaded/source/css/_common/components/pagination.styl","hash":"4f2801fc4cf3f31bf2069f41db8c6ce0e3da9e39","modified":1537587774478},{"_id":"themes/next-reloaded/source/css/_common/components/tag-cloud.styl","hash":"6eb4bcc3056bd279d000607e8b4dad50d368ca69","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/outline/outline.styl","hash":"fbb6be577529c750ef7c872fe7abdc7ab0faf0f8","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/base.styl","hash":"97bb39756e85f5b27bba7f43270105ad01d736c9","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/helpers.styl","hash":"1da5c800d025345f212a3bf1be035060f4e5e6ed","modified":1537587774486},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/mobile.styl","hash":"ab775f23ad475efb25376b5aad752ae8b56cfd8c","modified":1537587774486},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/normalize.styl","hash":"3f40e8a9fe8e7bd5cfc4cf4cbbbcb9539462e973","modified":1537587774486},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/scaffolding.styl","hash":"a17e2b871a335f290afb392a08f94fd35f59c715","modified":1537587774486},{"_id":"themes/next-reloaded/source/css/_common/scaffolding/tables.styl","hash":"52bc8ba71b91d954530b35dfc63b402a02b1321d","modified":1537587774486},{"_id":"themes/next-reloaded/source/css/_schemes/Gemini/index.styl","hash":"7e4e499964c2112d47e6f9d2b6e87c31ec8269e2","modified":1537587774488},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_base.styl","hash":"d0e9065b0dbbc01811259f0597d1790268b4881b","modified":1537587774488},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_logo.styl","hash":"b1025c421406d2c24cc92a02ae28c1915b01e240","modified":1537587774488},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_header.styl","hash":"d0bfd1bef988c76f7d7dd72d88af6f0908a8b0db","modified":1537587774488},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_menu.styl","hash":"f3aa863adf972569b72f2df6bc6a914e7daace99","modified":1537587774489},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_posts-expanded.styl","hash":"fa6c00fdaf8f0ca3b690a5a556671745fb67e2c9","modified":1537587774489},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1537587774489},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/index.styl","hash":"2ccb9bdc309b7c1ef183a3dbb0a4621bec54a328","modified":1537587774489},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/_layout.styl","hash":"31127dcbf4c7b4ada53ffbf1638b5fe325b7cbc0","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/_logo.styl","hash":"748dbfbf9c08e719ddc775958003c64b00d39dab","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/_menu.styl","hash":"3cc7646583218d16925ced7b70865e63a901d4a7","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/_search.styl","hash":"09c965022c13b84ed8a661fee8ac2a6d550495ae","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/index.styl","hash":"b26f8a3394d8357a5bfd24d9f8bf62d7b4063ebb","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_brand.styl","hash":"bce344d3a665b4c55230d2a91eac2ad16d6f32fd","modified":1537587774491},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_layout.styl","hash":"ccf5a4761cb0ce451b5e994cfabf8769248a45c1","modified":1537587774491},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_menu.styl","hash":"cc961108b12ab97d9216606ceb1cd1cd31ab20f0","modified":1537587774491},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_sub-menu.styl","hash":"be72740313a9a0477b8a22f62e4c8ffa6d23a2e5","modified":1537587774492},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_posts.styl","hash":"1f6e2ce674735269599acc6d77b3ea18d31967fc","modified":1537587774491},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/index.styl","hash":"a558803ca81cceae2bdc22c18ef638fcc023681b","modified":1537587774492},{"_id":"themes/next-reloaded/source/css/_schemes/Pisces/_sidebar.styl","hash":"df16dc995eb9ad498df2edcfc3e20528fc9aa133","modified":1537587774492},{"_id":"themes/next-reloaded/source/js/src/schemes/pisces.js","hash":"6b37727883ab6f2a7211300d93289a337944838b","modified":1537587774498},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.css","hash":"3655f1fdf1e584c4d8e8d39026093ca306a5a341","modified":1537587774500},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1537587774501},{"_id":"themes/next-reloaded/source/lib/font-awesome/css/font-awesome.min.css","hash":"88af80502c44cd52ca81ffe7dc7276b7eccb06cf","modified":1537587774501},{"_id":"themes/next-reloaded/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"41ea797c68dbcff2f6fb3aba1d1043a22e7cc0f6","modified":1537587774505},{"_id":"themes/next-reloaded/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"a817b6c158cbc5bab3582713de9fe18a18a80552","modified":1537587774505},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1537587774504},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1537587774504},{"_id":"themes/next-reloaded/source/lib/velocity/velocity.js","hash":"4237c6e9d59da349639de20e559e87c2c0218cfd","modified":1537587774507},{"_id":"themes/next-reloaded/.git/logs/refs/remotes/origin/HEAD","hash":"ed4a8308bc7529fece74ead0ad0d6c2042e26dfa","modified":1537587774434},{"_id":"themes/next-reloaded/source/css/_common/components/footer/footer.styl","hash":"7dd247c8869fdefb5a007045d00f3ef8ceecf300","modified":1537587774475},{"_id":"themes/next-reloaded/source/css/_common/components/highlight/diff.styl","hash":"167986d0f649516671ddf7193eebba7b421cd115","modified":1537587774476},{"_id":"themes/next-reloaded/source/css/_common/components/header/github-banner.styl","hash":"3f3d2a43d1a326bad25b633c8ec9ddd87867224c","modified":1537587774475},{"_id":"themes/next-reloaded/source/css/_common/components/highlight/highlight.styl","hash":"835c1340571bd6c4ec263c482cf13283fb047e49","modified":1537587774476},{"_id":"themes/next-reloaded/source/css/_common/components/highlight/theme.styl","hash":"7fe4d4d656e86276c17cb4e48a560cb6a4def703","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/header/header.styl","hash":"34f5ac3c1ed2dd31e9297cc4c0733e71bc2e252f","modified":1537587774475},{"_id":"themes/next-reloaded/source/css/_common/components/header/headerband.styl","hash":"d63e0cacc53dd375fcc113465a4328c59ff5f2c1","modified":1537587774475},{"_id":"themes/next-reloaded/source/css/_common/components/header/site-meta.styl","hash":"0656e753f182c9f47fef7304c847b7587a85ef0d","modified":1537587774476},{"_id":"themes/next-reloaded/source/css/_common/components/header/menu.styl","hash":"1a0d059799a298fe17c49a44298d32cebde93785","modified":1537587774476},{"_id":"themes/next-reloaded/source/css/_common/components/pages/archive.styl","hash":"b6f3a06a94a6ee5470c956663164d58eda818a64","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/header/site-nav.styl","hash":"1727702eac5d326b5c81a667944a245016668231","modified":1537587774476},{"_id":"themes/next-reloaded/source/css/_common/components/pages/breadcrumb.styl","hash":"630be616447a982413030e561bbd3a80ac14b120","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/pages/categories.styl","hash":"7fb593f90d74a99c21840679933b9ef6fdc16a61","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/pages/pages.styl","hash":"ad4cae23c8e383f4fabc9a2a95bca6055020d22e","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/pages/schedule.styl","hash":"8cf318644acc8b4978537c263290363e21c7f5af","modified":1537587774478},{"_id":"themes/next-reloaded/source/css/_common/components/pages/post-detail.styl","hash":"4e3838d7ac81d9ad133960f0f7ed58a44a015285","modified":1537587774477},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-button.styl","hash":"62fbbd32cf5a99ae550c45c763a2c4813a138d01","modified":1537587774478},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-copyright.styl","hash":"caf263d1928496688c0e1419801eafd7e6919ce5","modified":1537587774478},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-collapse.styl","hash":"875cbe88d5c7f6248990e2beb97c9828920e7e24","modified":1537587774478},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-expand.styl","hash":"317c9ceda655e9dc373ce8e7b71d20b794fce9a4","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-gallery.styl","hash":"cd9e214e502697f2f2db84eb721bac57a49b0fce","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-eof.styl","hash":"a200c0a1c5a895ac9dc41e0641a5dfcd766be99b","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-nav.styl","hash":"27deb3d3a243d30022055dac7dad851024099a8b","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-reading_progress.styl","hash":"82bc7fa5d38d98e98cc25f9a73189024fda25e63","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-meta.styl","hash":"330c8884efb5612e7eb03986d87d29e8b0651974","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-reward.styl","hash":"ff50a32ae6fea5fcdf2939dc9b01e1eb76cc73f0","modified":1537587774479},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-rtl.styl","hash":"b2495ae5e04dcca610aacadc47881d9e716cd440","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-tags.styl","hash":"5a982d8ef3b3623ea5f59e63728990f5623c1b57","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-title.styl","hash":"adfd6d2d3b34adc4b476a0ea91e19020456a3b1a","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-type.styl","hash":"01567edaea6978628aa5521a122a85434c418bfd","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/post/post-widgets.styl","hash":"5c3141d58970a0614896b6a62fd7a8a8caf4e401","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/post/post.styl","hash":"bb8162bb7c7b0b255a0e8e234eb382a0879a4962","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"fa57ec9a6f1943c0558856dfba2d6b8faca0cd4d","modified":1537587774480},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-author.styl","hash":"00a504620c454287111dc0ace64c989e1ff97f54","modified":1537587774481},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"8dd9a1c6f4f6baa00c2cf01837e7617120cf9660","modified":1537587774481},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"11c22f0fb3f6beb13e5a425ec064a4ff974c13b7","modified":1537587774481},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"61f8cea3c01acd600e90e1bc2a07def405503748","modified":1537587774481},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"1153bb71edf253765145559674390e16dd67c633","modified":1537587774481},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"9e05a2232faabb41bcebb51d545d897a76f077da","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"a1521d48bb06d8d703753f52a198baa197af7da2","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/sidebar.styl","hash":"94d76e6da600a36d80e2470326ebb6b3be447ccb","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/sidebar/site-state.styl","hash":"e71652d3216e289c8548b1ea2357822c1476a425","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/algolia-search.styl","hash":"f4d8144c22544bdb89787c14ab9d39578dae4b7c","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"a6e7d698702c2e383dde3fde2abde27951679084","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/han.styl","hash":"10599e16414a8b7a76c4e79e6617b5fe3d4d1adf","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/gitment.styl","hash":"874278147115601d2abf15987f5f7a84ada1ac6b","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/localsearch.styl","hash":"16087276945fa038f199692e3eabb1c52b8ea633","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/third-party.styl","hash":"c31fbaec7e6373ecfb8588500b972d451695a6ad","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/related-posts.styl","hash":"acfdd76b1c90d2e384affb3d0006a39b524609d2","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/components/third-party/needsharebutton.styl","hash":"28825ae15fa20ae3942cdaa7bcc1f3523ce59acc","modified":1537587774485},{"_id":"themes/next-reloaded/source/css/_common/components/tags/blockquote-center.styl","hash":"2fe76476432b31993338cb45cdb3b29a518b6379","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/tags/exturl.styl","hash":"02ee0eb49c256ecb4e71bbc65072f9147418d7d7","modified":1537587774482},{"_id":"themes/next-reloaded/source/css/_common/components/tags/full-image.styl","hash":"2d58ad90f148e845bc7023751a7a13260600f8d6","modified":1537587774483},{"_id":"themes/next-reloaded/source/css/_common/components/tags/group-pictures.styl","hash":"2ad1a2a9bbf6742d1b0762c4c623b68113d1e0fe","modified":1537587774483},{"_id":"themes/next-reloaded/source/css/_common/components/tags/label.styl","hash":"2ab1322fe52ab5aafd49e68f5bd890e8380ee927","modified":1537587774483},{"_id":"themes/next-reloaded/source/css/_common/components/tags/note-modern.styl","hash":"b7076e58d647265ee0ad2b461fe8ce72c9373bc5","modified":1537587774483},{"_id":"themes/next-reloaded/source/css/_common/components/tags/note.styl","hash":"9a409b798decdefdaf7a23f0b11004a8c27e82f3","modified":1537587774483},{"_id":"themes/next-reloaded/source/css/_common/components/tags/tabs.styl","hash":"154a87a32d2fead480d5e909c37f6c476671c5e6","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_common/components/tags/tags.styl","hash":"b80604868e4f5cf20fccafd7ee415c20c804f700","modified":1537587774484},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/outline/outline.styl","hash":"a07aa12cc36ac5c819670c2a3c17d07ed7a08986","modified":1537587774489},{"_id":"themes/next-reloaded/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1537587774490},{"_id":"themes/next-reloaded/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"1f09be9bb38411f0629b58c3b23873589a6dbcaa","modified":1537587774491},{"_id":"themes/next-reloaded/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1537587774503},{"_id":"themes/next-reloaded/.git/objects/pack/pack-3e52764a8afa019df9f67388c6a7bda8276f576c.pack","hash":"b0f6ef7281302885e46ecdf8782c3fd8b935ba52","modified":1537587774412},{"_id":"public/images/algolia_logo.svg","hash":"278ffcea4876b37657f2e192bda48c6bc7dd8784","modified":1537594727672},{"_id":"public/images/apple-touch-icon-next.png","hash":"b972160c147e9bec3a0f7432e6e80dfa92581b0b","modified":1537594727672},{"_id":"public/images/avatar.gif","hash":"2dbc3e2f2d624b2ca1afe6edc2ca17307f1950c8","modified":1537594727692},{"_id":"public/images/cc-by-nc-nd.svg","hash":"a001671db56914e9e85147ba7df8c35d9806e664","modified":1537594727692},{"_id":"public/images/cc-by-nc.svg","hash":"0d183dfe21e7b8f037c1572821386e309f147c50","modified":1537594727692},{"_id":"public/images/cc-by-nc-sa.svg","hash":"716c8de2e05cf9bf7c6650856104a8fe5d2d5443","modified":1537594727692},{"_id":"public/images/cc-by-nd.svg","hash":"3c57ccdb3762c8d6eb2669a65bbbc18c7bbd46a7","modified":1537594727692},{"_id":"public/images/cc-by.svg","hash":"c72feca504a517f6f5aaade0205a0c1b71f16c5a","modified":1537594727692},{"_id":"public/images/cc-by-sa.svg","hash":"acb7a5ffef273b46e9353f869608ed13eb2825fe","modified":1537594727693},{"_id":"public/images/cc-zero.svg","hash":"ae0a67df89e2c066f6ac836174224373af114f09","modified":1537594727693},{"_id":"public/images/favicon-16x16-next.png","hash":"5ee510e58b7b9e062a22da28ce1eb35a2f381021","modified":1537594727693},{"_id":"public/images/favicon-32x32-next.png","hash":"f88e49404e4c2a326e51ae65ea5b2375b5d5fde8","modified":1537594727693},{"_id":"public/images/logo.svg","hash":"d02fedf124aa26d4def2631bbccafa053653abd6","modified":1537594727693},{"_id":"public/images/me.jpg","hash":"f7201f215b2b655c4f4c03a4b4bf8abd2d96e319","modified":1537594727693},{"_id":"public/images/quote-l.svg","hash":"48136591a60f3dc722d8f00b66e16de2aec3802f","modified":1537594727693},{"_id":"public/images/searchicon.png","hash":"00eed611c73d736ddea861a92d8c91d44aefef5c","modified":1537594727693},{"_id":"public/images/quote-r.svg","hash":"dc3f40e3409dd502478a8c6bb41c68d50bd71ca6","modified":1537594727693},{"_id":"public/baidu_verify_l3vacuMD8f.html","hash":"4a21538b131c0df7a108e0c54bc3a26ada26e6ea","modified":1537594727693},{"_id":"public/baidusitemap.xml","hash":"1bcf9c3a29013ebe9b396bb2a39079e302878c0a","modified":1537594727694},{"_id":"public/search.xml","hash":"a8dedbb687a4f45f9489a096a983d7c9884a6ba3","modified":1537594727694},{"_id":"public/sitemap.xml","hash":"4be5199745a397346e611525150d6396b9ac2424","modified":1537594727694},{"_id":"public/about/index.html","hash":"7f52a8ee3aa5c377c22c7961e190e699d18513fd","modified":1537594727743},{"_id":"public/categories/index.html","hash":"30af7069d990a03bb4df3018257cb2bc939adea0","modified":1537594727743},{"_id":"public/tags/index.html","hash":"a06a2b3a8c0ef6ed240b597871433bcf7803c049","modified":1537594727743},{"_id":"public/2018/09/22/deepbayes2018/index.html","hash":"fb292a1710ae34978fc37b8463316288a4596fcf","modified":1537594727743},{"_id":"public/2018/09/14/dpp/index.html","hash":"b675c6d58a2ee8b0ec8bb36f4c4fd46e08a3fb8b","modified":1537594727743},{"_id":"public/2018/09/03/hlda/index.html","hash":"2250af8d05309e6ad2a2021f062f06e1499182a2","modified":1537594727743},{"_id":"public/2018/08/28/inference-algorithm/index.html","hash":"9cca3d4c6abd41ba3e644249889eb8ac4e151842","modified":1537594727743},{"_id":"public/2018/08/09/statistical-handwriting/index.html","hash":"d9068722486f3f0bf499249bb03ed5e424f9c40c","modified":1537594727743},{"_id":"public/2018/08/04/convex-optimization/index.html","hash":"cf53069571ac1fe2c2c961a3f8ae34110ca9ff50","modified":1537594727743},{"_id":"public/2018/07/23/lda/index.html","hash":"097baa20d444a1da9e17717ad7c51c91f35a9100","modified":1537594727743},{"_id":"public/2018/07/04/seq2seq-summarization/index.html","hash":"b492ac794846c769eee2606bfe9d21260af5ab70","modified":1537594727743},{"_id":"public/2018/07/03/PaperReading2/index.html","hash":"9e238786b1d59022b145d3fa60ba54f23382a228","modified":1537594727743},{"_id":"public/2018/07/03/cvxopt/index.html","hash":"4f70fb2e7fa38c8c71179cec060fc17633c6e073","modified":1537594727743},{"_id":"public/2018/03/07/PaperReading/index.html","hash":"e1087b17c302b3d13bff338cda3f6b3dcf8d6acd","modified":1537594727743},{"_id":"public/2018/03/07/NLPBasic/index.html","hash":"5eb7931defd062b3fce2d2493947c54469d1f311","modified":1537594727743},{"_id":"public/2018/01/10/tensorflowtutorial/index.html","hash":"8653521d85cd5e859c24193a627659d5641bf859","modified":1537594727743},{"_id":"public/2017/12/27/AM-Model-for-ASS/index.html","hash":"5587638937a2bf0c9de26d30532d6773f9d27d2e","modified":1537594727743},{"_id":"public/2017/05/26/dachuangserver/index.html","hash":"c8c085367b08133210745a42ba117489a830fb4c","modified":1537594727744},{"_id":"public/2017/05/02/trie/index.html","hash":"fd0e9e3603b0621d5ffcd75b33b98f021797e2e6","modified":1537594727744},{"_id":"public/2017/03/28/PythonNotes/index.html","hash":"b5782dd250a649bbe8aec7c89fdcab4115de7e74","modified":1537594727744},{"_id":"public/2017/03/27/oj/index.html","hash":"b3817e4b604b5d388ef6e534fa02fe37a9464e90","modified":1537594727744},{"_id":"public/2017/03/18/Lagrange/index.html","hash":"d55b6537d147c6ae524ed50c764274bbfb954c99","modified":1537594727744},{"_id":"public/2017/03/16/kmeans/index.html","hash":"34d290239aff833bc8da0e6191b6051ca098d902","modified":1537594727744},{"_id":"public/2017/03/16/mnist/index.html","hash":"f3c0f2a70b80473117c957fb508a92bb7548455b","modified":1537594727744},{"_id":"public/2017/03/09/dachuang/index.html","hash":"075d909dbe10f49789b4b2c73ab65e6c015503f7","modified":1537594727744},{"_id":"public/2017/02/12/MachineLearningNote/index.html","hash":"07ffee42fdf8aac2ae94db6a9eb45f8d6b814e02","modified":1537594727744},{"_id":"public/2017/02/10/NeuralNetworks1/index.html","hash":"39ebd94833ea687d070c3f994f247bf734932089","modified":1537594727744},{"_id":"public/2017/02/07/TitanicLinearRegression/index.html","hash":"a9b1501f178236d20a84ea05342593e2e406cfe2","modified":1537594727744},{"_id":"public/2017/02/04/pandas-func/index.html","hash":"c99c5b674b38459cee39e6a51ed59bea4bfa7d69","modified":1537594727744},{"_id":"public/2017/02/04/pandas-skill/index.html","hash":"6081cc3091fc53324bd3c9484d5a437ada73ba97","modified":1537594727745},{"_id":"public/2017/01/23/numpycookbook/index.html","hash":"12e5d3354cbc0d8a9de2ff8d65479eb83017c7b2","modified":1537594727745},{"_id":"public/2017/01/22/LinearAlgebra3/index.html","hash":"90a04159a70363faeef0512296b02fd72afb2151","modified":1537594727745},{"_id":"public/2017/01/21/LinearAlgebra2/index.html","hash":"7fa61d0d6572e9be8e2897b5d978da80cd837a8c","modified":1537594727745},{"_id":"public/2017/01/21/LinearAlgebra1/index.html","hash":"49af085db30527f2829b0fba594c12bce20a56a1","modified":1537594727745},{"_id":"public/2017/01/16/setupmywebsite/index.html","hash":"8597515eeb83eda182ce9e6351a555c340d6cf6b","modified":1537594727745},{"_id":"public/2017/01/16/buptroomreview/index.html","hash":"719ffd50d13614211d0ef231184f763a8bdbea8e","modified":1537594727745},{"_id":"public/archives/index.html","hash":"8db07795a9fc9c951dde90ef5071ae14db3d96e6","modified":1537594727745},{"_id":"public/archives/page/2/index.html","hash":"17c881da870afc2e31d7557545772edacea4caa9","modified":1537594727745},{"_id":"public/archives/page/3/index.html","hash":"3ed59033a0d61d4b61487bd640509ccf566dffc1","modified":1537594727745},{"_id":"public/archives/page/4/index.html","hash":"5a0fa61797e4d9f2422b7fdf37083d975ce0e8d5","modified":1537594727745},{"_id":"public/archives/2017/index.html","hash":"95e028cce227edd3f33d24758e57660921c63f7f","modified":1537594727745},{"_id":"public/archives/2017/page/2/index.html","hash":"dfda30d38c4fbad0176b89dd8afe56833570674b","modified":1537594727745},{"_id":"public/archives/2017/01/index.html","hash":"8bf47d215e47b93194fbf45afad0ebfbdace67ef","modified":1537594727745},{"_id":"public/archives/2017/02/index.html","hash":"4f7fcdd372e5f39fb49605dbbd3217d54da47db5","modified":1537594727745},{"_id":"public/archives/2017/03/index.html","hash":"ffebe2806131f091549f03a806538d0e722560bc","modified":1537594727745},{"_id":"public/archives/2017/05/index.html","hash":"0a16c28cb6adb5a67822e157e9cac9b747ae1498","modified":1537594727745},{"_id":"public/archives/2017/12/index.html","hash":"9fe32965731a112e1158768dd25d59996f988d94","modified":1537594727746},{"_id":"public/archives/2018/index.html","hash":"ab96b81d4f93d79c5e15d326dcf31fd4406469a8","modified":1537594727746},{"_id":"public/archives/2018/page/2/index.html","hash":"2fc8efc58fb52fa8d562f503b522e0d7f9da318b","modified":1537594727746},{"_id":"public/archives/2018/01/index.html","hash":"1d5d4891befe7a6a08f5a0a9311ce671b82044f9","modified":1537594727746},{"_id":"public/archives/2018/03/index.html","hash":"74115403f9f2bce907d1c185cd5d13df14071f31","modified":1537594727746},{"_id":"public/archives/2018/07/index.html","hash":"22d10e0218e1656e678a29f9d5e5214d38306eab","modified":1537594727746},{"_id":"public/archives/2018/08/index.html","hash":"a9d6580fe3620dc19ccec784298285588cd6b71e","modified":1537594727746},{"_id":"public/archives/2018/09/index.html","hash":"20343a6899cace1c621fdcc3a06ebdbb20b0f4c1","modified":1537594727746},{"_id":"public/index.html","hash":"6f23ce9163355ba6d594702da24142432f7e6fea","modified":1537594727746},{"_id":"public/page/2/index.html","hash":"954a46bfea68fa739748b96ecb56391912e6578c","modified":1537594727746},{"_id":"public/page/3/index.html","hash":"8b7ef05056e976032cac65ee6fa7e3a6c6ffc89a","modified":1537594727746},{"_id":"public/page/4/index.html","hash":"661744718aee1bbfc8a09861fdbf9fb7de57b6fb","modified":1537594727746},{"_id":"public/categories//index.html","hash":"549c4994abc5a42a004e2401ba4b8d7b141b87f5","modified":1537594727746},{"_id":"public/categories//index.html","hash":"35cc95bedd77d03d590141eb52be327ba229c8a2","modified":1537594727746},{"_id":"public/categories//index.html","hash":"4a597069309acd420d9aaac54f2973ce3aa890a7","modified":1537594727746},{"_id":"public/categories//page/2/index.html","hash":"4abcc30b37ac69b782cca4ac79826aa91cbc8f25","modified":1537594727746},{"_id":"public/categories/Python/index.html","hash":"6f02c3440600aee4cacb0cb9eeb9d307ceddfb79","modified":1537594727746},{"_id":"public/categories/Android/index.html","hash":"cfde804035f377d89f82bd0f0add0d351c4f2ee3","modified":1537594727746},{"_id":"public/categories//index.html","hash":"764fb22da77ed5565a33ddb71f2c8a26db77e6c2","modified":1537594727747},{"_id":"public/categories//index.html","hash":"64fba2c62cee43789ef29aa23f6288c978f6e577","modified":1537594727747},{"_id":"public/tags/abstractive-summarization/index.html","hash":"034c8359351077c11f757f3d6d41c5c5e9b271b2","modified":1537594727747},{"_id":"public/tags/math/index.html","hash":"1b9bc1584f1c372716ccdb2c75e2089f776375aa","modified":1537594727747},{"_id":"public/tags/math/page/2/index.html","hash":"7801047ec655c41d2290d8fef2bd3c4bc578e2f5","modified":1537594727747},{"_id":"public/tags/machinelearning/index.html","hash":"efcfd000635a53878ebb3ecdb8782c7f8748f31c","modified":1537594727747},{"_id":"public/tags/machinelearning/page/2/index.html","hash":"4ac3d04fcfca07dfc9bcb0e639c080d034b8943a","modified":1537594727747},{"_id":"public/tags/theory/index.html","hash":"b3192af136541d92b6bbdbea9beb0ad7b9fc3577","modified":1537594727747},{"_id":"public/tags/nlp/index.html","hash":"289fdccbff8e7f0f84db3006ab18419a9c396f86","modified":1537594727747},{"_id":"public/tags/linearalgebra/index.html","hash":"ed2cb453a5bdaa1c1fc0c5d0bd17c211a3e17a07","modified":1537594727747},{"_id":"public/tags/code/index.html","hash":"549b2800c5899636c3e55c506d671ae4bb0baab7","modified":1537594727747},{"_id":"public/tags/code/page/2/index.html","hash":"dbb5873bf1943ee0dfe8ee3b6f3b5344cf34073b","modified":1537594727747},{"_id":"public/tags/machine-learning/index.html","hash":"3a03918bd45a1384a13e5d270d10b673ad3ee84c","modified":1537594727747},{"_id":"public/tags/python/index.html","hash":"1912986c62eb76452c99471f69b33a1457801d60","modified":1537594727747},{"_id":"public/tags/convex-optimization/index.html","hash":"9230cd05c03877cc51e32a4a65a7d4ae684dd9f0","modified":1537594727747},{"_id":"public/tags/android/index.html","hash":"91200739514f4ae904b3bf4e96fc58549e5becc2","modified":1537594727747},{"_id":"public/tags/server/index.html","hash":"2faa8d5e79362d80ccafd16ea39b8bd87497926a","modified":1537594727747},{"_id":"public/tags/linux/index.html","hash":"6dd04ea735cb644fdd254614e03bfc9d0de88261","modified":1537594727747},{"_id":"public/tags/dpp/index.html","hash":"e59772ff8ac040635180119522a7883a6d85fe78","modified":1537594727748},{"_id":"public/tags/lda/index.html","hash":"cca4afbb584a54ab7dae760cc0be78e5cd5558cc","modified":1537594727748},{"_id":"public/tags/mcmc/index.html","hash":"6bdb9c1e5630e345c8bc046fad36138e095495b7","modified":1537594727748},{"_id":"public/tags/inference/index.html","hash":"ba67118898089f2aade756baa5057c0e1c7f718d","modified":1537594727748},{"_id":"public/tags/variational-inference/index.html","hash":"e985659eae25530e8428a2685d45173ab2cb5943","modified":1537594727748},{"_id":"public/tags/em/index.html","hash":"0288cfcbcddf03a63d6a70077e01a7b0965832f0","modified":1537594727748},{"_id":"public/tags/c/index.html","hash":"53c724f81d638fc296b177d261738614ea890745","modified":1537594727748},{"_id":"public/tags/algorithm/index.html","hash":"a02b73dd941db12f6d17c4d2087811ada1f8dfdf","modified":1537594727748},{"_id":"public/tags/web/index.html","hash":"7415598bb43e63ebd4f4b3401234fb68c14d5931","modified":1537594727748},{"_id":"public/tags/hexo/index.html","hash":"fb12d947179bc981be86b79dc0b6dff5dc33eacd","modified":1537594727748},{"_id":"public/tags/github/index.html","hash":"f90fdca281d1acbb98bd64a27e839165a5e73032","modified":1537594727748},{"_id":"public/tags/statistical-learning/index.html","hash":"afef07951b5f51ce24969bc99c76358bf0b39db4","modified":1537594727748},{"_id":"public/tags/seq2seq/index.html","hash":"d38c2076c2f048d0af4a6e362ebe3f610502ba10","modified":1537594727748},{"_id":"public/tags/rnn/index.html","hash":"7d91d2785126bba0763157c3cbefc0ae70d401ad","modified":1537594727748},{"_id":"public/tags/lstm/index.html","hash":"cc6b36726fc7956ff61dfd9d510931e58fdd0f0d","modified":1537594727748},{"_id":"public/tags/gru/index.html","hash":"c160f548124f38b7ea14a0e27711a43d84a9eec9","modified":1537594727748},{"_id":"public/tags/tensorflow/index.html","hash":"8eb81654e9aecf503fbf2f2a32f2dd7e42314738","modified":1537594727748},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1537594727754},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1537594727754},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"ee33b2798b1e714b904d663436c6b3521011d1fa","modified":1537594727754},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"1573904b82807abbb32c97a3632c6c6808eaac50","modified":1537594727754},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1537594728116},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1537594729857},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1537594729865},{"_id":"public/js/src/affix.js","hash":"07e8c8994973dcdde6dec52dbfb7102a1d442372","modified":1537594729865},{"_id":"public/js/src/exturl.js","hash":"5422e0ba39e779b323bde675821041068b0c034f","modified":1537594729865},{"_id":"public/js/src/algolia-search.js","hash":"3bbff78516bd1c1fdda02ee407df8215cbb8bc6d","modified":1537594729865},{"_id":"public/js/src/scroll-cookie.js","hash":"c77ab4b14b0b7b3e84f10f9c5a31b22391927c21","modified":1537594729865},{"_id":"public/js/src/post-details.js","hash":"7432395631d22345d7e3f59a5fd8b5e14a792106","modified":1537594729865},{"_id":"public/js/src/motion.js","hash":"dca8159525184bc6e7a27a073d6901bb4f71695c","modified":1537594729865},{"_id":"public/js/src/js.cookie.js","hash":"1bb986eb7ea7e85e908043d70a5cade6fb88233c","modified":1537594729865},{"_id":"public/js/src/scrollspy.js","hash":"ca78e894b3aca23bab5603161ae9a23e8687d07a","modified":1537594729865},{"_id":"public/js/src/bootstrap.js","hash":"b2c3f777b2829acb799268839061b6a7f11f5cab","modified":1537594729865},{"_id":"public/js/src/utils.js","hash":"bb5c99e2cc13d30a8ab20ee4410998af53b1ca8d","modified":1537594729865},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1537594729865},{"_id":"public/lib/velocity/velocity.ui.js","hash":"e91a994322cec2fbbb1238d1e064fb690800fc21","modified":1537594729865},{"_id":"public/js/src/schemes/pisces.js","hash":"4b251892042405d87a162f208823b187519e723d","modified":1537594729865},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1537594729865},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"ce719d36e1c3fd44fb0d57f1f4fc8b4e13ac1f46","modified":1537594729865},{"_id":"public/css/main.css","hash":"cd13712a9512e3ea44bfe6c4aae19d5045c3e188","modified":1537594729865},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1537594729865},{"_id":"public/lib/jquery/index.js","hash":"14f3524199c230b0d3651e721b8aee2d3ced94a7","modified":1537594729865},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1537594729865},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"f531d8edfb5d3178a7281d5d30d398fb3712d8f9","modified":1537594729865},{"_id":"public/lib/velocity/velocity.js","hash":"e9f16901028fef3ca8aa1c0f8d433319ce33b46c","modified":1537594729865},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1537594729865}],"Category":[{"name":"","_id":"cjmd072cc0005qcw6zn9stpak"},{"name":"","_id":"cjmd072ci000bqcw61krk319l"},{"name":"","_id":"cjmd072ck000gqcw67f4pnp2m"},{"name":"Python","_id":"cjmd072cz001bqcw6g8q5kys5"},{"name":"Android","_id":"cjmd072d2001jqcw62y9n0ryl"},{"name":"","_id":"cjmd072df002hqcw64nmrxvpy"},{"name":"","_id":"cjmd072dj002qqcw6o531jf93"}],"Data":[],"Page":[{"layout":"false","_content":"l3vacuMD8f","source":"baidu_verify_l3vacuMD8f.html","raw":"---\nlayout: false\n---\nl3vacuMD8f","date":"2018-09-13T02:00:19.833Z","updated":"2018-08-02T04:39:08.099Z","path":"baidu_verify_l3vacuMD8f.html","title":"","comments":1,"_id":"cjmd072650000qcw6ypdt3zmn","content":"l3vacuMD8f","site":{"data":{}},"excerpt":"","more":"l3vacuMD8f"},{"title":"About Thinkwee","html":true,"_content":"***\n\n<center>\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170501/115029968.jpg)\n</center>\n\n<center> <font size=6 >Thinkwee's Blog</font ></center>\n<center> <font size=5 >Liu Wei/Richard Liu</font ></center>\n<center> <font size=4 >\tBeijing University of Posts and Telecommunications</font ></center>\n<center> <font size=3 >\tIntelligent Science and Technology Center</font ></center>\n<center> <font size=3 >\tCommunication Engineering|Undergraduate</font ></center>\n<center> <font size=3 >\tComputer Science | Postgraduate</font ></center>\n<center> <font size=3 >\tNLP(Automatic Summarization)</font ></center>\n<center> <font size=2 >\tC++(just write algorithm)</font ></center>\n<center> <font size=2 >\tPython(just for machine learning)</font ></center>\n<center> <font size=2 >\tJava(learn it by coding android app)</font ></center>\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/215217834.gif)\n\n\n","source":"about/index.md","raw":"title: About Thinkwee\nhtml: true\n---\n***\n\n<center>\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170501/115029968.jpg)\n</center>\n\n<center> <font size=6 >Thinkwee's Blog</font ></center>\n<center> <font size=5 >Liu Wei/Richard Liu</font ></center>\n<center> <font size=4 >\tBeijing University of Posts and Telecommunications</font ></center>\n<center> <font size=3 >\tIntelligent Science and Technology Center</font ></center>\n<center> <font size=3 >\tCommunication Engineering|Undergraduate</font ></center>\n<center> <font size=3 >\tComputer Science | Postgraduate</font ></center>\n<center> <font size=3 >\tNLP(Automatic Summarization)</font ></center>\n<center> <font size=2 >\tC++(just write algorithm)</font ></center>\n<center> <font size=2 >\tPython(just for machine learning)</font ></center>\n<center> <font size=2 >\tJava(learn it by coding android app)</font ></center>\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/215217834.gif)\n\n\n","date":"2018-09-15T13:47:19.097Z","updated":"2018-09-15T13:47:19.097Z","path":"about/index.html","comments":1,"layout":"page","_id":"cjmd072c80002qcw60uu0asjn","content":"<hr><center><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170501/115029968.jpg\" alt=\"mark\"><br></center><center><font size=\"6\">Thinkwees Blog</font></center><br><center><font size=\"5\">Liu Wei/Richard Liu</font></center><br><center><font size=\"4\">Beijing University of Posts and Telecommunications</font></center><br><center><font size=\"3\">Intelligent Science and Technology Center</font></center><br><center><font size=\"3\">Communication Engineering|Undergraduate</font></center><br><center><font size=\"3\">Computer Science | Postgraduate</font></center><br><center><font size=\"3\">NLP(Automatic Summarization)</font></center><br><center><font size=\"2\">C++(just write algorithm)</font></center><br><center><font size=\"2\">Python(just for machine learning)</font></center><br><center><font size=\"2\">Java(learn it by coding android app)</font></center><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/215217834.gif\" alt=\"mark\"></p>","site":{"data":{}},"excerpt":"","more":"<hr><center><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170501/115029968.jpg\" alt=\"mark\"><br></center><center><font size=\"6\">Thinkwees Blog</font></center><br><center><font size=\"5\">Liu Wei/Richard Liu</font></center><br><center><font size=\"4\">Beijing University of Posts and Telecommunications</font></center><br><center><font size=\"3\">Intelligent Science and Technology Center</font></center><br><center><font size=\"3\">Communication Engineering|Undergraduate</font></center><br><center><font size=\"3\">Computer Science | Postgraduate</font></center><br><center><font size=\"3\">NLP(Automatic Summarization)</font></center><br><center><font size=\"2\">C++(just write algorithm)</font></center><br><center><font size=\"2\">Python(just for machine learning)</font></center><br><center><font size=\"2\">Java(learn it by coding android app)</font></center><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/215217834.gif\" alt=\"mark\"></p>"},{"title":"categories","type":"categories","_content":"","source":"categories/index.md","raw":"title: categories\ntype: \"categories\"\n---\n","date":"2018-09-13T02:00:10.597Z","updated":"2018-07-23T01:28:38.518Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjmd072cb0004qcw6seft2gpk","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"","type":"tags","_content":"","source":"tags/index.md","raw":"title: \ntype: \"tags\"\n---","date":"2018-09-13T02:00:10.607Z","updated":"2018-07-23T01:28:38.518Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjmd072cf0008qcw6cmfeu0ip","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"","date":"2017-12-27T11:20:43.000Z","author":"Thinkwee","mathjax":true,"_content":"\n\n-\tA Neural Attention Model for Abstractive Sentence Summarization\n\n\n-\tAlexander M. Rush(Facebook AI Research / Harvard SEAS)\n-\tSumit Chopra(Facebook AI Research)\n-\tJason Weston(Facebook AI Research)\n<!--more-->\n\n# \n-\t[A Neural Attention Model for Abstractive Sentence Summarization](https://arxiv.org/pdf/1509.00685.pdf)\n\n# \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ce57b735eC.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AJ01DbFcGa.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AdiCCclB88.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/9lDk2jjmFB.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/fHk47h6CdD.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CgEDiFd913.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/KGD08gJ22E.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/FkaFDDH8Db.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekAkH14d34.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/I4KLcIkGmL.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ge10L0fLig.JPG)","source":"_posts/AM-Model-for-ASS.md","raw":"---\ntitle: \ndate: 2017-12-27 19:20:43\ntags:\n  - abstractive summarization\n  - math\n  - machinelearning\n  -\ttheory\n  - nlp\ncategories:\n  - \nauthor: Thinkwee\nmathjax: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180307/G6AJc4Fe8L.png?imageslim\n---\n\n\n-\tA Neural Attention Model for Abstractive Sentence Summarization\n\n\n-\tAlexander M. Rush(Facebook AI Research / Harvard SEAS)\n-\tSumit Chopra(Facebook AI Research)\n-\tJason Weston(Facebook AI Research)\n<!--more-->\n\n# \n-\t[A Neural Attention Model for Abstractive Sentence Summarization](https://arxiv.org/pdf/1509.00685.pdf)\n\n# \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ce57b735eC.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AJ01DbFcGa.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AdiCCclB88.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/9lDk2jjmFB.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/fHk47h6CdD.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CgEDiFd913.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/KGD08gJ22E.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/FkaFDDH8Db.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekAkH14d34.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/I4KLcIkGmL.JPG)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ge10L0fLig.JPG)","slug":"AM-Model-for-ASS","published":1,"updated":"2018-07-23T01:28:38.487Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180307/G6AJc4Fe8L.png?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072c50001qcw6gskbd9a6","content":"<p></p><ul><li>A Neural Attention Model for Abstractive Sentence Summarization</li></ul><p></p><ul><li>Alexander M. Rush(Facebook AI Research / Harvard SEAS)</li><li>Sumit Chopra(Facebook AI Research)</li><li>Jason Weston(Facebook AI Research)<a id=\"more\"></a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"https://arxiv.org/pdf/1509.00685.pdf\" target=\"_blank\" rel=\"noopener\">A Neural Attention Model for Abstractive Sentence Summarization</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ce57b735eC.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AJ01DbFcGa.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AdiCCclB88.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/9lDk2jjmFB.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/fHk47h6CdD.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CgEDiFd913.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/KGD08gJ22E.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/FkaFDDH8Db.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekAkH14d34.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/I4KLcIkGmL.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ge10L0fLig.JPG\" alt=\"mark\"></p>","site":{"data":{}},"excerpt":"<p></p><ul><li>A Neural Attention Model for Abstractive Sentence Summarization</li></ul><p></p><ul><li>Alexander M. Rush(Facebook AI Research / Harvard SEAS)</li><li>Sumit Chopra(Facebook AI Research)</li><li>Jason Weston(Facebook AI Research)","more":"</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"https://arxiv.org/pdf/1509.00685.pdf\" target=\"_blank\" rel=\"noopener\">A Neural Attention Model for Abstractive Sentence Summarization</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ce57b735eC.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AJ01DbFcGa.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/AdiCCclB88.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/9lDk2jjmFB.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/fHk47h6CdD.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CgEDiFd913.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/KGD08gJ22E.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/FkaFDDH8Db.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekAkH14d34.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/I4KLcIkGmL.JPG\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Ge10L0fLig.JPG\" alt=\"mark\"></p>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"","path":"2017/12/27/AM-Model-for-ASS/","eyeCatchImage":null,"excerpt":"<p></p><ul><li>A Neural Attention Model for Abstractive Sentence Summarization</li></ul><p></p><ul><li>Alexander M. Rush(Facebook AI Research / Harvard SEAS)</li><li>Sumit Chopra(Facebook AI Research)</li><li>Jason Weston(Facebook AI Research)","date":"2017-12-27T11:20:43.000Z","pv":0,"totalPV":0,"categories":"","tags":["abstractive summarization","math","machinelearning","theory","nlp"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"MIT1","date":"2017-01-21T03:45:28.000Z","mathjax":true,"html":true,"_content":"\n***\n# <font size=5 >\n\n-\t3\n\n-\t\n\n$$\\begin{cases}\n2x-y=0\\\\\n-x+2y=3\\\\\n\\end{cases}\n$$\n\n<!--more-->\n\n## \n\n-\t\n\n$$\n\\begin{bmatrix}\n2 & -1 \\\\\n-1 & 2 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nx \\\\\ny \\\\\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n0 \\\\\n3 \\\\\n\\end{bmatrix}\n$$\n\n-\t\n\n$$\nAx=b\n$$\n\n-\tnnn\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123759373.png)\n\n## \n-\t\n$$\nx\n\\begin{bmatrix}\n2  \\\\\n-1 \\\\\n\\end{bmatrix}\n+y\n\\begin{bmatrix}\n-1 \\\\\n2 \\\\\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n0 \\\\\n3 \\\\\n\\end{bmatrix}\n$$\n\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123823434.png)\n\n## \n\n-\tx,ybx(n)\n-\t(n)(nonsingular matrix)(invertible)\n\n# <font size=5 > \n\n## \n\n-\t\n$$\\begin{cases}\nx+2y+z=2\\\\\n3x+8y+z=12\\\\\n4y+z=2\\\\\n\\end{cases}\n$$\n-\tA\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n3 & 8 & 1  \\\\\n0 & 4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n0 & 2 & -2  \\\\\n0 & 4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n0 & 2 & -2  \\\\\n0 & 0 & 5  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\tii(pivot)AU(Upper Triangle\n-\t\n$$\n\\left[\\begin{array}{c|c}\n A & X \\\\\n\\end{array}\\right]\n$$\n-\t(Augmented matrix)bc\n\n## \n-\tAx=bUx=cUx=c\n-\tUz\n-\tzy\n-\tz,yx\n-\t\n\n## \n\n$$\n\\begin{bmatrix}\na & b & c  \\\\\n\\end{bmatrix}*A\n$$\n-\taA1+bA2+cA3\n\n\n$$\nA*\\begin{bmatrix}\na \\\\\nb \\\\\nc \\\\\n\\end{bmatrix}\n$$\n-\taA1+bA2+cA3\n-\tA\n\n$$\n\\begin{bmatrix}\n0 & 1  \\\\\n1 & 0  \\\\\n\\end{bmatrix}*A\n$$\n-\tA\n\n$$\nA*\\begin{bmatrix}\n0 & 1  \\\\\n1 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\tij$E_{ij}$\n-\t\n$$\nE_{32}E_{31}E_{21}A=U\n$$\n\n# <font size=5 >\n\n## \n\n-\t\n$$\nA*B=C\n$$\n-\t $C_{ij}=\\sum_iA_{ik}B_{kj}$\n-\tCA,BBAC\n- \tCB,AABC\n-\tABC\n-\t\n\n## \n-\t$A^{-1}$,$AA^{-1}=I$,I\n-\t\n-\tX,$AX=0$,A\n-\t:A|IAIIA\n -\t\n$$\nEA=I \\\\\nE=A^{-1} \\\\\nEI=A^{-1} \\\\\n$$\n\n# <font size=5 >ALU\n\n## LU\n-\t$(AB)^{-1}=B^{-1}A^{-1}$\n-\tA$A^T$,\n$$\nAA^{-1}=I \\\\\n(A^{-1})^TA^T=I \\\\\n(A^T)^{-1}=(A^{-1})^T \\\\\n$$\n-\t\n-\tA=LU,UAL.3*3\n$$\nE_{32}E_{31}E_{21}A=U \\\\\nL: \\\\\nL=E_{21}^{-1}E_{31}^{-1}E_{32}^{-1} \\\\\n$$\n-\tA=LUEA=ULE,nn-1\n\n## \n-\t()\n$$\n\\sum_{i=1}^{n}i*(i-1) \\approx \\sum_{i=1}^{n}i^2 \\approx \\frac 13 n^3\n$$\n\n## \n-\t3*36()\n-\t$P^{-1}=P^T$\n-\t66\n-\tn*nn!\n\n# R\n\n## \n-\t\n-\tA=LU,L1U0\n-\tPA=LUlu\n-\tP(Permutation)n*nn!\n\n## \n-\t$A^T$$A_{ij}=A_{ji}^T$\n-\t$(AB)^T=B^TA^T$\n-\t(symmetric),$A^T=A$\n-\tA$AA^T$,$(A^TA)^T=(A^TA^{TT})=(A^TA)$\n\n\n## \n-\t\n-\t****\n-\t$R^2$\n-\t$R^2$(0,0)\n-\t$R^2$(),\n-\t$R^2$$R^2$()\n-\t$R^2$\n -\t$R^2$\n -\t($R^1$)\n -\t(0,0),Z\n-\t$R^3$\n -\t$R^3$\n -\t($R^1$)\n -\t\n -\t(0,0,0)\n \n\n\n## \n$$\nA=\\begin{bmatrix}\n1 & 3  \\\\\n2 & 3  \\\\\n4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t$R^3$(),,C(A)(0,0,0)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170122/203313042.png)\n\n# <font size=5 > \n\n## \n-\tPL$P \\bigcup L$$P \\bigcap L$\n-\tST,$S \\bigcap T$\n\n-\t\n$$\nA=\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n$$\n-\tC(A)$R^4$\n-\t\n-\tAx=bb?bx\n\t-\t3$R^4$****\n\t-\tb=(0,0,0,0)b=(1,2,3,4),(x1,x2,x3)bxb**bAx**\n-\t,\n\n## \n-\t(null space)AAx=0x\n-\tA,x(b=0),\n$$\n\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nX_1 \\\\\nX_2 \\\\\nX_3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 \\\\\n0 \\\\\n0 \\\\\n0 \\\\\n\\end{bmatrix}\n$$\n-\t(0,0,0)(1,1,-1),(c,c,-c)\n-\t(?):Ax=0..................\n\n\n$$\n\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nX_1 \\\\\nX_2 \\\\\nX_3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n1 \\\\\n2 \\\\\n3 \\\\\n4 \\\\\n\\end{bmatrix}\n$$\n-\tb(1,0,0),\n-\t(0,0,0),(1,0,0),(0,-1,1),b=0\n-\t\n\t-\t\n\t-\tx\n\n# <font size=5 >\n\n## \n-\tAx=0\n-\t:\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n2 & 4 & 6 & 8  \\\\\n3 & 6 & 8 & 10  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\t,\n-\t,\n\n\n\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 2 & 4  \\\\\n\\end{bmatrix}\n$$\n-\t,\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}=U\n$$\n-\t00(0)2()(1,3)(2,4)\n-\tUx=0,\n-\tx2,x4****x1,x3\n\n## \n-\tx2=1,x4=0,x=(-2,1,0,0),(-2,1,0,0)()?x2=0,x4=1,x=(2,0,-2,1)\n-\t(1,0)(-2,1,0,0),(0,1)(2,0,-2,1)\n-\t(1000)****,a\\*(-2,1,0,0)+b\\*(2,0,-2,1)\n-\t rrm*nAn-r\n\n## \n-\tU \n$$\nU=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t(reduced row echelon form RREF)0\n$$\nU=\\begin{bmatrix}\n1 & 2 & 0 & -2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t1,b=0,2\n$$\nU=\\begin{bmatrix}\n1 & 2 & 0 & -2  \\\\\n0 & 0 & 1 & 2  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}=R\n$$\n-\t\n-\t\n-\t:Rx=0()F\n$$\nR=\\begin{bmatrix}\nI & F \\\\\n0 & 0 \\\\\n\\end{bmatrix}\n$$\nI()F(),RrIrFn-r\n\n## \n\n-\tNaNaNx\n$$\nR*N=0\n$$\n$$\nN=\\begin{bmatrix}\n-F \\\\\nI  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\nI & F \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nx_{pivot} \\\\\nx_{free}  \\\\\n\\end{bmatrix}=0\n$$\n$$\nx_{pivot}=-F\n$$\n\n## \n-\t\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n2 & 4 & 6 \\\\\n2 & 6 & 8 \\\\\n2 & 8 & 10 \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n0 & 0 & 0 \\\\\n0 & 2 & 2 \\\\\n0 & 4 & 4 \\\\\n\\end{bmatrix}\n$$\n-\t()\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n0 & 2 & 2 \\\\\n0 & 0 & 0 \\\\\n0 & 0 & 0 \\\\\n\\end{bmatrix}=U\n$$\n-\tr=2,1,1x\n$$\nx=\\begin{bmatrix}\n-1 \\\\\n-1 \\\\\n1 \\\\\n\\end{bmatrix}\n$$\n-\tcx,x\n-\tU\n$$\nU=\\begin{bmatrix}\n1 & 0 & 1 \\\\\n0 & 1 & 1 \\\\\n0 & 0 & 0 \\\\\n0 & 0 & 0 \\\\\n\\end{bmatrix}=R=\n\\begin{bmatrix}\nI & F  \\\\\n0 & 0  \\\\\n0 & 0  \\\\\n\\end{bmatrix}\n$$\n\n$$\nF=\\begin{bmatrix}\n1 \\\\\n1 \\\\\n\\end{bmatrix}=U\n$$\n\n$$\nx=\\begin{bmatrix}\n-F \\\\\nI  \\\\\n\\end{bmatrix}=N\n$$\n\n# <font size=5 >\n\n## \n$$\\begin{cases}\nx_1+2x_2+2x_3+2x_4=b_1\\\\\n2x_1+4x_2+6x_3+8x_4=b_2\\\\\n3x_1+6x_2+8x_3+10x_4=b_3\\\\\n\\end{cases}\n$$\n-\t\n$$\n\\left[\\begin{array}{c c c c|c}\n1 & 2 & 2 & 2 & b_1 \\\\\n2 & 4 & 6 & 8 & b_2 \\\\\n3 & 6 & 8 & 10 & b_3 \\\\\n\\end{array}\\right]\n$$\n-\t:\n$$\n\\left[\\begin{array}{c c c c|c}\n1 & 2 & 2 & 2 & b_1 \\\\\n0 & 0 & 2 & 4 & b_2-2b_1 \\\\\n0 & 0 & 0 & 0 & b_3-b_2-b_1 \\\\\n\\end{array}\\right]\n$$\n-\t\n-\tbbA\n-\t**A0bb**\n-\tAx=b\n -\t0$x_2x_4$0$x_1x_3$-21.5\n -\t\n -\t$Ax_{particular}=b   \\\\   Ax_{nullspace}=0   \\\\   A(x_{particular}+x_{nullspace})=b$\n -\t(-2,0,1.5,0),(-2,1,0,0)(2,0,-2,1)\n -\t\n$$\nx_{complete}=\n\\begin{bmatrix}\n-2 \\\\\n0 \\\\\n1.5 \\\\\n0 \\\\\n\\end{bmatrix}+\nc_1\\begin{bmatrix}\n-2 \\\\\n1\\\\\n0 \\\\\n0 \\\\\n\\end{bmatrix}+\nc_2\\begin{bmatrix}\n2 \\\\\n0 \\\\\n-2 \\\\\n1 \\\\\n\\end{bmatrix}\n$$\n -\t4\n \n## \n-\trm*nr<=mr<=n r,r=min(m,n)\n-\tr=n<m **N(A)={0}**,Ax=b(b)R\n$$\n\tR=\\begin{bmatrix}\n\tI \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n$$\n-\tr=m<nbAx=bn-rn-m,r\n$$\n\tR=\\begin{bmatrix}\n\tI & F \\\\\n\t\\end{bmatrix}\n$$\n-\tr=m=nAR=IN(A)={0},Ax=bb\n\n## \n\n>rnmbx\n>rmnAbbXxAmb(mn-m0x\n>AbAXbbr03bxyZ0bAAxyb1 2 3\n>AbXbX\n\n\n","source":"_posts/LinearAlgebra1.md","raw":"---\ntitle: MIT1\ndate: 2017-01-21 11:45:28\ntags: [linearalgebra,math]\ncategories: \nmathjax: true\nhtml: true\n---\n\n***\n# <font size=5 >\n\n-\t3\n\n-\t\n\n$$\\begin{cases}\n2x-y=0\\\\\n-x+2y=3\\\\\n\\end{cases}\n$$\n\n<!--more-->\n\n## \n\n-\t\n\n$$\n\\begin{bmatrix}\n2 & -1 \\\\\n-1 & 2 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nx \\\\\ny \\\\\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n0 \\\\\n3 \\\\\n\\end{bmatrix}\n$$\n\n-\t\n\n$$\nAx=b\n$$\n\n-\tnnn\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123759373.png)\n\n## \n-\t\n$$\nx\n\\begin{bmatrix}\n2  \\\\\n-1 \\\\\n\\end{bmatrix}\n+y\n\\begin{bmatrix}\n-1 \\\\\n2 \\\\\n\\end{bmatrix}\n=\n\\begin{bmatrix}\n0 \\\\\n3 \\\\\n\\end{bmatrix}\n$$\n\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123823434.png)\n\n## \n\n-\tx,ybx(n)\n-\t(n)(nonsingular matrix)(invertible)\n\n# <font size=5 > \n\n## \n\n-\t\n$$\\begin{cases}\nx+2y+z=2\\\\\n3x+8y+z=12\\\\\n4y+z=2\\\\\n\\end{cases}\n$$\n-\tA\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n3 & 8 & 1  \\\\\n0 & 4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n0 & 2 & -2  \\\\\n0 & 4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\n1 & 2 & 1  \\\\\n0 & 2 & -2  \\\\\n0 & 0 & 5  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\tii(pivot)AU(Upper Triangle\n-\t\n$$\n\\left[\\begin{array}{c|c}\n A & X \\\\\n\\end{array}\\right]\n$$\n-\t(Augmented matrix)bc\n\n## \n-\tAx=bUx=cUx=c\n-\tUz\n-\tzy\n-\tz,yx\n-\t\n\n## \n\n$$\n\\begin{bmatrix}\na & b & c  \\\\\n\\end{bmatrix}*A\n$$\n-\taA1+bA2+cA3\n\n\n$$\nA*\\begin{bmatrix}\na \\\\\nb \\\\\nc \\\\\n\\end{bmatrix}\n$$\n-\taA1+bA2+cA3\n-\tA\n\n$$\n\\begin{bmatrix}\n0 & 1  \\\\\n1 & 0  \\\\\n\\end{bmatrix}*A\n$$\n-\tA\n\n$$\nA*\\begin{bmatrix}\n0 & 1  \\\\\n1 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\tij$E_{ij}$\n-\t\n$$\nE_{32}E_{31}E_{21}A=U\n$$\n\n# <font size=5 >\n\n## \n\n-\t\n$$\nA*B=C\n$$\n-\t $C_{ij}=\\sum_iA_{ik}B_{kj}$\n-\tCA,BBAC\n- \tCB,AABC\n-\tABC\n-\t\n\n## \n-\t$A^{-1}$,$AA^{-1}=I$,I\n-\t\n-\tX,$AX=0$,A\n-\t:A|IAIIA\n -\t\n$$\nEA=I \\\\\nE=A^{-1} \\\\\nEI=A^{-1} \\\\\n$$\n\n# <font size=5 >ALU\n\n## LU\n-\t$(AB)^{-1}=B^{-1}A^{-1}$\n-\tA$A^T$,\n$$\nAA^{-1}=I \\\\\n(A^{-1})^TA^T=I \\\\\n(A^T)^{-1}=(A^{-1})^T \\\\\n$$\n-\t\n-\tA=LU,UAL.3*3\n$$\nE_{32}E_{31}E_{21}A=U \\\\\nL: \\\\\nL=E_{21}^{-1}E_{31}^{-1}E_{32}^{-1} \\\\\n$$\n-\tA=LUEA=ULE,nn-1\n\n## \n-\t()\n$$\n\\sum_{i=1}^{n}i*(i-1) \\approx \\sum_{i=1}^{n}i^2 \\approx \\frac 13 n^3\n$$\n\n## \n-\t3*36()\n-\t$P^{-1}=P^T$\n-\t66\n-\tn*nn!\n\n# R\n\n## \n-\t\n-\tA=LU,L1U0\n-\tPA=LUlu\n-\tP(Permutation)n*nn!\n\n## \n-\t$A^T$$A_{ij}=A_{ji}^T$\n-\t$(AB)^T=B^TA^T$\n-\t(symmetric),$A^T=A$\n-\tA$AA^T$,$(A^TA)^T=(A^TA^{TT})=(A^TA)$\n\n\n## \n-\t\n-\t****\n-\t$R^2$\n-\t$R^2$(0,0)\n-\t$R^2$(),\n-\t$R^2$$R^2$()\n-\t$R^2$\n -\t$R^2$\n -\t($R^1$)\n -\t(0,0),Z\n-\t$R^3$\n -\t$R^3$\n -\t($R^1$)\n -\t\n -\t(0,0,0)\n \n\n\n## \n$$\nA=\\begin{bmatrix}\n1 & 3  \\\\\n2 & 3  \\\\\n4 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t$R^3$(),,C(A)(0,0,0)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170122/203313042.png)\n\n# <font size=5 > \n\n## \n-\tPL$P \\bigcup L$$P \\bigcap L$\n-\tST,$S \\bigcap T$\n\n-\t\n$$\nA=\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n$$\n-\tC(A)$R^4$\n-\t\n-\tAx=bb?bx\n\t-\t3$R^4$****\n\t-\tb=(0,0,0,0)b=(1,2,3,4),(x1,x2,x3)bxb**bAx**\n-\t,\n\n## \n-\t(null space)AAx=0x\n-\tA,x(b=0),\n$$\n\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nX_1 \\\\\nX_2 \\\\\nX_3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 \\\\\n0 \\\\\n0 \\\\\n0 \\\\\n\\end{bmatrix}\n$$\n-\t(0,0,0)(1,1,-1),(c,c,-c)\n-\t(?):Ax=0..................\n\n\n$$\n\\begin{bmatrix}\n1 & 1 & 2  \\\\\n2 & 1 & 3  \\\\\n3 & 1 & 5  \\\\\n4 & 1 & 5  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nX_1 \\\\\nX_2 \\\\\nX_3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n1 \\\\\n2 \\\\\n3 \\\\\n4 \\\\\n\\end{bmatrix}\n$$\n-\tb(1,0,0),\n-\t(0,0,0),(1,0,0),(0,-1,1),b=0\n-\t\n\t-\t\n\t-\tx\n\n# <font size=5 >\n\n## \n-\tAx=0\n-\t:\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n2 & 4 & 6 & 8  \\\\\n3 & 6 & 8 & 10  \\\\\n\\end{bmatrix}\n$$\n-\t\n-\t,\n-\t,\n\n\n\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 2 & 4  \\\\\n\\end{bmatrix}\n$$\n-\t,\n$$\nA=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}=U\n$$\n-\t00(0)2()(1,3)(2,4)\n-\tUx=0,\n-\tx2,x4****x1,x3\n\n## \n-\tx2=1,x4=0,x=(-2,1,0,0),(-2,1,0,0)()?x2=0,x4=1,x=(2,0,-2,1)\n-\t(1,0)(-2,1,0,0),(0,1)(2,0,-2,1)\n-\t(1000)****,a\\*(-2,1,0,0)+b\\*(2,0,-2,1)\n-\t rrm*nAn-r\n\n## \n-\tU \n$$\nU=\\begin{bmatrix}\n1 & 2 & 2 & 2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t(reduced row echelon form RREF)0\n$$\nU=\\begin{bmatrix}\n1 & 2 & 0 & -2  \\\\\n0 & 0 & 2 & 4  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}\n$$\n-\t1,b=0,2\n$$\nU=\\begin{bmatrix}\n1 & 2 & 0 & -2  \\\\\n0 & 0 & 1 & 2  \\\\\n0 & 0 & 0 & 0  \\\\\n\\end{bmatrix}=R\n$$\n-\t\n-\t\n-\t:Rx=0()F\n$$\nR=\\begin{bmatrix}\nI & F \\\\\n0 & 0 \\\\\n\\end{bmatrix}\n$$\nI()F(),RrIrFn-r\n\n## \n\n-\tNaNaNx\n$$\nR*N=0\n$$\n$$\nN=\\begin{bmatrix}\n-F \\\\\nI  \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\n\\begin{bmatrix}\nI & F \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nx_{pivot} \\\\\nx_{free}  \\\\\n\\end{bmatrix}=0\n$$\n$$\nx_{pivot}=-F\n$$\n\n## \n-\t\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n2 & 4 & 6 \\\\\n2 & 6 & 8 \\\\\n2 & 8 & 10 \\\\\n\\end{bmatrix}\n$$\n-\t\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n0 & 0 & 0 \\\\\n0 & 2 & 2 \\\\\n0 & 4 & 4 \\\\\n\\end{bmatrix}\n$$\n-\t()\n$$\nA=\\begin{bmatrix}\n1 & 2 & 3 \\\\\n0 & 2 & 2 \\\\\n0 & 0 & 0 \\\\\n0 & 0 & 0 \\\\\n\\end{bmatrix}=U\n$$\n-\tr=2,1,1x\n$$\nx=\\begin{bmatrix}\n-1 \\\\\n-1 \\\\\n1 \\\\\n\\end{bmatrix}\n$$\n-\tcx,x\n-\tU\n$$\nU=\\begin{bmatrix}\n1 & 0 & 1 \\\\\n0 & 1 & 1 \\\\\n0 & 0 & 0 \\\\\n0 & 0 & 0 \\\\\n\\end{bmatrix}=R=\n\\begin{bmatrix}\nI & F  \\\\\n0 & 0  \\\\\n0 & 0  \\\\\n\\end{bmatrix}\n$$\n\n$$\nF=\\begin{bmatrix}\n1 \\\\\n1 \\\\\n\\end{bmatrix}=U\n$$\n\n$$\nx=\\begin{bmatrix}\n-F \\\\\nI  \\\\\n\\end{bmatrix}=N\n$$\n\n# <font size=5 >\n\n## \n$$\\begin{cases}\nx_1+2x_2+2x_3+2x_4=b_1\\\\\n2x_1+4x_2+6x_3+8x_4=b_2\\\\\n3x_1+6x_2+8x_3+10x_4=b_3\\\\\n\\end{cases}\n$$\n-\t\n$$\n\\left[\\begin{array}{c c c c|c}\n1 & 2 & 2 & 2 & b_1 \\\\\n2 & 4 & 6 & 8 & b_2 \\\\\n3 & 6 & 8 & 10 & b_3 \\\\\n\\end{array}\\right]\n$$\n-\t:\n$$\n\\left[\\begin{array}{c c c c|c}\n1 & 2 & 2 & 2 & b_1 \\\\\n0 & 0 & 2 & 4 & b_2-2b_1 \\\\\n0 & 0 & 0 & 0 & b_3-b_2-b_1 \\\\\n\\end{array}\\right]\n$$\n-\t\n-\tbbA\n-\t**A0bb**\n-\tAx=b\n -\t0$x_2x_4$0$x_1x_3$-21.5\n -\t\n -\t$Ax_{particular}=b   \\\\   Ax_{nullspace}=0   \\\\   A(x_{particular}+x_{nullspace})=b$\n -\t(-2,0,1.5,0),(-2,1,0,0)(2,0,-2,1)\n -\t\n$$\nx_{complete}=\n\\begin{bmatrix}\n-2 \\\\\n0 \\\\\n1.5 \\\\\n0 \\\\\n\\end{bmatrix}+\nc_1\\begin{bmatrix}\n-2 \\\\\n1\\\\\n0 \\\\\n0 \\\\\n\\end{bmatrix}+\nc_2\\begin{bmatrix}\n2 \\\\\n0 \\\\\n-2 \\\\\n1 \\\\\n\\end{bmatrix}\n$$\n -\t4\n \n## \n-\trm*nr<=mr<=n r,r=min(m,n)\n-\tr=n<m **N(A)={0}**,Ax=b(b)R\n$$\n\tR=\\begin{bmatrix}\n\tI \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n$$\n-\tr=m<nbAx=bn-rn-m,r\n$$\n\tR=\\begin{bmatrix}\n\tI & F \\\\\n\t\\end{bmatrix}\n$$\n-\tr=m=nAR=IN(A)={0},Ax=bb\n\n## \n\n>rnmbx\n>rmnAbbXxAmb(mn-m0x\n>AbAXbbr03bxyZ0bAAxyb1 2 3\n>AbXbX\n\n\n","slug":"LinearAlgebra1","published":1,"updated":"2018-09-16T13:26:45.179Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072c90003qcw60txh9z51","content":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><ul><li><p>3</p></li><li><p></p></li></ul><p>$$\\begin{cases}<br>2x-y=0\\\\<br>-x+2y=3\\\\<br>\\end{cases}<br>$$</p><a id=\"more\"></a><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><p>$$<br>\\begin{bmatrix}<br>2 &amp; -1 \\\\<br>-1 &amp; 2 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x \\\\<br>y \\\\<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>0 \\\\<br>3 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li></ul><p>$$<br>Ax=b<br>$$</p><ul><li>nnn</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123759373.png\" alt=\"mark\"></p><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><p><br>$$<br>x<br>\\begin{bmatrix}<br>2 \\\\<br>-1 \\\\<br>\\end{bmatrix}<br>+y<br>\\begin{bmatrix}<br>-1 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>0 \\\\<br>3 \\\\<br>\\end{bmatrix}<br>$$</p></li><li><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123823434.png\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>x,ybx(n)</li><li>(n)(nonsingular matrix)(invertible)</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$\\begin{cases}<br>x+2y+z=2\\\\<br>3x+8y+z=12\\\\<br>4y+z=2\\\\<br>\\end{cases}<br>$$</li><li>A<br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>3 &amp; 8 &amp; 1 \\\\<br>0 &amp; 4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>0 &amp; 2 &amp; -2 \\\\<br>0 &amp; 4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>0 &amp; 2 &amp; -2 \\\\<br>0 &amp; 0 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</li><li></li><li>ii(pivot)AU(Upper Triangle</li><li><br>$$<br>\\left[\\begin{array}{c|c}<br>A &amp; X \\\\<br>\\end{array}\\right]<br>$$</li><li>(Augmented matrix)bc</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=bUx=cUx=c</li><li>Uz</li><li>zy</li><li>z,yx</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$<br>\\begin{bmatrix}<br>a &amp; b &amp; c \\\\<br>\\end{bmatrix}*A<br>$$</p><ul><li>aA1+bA2+cA3</li></ul><p><br>$$<br>A*\\begin{bmatrix}<br>a \\\\<br>b \\\\<br>c \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>aA1+bA2+cA3</li><li>A</li></ul><p>$$<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}*A<br>$$</p><ul><li>A</li></ul><p>$$<br>A*\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li><li>ij$E_{ij}$</li><li><br>$$<br>E_{32}E_{31}E_{21}A=U<br>$$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>A*B=C<br>$$</li><li> $C_{ij}=\\sum_iA_{ik}B_{kj}$</li><li>CA,BBAC</li><li>CB,AABC</li><li>ABC</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$A^{-1}$,$AA^{-1}=I$,I</li><li></li><li>X,$AX=0$,A</li><li>:A|IAIIA<ul><li><br>$$<br>EA=I \\\\<br>E=A^{-1} \\\\<br>EI=A^{-1} \\\\<br>$$</li></ul></li></ul><h1 id=\"ALU\"><a href=\"#ALU\" class=\"headerlink\" title=\"ALU\"></a><font size=\"5\">ALU</font></h1><h2 id=\"LU\"><a href=\"#LU\" class=\"headerlink\" title=\"LU\"></a>LU</h2><ul><li>$(AB)^{-1}=B^{-1}A^{-1}$</li><li>A$A^T$,<br>$$<br>AA^{-1}=I \\\\<br>(A^{-1})^TA^T=I \\\\<br>(A^T)^{-1}=(A^{-1})^T \\\\<br>$$</li><li></li><li>A=LU,UAL.3*3<br>$$<br>E_{32}E_{31}E_{21}A=U \\\\<br>L: \\\\<br>L=E_{21}^{-1}E_{31}^{-1}E_{32}^{-1} \\\\<br>$$</li><li>A=LUEA=ULE,nn-1</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>()<br>$$<br>\\sum_{i=1}^{n}i*(i-1) \\approx \\sum_{i=1}^{n}i^2 \\approx \\frac 13 n^3<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>3*36()</li><li>$P^{-1}=P^T$</li><li>66</li><li>n*nn!</li></ul><h1 id=\"R\"><a href=\"#R\" class=\"headerlink\" title=\"R\"></a>R</h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>A=LU,L1U0</li><li>PA=LUlu</li><li>P(Permutation)n*nn!</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$A^T$$A_{ij}=A_{ji}^T$</li><li>$(AB)^T=B^TA^T$</li><li>(symmetric),$A^T=A$</li><li>A$AA^T$,$(A^TA)^T=(A^TA^{TT})=(A^TA)$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><strong></strong></li><li>$R^2$</li><li>$R^2$(0,0)</li><li>$R^2$(),</li><li>$R^2$$R^2$()</li><li>$R^2$<ul><li>$R^2$</li><li>($R^1$)</li><li>(0,0),Z</li></ul></li><li>$R^3$<ul><li>$R^3$</li><li>($R^1$)</li><li></li><li>(0,0,0)</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$<br>A=\\begin{bmatrix}<br>1 &amp; 3 \\\\<br>2 &amp; 3 \\\\<br>4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>$R^3$(),,C(A)(0,0,0)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170122/203313042.png\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>PL$P \\bigcup L$$P \\bigcap L$</li><li><p>ST,$S \\bigcap T$</p></li><li><p><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</p></li><li>C(A)$R^4$</li><li></li><li>Ax=bb?bx<ul><li>3$R^4$<strong></strong></li><li>b=(0,0,0,0)b=(1,2,3,4),(x1,x2,x3)bxb<strong>bAx</strong></li></ul></li><li>,</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>(null space)AAx=0x</li><li>A,x(b=0),<br>$$<br>\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>X_1 \\\\<br>X_2 \\\\<br>X_3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 \\\\<br>0 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li><li>(0,0,0)(1,1,-1),(c,c,-c)</li><li>(?):Ax=0</li></ul><p>$$<br>\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>X_1 \\\\<br>X_2 \\\\<br>X_3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>3 \\\\<br>4 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>b(1,0,0),</li><li>(0,0,0),(1,0,0),(0,-1,1),b=0</li><li><ul><li></li><li>x</li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=0</li><li>:<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>2 &amp; 4 &amp; 6 &amp; 8 \\\\<br>3 &amp; 6 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}<br>$$</li><li></li><li>,</li><li>,</li></ul><p>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>,<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=U<br>$$</li><li>00(0)2()(1,3)(2,4)</li><li>Ux=0,</li><li>x2,x4<strong></strong>x1,x3</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>x2=1,x4=0,x=(-2,1,0,0),(-2,1,0,0)()?x2=0,x4=1,x=(2,0,-2,1)</li><li>(1,0)(-2,1,0,0),(0,1)(2,0,-2,1)</li><li>(1000)<strong></strong>,a*(-2,1,0,0)+b*(2,0,-2,1)</li><li>rrm*nAn-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>U<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>(reduced row echelon form RREF)0<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 0 &amp; -2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>1,b=0,2<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 0 &amp; -2 \\\\<br>0 &amp; 0 &amp; 1 &amp; 2 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=R<br>$$</li><li></li><li></li><li>:Rx=0()F<br>$$<br>R=\\begin{bmatrix}<br>I &amp; F \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$<br>I()F(),RrIrFn-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>NaNaNx<br>$$<br>R*N=0<br>$$<br>$$<br>N=\\begin{bmatrix}<br>-F \\\\<br>I \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>I &amp; F \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x_{pivot} \\\\<br>x_{free} \\\\<br>\\end{bmatrix}=0<br>$$<br>$$<br>x_{pivot}=-F<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>2 &amp; 4 &amp; 6 \\\\<br>2 &amp; 6 &amp; 8 \\\\<br>2 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 2 &amp; 2 \\\\<br>0 &amp; 4 &amp; 4 \\\\<br>\\end{bmatrix}<br>$$</li><li>()<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>0 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=U<br>$$</li><li>r=2,1,1x<br>$$<br>x=\\begin{bmatrix}<br>-1 \\\\<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>cx,x</li><li>U<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 0 &amp; 1 \\\\<br>0 &amp; 1 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=R=<br>\\begin{bmatrix}<br>I &amp; F \\\\<br>0 &amp; 0 \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li></ul><p>$$<br>F=\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix}=U<br>$$</p><p>$$<br>x=\\begin{bmatrix}<br>-F \\\\<br>I \\\\<br>\\end{bmatrix}=N<br>$$</p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$\\begin{cases}<br>x_1+2x_2+2x_3+2x_4=b_1\\\\<br>2x_1+4x_2+6x_3+8x_4=b_2\\\\<br>3x_1+6x_2+8x_3+10x_4=b_3\\\\<br>\\end{cases}<br>$$</p><ul><li><br>$$<br>\\left[\\begin{array}{c c c c|c}<br>1 &amp; 2 &amp; 2 &amp; 2 &amp; b_1 \\\\<br>2 &amp; 4 &amp; 6 &amp; 8 &amp; b_2 \\\\<br>3 &amp; 6 &amp; 8 &amp; 10 &amp; b_3 \\\\<br>\\end{array}\\right]<br>$$</li><li>:<br>$$<br>\\left[\\begin{array}{c c c c|c}<br>1 &amp; 2 &amp; 2 &amp; 2 &amp; b_1 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 &amp; b_2-2b_1 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 &amp; b_3-b_2-b_1 \\\\<br>\\end{array}\\right]<br>$$</li><li></li><li>bbA</li><li><strong>A0bb</strong></li><li>Ax=b<ul><li>0$x_2x_4$0$x_1x_3$-21.5</li><li></li><li>$Ax_{particular}=b \\\\ Ax_{nullspace}=0 \\\\ A(x_{particular}+x_{nullspace})=b$</li><li>(-2,0,1.5,0),(-2,1,0,0)(2,0,-2,1)</li><li><br>$$<br>x_{complete}=<br>\\begin{bmatrix}<br>-2 \\\\<br>0 \\\\<br>1.5 \\\\<br>0 \\\\<br>\\end{bmatrix}+<br>c_1\\begin{bmatrix}<br>-2 \\\\<br>1\\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}+<br>c_2\\begin{bmatrix}<br>2 \\\\<br>0 \\\\<br>-2 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>4</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>rm*nr&lt;=mr&lt;=n r,r=min(m,n)</li><li>r=n&lt;m <strong>N(A)={0}</strong>,Ax=b(b)R<br>$$<br>R=\\begin{bmatrix}<br>I \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li><li>r=m&lt;nbAx=bn-rn-m,r<br>$$<br>R=\\begin{bmatrix}<br>I &amp; F \\\\<br>\\end{bmatrix}<br>$$</li><li>r=m=nAR=IN(A)={0},Ax=bb</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote><p>rnmbx<br>rmnAbbXxAmb(mn-m0x<br>AbAXbbr03bxyZ0bAAxyb1 2 3<br>AbXbX</p></blockquote>","site":{"data":{}},"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><ul><li><p>3</p></li><li><p></p></li></ul><p>$$\\begin{cases}<br>2x-y=0\\\\<br>-x+2y=3\\\\<br>\\end{cases}<br>$$</p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><p>$$<br>\\begin{bmatrix}<br>2 &amp; -1 \\\\<br>-1 &amp; 2 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x \\\\<br>y \\\\<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>0 \\\\<br>3 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li></ul><p>$$<br>Ax=b<br>$$</p><ul><li>nnn</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123759373.png\" alt=\"mark\"></p><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><p><br>$$<br>x<br>\\begin{bmatrix}<br>2 \\\\<br>-1 \\\\<br>\\end{bmatrix}<br>+y<br>\\begin{bmatrix}<br>-1 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>=<br>\\begin{bmatrix}<br>0 \\\\<br>3 \\\\<br>\\end{bmatrix}<br>$$</p></li><li><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/123823434.png\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>x,ybx(n)</li><li>(n)(nonsingular matrix)(invertible)</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$\\begin{cases}<br>x+2y+z=2\\\\<br>3x+8y+z=12\\\\<br>4y+z=2\\\\<br>\\end{cases}<br>$$</li><li>A<br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>3 &amp; 8 &amp; 1 \\\\<br>0 &amp; 4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>0 &amp; 2 &amp; -2 \\\\<br>0 &amp; 4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 1 \\\\<br>0 &amp; 2 &amp; -2 \\\\<br>0 &amp; 0 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</li><li></li><li>ii(pivot)AU(Upper Triangle</li><li><br>$$<br>\\left[\\begin{array}{c|c}<br>A &amp; X \\\\<br>\\end{array}\\right]<br>$$</li><li>(Augmented matrix)bc</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=bUx=cUx=c</li><li>Uz</li><li>zy</li><li>z,yx</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$<br>\\begin{bmatrix}<br>a &amp; b &amp; c \\\\<br>\\end{bmatrix}*A<br>$$</p><ul><li>aA1+bA2+cA3</li></ul><p><br>$$<br>A*\\begin{bmatrix}<br>a \\\\<br>b \\\\<br>c \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>aA1+bA2+cA3</li><li>A</li></ul><p>$$<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}*A<br>$$</p><ul><li>A</li></ul><p>$$<br>A*\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li><li>ij$E_{ij}$</li><li><br>$$<br>E_{32}E_{31}E_{21}A=U<br>$$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>A*B=C<br>$$</li><li> $C_{ij}=\\sum_iA_{ik}B_{kj}$</li><li>CA,BBAC</li><li>CB,AABC</li><li>ABC</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$A^{-1}$,$AA^{-1}=I$,I</li><li></li><li>X,$AX=0$,A</li><li>:A|IAIIA<ul><li><br>$$<br>EA=I \\\\<br>E=A^{-1} \\\\<br>EI=A^{-1} \\\\<br>$$</li></ul></li></ul><h1 id=\"ALU\"><a href=\"#ALU\" class=\"headerlink\" title=\"ALU\"></a><font size=\"5\">ALU</font></h1><h2 id=\"LU\"><a href=\"#LU\" class=\"headerlink\" title=\"LU\"></a>LU</h2><ul><li>$(AB)^{-1}=B^{-1}A^{-1}$</li><li>A$A^T$,<br>$$<br>AA^{-1}=I \\\\<br>(A^{-1})^TA^T=I \\\\<br>(A^T)^{-1}=(A^{-1})^T \\\\<br>$$</li><li></li><li>A=LU,UAL.3*3<br>$$<br>E_{32}E_{31}E_{21}A=U \\\\<br>L: \\\\<br>L=E_{21}^{-1}E_{31}^{-1}E_{32}^{-1} \\\\<br>$$</li><li>A=LUEA=ULE,nn-1</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>()<br>$$<br>\\sum_{i=1}^{n}i*(i-1) \\approx \\sum_{i=1}^{n}i^2 \\approx \\frac 13 n^3<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>3*36()</li><li>$P^{-1}=P^T$</li><li>66</li><li>n*nn!</li></ul><h1 id=\"R\"><a href=\"#R\" class=\"headerlink\" title=\"R\"></a>R</h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>A=LU,L1U0</li><li>PA=LUlu</li><li>P(Permutation)n*nn!</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$A^T$$A_{ij}=A_{ji}^T$</li><li>$(AB)^T=B^TA^T$</li><li>(symmetric),$A^T=A$</li><li>A$AA^T$,$(A^TA)^T=(A^TA^{TT})=(A^TA)$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><strong></strong></li><li>$R^2$</li><li>$R^2$(0,0)</li><li>$R^2$(),</li><li>$R^2$$R^2$()</li><li>$R^2$<ul><li>$R^2$</li><li>($R^1$)</li><li>(0,0),Z</li></ul></li><li>$R^3$<ul><li>$R^3$</li><li>($R^1$)</li><li></li><li>(0,0,0)</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$<br>A=\\begin{bmatrix}<br>1 &amp; 3 \\\\<br>2 &amp; 3 \\\\<br>4 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>$R^3$(),,C(A)(0,0,0)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170122/203313042.png\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>PL$P \\bigcup L$$P \\bigcap L$</li><li><p>ST,$S \\bigcap T$</p></li><li><p><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</p></li><li>C(A)$R^4$</li><li></li><li>Ax=bb?bx<ul><li>3$R^4$<strong></strong></li><li>b=(0,0,0,0)b=(1,2,3,4),(x1,x2,x3)bxb<strong>bAx</strong></li></ul></li><li>,</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>(null space)AAx=0x</li><li>A,x(b=0),<br>$$<br>\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>X_1 \\\\<br>X_2 \\\\<br>X_3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 \\\\<br>0 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li><li>(0,0,0)(1,1,-1),(c,c,-c)</li><li>(?):Ax=0</li></ul><p>$$<br>\\begin{bmatrix}<br>1 &amp; 1 &amp; 2 \\\\<br>2 &amp; 1 &amp; 3 \\\\<br>3 &amp; 1 &amp; 5 \\\\<br>4 &amp; 1 &amp; 5 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>X_1 \\\\<br>X_2 \\\\<br>X_3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>3 \\\\<br>4 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>b(1,0,0),</li><li>(0,0,0),(1,0,0),(0,-1,1),b=0</li><li><ul><li></li><li>x</li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=0</li><li>:<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>2 &amp; 4 &amp; 6 &amp; 8 \\\\<br>3 &amp; 6 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}<br>$$</li><li></li><li>,</li><li>,</li></ul><p>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li>,<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=U<br>$$</li><li>00(0)2()(1,3)(2,4)</li><li>Ux=0,</li><li>x2,x4<strong></strong>x1,x3</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>x2=1,x4=0,x=(-2,1,0,0),(-2,1,0,0)()?x2=0,x4=1,x=(2,0,-2,1)</li><li>(1,0)(-2,1,0,0),(0,1)(2,0,-2,1)</li><li>(1000)<strong></strong>,a*(-2,1,0,0)+b*(2,0,-2,1)</li><li>rrm*nAn-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>U<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>(reduced row echelon form RREF)0<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 0 &amp; -2 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>1,b=0,2<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 2 &amp; 0 &amp; -2 \\\\<br>0 &amp; 0 &amp; 1 &amp; 2 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=R<br>$$</li><li></li><li></li><li>:Rx=0()F<br>$$<br>R=\\begin{bmatrix}<br>I &amp; F \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$<br>I()F(),RrIrFn-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>NaNaNx<br>$$<br>R*N=0<br>$$<br>$$<br>N=\\begin{bmatrix}<br>-F \\\\<br>I \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>I &amp; F \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x_{pivot} \\\\<br>x_{free} \\\\<br>\\end{bmatrix}=0<br>$$<br>$$<br>x_{pivot}=-F<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>2 &amp; 4 &amp; 6 \\\\<br>2 &amp; 6 &amp; 8 \\\\<br>2 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 2 &amp; 2 \\\\<br>0 &amp; 4 &amp; 4 \\\\<br>\\end{bmatrix}<br>$$</li><li>()<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 \\\\<br>0 &amp; 2 &amp; 2 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=U<br>$$</li><li>r=2,1,1x<br>$$<br>x=\\begin{bmatrix}<br>-1 \\\\<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>cx,x</li><li>U<br>$$<br>U=\\begin{bmatrix}<br>1 &amp; 0 &amp; 1 \\\\<br>0 &amp; 1 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}=R=<br>\\begin{bmatrix}<br>I &amp; F \\\\<br>0 &amp; 0 \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li></ul><p>$$<br>F=\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix}=U<br>$$</p><p>$$<br>x=\\begin{bmatrix}<br>-F \\\\<br>I \\\\<br>\\end{bmatrix}=N<br>$$</p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>$$\\begin{cases}<br>x_1+2x_2+2x_3+2x_4=b_1\\\\<br>2x_1+4x_2+6x_3+8x_4=b_2\\\\<br>3x_1+6x_2+8x_3+10x_4=b_3\\\\<br>\\end{cases}<br>$$</p><ul><li><br>$$<br>\\left[\\begin{array}{c c c c|c}<br>1 &amp; 2 &amp; 2 &amp; 2 &amp; b_1 \\\\<br>2 &amp; 4 &amp; 6 &amp; 8 &amp; b_2 \\\\<br>3 &amp; 6 &amp; 8 &amp; 10 &amp; b_3 \\\\<br>\\end{array}\\right]<br>$$</li><li>:<br>$$<br>\\left[\\begin{array}{c c c c|c}<br>1 &amp; 2 &amp; 2 &amp; 2 &amp; b_1 \\\\<br>0 &amp; 0 &amp; 2 &amp; 4 &amp; b_2-2b_1 \\\\<br>0 &amp; 0 &amp; 0 &amp; 0 &amp; b_3-b_2-b_1 \\\\<br>\\end{array}\\right]<br>$$</li><li></li><li>bbA</li><li><strong>A0bb</strong></li><li>Ax=b<ul><li>0$x_2x_4$0$x_1x_3$-21.5</li><li></li><li>$Ax_{particular}=b \\\\ Ax_{nullspace}=0 \\\\ A(x_{particular}+x_{nullspace})=b$</li><li>(-2,0,1.5,0),(-2,1,0,0)(2,0,-2,1)</li><li><br>$$<br>x_{complete}=<br>\\begin{bmatrix}<br>-2 \\\\<br>0 \\\\<br>1.5 \\\\<br>0 \\\\<br>\\end{bmatrix}+<br>c_1\\begin{bmatrix}<br>-2 \\\\<br>1\\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}+<br>c_2\\begin{bmatrix}<br>2 \\\\<br>0 \\\\<br>-2 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>4</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>rm*nr&lt;=mr&lt;=n r,r=min(m,n)</li><li>r=n&lt;m <strong>N(A)={0}</strong>,Ax=b(b)R<br>$$<br>R=\\begin{bmatrix}<br>I \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li><li>r=m&lt;nbAx=bn-rn-m,r<br>$$<br>R=\\begin{bmatrix}<br>I &amp; F \\\\<br>\\end{bmatrix}<br>$$</li><li>r=m=nAR=IN(A)={0},Ax=bb</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><blockquote><p>rnmbx<br>rmnAbbXxAmb(mn-m0x<br>AbAXbbr03bxyZ0bAAxyb1 2 3<br>AbXbX</p></blockquote>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sun Sep 16 2018 21:26:45 GMT+0800 ()","title":"MIT1","path":"2017/01/21/LinearAlgebra1/","eyeCatchImage":null,"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><ul><li><p>3</p></li><li><p></p></li></ul><p>$$\\begin{cases}<br>2x-y=0\\\\<br>-x+2y=3\\\\<br>\\end{cases}<br>$$</p>","date":"2017-01-21T03:45:28.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","linearalgebra"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Lagrange,KTT,PCA,SVM","date":"2017-03-18T03:20:35.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170318/112133081.png"],"html":true,"_content":"***\nKTTPCASVM\nwikipedia\n<!--more-->\n\n# \n-\t\n\t$$\n\tg(x,y)=c \\\\\n\tf(x,y) \\\\\n\t$$\n\t\n-\tf()\n-\t()\n\t$$\n\t\\nabla f (x, y) = \\nabla (\\lambda \\left(g \\left(x, y \\right) - c \\right))\n\t$$\n\t$\\lambda$0\n\t$ F(x,y)=\\nabla \\Big[f \\left(x, y \\right) + \\lambda \\left(g \\left(x, y \\right) - c \\right) \\Big] $\n-\t$(x,y,\\lambda)$$F(x,y)=f(x,y)$0()\n-\t$-\\frac{\\partial \\Lambda}{\\partial {c_k}} = \\lambda_k$\n\n# --\n-\tKTT\n-\t\n\t$$\n\t: \\\\\n\th_j(X)=0 j=1,2,...,p \\\\\n\tg_k(X)\\leq 0 k=1,2,...q \\\\\n\tf(X) \\\\\n\t$$\n-\t\n\t$$\n\tL(X,\\lambda ,\\mu)=f(X)+\\sum _{j=1}^p \\lambda _j h_j(X) + \\sum _{k=1}^q \\mu g_k(X)\n\t$$\n-\tKTT:\n\t$$\n\t\\frac{dL}{dX}=0 \\\\\n\t\\lambda _j \\neq 0 \\\\\n\t\\mu _k \\geq 0 \\\\\n\t\\mu _k g_k(X)=0 \\\\\n\th_j(X)=0 \\\\\n\tg_k(X) \\leq 0\\\\\n\t$$\n\n# PCA\n-\tPCAPrincipal Component Analysis\n-\t$x_1,...,x_p$p$\\xi _1,....,\\xi _p$\n-\t\n\t$$\n\t\\xi _i = \\sum _{j=1}^{p}  \\alpha _{ij} x_j = \\alpha _i^T x\n\t$$\n-\t1\n\t$$\n\t\\alpha _i^T \\alpha _i=1\n\t$$\n-\tAA\n-\t$\\alpha _i^T \\alpha _i=1$$var(\\xi _i)$\n-\ti=1()i=2,$E[\\xi _2 \\xi _1\\-E[\\xi _1][\\xi _2]]=0$\n-\tp\n-\tPCAPCAk(k<q)\n-\tkPCA\n-\tPCAK-L\t\n\n# SVM\n-\t\n-\t$w^Tx+b=0$wb\n-\tSVM\n\t$$\n\t\\begin{cases}\n\tw^Tx_i+b \\geq +1, y_i=+1 \\\\\n\tw^Tx_i+b \\leq -1, y_i=-1 \\\\\n\t\\end{cases}\n\t$$\n\t$\\frac{2}{||w||}$\n\t\n\t$$\n\tmin_{w,b} \\frac 12 {||w||}^2 \\\\\n\ts.t. y_i(w^Tx_i+b) \\geq 1,i=1,2,...,m \\\\\n\t$$\n\t:[](http://thinkwee.top/2017/02/12/StatisticalLearningNote/#%E7%BA%BF%E6%80%A7%E5%8F%AF%E5%88%86%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E4%B8%8E%E7%A1%AC%E9%97%B4%E9%9A%94%E6%9C%80%E5%A4%A7%E5%8C%96)\n-\t\n\t$$\n\tL(w,b,\\alpha )=\\frac 12 {||w||}^2+\\sum _{i=1}^{m} \\alpha _i (1-y_i(w^Tx_i+b))\n\t$$\n\t$\\alpha$w,b\n\t$$\n\tmax _{\\alpha } \\sum _{i=1}^m \\alpha _i -\\frac 12 \\sum _{i=1}^m \\sum _{j=1}^m \\alpha _i \\alpha _j y_i y_j x_i^T x_j \\\\\n\ts.t. \\sum _{i=1}^m \\alpha _i y_i=0, \\\\\n\t\\alpha _i \\geq 0,i=1,2,...,m \\\\\n\t$$\n\tKTTSMO\n-\t","source":"_posts/Lagrange.md","raw":"---\ntitle: Lagrange,KTT,PCA,SVM\ndate: 2017-03-18 11:20:35\ncategories: \ntags:\n  - code\n  - machinelearning\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/20170318/112133081.png\nhtml: true\n---\n***\nKTTPCASVM\nwikipedia\n<!--more-->\n\n# \n-\t\n\t$$\n\tg(x,y)=c \\\\\n\tf(x,y) \\\\\n\t$$\n\t\n-\tf()\n-\t()\n\t$$\n\t\\nabla f (x, y) = \\nabla (\\lambda \\left(g \\left(x, y \\right) - c \\right))\n\t$$\n\t$\\lambda$0\n\t$ F(x,y)=\\nabla \\Big[f \\left(x, y \\right) + \\lambda \\left(g \\left(x, y \\right) - c \\right) \\Big] $\n-\t$(x,y,\\lambda)$$F(x,y)=f(x,y)$0()\n-\t$-\\frac{\\partial \\Lambda}{\\partial {c_k}} = \\lambda_k$\n\n# --\n-\tKTT\n-\t\n\t$$\n\t: \\\\\n\th_j(X)=0 j=1,2,...,p \\\\\n\tg_k(X)\\leq 0 k=1,2,...q \\\\\n\tf(X) \\\\\n\t$$\n-\t\n\t$$\n\tL(X,\\lambda ,\\mu)=f(X)+\\sum _{j=1}^p \\lambda _j h_j(X) + \\sum _{k=1}^q \\mu g_k(X)\n\t$$\n-\tKTT:\n\t$$\n\t\\frac{dL}{dX}=0 \\\\\n\t\\lambda _j \\neq 0 \\\\\n\t\\mu _k \\geq 0 \\\\\n\t\\mu _k g_k(X)=0 \\\\\n\th_j(X)=0 \\\\\n\tg_k(X) \\leq 0\\\\\n\t$$\n\n# PCA\n-\tPCAPrincipal Component Analysis\n-\t$x_1,...,x_p$p$\\xi _1,....,\\xi _p$\n-\t\n\t$$\n\t\\xi _i = \\sum _{j=1}^{p}  \\alpha _{ij} x_j = \\alpha _i^T x\n\t$$\n-\t1\n\t$$\n\t\\alpha _i^T \\alpha _i=1\n\t$$\n-\tAA\n-\t$\\alpha _i^T \\alpha _i=1$$var(\\xi _i)$\n-\ti=1()i=2,$E[\\xi _2 \\xi _1\\-E[\\xi _1][\\xi _2]]=0$\n-\tp\n-\tPCAPCAk(k<q)\n-\tkPCA\n-\tPCAK-L\t\n\n# SVM\n-\t\n-\t$w^Tx+b=0$wb\n-\tSVM\n\t$$\n\t\\begin{cases}\n\tw^Tx_i+b \\geq +1, y_i=+1 \\\\\n\tw^Tx_i+b \\leq -1, y_i=-1 \\\\\n\t\\end{cases}\n\t$$\n\t$\\frac{2}{||w||}$\n\t\n\t$$\n\tmin_{w,b} \\frac 12 {||w||}^2 \\\\\n\ts.t. y_i(w^Tx_i+b) \\geq 1,i=1,2,...,m \\\\\n\t$$\n\t:[](http://thinkwee.top/2017/02/12/StatisticalLearningNote/#%E7%BA%BF%E6%80%A7%E5%8F%AF%E5%88%86%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E4%B8%8E%E7%A1%AC%E9%97%B4%E9%9A%94%E6%9C%80%E5%A4%A7%E5%8C%96)\n-\t\n\t$$\n\tL(w,b,\\alpha )=\\frac 12 {||w||}^2+\\sum _{i=1}^{m} \\alpha _i (1-y_i(w^Tx_i+b))\n\t$$\n\t$\\alpha$w,b\n\t$$\n\tmax _{\\alpha } \\sum _{i=1}^m \\alpha _i -\\frac 12 \\sum _{i=1}^m \\sum _{j=1}^m \\alpha _i \\alpha _j y_i y_j x_i^T x_j \\\\\n\ts.t. \\sum _{i=1}^m \\alpha _i y_i=0, \\\\\n\t\\alpha _i \\geq 0,i=1,2,...,m \\\\\n\t$$\n\tKTTSMO\n-\t","slug":"Lagrange","published":1,"updated":"2018-08-28T09:43:27.016Z","comments":1,"layout":"post","link":"","_id":"cjmd072ce0007qcw6rbhpipf9","content":"<hr><p>KTTPCASVM<br>wikipedia<br><a id=\"more\"></a></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br>$$<br>g(x,y)=c \\\\<br>f(x,y) \\\\<br>$$<br></li><li>f()</li><li>()<br>$$<br>\\nabla f (x, y) = \\nabla (\\lambda \\left(g \\left(x, y \\right) - c \\right))<br>$$<br>$\\lambda$0<br>$ F(x,y)=\\nabla \\Big[f \\left(x, y \\right) + \\lambda \\left(g \\left(x, y \\right) - c \\right) \\Big] $</li><li>$(x,y,\\lambda)$$F(x,y)=f(x,y)$0()</li><li>$-\\frac{\\partial \\Lambda}{\\partial {c_k}} = \\lambda_k$</li></ul><h1 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"--\"></a>--</h1><ul><li>KTT</li><li><br>$$<br>: \\\\<br>h_j(X)=0 j=1,2,,p \\\\<br>g_k(X)\\leq 0 k=1,2,q \\\\<br>f(X) \\\\<br>$$</li><li><br>$$<br>L(X,\\lambda ,\\mu)=f(X)+\\sum _{j=1}^p \\lambda _j h_j(X) + \\sum _{k=1}^q \\mu g_k(X)<br>$$</li><li>KTT:<br>$$<br>\\frac{dL}{dX}=0 \\\\<br>\\lambda _j \\neq 0 \\\\<br>\\mu _k \\geq 0 \\\\<br>\\mu _k g_k(X)=0 \\\\<br>h_j(X)=0 \\\\<br>g_k(X) \\leq 0\\\\<br>$$</li></ul><h1 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a>PCA</h1><ul><li>PCAPrincipal Component Analysis</li><li>$x_1,,x_p$p$\\xi _1,.,\\xi _p$</li><li><br>$$<br>\\xi _i = \\sum _{j=1}^{p} \\alpha _{ij} x_j = \\alpha _i^T x<br>$$</li><li>1<br>$$<br>\\alpha _i^T \\alpha _i=1<br>$$</li><li>AA</li><li>$\\alpha _i^T \\alpha _i=1$$var(\\xi _i)$</li><li>i=1()i=2,$E[\\xi _2 \\xi _1-E[\\xi _1][\\xi _2]]=0$</li><li>p</li><li>PCAPCAk(k&lt;q)</li><li>kPCA</li><li>PCAK-L</li></ul><h1 id=\"SVM\"><a href=\"#SVM\" class=\"headerlink\" title=\"SVM\"></a>SVM</h1><ul><li></li><li>$w^Tx+b=0$wb</li><li>SVM<br>$$<br>\\begin{cases}<br>w^Tx_i+b \\geq +1, y_i=+1 \\\\<br>w^Tx_i+b \\leq -1, y_i=-1 \\\\<br>\\end{cases}<br>$$<br>$\\frac{2}{||w||}$<br><br>$$<br>min_{w,b} \\frac 12 {||w||}^2 \\\\<br>s.t. y_i(w^Tx_i+b) \\geq 1,i=1,2,,m \\\\<br>$$<br>:<a href=\"http://thinkwee.top/2017/02/12/StatisticalLearningNote/#%E7%BA%BF%E6%80%A7%E5%8F%AF%E5%88%86%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E4%B8%8E%E7%A1%AC%E9%97%B4%E9%9A%94%E6%9C%80%E5%A4%A7%E5%8C%96\"></a></li><li><br>$$<br>L(w,b,\\alpha )=\\frac 12 {||w||}^2+\\sum _{i=1}^{m} \\alpha _i (1-y_i(w^Tx_i+b))<br>$$<br>$\\alpha$w,b<br>$$<br>max _{\\alpha } \\sum _{i=1}^m \\alpha _i -\\frac 12 \\sum _{i=1}^m \\sum _{j=1}^m \\alpha _i \\alpha _j y_i y_j x_i^T x_j \\\\<br>s.t. \\sum _{i=1}^m \\alpha _i y_i=0, \\\\<br>\\alpha _i \\geq 0,i=1,2,,m \\\\<br>$$<br>KTTSMO</li><li></li></ul>","site":{"data":{}},"excerpt":"<hr><p>KTTPCASVM<br>wikipedia<br>","more":"</p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br>$$<br>g(x,y)=c \\\\<br>f(x,y) \\\\<br>$$<br></li><li>f()</li><li>()<br>$$<br>\\nabla f (x, y) = \\nabla (\\lambda \\left(g \\left(x, y \\right) - c \\right))<br>$$<br>$\\lambda$0<br>$ F(x,y)=\\nabla \\Big[f \\left(x, y \\right) + \\lambda \\left(g \\left(x, y \\right) - c \\right) \\Big] $</li><li>$(x,y,\\lambda)$$F(x,y)=f(x,y)$0()</li><li>$-\\frac{\\partial \\Lambda}{\\partial {c_k}} = \\lambda_k$</li></ul><h1 id=\"--\"><a href=\"#--\" class=\"headerlink\" title=\"--\"></a>--</h1><ul><li>KTT</li><li><br>$$<br>: \\\\<br>h_j(X)=0 j=1,2,,p \\\\<br>g_k(X)\\leq 0 k=1,2,q \\\\<br>f(X) \\\\<br>$$</li><li><br>$$<br>L(X,\\lambda ,\\mu)=f(X)+\\sum _{j=1}^p \\lambda _j h_j(X) + \\sum _{k=1}^q \\mu g_k(X)<br>$$</li><li>KTT:<br>$$<br>\\frac{dL}{dX}=0 \\\\<br>\\lambda _j \\neq 0 \\\\<br>\\mu _k \\geq 0 \\\\<br>\\mu _k g_k(X)=0 \\\\<br>h_j(X)=0 \\\\<br>g_k(X) \\leq 0\\\\<br>$$</li></ul><h1 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a>PCA</h1><ul><li>PCAPrincipal Component Analysis</li><li>$x_1,,x_p$p$\\xi _1,.,\\xi _p$</li><li><br>$$<br>\\xi _i = \\sum _{j=1}^{p} \\alpha _{ij} x_j = \\alpha _i^T x<br>$$</li><li>1<br>$$<br>\\alpha _i^T \\alpha _i=1<br>$$</li><li>AA</li><li>$\\alpha _i^T \\alpha _i=1$$var(\\xi _i)$</li><li>i=1()i=2,$E[\\xi _2 \\xi _1-E[\\xi _1][\\xi _2]]=0$</li><li>p</li><li>PCAPCAk(k&lt;q)</li><li>kPCA</li><li>PCAK-L</li></ul><h1 id=\"SVM\"><a href=\"#SVM\" class=\"headerlink\" title=\"SVM\"></a>SVM</h1><ul><li></li><li>$w^Tx+b=0$wb</li><li>SVM<br>$$<br>\\begin{cases}<br>w^Tx_i+b \\geq +1, y_i=+1 \\\\<br>w^Tx_i+b \\leq -1, y_i=-1 \\\\<br>\\end{cases}<br>$$<br>$\\frac{2}{||w||}$<br><br>$$<br>min_{w,b} \\frac 12 {||w||}^2 \\\\<br>s.t. y_i(w^Tx_i+b) \\geq 1,i=1,2,,m \\\\<br>$$<br>:<a href=\"http://thinkwee.top/2017/02/12/StatisticalLearningNote/#%E7%BA%BF%E6%80%A7%E5%8F%AF%E5%88%86%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E4%B8%8E%E7%A1%AC%E9%97%B4%E9%9A%94%E6%9C%80%E5%A4%A7%E5%8C%96\"></a></li><li><br>$$<br>L(w,b,\\alpha )=\\frac 12 {||w||}^2+\\sum _{i=1}^{m} \\alpha _i (1-y_i(w^Tx_i+b))<br>$$<br>$\\alpha$w,b<br>$$<br>max _{\\alpha } \\sum _{i=1}^m \\alpha _i -\\frac 12 \\sum _{i=1}^m \\sum _{j=1}^m \\alpha _i \\alpha _j y_i y_j x_i^T x_j \\\\<br>s.t. \\sum _{i=1}^m \\alpha _i y_i=0, \\\\<br>\\alpha _i \\geq 0,i=1,2,,m \\\\<br>$$<br>KTTSMO</li><li></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Tue Aug 28 2018 17:43:27 GMT+0800 ()","title":"Lagrange,KTT,PCA,SVM","path":"2017/03/18/Lagrange/","eyeCatchImage":null,"excerpt":"<hr><p>KTTPCASVM<br>wikipedia<br>","date":"2017-03-18T03:20:35.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"MIT3","date":"2017-01-22T11:21:02.000Z","mathjax":true,"html":true,"_content":"\n***\n# \n\n## \n-\tA$detA|A|$\n-\t\n -\t$detI=1$\n -\t\n -\t1-1\n -\t0()\n -\t()\n -\t00(000)\n -\t$detA=0$A\n -\t$det(A+B) \\neq detA+detB \\\\ detAB=(detA)(detB)$\n -\t$detA^{-1}detA=1$\n -\t$detA^2=(detA)^2$\n -\t$det2A=2^n detA$\n -\t$detA^T=detA$()\n<!--more-->\n-\t\n\t$$\n\t\\begin{vmatrix}\n\t1 & 0 \\\\\n\t0 & 1 \\\\\n\t\\end{vmatrix}=1 \\\\\n\t\\begin{vmatrix}\n\t0 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{vmatrix}=-1 \\\\\n\t\\begin{vmatrix}\n\tta & tb \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\tt\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix} \\\\\n\t\\begin{vmatrix}\n\tt+a & t+b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\tt & t \\\\\n\tc & d \\\\\n\t\\end{vmatrix}\n\t$$\n-\t\n\t$$\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc-la & d-lb \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}-l\n\t\\begin{vmatrix}\n\ta & b \\\\\n\ta & b \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}\n\t$$\n-\t\n\t$$\n\tA=LU \\\\\n\t$$\n-\t $|U^TL^T|=|LU|$\n$$\n|U^T||L^T|=|L||U|\n$$ \n-\t \n\t\n\t\n## \n-\tU,()\n-\t\n-\t$d_1d_2d_3...d_nI$1\n-\t000\n\n## A little more\n-\t()\n\t\n# \n\n## \n-\t2*2\n\t$$\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\tc & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\tc & 0 \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\t0 & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\tc & 0 \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\t0 & d \\\\\n\t\\end{vmatrix} \\\\\n\t=0+ad-bc+0\n\t$$\n\t()\n-\t3*3270\n-\t\n\t$$\n\t\\begin{vmatrix}\n\ta & 0 & 0\\\\\n\t0 & 0 & b\\\\\n\t0 & c & 0\\\\\n\t\\end{vmatrix}\n\t$$\n\t$abc$$abc*detI=abc$$-abc$\n-\tn*n$n!$nn-1$n!$\n-\t$n!$\n\n\n## \n-\t$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(....)+a_{13}(....)$\n-\t\n-\t\n-\t$a_{ij}$$c_{ij}$\n-\t$i+j$\n-\t$detA=a_{11}C_{11}+a_{12}C_{12}+....+a_{1n}C_{1n}$\t\n\n# \n\n## \n-\t0\n-\t\n\t$$\n\tA^{-1}=\\frac{1}{detA}C^T\n\t$$\n\t$C_{ij}$$A_{ij}$\n-\t$AC^T=(detA)I$\n\t$$\n\t\\begin{bmatrix}\n\ta_{11} & ... & a_{1n} \\\\\n\ta_{n1} & ... & a_{nn} \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tc_{11} & ... & c_{n1} \\\\\n\tc_{1n} & ... & c_{nn} \\\\\n\t\\end{bmatrix}=\n\t\\begin{bmatrix}\n\tdetA & 0 & 0 \\\\\n\t0 & detA & 0 \\\\\n\t0 & 0 & detA \\\\\n\t\\end{bmatrix}\n\t$$\n\t$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(....)+a_{13}(....)$\n\t0abab0\n\t\n## \n-\tAx=b\n\t$$\n\tAx=b \\\\\n\tx=A^{-1}b \\\\\n\tx=\\frac{1}{detA}C^Tb \\\\\n\t \\\\\n\tx_1=\\frac{detB_1}{detA} \\\\\n\tx_3=\\frac{detB_2}{detA} \\\\\n\t... \\\\\n\t$$\n-\t$B_i$$A$ib\n\n## \n-\tA3*3\n-\t()\n-\t(1)1\n-\tQ,\n\t$$\n\tQQ^T=I \\\\\n\t|QQ^T|=|I| \\\\\n\t|Q||Q^T|=1 \\\\\n\t{|Q|}^2=1 \\\\\n\t|Q|=1 \\\\\n\t$$\n\tQ\n-\t(3a)\n-\t(2)\n-\t(3b)\n-\t(1,2,3a,3b)\n\t\n# \n\n## \n-\tAAxAx\n-\tAxx$Ax=\\lambda x$$x$$\\lambda$\n-\tA$\\lambda = 0$\n\n## \n-\tA$Ax$1$Ax=0$0.A10.\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t0 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =1, x=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\tAx=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t1 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =-1, x=\n\t\\begin{bmatrix}\n\t-1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\tAx=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t-1 \\\\\n\t\\end{bmatrix} \\\\\t\n\t$$\n-\tn*nn\n-\t(trace)\n-\t$Ax=\\lambda x$\n\t$$\n\t(A-\\lambda I)x=0 \\\\\n\t$$\n-\t$(A-\\lambda I)$ \n\t: \n\t$$\n\tdet(A-\\lambda I)=0 \\\\\n\t$$\n-\t$$\n\tIf \\qquad Ax=\\lambda x \\\\\n\tThen \\qquad (A+3I)x=(\\lambda +3)x \\\\\n\t$$\n-\tx$(\\lambda +3)$\n-\tA+BABAB\n-\tQ\n\t$$\n\tQ=\n\t\\begin{bmatrix}\n\t0 & -1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\ttrace=0=\\lambda _1 +\\lambda _2 \\\\\n\tdet=1=\\lambda _1 \\lambda _2 \\\\\n\t$$\n-\t $\\lambda _1\\lambda _2$ \n-\t()\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t3 & 1 \\\\\n\t0 & 3 \\\\\n\t\\end{bmatrix} \\\\\n\tdet(A-\\lambda I)=\n\t\\begin{vmatrix}\n\t3-\\lambda & 1 \\\\\n\t0 & 3-\\lambda \\\\\n\t\\end{vmatrix}\n\t==(3-\\lambda )^2=0 \\\\\n\t\\lambda _1=\\lambda _2=3 \\\\\n\tx_1=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n\t$$\n\t\n# A\n\n## \n-\tAnS\n-\tSn\n-\t$$\n\tAS=A[x_1,x_2...x_n]=[\\lambda _1 x_1,....\\lambda _n x_n] \\\\\n\t=[x_1,x_2,...x_n]\n\t\\begin{bmatrix}\n\t\\lambda _1 & 0 & ... & 0 \\\\\n\t0 & \\lambda _2 & ... & 0 \\\\\n\t... & ... & ... & ... \\\\\n\t0 & 0  & 0 & \\lambda _n \\\\\n\t\\end{bmatrix} \\\\\n\t=S \\Lambda \\\\\n\t$$\n\n\n-\tSn\n\t$$\n\tS^{-1}AS=\\Lambda \\\\\n\tA=S\\Lambda S^{-1} \\\\\n\t$$\n-\t$\\Lambda$$A=LU$$A=QR$\n-\t$$\n\tif \\qquad Ax=\\lambda x \\\\\n\tA^2 x=\\lambda AX=\\lambda ^2 x \\\\\n\tA^2=S\\Lambda S^{-1} S \\Lambda S^{-1}=S \\Lambda ^2 S^{-1} \\\\\n\t$$\n-\t$A^2$K\n-\tK\n-\t0()\n\t$$\n\tA^K \\rightarrow 0 \\quad as \\quad K \\rightarrow \\infty \\\\\n\tif \\quad all |\\lambda _i|<1 \\\\ \n\t$$\n-\t\n\tA\n-\tA$\\Lambda$A\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t2 & 1 \\\\\n\t0 & 2 \\\\\n\t\\end{bmatrix} \\\\\n\tdet(A-\\lambda I)=\n\t\\begin{vmatrix}\n\t2-\\lambda & 1 \\\\\n\t0 & 2-\\lambda \\\\\n\t\\end{vmatrix}=0 \\\\\n\t\\lambda =2 \\\\\n\tA-\\lambda I=\n\t\\begin{bmatrix}\n\t0 & 1 \\\\\n\t0 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t$A-\\lambda I$12\n-\t(1,0)\n\n## A\n-\tA\n-\t$$\n\tgive \\quad u_0 \\\\\n\tu_{k+1}=Au_k \\\\\n\tu_k=A^ku_0 \\\\\n\thow \\quad to \\quad solve \\quad u_k \\\\\n\tu_0=c_1x_1+c_2x_2+...+c_nx_n=SC \\\\\n\tAu_0=c_1 \\lambda _1 x_1 + c_2 \\lambda _2 x_2 +...+c_n \\lambda _n x_n \\\\\n\tA^{100}u_0=c_1 \\lambda _1^{100} x_1 + c_2 \\lambda _2^{100} x_2 +...+c_n \\lambda _n^{100} x_n \\\\\n\t=S\\Lambda ^{100} C \\\\\n\t=u_{100} \\\\\n\t$$\n-\tnn$u_0$C\n\t$$\n\tF_0=0 \\\\\n\tF_1=1 \\\\\n\tF_2=1 \\\\\n\tF_3=2 \\\\\n\tF_4=3 \\\\\n\tF_5=5 \\\\\n\t..... \\\\\n\tF_{100}=? \\\\\n\t$$\n-\t?\n\t$$\n\tF_{k+2}=F_{k+1}+F_k \\\\\n\tF_{k+1}=F_{k+1} \\\\\n\t$$\n-\t\n\t$$\n\tu_k=\n\t\\begin{bmatrix}\n\tF_{k+1} \\\\\n\tF_k \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t \n\t$$\n\tu_{k+1}=\n\t\\begin{bmatrix}\n\t1 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix}\n\tu_k \\\\\n\tA=\n\t\\begin{bmatrix}\n\t1 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =\\frac {1 \\pm \\sqrt 5}2 \\\\\n\t$$\n-\t\n-\t\"\"$A^{100}u_0=c_1 \\lambda _1^100 x_1 + c_2 \\lambda _2^100 x_2 +...+c_n \\lambda _n^100 x_n$$F_{100}$\n\t$$\n\tF_{100} \\approx c_1 {\\frac {1 + \\sqrt 5}2}^{100} \\\\\n\t$$\n-\t\n\t$$\n\tu_0=\n\t\\begin{bmatrix}\n\tF_1 \\\\\n\tF_0 \\\\\n\t\\end{bmatrix}=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n\t=c_1x_1+c_2x_2\n\t$$\n-\t$x_1,x_2$$F_{100}$\n\n## \n-\tAA$S\\Lambda S^{-1}$\n-\tAAA\n-\t\n-\t\n-\tAA$F_{100}$$F_{100} \\approx c_1 {(\\frac {1 + \\sqrt 5}2)}^{100}$\n-\t$F_0$$F_{100}$\n-\t\n\n# exp(At)\n\n## \n-\t\n-\t\n\t$$\n\t\\frac{du_1}{dt}=-u_1+2u_2 \\\\\n\t\\frac{du_2}{dt}=u_1-2u_2 \\\\\n\tu(0)=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t-1 & 2 \\\\\n\t1 & -2 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t$\\lambda=0$$\\lambda=-3$\n\t$$\n\tx_1=\n\t\\begin{bmatrix}\n\t2 \\\\\n\t1 \\\\\n\t\\end{bmatrix} \\\\\n\tx_2=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t-1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t\n\t$$\n\tu(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2\n\t$$\n-\t\n\t$$\n\t\\frac{du}{dt} \\\\\n\t=c_1 \\lambda _1 e^{\\lambda _1 t}x_1 \\\\\n\t=A c_1 e^{\\lambda _1 t}x_1 \\\\\n\tbecause \\quad A x_1=\\lambda _1 x_1 \\\\\n\t$$\n-\t$u_{k+1}=Au_k$$c_1\\lambda _1 ^k x_1+c_2 \\lambda _2 ^k x_2$\n-\t$\\frac {du}{dt}=Au$$u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2$\n-\t$c_1,c_2$CS\n-\tt$(\\frac 23,\\frac 13)$\n-\t0$e^{\\lambda t}$0\n-\t10\n-\t0\n-\t0\n-\t\n-\t0\n-\t00\n\t$$\n\t\\begin{bmatrix}\n\t-2 & 0 \\\\\n\t0 & 1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t0\n\t\n## exp(At)\t\n-\t$S,\\Lambda$\n-\tA$u_1,u_2$u\n-\t$$\n\t\\frac{du}{dt} = Au \\\\\n\tset \\quad u=Sv \\\\\n\tS \\frac{dv}{dt} = ASv \\\\\n\t\\frac{dv}{dt}=S^{-1}ASv=\\Lambda v \\\\\n\tv(t)=e^{\\Lambda t}v(0) \\\\\n\tu(t)=Se^{\\Lambda t}S^{-1}u(0) \\\\\n\t$$\n\t\n# ;\n\n## \n-\t\n\t$$\n\t\\begin{bmatrix}\n\t0.1 & 0.01 & 0.3 \\\\\n\t0.2 & 0.99 & 0.3 \\\\\n\t0.7 & 0 & 0.4 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t01\n-\t$\\lambda=1$1\n\n\n-\t\n\t$$\n\tu_k=A^ku_0=c_1\\lambda _1 ^kx_1+c_2\\lambda _2 ^kx_2+.....\n\t$$\n-\tA11k1010\n-\t1$\\lambda =1$\n-\t\n\t$$\n\tA-I=\n\t\\begin{bmatrix}\n\t-0.9 & 0.01 & 0.3 \\\\\n\t0.2 & -0.01 & 0.3 \\\\\n\t0.7 & 0 & -0.6 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t1$A-I$$A-I$0,1\n-\tA$u_{k+1}=Au_k$\n-\tuA\n\t$$\n\t\\begin{bmatrix}\n\tu_{cal} \\\\\n\tu_{mass} \\\\\n\t\\end{bmatrix}_{t=k+1}\n\t=\n\t\\begin{bmatrix}\n\t0.9 & 0.2 \\\\\n\t0.1 & 0.8 \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tu_{cal} \\\\\n\tu_{mass} \\\\\n\t\\end{bmatrix}_{t=k}\n\t$$\n-\t(k)80%20%10%\n-\tA\n\t$$\n\t\\begin{bmatrix}\n\t0.9 & 0.2 \\\\\n\t0.1 & 0.8 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda _1 =1 \\\\\n\t\\lambda _2 =0.7 \\\\\n\t$$\n-\t1$(2,1)$0.7(-1,1)\n-\t\n\t$$\n\tu_k=c_1\\*1^k\\*\n\t\\begin{bmatrix}\n\t2 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\t+c_2\\*(0.7)^k\\*\n\t\\begin{bmatrix}\n\t-1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t01000$u_0$$c_1,c_2$1000\n-\t1\n\n## \n-\t\n-\t$q_1....q_n$$v$\n-\t$x_1....x_n$\n\t$v=x_1q_1+x_2q_2+...x_nq_n$\n\t$v$$q_i$\n\t$$\n\tq_1^Tv=x_1q_1^Tq_1+0+0+0....+0=x_1 \\\\\n\t$$\n-\t\n\t$$\n\t\\begin{bmatrix}\n\tq_1 & q_2 & ... & q_n \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tx_1 \\\\\n\tx_2 \\\\\n\t... \\\\\n\tx_n \\\\\n\t\\end{bmatrix}=\n\tv \\\\\n\tQx=v \\\\\n\tx=Q^{-1}v=Q^Tv \\\\\n\t$$\n-\t\n-\t\n\t$$\n\tf(x)=a_0+a_1cosx+b_1sinx+a_2cos2x+b_2cos2x+.......\n\t$$\n-\t$coskx,sinkx$0()\n-\t\n-\t\n-\t$f(x)$$\\pi$\n\t$$\n\t\\int _0 ^{2\\pi} f(x)cosx dx=0+ a_1 \\int _0^{2\\pi}(cosx)^2dx+0+0...+0=\\pi a_1 \\\\\n\t$$\n\n# \n\n## \n-\t\n-\t$A=S\\Lambda S^{-1}$S\n-\t$A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T$Q\n-\t\n-\t$Ax=\\lambda x$A$Ax^{\\*}=\\lambda ^{\\*} x^{\\*}$\n-\t$\\lambda$$x^{\\* T}A^T=x^{\\* T} \\lambda ^{\\* T} $\n-\t$A=A^T$$x$$x^{\\* T}A\\lambda x^{\\* T}x$$\\lambda ^{\\*}=\\lambda$\n-\t$A=A^{\\* T}$\n-\t\n\t$$\n\tA=Q\\Lambda Q^{-1}=Q\\Lambda Q^T \\\\\n\t=\\lambda _1 q_1 q_1^T+\\lambda _2 q_2 q_2^T+.... \\\\\n\t$$\n-\t\n-\t\n\n## \n-\t\n-\t\n-\t\n\n\n\n\n\n","source":"_posts/LinearAlgebra3.md","raw":"---\ntitle: MIT3\ndate: 2017-01-22 19:21:02\ntags: [linearalgebra,math]\ncategories: \nmathjax: true\nhtml: true\n---\n\n***\n# \n\n## \n-\tA$detA|A|$\n-\t\n -\t$detI=1$\n -\t\n -\t1-1\n -\t0()\n -\t()\n -\t00(000)\n -\t$detA=0$A\n -\t$det(A+B) \\neq detA+detB \\\\ detAB=(detA)(detB)$\n -\t$detA^{-1}detA=1$\n -\t$detA^2=(detA)^2$\n -\t$det2A=2^n detA$\n -\t$detA^T=detA$()\n<!--more-->\n-\t\n\t$$\n\t\\begin{vmatrix}\n\t1 & 0 \\\\\n\t0 & 1 \\\\\n\t\\end{vmatrix}=1 \\\\\n\t\\begin{vmatrix}\n\t0 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{vmatrix}=-1 \\\\\n\t\\begin{vmatrix}\n\tta & tb \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\tt\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix} \\\\\n\t\\begin{vmatrix}\n\tt+a & t+b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\tt & t \\\\\n\tc & d \\\\\n\t\\end{vmatrix}\n\t$$\n-\t\n\t$$\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc-la & d-lb \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}-l\n\t\\begin{vmatrix}\n\ta & b \\\\\n\ta & b \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}\n\t$$\n-\t\n\t$$\n\tA=LU \\\\\n\t$$\n-\t $|U^TL^T|=|LU|$\n$$\n|U^T||L^T|=|L||U|\n$$ \n-\t \n\t\n\t\n## \n-\tU,()\n-\t\n-\t$d_1d_2d_3...d_nI$1\n-\t000\n\n## A little more\n-\t()\n\t\n# \n\n## \n-\t2*2\n\t$$\n\t\\begin{vmatrix}\n\ta & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\tc & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\tc & d \\\\\n\t\\end{vmatrix}=\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\tc & 0 \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\ta & 0 \\\\\n\t0 & d \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\tc & 0 \\\\\n\t\\end{vmatrix}+\n\t\\begin{vmatrix}\n\t0 & b \\\\\n\t0 & d \\\\\n\t\\end{vmatrix} \\\\\n\t=0+ad-bc+0\n\t$$\n\t()\n-\t3*3270\n-\t\n\t$$\n\t\\begin{vmatrix}\n\ta & 0 & 0\\\\\n\t0 & 0 & b\\\\\n\t0 & c & 0\\\\\n\t\\end{vmatrix}\n\t$$\n\t$abc$$abc*detI=abc$$-abc$\n-\tn*n$n!$nn-1$n!$\n-\t$n!$\n\n\n## \n-\t$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(....)+a_{13}(....)$\n-\t\n-\t\n-\t$a_{ij}$$c_{ij}$\n-\t$i+j$\n-\t$detA=a_{11}C_{11}+a_{12}C_{12}+....+a_{1n}C_{1n}$\t\n\n# \n\n## \n-\t0\n-\t\n\t$$\n\tA^{-1}=\\frac{1}{detA}C^T\n\t$$\n\t$C_{ij}$$A_{ij}$\n-\t$AC^T=(detA)I$\n\t$$\n\t\\begin{bmatrix}\n\ta_{11} & ... & a_{1n} \\\\\n\ta_{n1} & ... & a_{nn} \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tc_{11} & ... & c_{n1} \\\\\n\tc_{1n} & ... & c_{nn} \\\\\n\t\\end{bmatrix}=\n\t\\begin{bmatrix}\n\tdetA & 0 & 0 \\\\\n\t0 & detA & 0 \\\\\n\t0 & 0 & detA \\\\\n\t\\end{bmatrix}\n\t$$\n\t$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(....)+a_{13}(....)$\n\t0abab0\n\t\n## \n-\tAx=b\n\t$$\n\tAx=b \\\\\n\tx=A^{-1}b \\\\\n\tx=\\frac{1}{detA}C^Tb \\\\\n\t \\\\\n\tx_1=\\frac{detB_1}{detA} \\\\\n\tx_3=\\frac{detB_2}{detA} \\\\\n\t... \\\\\n\t$$\n-\t$B_i$$A$ib\n\n## \n-\tA3*3\n-\t()\n-\t(1)1\n-\tQ,\n\t$$\n\tQQ^T=I \\\\\n\t|QQ^T|=|I| \\\\\n\t|Q||Q^T|=1 \\\\\n\t{|Q|}^2=1 \\\\\n\t|Q|=1 \\\\\n\t$$\n\tQ\n-\t(3a)\n-\t(2)\n-\t(3b)\n-\t(1,2,3a,3b)\n\t\n# \n\n## \n-\tAAxAx\n-\tAxx$Ax=\\lambda x$$x$$\\lambda$\n-\tA$\\lambda = 0$\n\n## \n-\tA$Ax$1$Ax=0$0.A10.\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t0 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =1, x=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\tAx=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t1 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =-1, x=\n\t\\begin{bmatrix}\n\t-1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\tAx=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t-1 \\\\\n\t\\end{bmatrix} \\\\\t\n\t$$\n-\tn*nn\n-\t(trace)\n-\t$Ax=\\lambda x$\n\t$$\n\t(A-\\lambda I)x=0 \\\\\n\t$$\n-\t$(A-\\lambda I)$ \n\t: \n\t$$\n\tdet(A-\\lambda I)=0 \\\\\n\t$$\n-\t$$\n\tIf \\qquad Ax=\\lambda x \\\\\n\tThen \\qquad (A+3I)x=(\\lambda +3)x \\\\\n\t$$\n-\tx$(\\lambda +3)$\n-\tA+BABAB\n-\tQ\n\t$$\n\tQ=\n\t\\begin{bmatrix}\n\t0 & -1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\ttrace=0=\\lambda _1 +\\lambda _2 \\\\\n\tdet=1=\\lambda _1 \\lambda _2 \\\\\n\t$$\n-\t $\\lambda _1\\lambda _2$ \n-\t()\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t3 & 1 \\\\\n\t0 & 3 \\\\\n\t\\end{bmatrix} \\\\\n\tdet(A-\\lambda I)=\n\t\\begin{vmatrix}\n\t3-\\lambda & 1 \\\\\n\t0 & 3-\\lambda \\\\\n\t\\end{vmatrix}\n\t==(3-\\lambda )^2=0 \\\\\n\t\\lambda _1=\\lambda _2=3 \\\\\n\tx_1=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n\t$$\n\t\n# A\n\n## \n-\tAnS\n-\tSn\n-\t$$\n\tAS=A[x_1,x_2...x_n]=[\\lambda _1 x_1,....\\lambda _n x_n] \\\\\n\t=[x_1,x_2,...x_n]\n\t\\begin{bmatrix}\n\t\\lambda _1 & 0 & ... & 0 \\\\\n\t0 & \\lambda _2 & ... & 0 \\\\\n\t... & ... & ... & ... \\\\\n\t0 & 0  & 0 & \\lambda _n \\\\\n\t\\end{bmatrix} \\\\\n\t=S \\Lambda \\\\\n\t$$\n\n\n-\tSn\n\t$$\n\tS^{-1}AS=\\Lambda \\\\\n\tA=S\\Lambda S^{-1} \\\\\n\t$$\n-\t$\\Lambda$$A=LU$$A=QR$\n-\t$$\n\tif \\qquad Ax=\\lambda x \\\\\n\tA^2 x=\\lambda AX=\\lambda ^2 x \\\\\n\tA^2=S\\Lambda S^{-1} S \\Lambda S^{-1}=S \\Lambda ^2 S^{-1} \\\\\n\t$$\n-\t$A^2$K\n-\tK\n-\t0()\n\t$$\n\tA^K \\rightarrow 0 \\quad as \\quad K \\rightarrow \\infty \\\\\n\tif \\quad all |\\lambda _i|<1 \\\\ \n\t$$\n-\t\n\tA\n-\tA$\\Lambda$A\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t2 & 1 \\\\\n\t0 & 2 \\\\\n\t\\end{bmatrix} \\\\\n\tdet(A-\\lambda I)=\n\t\\begin{vmatrix}\n\t2-\\lambda & 1 \\\\\n\t0 & 2-\\lambda \\\\\n\t\\end{vmatrix}=0 \\\\\n\t\\lambda =2 \\\\\n\tA-\\lambda I=\n\t\\begin{bmatrix}\n\t0 & 1 \\\\\n\t0 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t$A-\\lambda I$12\n-\t(1,0)\n\n## A\n-\tA\n-\t$$\n\tgive \\quad u_0 \\\\\n\tu_{k+1}=Au_k \\\\\n\tu_k=A^ku_0 \\\\\n\thow \\quad to \\quad solve \\quad u_k \\\\\n\tu_0=c_1x_1+c_2x_2+...+c_nx_n=SC \\\\\n\tAu_0=c_1 \\lambda _1 x_1 + c_2 \\lambda _2 x_2 +...+c_n \\lambda _n x_n \\\\\n\tA^{100}u_0=c_1 \\lambda _1^{100} x_1 + c_2 \\lambda _2^{100} x_2 +...+c_n \\lambda _n^{100} x_n \\\\\n\t=S\\Lambda ^{100} C \\\\\n\t=u_{100} \\\\\n\t$$\n-\tnn$u_0$C\n\t$$\n\tF_0=0 \\\\\n\tF_1=1 \\\\\n\tF_2=1 \\\\\n\tF_3=2 \\\\\n\tF_4=3 \\\\\n\tF_5=5 \\\\\n\t..... \\\\\n\tF_{100}=? \\\\\n\t$$\n-\t?\n\t$$\n\tF_{k+2}=F_{k+1}+F_k \\\\\n\tF_{k+1}=F_{k+1} \\\\\n\t$$\n-\t\n\t$$\n\tu_k=\n\t\\begin{bmatrix}\n\tF_{k+1} \\\\\n\tF_k \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t \n\t$$\n\tu_{k+1}=\n\t\\begin{bmatrix}\n\t1 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix}\n\tu_k \\\\\n\tA=\n\t\\begin{bmatrix}\n\t1 & 1 \\\\\n\t1 & 0 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda =\\frac {1 \\pm \\sqrt 5}2 \\\\\n\t$$\n-\t\n-\t\"\"$A^{100}u_0=c_1 \\lambda _1^100 x_1 + c_2 \\lambda _2^100 x_2 +...+c_n \\lambda _n^100 x_n$$F_{100}$\n\t$$\n\tF_{100} \\approx c_1 {\\frac {1 + \\sqrt 5}2}^{100} \\\\\n\t$$\n-\t\n\t$$\n\tu_0=\n\t\\begin{bmatrix}\n\tF_1 \\\\\n\tF_0 \\\\\n\t\\end{bmatrix}=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix}\n\t=c_1x_1+c_2x_2\n\t$$\n-\t$x_1,x_2$$F_{100}$\n\n## \n-\tAA$S\\Lambda S^{-1}$\n-\tAAA\n-\t\n-\t\n-\tAA$F_{100}$$F_{100} \\approx c_1 {(\\frac {1 + \\sqrt 5}2)}^{100}$\n-\t$F_0$$F_{100}$\n-\t\n\n# exp(At)\n\n## \n-\t\n-\t\n\t$$\n\t\\frac{du_1}{dt}=-u_1+2u_2 \\\\\n\t\\frac{du_2}{dt}=u_1-2u_2 \\\\\n\tu(0)=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t0 \\\\\n\t\\end{bmatrix} \\\\\n\t$$\n-\t\n\t$$\n\tA=\n\t\\begin{bmatrix}\n\t-1 & 2 \\\\\n\t1 & -2 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t$\\lambda=0$$\\lambda=-3$\n\t$$\n\tx_1=\n\t\\begin{bmatrix}\n\t2 \\\\\n\t1 \\\\\n\t\\end{bmatrix} \\\\\n\tx_2=\n\t\\begin{bmatrix}\n\t1 \\\\\n\t-1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t\n\t$$\n\tu(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2\n\t$$\n-\t\n\t$$\n\t\\frac{du}{dt} \\\\\n\t=c_1 \\lambda _1 e^{\\lambda _1 t}x_1 \\\\\n\t=A c_1 e^{\\lambda _1 t}x_1 \\\\\n\tbecause \\quad A x_1=\\lambda _1 x_1 \\\\\n\t$$\n-\t$u_{k+1}=Au_k$$c_1\\lambda _1 ^k x_1+c_2 \\lambda _2 ^k x_2$\n-\t$\\frac {du}{dt}=Au$$u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2$\n-\t$c_1,c_2$CS\n-\tt$(\\frac 23,\\frac 13)$\n-\t0$e^{\\lambda t}$0\n-\t10\n-\t0\n-\t0\n-\t\n-\t0\n-\t00\n\t$$\n\t\\begin{bmatrix}\n\t-2 & 0 \\\\\n\t0 & 1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t0\n\t\n## exp(At)\t\n-\t$S,\\Lambda$\n-\tA$u_1,u_2$u\n-\t$$\n\t\\frac{du}{dt} = Au \\\\\n\tset \\quad u=Sv \\\\\n\tS \\frac{dv}{dt} = ASv \\\\\n\t\\frac{dv}{dt}=S^{-1}ASv=\\Lambda v \\\\\n\tv(t)=e^{\\Lambda t}v(0) \\\\\n\tu(t)=Se^{\\Lambda t}S^{-1}u(0) \\\\\n\t$$\n\t\n# ;\n\n## \n-\t\n\t$$\n\t\\begin{bmatrix}\n\t0.1 & 0.01 & 0.3 \\\\\n\t0.2 & 0.99 & 0.3 \\\\\n\t0.7 & 0 & 0.4 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t01\n-\t$\\lambda=1$1\n\n\n-\t\n\t$$\n\tu_k=A^ku_0=c_1\\lambda _1 ^kx_1+c_2\\lambda _2 ^kx_2+.....\n\t$$\n-\tA11k1010\n-\t1$\\lambda =1$\n-\t\n\t$$\n\tA-I=\n\t\\begin{bmatrix}\n\t-0.9 & 0.01 & 0.3 \\\\\n\t0.2 & -0.01 & 0.3 \\\\\n\t0.7 & 0 & -0.6 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t1$A-I$$A-I$0,1\n-\tA$u_{k+1}=Au_k$\n-\tuA\n\t$$\n\t\\begin{bmatrix}\n\tu_{cal} \\\\\n\tu_{mass} \\\\\n\t\\end{bmatrix}_{t=k+1}\n\t=\n\t\\begin{bmatrix}\n\t0.9 & 0.2 \\\\\n\t0.1 & 0.8 \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tu_{cal} \\\\\n\tu_{mass} \\\\\n\t\\end{bmatrix}_{t=k}\n\t$$\n-\t(k)80%20%10%\n-\tA\n\t$$\n\t\\begin{bmatrix}\n\t0.9 & 0.2 \\\\\n\t0.1 & 0.8 \\\\\n\t\\end{bmatrix} \\\\\n\t\\lambda _1 =1 \\\\\n\t\\lambda _2 =0.7 \\\\\n\t$$\n-\t1$(2,1)$0.7(-1,1)\n-\t\n\t$$\n\tu_k=c_1\\*1^k\\*\n\t\\begin{bmatrix}\n\t2 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\t+c_2\\*(0.7)^k\\*\n\t\\begin{bmatrix}\n\t-1 \\\\\n\t1 \\\\\n\t\\end{bmatrix}\n\t$$\n-\t01000$u_0$$c_1,c_2$1000\n-\t1\n\n## \n-\t\n-\t$q_1....q_n$$v$\n-\t$x_1....x_n$\n\t$v=x_1q_1+x_2q_2+...x_nq_n$\n\t$v$$q_i$\n\t$$\n\tq_1^Tv=x_1q_1^Tq_1+0+0+0....+0=x_1 \\\\\n\t$$\n-\t\n\t$$\n\t\\begin{bmatrix}\n\tq_1 & q_2 & ... & q_n \\\\\n\t\\end{bmatrix}\n\t\\begin{bmatrix}\n\tx_1 \\\\\n\tx_2 \\\\\n\t... \\\\\n\tx_n \\\\\n\t\\end{bmatrix}=\n\tv \\\\\n\tQx=v \\\\\n\tx=Q^{-1}v=Q^Tv \\\\\n\t$$\n-\t\n-\t\n\t$$\n\tf(x)=a_0+a_1cosx+b_1sinx+a_2cos2x+b_2cos2x+.......\n\t$$\n-\t$coskx,sinkx$0()\n-\t\n-\t\n-\t$f(x)$$\\pi$\n\t$$\n\t\\int _0 ^{2\\pi} f(x)cosx dx=0+ a_1 \\int _0^{2\\pi}(cosx)^2dx+0+0...+0=\\pi a_1 \\\\\n\t$$\n\n# \n\n## \n-\t\n-\t$A=S\\Lambda S^{-1}$S\n-\t$A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T$Q\n-\t\n-\t$Ax=\\lambda x$A$Ax^{\\*}=\\lambda ^{\\*} x^{\\*}$\n-\t$\\lambda$$x^{\\* T}A^T=x^{\\* T} \\lambda ^{\\* T} $\n-\t$A=A^T$$x$$x^{\\* T}A\\lambda x^{\\* T}x$$\\lambda ^{\\*}=\\lambda$\n-\t$A=A^{\\* T}$\n-\t\n\t$$\n\tA=Q\\Lambda Q^{-1}=Q\\Lambda Q^T \\\\\n\t=\\lambda _1 q_1 q_1^T+\\lambda _2 q_2 q_2^T+.... \\\\\n\t$$\n-\t\n-\t\n\n## \n-\t\n-\t\n-\t\n\n\n\n\n\n","slug":"LinearAlgebra3","published":1,"updated":"2018-09-18T13:44:27.280Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072cf0009qcw6pre1bacp","content":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A$detA|A|$</li><li><ul><li>$detI=1$</li><li></li><li>1-1</li><li>0()</li><li>()</li><li>00(000)</li><li>$detA=0$A</li><li>$det(A+B) \\neq detA+detB \\\\ detAB=(detA)(detB)$</li><li>$detA^{-1}detA=1$</li><li>$detA^2=(detA)^2$</li><li>$det2A=2^n detA$</li><li>$detA^T=detA$()<a id=\"more\"></a></li></ul></li><li><br>$$<br>\\begin{vmatrix}<br>1 &amp; 0 \\\\<br>0 &amp; 1 \\\\<br>\\end{vmatrix}=1 \\\\<br>\\begin{vmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{vmatrix}=-1 \\\\<br>\\begin{vmatrix}<br>ta &amp; tb \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>t\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix} \\\\<br>\\begin{vmatrix}<br>t+a &amp; t+b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>t &amp; t \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}<br>$$</li><li><br>$$<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c-la &amp; d-lb \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}-l<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>a &amp; b \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}<br>$$</li><li><br>$$<br>A=LU \\\\<br>$$</li><li> $|U^TL^T|=|LU|$<br>$$<br>|U^T||L^T|=|L||U|<br>$$</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>U,()</li><li></li><li>$d_1d_2d_3d_nI$1</li><li>000</li></ul><h2 id=\"A-little-more\"><a href=\"#A-little-more\" class=\"headerlink\" title=\"A little more\"></a>A little more</h2><ul><li>()</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>2*2<br>$$<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>c &amp; 0 \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>0 &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>c &amp; 0 \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>0 &amp; d \\\\<br>\\end{vmatrix} \\\\<br>=0+ad-bc+0<br>$$<br>()</li><li>3*3270</li><li><br>$$<br>\\begin{vmatrix}<br>a &amp; 0 &amp; 0\\\\<br>0 &amp; 0 &amp; b\\\\<br>0 &amp; c &amp; 0\\\\<br>\\end{vmatrix}<br>$$<br>$abc$$abc*detI=abc$$-abc$</li><li>n*n$n!$nn-1$n!$</li><li>$n!$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(.)+a_{13}(.)$</li><li></li><li></li><li>$a_{ij}$$c_{ij}$</li><li>$i+j$</li><li>$detA=a_{11}C_{11}+a_{12}C_{12}+.+a_{1n}C_{1n}$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>0</li><li><br>$$<br>A^{-1}=\\frac{1}{detA}C^T<br>$$<br>$C_{ij}$$A_{ij}$</li><li>$AC^T=(detA)I$<br>$$<br>\\begin{bmatrix}<br>a_{11} &amp;  &amp; a_{1n} \\\\<br>a_{n1} &amp;  &amp; a_{nn} \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>c_{11} &amp;  &amp; c_{n1} \\\\<br>c_{1n} &amp;  &amp; c_{nn} \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>detA &amp; 0 &amp; 0 \\\\<br>0 &amp; detA &amp; 0 \\\\<br>0 &amp; 0 &amp; detA \\\\<br>\\end{bmatrix}<br>$$<br>$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(.)+a_{13}(.)$<br>0abab0</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=b<br>$$<br>Ax=b \\\\<br>x=A^{-1}b \\\\<br>x=\\frac{1}{detA}C^Tb \\\\<br>\\\\<br>x_1=\\frac{detB_1}{detA} \\\\<br>x_3=\\frac{detB_2}{detA} \\\\<br> \\\\<br>$$</li><li>$B_i$$A$ib</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A3*3</li><li>()</li><li>(1)1</li><li>Q,<br>$$<br>QQ^T=I \\\\<br>|QQ^T|=|I| \\\\<br>|Q||Q^T|=1 \\\\<br>{|Q|}^2=1 \\\\<br>|Q|=1 \\\\<br>$$<br>Q</li><li>(3a)</li><li>(2)</li><li>(3b)</li><li>(1,2,3a,3b)</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AAxAx</li><li>Axx$Ax=\\lambda x$$x$$\\lambda$</li><li>A$\\lambda = 0$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A$Ax$1$Ax=0$0.A10.</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =1, x=<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>Ax=<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =-1, x=<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>Ax=<br>\\begin{bmatrix}<br>1 \\\\<br>-1 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>n*nn</li><li>(trace)</li><li>$Ax=\\lambda x$<br>$$<br>(A-\\lambda I)x=0 \\\\<br>$$</li><li>$(A-\\lambda I)$<br>:<br>$$<br>det(A-\\lambda I)=0 \\\\<br>$$</li><li>$$<br>If \\qquad Ax=\\lambda x \\\\<br>Then \\qquad (A+3I)x=(\\lambda +3)x \\\\<br>$$</li><li>x$(\\lambda +3)$</li><li>A+BABAB</li><li>Q<br>$$<br>Q=<br>\\begin{bmatrix}<br>0 &amp; -1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>trace=0=\\lambda _1 +\\lambda _2 \\\\<br>det=1=\\lambda _1 \\lambda _2 \\\\<br>$$</li><li> $\\lambda _1\\lambda _2$</li><li>()<br>$$<br>A=<br>\\begin{bmatrix}<br>3 &amp; 1 \\\\<br>0 &amp; 3 \\\\<br>\\end{bmatrix} \\\\<br>det(A-\\lambda I)=<br>\\begin{vmatrix}<br>3-\\lambda &amp; 1 \\\\<br>0 &amp; 3-\\lambda \\\\<br>\\end{vmatrix}<br>==(3-\\lambda )^2=0 \\\\<br>\\lambda _1=\\lambda _2=3 \\\\<br>x_1=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li></ul><h1 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AnS</li><li>Sn</li><li>$$<br>AS=A[x_1,x_2x_n]=[\\lambda _1 x_1,.\\lambda _n x_n] \\\\<br>=[x_1,x_2,x_n]<br>\\begin{bmatrix}<br>\\lambda _1 &amp; 0 &amp;  &amp; 0 \\\\<br>0 &amp; \\lambda _2 &amp;  &amp; 0 \\\\<br> &amp;  &amp;  &amp;  \\\\<br>0 &amp; 0 &amp; 0 &amp; \\lambda _n \\\\<br>\\end{bmatrix} \\\\<br>=S \\Lambda \\\\<br>$$</li></ul><ul><li>Sn<br>$$<br>S^{-1}AS=\\Lambda \\\\<br>A=S\\Lambda S^{-1} \\\\<br>$$</li><li>$\\Lambda$$A=LU$$A=QR$</li><li>$$<br>if \\qquad Ax=\\lambda x \\\\<br>A^2 x=\\lambda AX=\\lambda ^2 x \\\\<br>A^2=S\\Lambda S^{-1} S \\Lambda S^{-1}=S \\Lambda ^2 S^{-1} \\\\<br>$$</li><li>$A^2$K</li><li>K</li><li>0()<br>$$<br>A^K \\rightarrow 0 \\quad as \\quad K \\rightarrow \\infty \\\\<br>if \\quad all |\\lambda _i|&lt;1 \\\\<br>$$</li><li><br>A</li><li>A$\\Lambda$A</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>2 &amp; 1 \\\\<br>0 &amp; 2 \\\\<br>\\end{bmatrix} \\\\<br>det(A-\\lambda I)=<br>\\begin{vmatrix}<br>2-\\lambda &amp; 1 \\\\<br>0 &amp; 2-\\lambda \\\\<br>\\end{vmatrix}=0 \\\\<br>\\lambda =2 \\\\<br>A-\\lambda I=<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>$A-\\lambda I$12</li><li>(1,0)</li></ul><h2 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h2><ul><li>A</li><li>$$<br>give \\quad u_0 \\\\<br>u_{k+1}=Au_k \\\\<br>u_k=A^ku_0 \\\\<br>how \\quad to \\quad solve \\quad u_k \\\\<br>u_0=c_1x_1+c_2x_2++c_nx_n=SC \\\\<br>Au_0=c_1 \\lambda _1 x_1 + c_2 \\lambda _2 x_2 ++c_n \\lambda _n x_n \\\\<br>A^{100}u_0=c_1 \\lambda _1^{100} x_1 + c_2 \\lambda _2^{100} x_2 ++c_n \\lambda _n^{100} x_n \\\\<br>=S\\Lambda ^{100} C \\\\<br>=u_{100} \\\\<br>$$</li><li>nn$u_0$C<br>$$<br>F_0=0 \\\\<br>F_1=1 \\\\<br>F_2=1 \\\\<br>F_3=2 \\\\<br>F_4=3 \\\\<br>F_5=5 \\\\<br>.. \\\\<br>F_{100}=? \\\\<br>$$</li><li>?<br>$$<br>F_{k+2}=F_{k+1}+F_k \\\\<br>F_{k+1}=F_{k+1} \\\\<br>$$</li><li><br>$$<br>u_k=<br>\\begin{bmatrix}<br>F_{k+1} \\\\<br>F_k \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li><br>$$<br>u_{k+1}=<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}<br>u_k \\\\<br>A=<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =\\frac {1 \\pm \\sqrt 5}2 \\\\<br>$$</li><li></li><li>$A^{100}u_0=c_1 \\lambda _1^100 x_1 + c_2 \\lambda _2^100 x_2 ++c_n \\lambda _n^100 x_n$$F_{100}$<br>$$<br>F_{100} \\approx c_1 {\\frac {1 + \\sqrt 5}2}^{100} \\\\<br>$$</li><li><br>$$<br>u_0=<br>\\begin{bmatrix}<br>F_1 \\\\<br>F_0 \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>=c_1x_1+c_2x_2<br>$$</li><li>$x_1,x_2$$F_{100}$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AA$S\\Lambda S^{-1}$</li><li>AAA</li><li></li><li></li><li>AA$F_{100}$$F_{100} \\approx c_1 {(\\frac {1 + \\sqrt 5}2)}^{100}$</li><li>$F_0$$F_{100}$</li><li></li></ul><h1 id=\"exp-At\"><a href=\"#exp-At\" class=\"headerlink\" title=\"exp(At)\"></a>exp(At)</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><br>$$<br>\\frac{du_1}{dt}=-u_1+2u_2 \\\\<br>\\frac{du_2}{dt}=u_1-2u_2 \\\\<br>u(0)=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>-1 &amp; 2 \\\\<br>1 &amp; -2 \\\\<br>\\end{bmatrix}<br>$$</li><li>$\\lambda=0$$\\lambda=-3$<br>$$<br>x_1=<br>\\begin{bmatrix}<br>2 \\\\<br>1 \\\\<br>\\end{bmatrix} \\\\<br>x_2=<br>\\begin{bmatrix}<br>1 \\\\<br>-1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2<br>$$</li><li><br>$$<br>\\frac{du}{dt} \\\\<br>=c_1 \\lambda _1 e^{\\lambda _1 t}x_1 \\\\<br>=A c_1 e^{\\lambda _1 t}x_1 \\\\<br>because \\quad A x_1=\\lambda _1 x_1 \\\\<br>$$</li><li>$u_{k+1}=Au_k$$c_1\\lambda _1 ^k x_1+c_2 \\lambda _2 ^k x_2$</li><li>$\\frac {du}{dt}=Au$$u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2$</li><li>$c_1,c_2$CS</li><li>t$(\\frac 23,\\frac 13)$</li><li>0$e^{\\lambda t}$0</li><li>10</li><li>0</li><li>0</li><li></li><li>0</li><li>00<br>$$<br>\\begin{bmatrix}<br>-2 &amp; 0 \\\\<br>0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>0</li></ul><h2 id=\"exp-At\"><a href=\"#exp-At\" class=\"headerlink\" title=\"exp(At)\"></a>exp(At)</h2><ul><li>$S,\\Lambda$</li><li>A$u_1,u_2$u</li><li>$$<br>\\frac{du}{dt} = Au \\\\<br>set \\quad u=Sv \\\\<br>S \\frac{dv}{dt} = ASv \\\\<br>\\frac{dv}{dt}=S^{-1}ASv=\\Lambda v \\\\<br>v(t)=e^{\\Lambda t}v(0) \\\\<br>u(t)=Se^{\\Lambda t}S^{-1}u(0) \\\\<br>$$</li></ul><h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\";\"></a>;</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>\\begin{bmatrix}<br>0.1 &amp; 0.01 &amp; 0.3 \\\\<br>0.2 &amp; 0.99 &amp; 0.3 \\\\<br>0.7 &amp; 0 &amp; 0.4 \\\\<br>\\end{bmatrix}<br>$$</li><li>01</li><li>$\\lambda=1$1</li></ul><ul><li><br>$$<br>u_k=A^ku_0=c_1\\lambda _1 ^kx_1+c_2\\lambda _2 ^kx_2+..<br>$$</li><li>A11k1010</li><li>1$\\lambda =1$</li><li><br>$$<br>A-I=<br>\\begin{bmatrix}<br>-0.9 &amp; 0.01 &amp; 0.3 \\\\<br>0.2 &amp; -0.01 &amp; 0.3 \\\\<br>0.7 &amp; 0 &amp; -0.6 \\\\<br>\\end{bmatrix}<br>$$</li><li>1$A-I$$A-I$0,1</li><li>A$u_{k+1}=Au_k$</li><li>uA<br>$$<br>\\begin{bmatrix}<br>u_{cal} \\\\<br>u_{mass} \\\\<br>\\end{bmatrix}_{t=k+1}<br>=<br>\\begin{bmatrix}<br>0.9 &amp; 0.2 \\\\<br>0.1 &amp; 0.8 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>u_{cal} \\\\<br>u_{mass} \\\\<br>\\end{bmatrix}_{t=k}<br>$$</li><li>(k)80%20%10%</li><li>A<br>$$<br>\\begin{bmatrix}<br>0.9 &amp; 0.2 \\\\<br>0.1 &amp; 0.8 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda _1 =1 \\\\<br>\\lambda _2 =0.7 \\\\<br>$$</li><li>1$(2,1)$0.7(-1,1)</li><li><br>$$<br>u_k=c_1*1^k*<br>\\begin{bmatrix}<br>2 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>+c_2*(0.7)^k*<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>01000$u_0$$c_1,c_2$1000</li><li>1</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$q_1.q_n$$v$</li><li>$x_1.x_n$<br>$v=x_1q_1+x_2q_2+x_nq_n$<br>$v$$q_i$<br>$$<br>q_1^Tv=x_1q_1^Tq_1+0+0+0.+0=x_1 \\\\<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>q_1 &amp; q_2 &amp;  &amp; q_n \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x_1 \\\\<br>x_2 \\\\<br> \\\\<br>x_n \\\\<br>\\end{bmatrix}=<br>v \\\\<br>Qx=v \\\\<br>x=Q^{-1}v=Q^Tv \\\\<br>$$</li><li></li><li><br>$$<br>f(x)=a_0+a_1cosx+b_1sinx+a_2cos2x+b_2cos2x+.<br>$$</li><li>$coskx,sinkx$0()</li><li></li><li></li><li>$f(x)$$\\pi$<br>$$<br>\\int _0 ^{2\\pi} f(x)cosx dx=0+ a_1 \\int _0^{2\\pi}(cosx)^2dx+0+0+0=\\pi a_1 \\\\<br>$$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$A=S\\Lambda S^{-1}$S</li><li>$A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T$Q</li><li></li><li>$Ax=\\lambda x$A$Ax^{*}=\\lambda ^{*} x^{*}$</li><li>$\\lambda$$x^{* T}A^T=x^{* T} \\lambda ^{* T} $</li><li>$A=A^T$$x$$x^{* T}A\\lambda x^{* T}x$$\\lambda ^{*}=\\lambda$</li><li>$A=A^{* T}$</li><li><br>$$<br>A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T \\\\<br>=\\lambda _1 q_1 q_1^T+\\lambda _2 q_2 q_2^T+. \\\\<br>$$</li><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li></li></ul>","site":{"data":{}},"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A$detA|A|$</li><li><ul><li>$detI=1$</li><li></li><li>1-1</li><li>0()</li><li>()</li><li>00(000)</li><li>$detA=0$A</li><li>$det(A+B) \\neq detA+detB \\\\ detAB=(detA)(detB)$</li><li>$detA^{-1}detA=1$</li><li>$detA^2=(detA)^2$</li><li>$det2A=2^n detA$</li><li>$detA^T=detA$()","more":"</li></ul></li><li><br>$$<br>\\begin{vmatrix}<br>1 &amp; 0 \\\\<br>0 &amp; 1 \\\\<br>\\end{vmatrix}=1 \\\\<br>\\begin{vmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{vmatrix}=-1 \\\\<br>\\begin{vmatrix}<br>ta &amp; tb \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>t\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix} \\\\<br>\\begin{vmatrix}<br>t+a &amp; t+b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>t &amp; t \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}<br>$$</li><li><br>$$<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c-la &amp; d-lb \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}-l<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>a &amp; b \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}<br>$$</li><li><br>$$<br>A=LU \\\\<br>$$</li><li> $|U^TL^T|=|LU|$<br>$$<br>|U^T||L^T|=|L||U|<br>$$</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>U,()</li><li></li><li>$d_1d_2d_3d_nI$1</li><li>000</li></ul><h2 id=\"A-little-more\"><a href=\"#A-little-more\" class=\"headerlink\" title=\"A little more\"></a>A little more</h2><ul><li>()</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>2*2<br>$$<br>\\begin{vmatrix}<br>a &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>c &amp; d \\\\<br>\\end{vmatrix}=<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>c &amp; 0 \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>a &amp; 0 \\\\<br>0 &amp; d \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>c &amp; 0 \\\\<br>\\end{vmatrix}+<br>\\begin{vmatrix}<br>0 &amp; b \\\\<br>0 &amp; d \\\\<br>\\end{vmatrix} \\\\<br>=0+ad-bc+0<br>$$<br>()</li><li>3*3270</li><li><br>$$<br>\\begin{vmatrix}<br>a &amp; 0 &amp; 0\\\\<br>0 &amp; 0 &amp; b\\\\<br>0 &amp; c &amp; 0\\\\<br>\\end{vmatrix}<br>$$<br>$abc$$abc*detI=abc$$-abc$</li><li>n*n$n!$nn-1$n!$</li><li>$n!$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(.)+a_{13}(.)$</li><li></li><li></li><li>$a_{ij}$$c_{ij}$</li><li>$i+j$</li><li>$detA=a_{11}C_{11}+a_{12}C_{12}+.+a_{1n}C_{1n}$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>0</li><li><br>$$<br>A^{-1}=\\frac{1}{detA}C^T<br>$$<br>$C_{ij}$$A_{ij}$</li><li>$AC^T=(detA)I$<br>$$<br>\\begin{bmatrix}<br>a_{11} &amp;  &amp; a_{1n} \\\\<br>a_{n1} &amp;  &amp; a_{nn} \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>c_{11} &amp;  &amp; c_{n1} \\\\<br>c_{1n} &amp;  &amp; c_{nn} \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>detA &amp; 0 &amp; 0 \\\\<br>0 &amp; detA &amp; 0 \\\\<br>0 &amp; 0 &amp; detA \\\\<br>\\end{bmatrix}<br>$$<br>$det=a_{11}(a_{22}a_{33}-a_{23}a_{32})+a_{12}(.)+a_{13}(.)$<br>0abab0</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Ax=b<br>$$<br>Ax=b \\\\<br>x=A^{-1}b \\\\<br>x=\\frac{1}{detA}C^Tb \\\\<br>\\\\<br>x_1=\\frac{detB_1}{detA} \\\\<br>x_3=\\frac{detB_2}{detA} \\\\<br> \\\\<br>$$</li><li>$B_i$$A$ib</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A3*3</li><li>()</li><li>(1)1</li><li>Q,<br>$$<br>QQ^T=I \\\\<br>|QQ^T|=|I| \\\\<br>|Q||Q^T|=1 \\\\<br>{|Q|}^2=1 \\\\<br>|Q|=1 \\\\<br>$$<br>Q</li><li>(3a)</li><li>(2)</li><li>(3b)</li><li>(1,2,3a,3b)</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AAxAx</li><li>Axx$Ax=\\lambda x$$x$$\\lambda$</li><li>A$\\lambda = 0$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A$Ax$1$Ax=0$0.A10.</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =1, x=<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>Ax=<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =-1, x=<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>Ax=<br>\\begin{bmatrix}<br>1 \\\\<br>-1 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>n*nn</li><li>(trace)</li><li>$Ax=\\lambda x$<br>$$<br>(A-\\lambda I)x=0 \\\\<br>$$</li><li>$(A-\\lambda I)$<br>:<br>$$<br>det(A-\\lambda I)=0 \\\\<br>$$</li><li>$$<br>If \\qquad Ax=\\lambda x \\\\<br>Then \\qquad (A+3I)x=(\\lambda +3)x \\\\<br>$$</li><li>x$(\\lambda +3)$</li><li>A+BABAB</li><li>Q<br>$$<br>Q=<br>\\begin{bmatrix}<br>0 &amp; -1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>trace=0=\\lambda _1 +\\lambda _2 \\\\<br>det=1=\\lambda _1 \\lambda _2 \\\\<br>$$</li><li> $\\lambda _1\\lambda _2$</li><li>()<br>$$<br>A=<br>\\begin{bmatrix}<br>3 &amp; 1 \\\\<br>0 &amp; 3 \\\\<br>\\end{bmatrix} \\\\<br>det(A-\\lambda I)=<br>\\begin{vmatrix}<br>3-\\lambda &amp; 1 \\\\<br>0 &amp; 3-\\lambda \\\\<br>\\end{vmatrix}<br>==(3-\\lambda )^2=0 \\\\<br>\\lambda _1=\\lambda _2=3 \\\\<br>x_1=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>$$</li></ul><h1 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AnS</li><li>Sn</li><li>$$<br>AS=A[x_1,x_2x_n]=[\\lambda _1 x_1,.\\lambda _n x_n] \\\\<br>=[x_1,x_2,x_n]<br>\\begin{bmatrix}<br>\\lambda _1 &amp; 0 &amp;  &amp; 0 \\\\<br>0 &amp; \\lambda _2 &amp;  &amp; 0 \\\\<br> &amp;  &amp;  &amp;  \\\\<br>0 &amp; 0 &amp; 0 &amp; \\lambda _n \\\\<br>\\end{bmatrix} \\\\<br>=S \\Lambda \\\\<br>$$</li></ul><ul><li>Sn<br>$$<br>S^{-1}AS=\\Lambda \\\\<br>A=S\\Lambda S^{-1} \\\\<br>$$</li><li>$\\Lambda$$A=LU$$A=QR$</li><li>$$<br>if \\qquad Ax=\\lambda x \\\\<br>A^2 x=\\lambda AX=\\lambda ^2 x \\\\<br>A^2=S\\Lambda S^{-1} S \\Lambda S^{-1}=S \\Lambda ^2 S^{-1} \\\\<br>$$</li><li>$A^2$K</li><li>K</li><li>0()<br>$$<br>A^K \\rightarrow 0 \\quad as \\quad K \\rightarrow \\infty \\\\<br>if \\quad all |\\lambda _i|&lt;1 \\\\<br>$$</li><li><br>A</li><li>A$\\Lambda$A</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>2 &amp; 1 \\\\<br>0 &amp; 2 \\\\<br>\\end{bmatrix} \\\\<br>det(A-\\lambda I)=<br>\\begin{vmatrix}<br>2-\\lambda &amp; 1 \\\\<br>0 &amp; 2-\\lambda \\\\<br>\\end{vmatrix}=0 \\\\<br>\\lambda =2 \\\\<br>A-\\lambda I=<br>\\begin{bmatrix}<br>0 &amp; 1 \\\\<br>0 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>$A-\\lambda I$12</li><li>(1,0)</li></ul><h2 id=\"A\"><a href=\"#A\" class=\"headerlink\" title=\"A\"></a>A</h2><ul><li>A</li><li>$$<br>give \\quad u_0 \\\\<br>u_{k+1}=Au_k \\\\<br>u_k=A^ku_0 \\\\<br>how \\quad to \\quad solve \\quad u_k \\\\<br>u_0=c_1x_1+c_2x_2++c_nx_n=SC \\\\<br>Au_0=c_1 \\lambda _1 x_1 + c_2 \\lambda _2 x_2 ++c_n \\lambda _n x_n \\\\<br>A^{100}u_0=c_1 \\lambda _1^{100} x_1 + c_2 \\lambda _2^{100} x_2 ++c_n \\lambda _n^{100} x_n \\\\<br>=S\\Lambda ^{100} C \\\\<br>=u_{100} \\\\<br>$$</li><li>nn$u_0$C<br>$$<br>F_0=0 \\\\<br>F_1=1 \\\\<br>F_2=1 \\\\<br>F_3=2 \\\\<br>F_4=3 \\\\<br>F_5=5 \\\\<br>.. \\\\<br>F_{100}=? \\\\<br>$$</li><li>?<br>$$<br>F_{k+2}=F_{k+1}+F_k \\\\<br>F_{k+1}=F_{k+1} \\\\<br>$$</li><li><br>$$<br>u_k=<br>\\begin{bmatrix}<br>F_{k+1} \\\\<br>F_k \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li><br>$$<br>u_{k+1}=<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix}<br>u_k \\\\<br>A=<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 0 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda =\\frac {1 \\pm \\sqrt 5}2 \\\\<br>$$</li><li></li><li>$A^{100}u_0=c_1 \\lambda _1^100 x_1 + c_2 \\lambda _2^100 x_2 ++c_n \\lambda _n^100 x_n$$F_{100}$<br>$$<br>F_{100} \\approx c_1 {\\frac {1 + \\sqrt 5}2}^{100} \\\\<br>$$</li><li><br>$$<br>u_0=<br>\\begin{bmatrix}<br>F_1 \\\\<br>F_0 \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>=c_1x_1+c_2x_2<br>$$</li><li>$x_1,x_2$$F_{100}$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AA$S\\Lambda S^{-1}$</li><li>AAA</li><li></li><li></li><li>AA$F_{100}$$F_{100} \\approx c_1 {(\\frac {1 + \\sqrt 5}2)}^{100}$</li><li>$F_0$$F_{100}$</li><li></li></ul><h1 id=\"exp-At\"><a href=\"#exp-At\" class=\"headerlink\" title=\"exp(At)\"></a>exp(At)</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><br>$$<br>\\frac{du_1}{dt}=-u_1+2u_2 \\\\<br>\\frac{du_2}{dt}=u_1-2u_2 \\\\<br>u(0)=<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li><br>$$<br>A=<br>\\begin{bmatrix}<br>-1 &amp; 2 \\\\<br>1 &amp; -2 \\\\<br>\\end{bmatrix}<br>$$</li><li>$\\lambda=0$$\\lambda=-3$<br>$$<br>x_1=<br>\\begin{bmatrix}<br>2 \\\\<br>1 \\\\<br>\\end{bmatrix} \\\\<br>x_2=<br>\\begin{bmatrix}<br>1 \\\\<br>-1 \\\\<br>\\end{bmatrix}<br>$$</li><li><br>$$<br>u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2<br>$$</li><li><br>$$<br>\\frac{du}{dt} \\\\<br>=c_1 \\lambda _1 e^{\\lambda _1 t}x_1 \\\\<br>=A c_1 e^{\\lambda _1 t}x_1 \\\\<br>because \\quad A x_1=\\lambda _1 x_1 \\\\<br>$$</li><li>$u_{k+1}=Au_k$$c_1\\lambda _1 ^k x_1+c_2 \\lambda _2 ^k x_2$</li><li>$\\frac {du}{dt}=Au$$u(t)=c_1e^{\\lambda _1 t}x_1+c_1e^{\\lambda _2 t}x_2$</li><li>$c_1,c_2$CS</li><li>t$(\\frac 23,\\frac 13)$</li><li>0$e^{\\lambda t}$0</li><li>10</li><li>0</li><li>0</li><li></li><li>0</li><li>00<br>$$<br>\\begin{bmatrix}<br>-2 &amp; 0 \\\\<br>0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>0</li></ul><h2 id=\"exp-At\"><a href=\"#exp-At\" class=\"headerlink\" title=\"exp(At)\"></a>exp(At)</h2><ul><li>$S,\\Lambda$</li><li>A$u_1,u_2$u</li><li>$$<br>\\frac{du}{dt} = Au \\\\<br>set \\quad u=Sv \\\\<br>S \\frac{dv}{dt} = ASv \\\\<br>\\frac{dv}{dt}=S^{-1}ASv=\\Lambda v \\\\<br>v(t)=e^{\\Lambda t}v(0) \\\\<br>u(t)=Se^{\\Lambda t}S^{-1}u(0) \\\\<br>$$</li></ul><h1 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\";\"></a>;</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>\\begin{bmatrix}<br>0.1 &amp; 0.01 &amp; 0.3 \\\\<br>0.2 &amp; 0.99 &amp; 0.3 \\\\<br>0.7 &amp; 0 &amp; 0.4 \\\\<br>\\end{bmatrix}<br>$$</li><li>01</li><li>$\\lambda=1$1</li></ul><ul><li><br>$$<br>u_k=A^ku_0=c_1\\lambda _1 ^kx_1+c_2\\lambda _2 ^kx_2+..<br>$$</li><li>A11k1010</li><li>1$\\lambda =1$</li><li><br>$$<br>A-I=<br>\\begin{bmatrix}<br>-0.9 &amp; 0.01 &amp; 0.3 \\\\<br>0.2 &amp; -0.01 &amp; 0.3 \\\\<br>0.7 &amp; 0 &amp; -0.6 \\\\<br>\\end{bmatrix}<br>$$</li><li>1$A-I$$A-I$0,1</li><li>A$u_{k+1}=Au_k$</li><li>uA<br>$$<br>\\begin{bmatrix}<br>u_{cal} \\\\<br>u_{mass} \\\\<br>\\end{bmatrix}_{t=k+1}<br>=<br>\\begin{bmatrix}<br>0.9 &amp; 0.2 \\\\<br>0.1 &amp; 0.8 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>u_{cal} \\\\<br>u_{mass} \\\\<br>\\end{bmatrix}_{t=k}<br>$$</li><li>(k)80%20%10%</li><li>A<br>$$<br>\\begin{bmatrix}<br>0.9 &amp; 0.2 \\\\<br>0.1 &amp; 0.8 \\\\<br>\\end{bmatrix} \\\\<br>\\lambda _1 =1 \\\\<br>\\lambda _2 =0.7 \\\\<br>$$</li><li>1$(2,1)$0.7(-1,1)</li><li><br>$$<br>u_k=c_1*1^k*<br>\\begin{bmatrix}<br>2 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>+c_2*(0.7)^k*<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>01000$u_0$$c_1,c_2$1000</li><li>1</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$q_1.q_n$$v$</li><li>$x_1.x_n$<br>$v=x_1q_1+x_2q_2+x_nq_n$<br>$v$$q_i$<br>$$<br>q_1^Tv=x_1q_1^Tq_1+0+0+0.+0=x_1 \\\\<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>q_1 &amp; q_2 &amp;  &amp; q_n \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>x_1 \\\\<br>x_2 \\\\<br> \\\\<br>x_n \\\\<br>\\end{bmatrix}=<br>v \\\\<br>Qx=v \\\\<br>x=Q^{-1}v=Q^Tv \\\\<br>$$</li><li></li><li><br>$$<br>f(x)=a_0+a_1cosx+b_1sinx+a_2cos2x+b_2cos2x+.<br>$$</li><li>$coskx,sinkx$0()</li><li></li><li></li><li>$f(x)$$\\pi$<br>$$<br>\\int _0 ^{2\\pi} f(x)cosx dx=0+ a_1 \\int _0^{2\\pi}(cosx)^2dx+0+0+0=\\pi a_1 \\\\<br>$$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$A=S\\Lambda S^{-1}$S</li><li>$A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T$Q</li><li></li><li>$Ax=\\lambda x$A$Ax^{*}=\\lambda ^{*} x^{*}$</li><li>$\\lambda$$x^{* T}A^T=x^{* T} \\lambda ^{* T} $</li><li>$A=A^T$$x$$x^{* T}A\\lambda x^{* T}x$$\\lambda ^{*}=\\lambda$</li><li>$A=A^{* T}$</li><li><br>$$<br>A=Q\\Lambda Q^{-1}=Q\\Lambda Q^T \\\\<br>=\\lambda _1 q_1 q_1^T+\\lambda _2 q_2 q_2^T+. \\\\<br>$$</li><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Tue Sep 18 2018 21:44:27 GMT+0800 ()","title":"MIT3","path":"2017/01/22/LinearAlgebra3/","eyeCatchImage":null,"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>A$detA|A|$</li><li><ul><li>$detI=1$</li><li></li><li>1-1</li><li>0()</li><li>()</li><li>00(000)</li><li>$detA=0$A</li><li>$det(A+B) \\neq detA+detB \\\\ detAB=(detA)(detB)$</li><li>$detA^{-1}detA=1$</li><li>$detA^2=(detA)^2$</li><li>$det2A=2^n detA$</li><li>$detA^T=detA$()","date":"2017-01-22T11:21:02.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","linearalgebra"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"MIT2","date":"2017-01-21T11:28:03.000Z","mathjax":true,"html":true,"_content":"\n***\n# \n\n## \n-\t:Am<nmn-m\n-\t$x_1,x_2,x_3...x_n$?0,\n-\t\n-\t\n-\tA\n-\t$v_1,v_2...v_n$AA\n-\tnn\n\n<!--more-->\n\n\n## \n-\t$v_1...,v_l$\n-\t\n-\t$R^3$\n$$\n\\begin{bmatrix}\n1   \\\\\n0   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n0   \\\\\n1   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n0   \\\\\n0   \\\\\n1   \\\\\n\\end{bmatrix}\n$$\n-\t:\n$$\n\\begin{bmatrix}\n1   \\\\\n1   \\\\\n2   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n2   \\\\\n2   \\\\\n5   \\\\\n\\end{bmatrix}\n$$\n\n-\t\n-\t()\n-\t22\n-\t\n\n## \n-\t****\n\n## \nA\n$$\n\\begin{bmatrix}\n1 & 2 & 3 &1  \\\\\n1 & 1 & 2 & 1   \\\\\n1 & 2 & 3 & 1 \\\\\n\\end{bmatrix}\n$$\n-\t\n-\t2=A==\n-\t\n-\t\n-\t()\n$$\n\\begin{bmatrix}\n-1   \\\\\n-1  \\\\\n1   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n-1   \\\\\n0  \\\\\n0   \\\\\n1\t\\\\\n\\end{bmatrix}\n$$\n-\t,n-r,4-2=2\n\n# \n-\tC(A)N(A)C($A^T$)N($A^T$)\n-\t$R^mR^nR^nR^m$\n-\trn-rm-r\n-\tr()n-rR0,r\n-\tAR\n-\t\n$$\nrref\\begin{bmatrix}\nA_{m\\*n} & I_{m\\*n}\n\\end{bmatrix}\\rightarrow\n\\begin{bmatrix}\nR_{m\\*n} & E_{m\\*n}\n\\end{bmatrix} \\\\\n$$\n-\trref=EEA=R \n-\tE\n-\t \n-\tR0E,m-r \n\n\n# 1\n\n## \n-\t\n-\t$3*3$M91,9\n$$\n\\begin{bmatrix}\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 1 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 1  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}.....\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t$3*3$S936\n$$\n\\begin{bmatrix}\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 1 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n\\end{bmatrix}\n$$\n$$\n\\begin{bmatrix}\n0 & 1 & 0  \\\\\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 1  \\\\\n0 & 0 & 0  \\\\\n1 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n0 & 1 & 0  \\\\\n\\end{bmatrix}\n$$\n-\tU6\n-\t$S \\bigcap U$ D3\n-\t$S \\bigcup U $M9\n-\t\n$$\ndim(S)=6,dim(U)=6,dim(S \\bigcap U)=3,dim(S \\bigcup U)=3 \\\\\ndim(S)+dim(U)=dim(S \\bigcap U)+dim(S \\bigcup U) \\\\\n$$\n-\t\n$$\n\\frac{d^2y}{dx^2}+y=0 \n$$\n-\t \n$$\ny=cos(x),y=sin(x) \n$$\n-\t  \n$$\ny=c_1cos(x)+c_2sin(x) \n$$\n-\t2\n\n\n## 1\n-\t1\n$$\n\\begin{bmatrix}\n1 & 4 & 5 \\\\\n2 & 8 & 10 \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\n1  \\\\\n2  \\\\\n\\end{bmatrix}*\n\\begin{bmatrix}\n1 & 4 & 5 \\\\\n\\end{bmatrix}\n$$\n-\t1\n-\t1441\n-\t1$v=(v_1,v_2,v_3,v_4)$,$S=\\{v|v_1+v_2+v_3+v_4=0\\}$,S$Av=0$A\n$$\nA=\\begin{bmatrix}\n1 & 1 & 1 & 1 \\\\\n\\end{bmatrix}\n$$\n-\t$dimN(A)=n-r$S$4-1=3$S\n$$\n\\begin{bmatrix}\n-1  \\\\\n1  \\\\\n0  \\\\\n0  \\\\\n\\end{bmatrix},\n\\begin{bmatrix}\n-1  \\\\\n0  \\\\\n1  \\\\\n0  \\\\\n\\end{bmatrix},\n\\begin{bmatrix}\n-1  \\\\\n0  \\\\\n0  \\\\\n1  \\\\\n\\end{bmatrix}\n$$\n-\tA:()1$C(A^T)=\\{a,a,a,a\\}$$C(A)=R^1$$N(A)$S$N(A^T)={0}$\n-\t\n$$\ndim(N(A))+dim(C(A^T))=3+1=4=n \\\\\ndim(C(A))+dim(N(A^T))=1+0=1=m \\\\\n$$\n\n## \n-\t\n\n# \n## \n-  \n\n## \n\n-  A-110\n\n-  \n\n-  A\n\n-  $dimN(A^T)=m-r$\n\n-  $Ax$x$Ax=0$$A^Ty$y$A^Ty=0$\n\n-  \n\n-  $dimN(A^T)=m-r$\n\n-\t$dimN(A^T)$=  \n-\t$m$= \n-\t$r=n-1$=-1 () \n-\t:-+=1() \n\n\n\n## <font size=4>\n\n- e,$e=Ax$\n\n- $y=Ce$\n\n- ,$A^Ty=0$\n\n- \n  $$\n  A^TCAx=f\n  $$\n  \n\n# \n\n## \n-\tn90\n-\t$x^Ty=0$,xy\n-\txy:\n$$\n{||x||}^2+{||y||}^2={||x+y||}^2 \\\\\n$$\n-\t\n$$\nx^Tx+y^Ty={(x+y)}^T(x+y)=x^Tx+y^Ty+x^Ty+xy^T=2x^Ty \\\\\n$$\n-\t\n$$\nx^Ty=0 \\\\\n$$\n\n\n-\t\n-\t\n-\t$Ax=0$()()0\n-\tA\n-\tnmn:rn-rm:rm-r\n\n## \n-\t\n-\t\n-\t$Ax=0$$A^TA$\n-\t$A^TA$$n*n$\n-\t$A^T$\n-\t$A^TA$$N(A^TA)=N(A)$\n-\t$A^TA$\n\n# \n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170228/203158686.JPG)\n-\t\n-\tbaaappbappee=b-p\n-\tpaaxp=xa\n-\tae\n$$\na^T(b-xa)=0 \\\\\nxa^Ta=a^Tb \\\\\nx= \\frac {a^Tb}{a^Ta} \\\\\np=a\\frac {a^Tb}{a^Ta} \\\\\n$$\n-\tba\n\n## \n-\tP(projection matrix)$p=Pb$,$P= \\frac {aa^T}{a^Ta}$\n-\tba(bap),1\n-\t\n -\t,$P^T=P$\n -\t$P^2=P$\n \n## \n-\t\n-\t\n-\tbb\n-\tbpb$Ax^{'}=p$,pb\n-\t$x^{'}$,$p=Ax^{'}$$e=b-Ax^{'}$eA\n-\t\n$$\nA^T(b-Ax^{'})=0 \\\\\n$$\n-\teA\n$$\nx^{'}=(A^TA)^{-1}A^Tb \\\\\np=Ax^{'}=A(A^TA)^{-1}A^Tb \\\\\n$$\n-\tPn:\n$$\nA(A^TA)^{-1}A^T \\\\\n$$\n-\tPn1\n-\t\n-\t$a_1,a_2,a_3$,$b=C+Da$\n-\t$a_1=(1,1),a_2=(2,2),a_3=(3,2)$,\n$$\nC+D=1 \\\\\nC+2D=2 \\\\\nC+3D=2 \\\\\n$$\n:\n$$\n\\begin{bmatrix}\n1 & 1  \\\\\n1 & 2  \\\\\n1 & 3  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nC  \\\\\nD  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n1  \\\\\n2  \\\\\n2  \\\\\n\\end{bmatrix}\n$$\n-\tAx=b,A$x^{'}$\n\n# \n\n## \n-\t$P=A(A^TA)^{-1}A^T$,$Pb$bAbb\n\tb$Pb=b$b$b=Ax$A$(A^TA)$$P=A(A^TA)^{-1}A^T$$Pb=b$\n\tb$Pb=0$bb$A^Tb=0$$P=A(A^TA)^{-1}A^T$$Pb=0$\n\n\n-\tpbeb\n$$\nb=p+e \\\\\np=Pb \\\\\n$$\n-\t\n$$\ne=(I-P)b \\\\\n$$\n-\t$(I-P)$ \n\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/192923067.JPG)\n\t\n## \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/195536899.JPG)\n-\t$y=C+Dt$\n$$\nC+D=1 \\\\\nC+2D=2 \\\\\nC+3D=2 \\\\\n$$\n-\t\n$$\n||e||^2=(C+D-1)^2+(C+2D-2)^2+(C+3D-2)^2 \\\\\n$$\n-\tCD0: \n$$\n\\begin{cases}\n3C+6D=5\\\\\n6C+14D=11\\\\\n\\end{cases}\n$$\n\n-\t$C,D$$C,D$bp$C,D$\n$$\nAx=b \\\\\n\\begin{bmatrix}\n1 & 1 \\\\\n1 & 2 \\\\\n1 & 3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nC \\\\\nD \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\n1 \\\\\n2 \\\\\n2 \\\\\n\\end{bmatrix}\n$$\n-\tAbA$e=Ax-b$$||e||^2$y$b_1,b_2,b_3$$e_1,e_2,e_3$$p_1,p_2,p_3$bp\n-\t$x^{'},p$$p=Ax^{'}=A(A^TA)^{-1}A^Tb$$Ax=b$$A^T$\n$$\nA^TAx^{'}=A^Tb\n$$\n-\t\n$$\n\\begin{cases}\n3C+6D=5\\\\\n6C+14D=11\\\\\n\\end{cases}\n$$\n\n-\t,$C,D$\n-\t$b,p,e$$C,D$$C,D$p\n-\tA$A^TA$\n\t$A^TAx=0$x\n\t$$\n\tA^TAx=0 \\\\\n\tx^TA^TAx=0 \\\\\n\t(Ax)^T(Ax)=0 \\\\\n\tAx=0 \\\\\n\t$$\n-\tA\n\t$$\n\tx=0\n\t$$\n-\t\n-\t\n\n# Gram-Schmidt\n\n## \n-\t\n$$\nq_i^Tq_j=\n\\begin{cases}\n0 \\quad if \\quad i \\neq j \\\\\n1 \\quad if \\quad i=j \\\\\n\\end{cases}\n$$\n$$\nQ=\n\\begin{bmatrix}\nq_1 & q_2 & ... & q_n \\\\\n\\end{bmatrix} \\\\\nQ^TQ=I \\\\\n$$\n-\t$Q^TQ=I$,$Q^T=Q^{-1}$,\n$$\nQ=\\begin{bmatrix}\ncos \\theta & -sin \\theta \\\\\nsin \\theta & cos \\theta \\\\\n\\end{bmatrix}or\n\\frac {1}{\\sqrt 2} \n\\begin{bmatrix}\n1 & 1 \\\\\n1 & -1 \\\\\n\\end{bmatrix}\n$$\n-\tQQ\n-\tQQP$P=Q(Q^TQ)^{-1}Q^T=QQ^T$\n\n## Gram-Schmidt\n-\taba,bA,BA=aBbAe\n$$\nB=e=b-\\frac{A^Tb}{A^TA}A\n$$\n-\tA,B$q_1=\\frac{A}{||A||}$\n-\tA,B,CABCcAB\n$$\nC=c- \\frac {A^Tc}{A^TA}A- \\frac {B^Tc}{B^TB} B\n$$\n-\ta,bAQ,Q$q_1,q_2,...$$a,b,....$\n$$\nA=QR \\\\\n$$\n-\t\n$$\n\\begin{bmatrix}\na & b \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\nq_1 & q_2 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nq_1^Ta & q_1^Tb \\\\\nq_2^Ta & q_2^Tb \\\\\n\\end{bmatrix} \\\\\n$$\n-\t$QQ^T=I$\n-\t$R=Q^TA$\n-\t$q_2$$q_1$$q_1$$a$$q_2^Ta=0$$R$","source":"_posts/LinearAlgebra2.md","raw":"---\ntitle: MIT2\ndate: 2017-01-21 19:28:03\ntags: [linearalgebra,math]\ncategories: \nmathjax: true\nhtml: true\n---\n\n***\n# \n\n## \n-\t:Am<nmn-m\n-\t$x_1,x_2,x_3...x_n$?0,\n-\t\n-\t\n-\tA\n-\t$v_1,v_2...v_n$AA\n-\tnn\n\n<!--more-->\n\n\n## \n-\t$v_1...,v_l$\n-\t\n-\t$R^3$\n$$\n\\begin{bmatrix}\n1   \\\\\n0   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n0   \\\\\n1   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n0   \\\\\n0   \\\\\n1   \\\\\n\\end{bmatrix}\n$$\n-\t:\n$$\n\\begin{bmatrix}\n1   \\\\\n1   \\\\\n2   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n2   \\\\\n2   \\\\\n5   \\\\\n\\end{bmatrix}\n$$\n\n-\t\n-\t()\n-\t22\n-\t\n\n## \n-\t****\n\n## \nA\n$$\n\\begin{bmatrix}\n1 & 2 & 3 &1  \\\\\n1 & 1 & 2 & 1   \\\\\n1 & 2 & 3 & 1 \\\\\n\\end{bmatrix}\n$$\n-\t\n-\t2=A==\n-\t\n-\t\n-\t()\n$$\n\\begin{bmatrix}\n-1   \\\\\n-1  \\\\\n1   \\\\\n0   \\\\\n\\end{bmatrix}\n,\n\\begin{bmatrix}\n-1   \\\\\n0  \\\\\n0   \\\\\n1\t\\\\\n\\end{bmatrix}\n$$\n-\t,n-r,4-2=2\n\n# \n-\tC(A)N(A)C($A^T$)N($A^T$)\n-\t$R^mR^nR^nR^m$\n-\trn-rm-r\n-\tr()n-rR0,r\n-\tAR\n-\t\n$$\nrref\\begin{bmatrix}\nA_{m\\*n} & I_{m\\*n}\n\\end{bmatrix}\\rightarrow\n\\begin{bmatrix}\nR_{m\\*n} & E_{m\\*n}\n\\end{bmatrix} \\\\\n$$\n-\trref=EEA=R \n-\tE\n-\t \n-\tR0E,m-r \n\n\n# 1\n\n## \n-\t\n-\t$3*3$M91,9\n$$\n\\begin{bmatrix}\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 1 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 1  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}.....\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n\\end{bmatrix}\n$$\n-\t$3*3$S936\n$$\n\\begin{bmatrix}\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 1 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n\\end{bmatrix}\n$$\n$$\n\\begin{bmatrix}\n0 & 1 & 0  \\\\\n1 & 0 & 0  \\\\\n0 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 1  \\\\\n0 & 0 & 0  \\\\\n1 & 0 & 0  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n0 & 0 & 0  \\\\\n0 & 0 & 1  \\\\\n0 & 1 & 0  \\\\\n\\end{bmatrix}\n$$\n-\tU6\n-\t$S \\bigcap U$ D3\n-\t$S \\bigcup U $M9\n-\t\n$$\ndim(S)=6,dim(U)=6,dim(S \\bigcap U)=3,dim(S \\bigcup U)=3 \\\\\ndim(S)+dim(U)=dim(S \\bigcap U)+dim(S \\bigcup U) \\\\\n$$\n-\t\n$$\n\\frac{d^2y}{dx^2}+y=0 \n$$\n-\t \n$$\ny=cos(x),y=sin(x) \n$$\n-\t  \n$$\ny=c_1cos(x)+c_2sin(x) \n$$\n-\t2\n\n\n## 1\n-\t1\n$$\n\\begin{bmatrix}\n1 & 4 & 5 \\\\\n2 & 8 & 10 \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\n1  \\\\\n2  \\\\\n\\end{bmatrix}*\n\\begin{bmatrix}\n1 & 4 & 5 \\\\\n\\end{bmatrix}\n$$\n-\t1\n-\t1441\n-\t1$v=(v_1,v_2,v_3,v_4)$,$S=\\{v|v_1+v_2+v_3+v_4=0\\}$,S$Av=0$A\n$$\nA=\\begin{bmatrix}\n1 & 1 & 1 & 1 \\\\\n\\end{bmatrix}\n$$\n-\t$dimN(A)=n-r$S$4-1=3$S\n$$\n\\begin{bmatrix}\n-1  \\\\\n1  \\\\\n0  \\\\\n0  \\\\\n\\end{bmatrix},\n\\begin{bmatrix}\n-1  \\\\\n0  \\\\\n1  \\\\\n0  \\\\\n\\end{bmatrix},\n\\begin{bmatrix}\n-1  \\\\\n0  \\\\\n0  \\\\\n1  \\\\\n\\end{bmatrix}\n$$\n-\tA:()1$C(A^T)=\\{a,a,a,a\\}$$C(A)=R^1$$N(A)$S$N(A^T)={0}$\n-\t\n$$\ndim(N(A))+dim(C(A^T))=3+1=4=n \\\\\ndim(C(A))+dim(N(A^T))=1+0=1=m \\\\\n$$\n\n## \n-\t\n\n# \n## \n-  \n\n## \n\n-  A-110\n\n-  \n\n-  A\n\n-  $dimN(A^T)=m-r$\n\n-  $Ax$x$Ax=0$$A^Ty$y$A^Ty=0$\n\n-  \n\n-  $dimN(A^T)=m-r$\n\n-\t$dimN(A^T)$=  \n-\t$m$= \n-\t$r=n-1$=-1 () \n-\t:-+=1() \n\n\n\n## <font size=4>\n\n- e,$e=Ax$\n\n- $y=Ce$\n\n- ,$A^Ty=0$\n\n- \n  $$\n  A^TCAx=f\n  $$\n  \n\n# \n\n## \n-\tn90\n-\t$x^Ty=0$,xy\n-\txy:\n$$\n{||x||}^2+{||y||}^2={||x+y||}^2 \\\\\n$$\n-\t\n$$\nx^Tx+y^Ty={(x+y)}^T(x+y)=x^Tx+y^Ty+x^Ty+xy^T=2x^Ty \\\\\n$$\n-\t\n$$\nx^Ty=0 \\\\\n$$\n\n\n-\t\n-\t\n-\t$Ax=0$()()0\n-\tA\n-\tnmn:rn-rm:rm-r\n\n## \n-\t\n-\t\n-\t$Ax=0$$A^TA$\n-\t$A^TA$$n*n$\n-\t$A^T$\n-\t$A^TA$$N(A^TA)=N(A)$\n-\t$A^TA$\n\n# \n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170228/203158686.JPG)\n-\t\n-\tbaaappbappee=b-p\n-\tpaaxp=xa\n-\tae\n$$\na^T(b-xa)=0 \\\\\nxa^Ta=a^Tb \\\\\nx= \\frac {a^Tb}{a^Ta} \\\\\np=a\\frac {a^Tb}{a^Ta} \\\\\n$$\n-\tba\n\n## \n-\tP(projection matrix)$p=Pb$,$P= \\frac {aa^T}{a^Ta}$\n-\tba(bap),1\n-\t\n -\t,$P^T=P$\n -\t$P^2=P$\n \n## \n-\t\n-\t\n-\tbb\n-\tbpb$Ax^{'}=p$,pb\n-\t$x^{'}$,$p=Ax^{'}$$e=b-Ax^{'}$eA\n-\t\n$$\nA^T(b-Ax^{'})=0 \\\\\n$$\n-\teA\n$$\nx^{'}=(A^TA)^{-1}A^Tb \\\\\np=Ax^{'}=A(A^TA)^{-1}A^Tb \\\\\n$$\n-\tPn:\n$$\nA(A^TA)^{-1}A^T \\\\\n$$\n-\tPn1\n-\t\n-\t$a_1,a_2,a_3$,$b=C+Da$\n-\t$a_1=(1,1),a_2=(2,2),a_3=(3,2)$,\n$$\nC+D=1 \\\\\nC+2D=2 \\\\\nC+3D=2 \\\\\n$$\n:\n$$\n\\begin{bmatrix}\n1 & 1  \\\\\n1 & 2  \\\\\n1 & 3  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nC  \\\\\nD  \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\n1  \\\\\n2  \\\\\n2  \\\\\n\\end{bmatrix}\n$$\n-\tAx=b,A$x^{'}$\n\n# \n\n## \n-\t$P=A(A^TA)^{-1}A^T$,$Pb$bAbb\n\tb$Pb=b$b$b=Ax$A$(A^TA)$$P=A(A^TA)^{-1}A^T$$Pb=b$\n\tb$Pb=0$bb$A^Tb=0$$P=A(A^TA)^{-1}A^T$$Pb=0$\n\n\n-\tpbeb\n$$\nb=p+e \\\\\np=Pb \\\\\n$$\n-\t\n$$\ne=(I-P)b \\\\\n$$\n-\t$(I-P)$ \n\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/192923067.JPG)\n\t\n## \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/195536899.JPG)\n-\t$y=C+Dt$\n$$\nC+D=1 \\\\\nC+2D=2 \\\\\nC+3D=2 \\\\\n$$\n-\t\n$$\n||e||^2=(C+D-1)^2+(C+2D-2)^2+(C+3D-2)^2 \\\\\n$$\n-\tCD0: \n$$\n\\begin{cases}\n3C+6D=5\\\\\n6C+14D=11\\\\\n\\end{cases}\n$$\n\n-\t$C,D$$C,D$bp$C,D$\n$$\nAx=b \\\\\n\\begin{bmatrix}\n1 & 1 \\\\\n1 & 2 \\\\\n1 & 3 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nC \\\\\nD \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\n1 \\\\\n2 \\\\\n2 \\\\\n\\end{bmatrix}\n$$\n-\tAbA$e=Ax-b$$||e||^2$y$b_1,b_2,b_3$$e_1,e_2,e_3$$p_1,p_2,p_3$bp\n-\t$x^{'},p$$p=Ax^{'}=A(A^TA)^{-1}A^Tb$$Ax=b$$A^T$\n$$\nA^TAx^{'}=A^Tb\n$$\n-\t\n$$\n\\begin{cases}\n3C+6D=5\\\\\n6C+14D=11\\\\\n\\end{cases}\n$$\n\n-\t,$C,D$\n-\t$b,p,e$$C,D$$C,D$p\n-\tA$A^TA$\n\t$A^TAx=0$x\n\t$$\n\tA^TAx=0 \\\\\n\tx^TA^TAx=0 \\\\\n\t(Ax)^T(Ax)=0 \\\\\n\tAx=0 \\\\\n\t$$\n-\tA\n\t$$\n\tx=0\n\t$$\n-\t\n-\t\n\n# Gram-Schmidt\n\n## \n-\t\n$$\nq_i^Tq_j=\n\\begin{cases}\n0 \\quad if \\quad i \\neq j \\\\\n1 \\quad if \\quad i=j \\\\\n\\end{cases}\n$$\n$$\nQ=\n\\begin{bmatrix}\nq_1 & q_2 & ... & q_n \\\\\n\\end{bmatrix} \\\\\nQ^TQ=I \\\\\n$$\n-\t$Q^TQ=I$,$Q^T=Q^{-1}$,\n$$\nQ=\\begin{bmatrix}\ncos \\theta & -sin \\theta \\\\\nsin \\theta & cos \\theta \\\\\n\\end{bmatrix}or\n\\frac {1}{\\sqrt 2} \n\\begin{bmatrix}\n1 & 1 \\\\\n1 & -1 \\\\\n\\end{bmatrix}\n$$\n-\tQQ\n-\tQQP$P=Q(Q^TQ)^{-1}Q^T=QQ^T$\n\n## Gram-Schmidt\n-\taba,bA,BA=aBbAe\n$$\nB=e=b-\\frac{A^Tb}{A^TA}A\n$$\n-\tA,B$q_1=\\frac{A}{||A||}$\n-\tA,B,CABCcAB\n$$\nC=c- \\frac {A^Tc}{A^TA}A- \\frac {B^Tc}{B^TB} B\n$$\n-\ta,bAQ,Q$q_1,q_2,...$$a,b,....$\n$$\nA=QR \\\\\n$$\n-\t\n$$\n\\begin{bmatrix}\na & b \\\\\n\\end{bmatrix}=\n\\begin{bmatrix}\nq_1 & q_2 \\\\\n\\end{bmatrix}\n\\begin{bmatrix}\nq_1^Ta & q_1^Tb \\\\\nq_2^Ta & q_2^Tb \\\\\n\\end{bmatrix} \\\\\n$$\n-\t$QQ^T=I$\n-\t$R=Q^TA$\n-\t$q_2$$q_1$$q_1$$a$$q_2^Ta=0$$R$","slug":"LinearAlgebra2","published":1,"updated":"2018-09-03T01:21:54.832Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072cg000aqcw6yd4i21pl","content":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>:Am&lt;nmn-m</li><li>$x_1,x_2,x_3x_n$?0,</li><li></li><li></li><li>A</li><li>$v_1,v_2v_n$AA</li><li>nn</li></ul><a id=\"more\"></a><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$v_1,v_l$</li><li></li><li>$R^3$<br>$$<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>0 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li><p>:<br>$$<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>2 \\\\<br>2 \\\\<br>5 \\\\<br>\\end{bmatrix}<br>$$</p></li><li><p></p></li><li>()</li><li>22</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><strong></strong></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>A<br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 &amp;1 \\\\<br>1 &amp; 1 &amp; 2 &amp; 1 \\\\<br>1 &amp; 2 &amp; 3 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li><li>2=A==</li><li></li><li></li><li>()<br>$$<br>\\begin{bmatrix}<br>-1 \\\\<br>-1 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>,n-r,4-2=2</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>C(A)N(A)C($A^T$)N($A^T$)</li><li>$R^mR^nR^nR^m$</li><li>rn-rm-r</li><li>r()n-rR0,r</li><li>AR</li><li><br>$$<br>rref\\begin{bmatrix}<br>A_{m*n} &amp; I_{m*n}<br>\\end{bmatrix}\\rightarrow<br>\\begin{bmatrix}<br>R_{m*n} &amp; E_{m*n}<br>\\end{bmatrix} \\\\<br>$$</li><li>rref=EEA=R</li><li>E</li><li></li><li>R0E,m-r</li></ul><h1 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$3*3$M91,9<br>$$<br>\\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 1 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}..<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>$3*3$S936<br>$$<br>\\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 1 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$<br>$$<br>\\begin{bmatrix}<br>0 &amp; 1 &amp; 0 \\\\<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>1 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 1 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>U6</li><li>$S \\bigcap U$ D3</li><li>$S \\bigcup U $M9</li><li><br>$$<br>dim(S)=6,dim(U)=6,dim(S \\bigcap U)=3,dim(S \\bigcup U)=3 \\\\<br>dim(S)+dim(U)=dim(S \\bigcap U)+dim(S \\bigcup U) \\\\<br>$$</li><li><br>$$<br>\\frac{d^2y}{dx^2}+y=0<br>$$</li><li><br>$$<br>y=cos(x),y=sin(x)<br>$$</li><li><br>$$<br>y=c_1cos(x)+c_2sin(x)<br>$$</li><li>2</li></ul><h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><ul><li>1<br>$$<br>\\begin{bmatrix}<br>1 &amp; 4 &amp; 5 \\\\<br>2 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>\\end{bmatrix}*<br>\\begin{bmatrix}<br>1 &amp; 4 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</li><li>1</li><li>1441</li><li>1$v=(v_1,v_2,v_3,v_4)$,$S=\\{v|v_1+v_2+v_3+v_4=0\\}$,S$Av=0$A<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 1 &amp; 1 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>$dimN(A)=n-r$S$4-1=3$S<br>$$<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix},<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix},<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>A:()1$C(A^T)=\\{a,a,a,a\\}$$C(A)=R^1$$N(A)$S$N(A^T)={0}$</li><li><br>$$<br>dim(N(A))+dim(C(A^T))=3+1=4=n \\\\<br>dim(C(A))+dim(N(A^T))=1+0=1=m \\\\<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><p>A-110</p></li><li><p></p></li><li><p>A</p></li><li><p>$dimN(A^T)=m-r$</p></li><li><p>$Ax$x$Ax=0$$A^Ty$y$A^Ty=0$</p></li><li><p></p></li><li><p>$dimN(A^T)=m-r$</p></li><li><p>$dimN(A^T)$=</p></li><li>$m$=</li><li>$r=n-1$=-1 ()</li><li>:-+=1()</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p>e,$e=Ax$</p></li><li><p>$y=Ce$</p></li><li><p>,$A^Ty=0$</p></li><li><p><br>$$<br>A^TCAx=f<br>$$<br></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>n90</li><li>$x^Ty=0$,xy</li><li>xy:<br>$$<br>{||x||}^2+{||y||}^2={||x+y||}^2 \\\\<br>$$</li><li><br>$$<br>x^Tx+y^Ty={(x+y)}^T(x+y)=x^Tx+y^Ty+x^Ty+xy^T=2x^Ty \\\\<br>$$</li><li><br>$$<br>x^Ty=0 \\\\<br>$$</li></ul><ul><li></li><li></li><li>$Ax=0$()()0</li><li>A</li><li>nmn:rn-rm:rm-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>$Ax=0$$A^TA$</li><li>$A^TA$$n*n$</li><li>$A^T$</li><li>$A^TA$$N(A^TA)=N(A)$</li><li>$A^TA$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170228/203158686.JPG\" alt=\"mark\"></p><ul><li></li><li>baaappbappee=b-p</li><li>paaxp=xa</li><li>ae<br>$$<br>a^T(b-xa)=0 \\\\<br>xa^Ta=a^Tb \\\\<br>x= \\frac {a^Tb}{a^Ta} \\\\<br>p=a\\frac {a^Tb}{a^Ta} \\\\<br>$$</li><li>ba</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>P(projection matrix)$p=Pb$,$P= \\frac {aa^T}{a^Ta}$</li><li>ba(bap),1</li><li><ul><li>,$P^T=P$</li><li>$P^2=P$</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>bb</li><li>bpb$Ax^{}=p$,pb</li><li>$x^{}$,$p=Ax^{}$$e=b-Ax^{}$eA</li><li><br>$$<br>A^T(b-Ax^{})=0 \\\\<br>$$</li><li>eA<br>$$<br>x^{}=(A^TA)^{-1}A^Tb \\\\<br>p=Ax^{}=A(A^TA)^{-1}A^Tb \\\\<br>$$</li><li>Pn:<br>$$<br>A(A^TA)^{-1}A^T \\\\<br>$$</li><li>Pn1</li><li></li><li>$a_1,a_2,a_3$,$b=C+Da$</li><li>$a_1=(1,1),a_2=(2,2),a_3=(3,2)$,<br>$$<br>C+D=1 \\\\<br>C+2D=2 \\\\<br>C+3D=2 \\\\<br>$$<br>:<br>$$<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 2 \\\\<br>1 &amp; 3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>C \\\\<br>D \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>$$</li><li>Ax=b,A$x^{}$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$P=A(A^TA)^{-1}A^T$,$Pb$bAbb<br>b$Pb=b$b$b=Ax$A$(A^TA)$$P=A(A^TA)^{-1}A^T$$Pb=b$<br>b$Pb=0$bb$A^Tb=0$$P=A(A^TA)^{-1}A^T$$Pb=0$</li></ul><ul><li>pbeb<br>$$<br>b=p+e \\\\<br>p=Pb \\\\<br>$$</li><li><br>$$<br>e=(I-P)b \\\\<br>$$</li><li><p>$(I-P)$</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/192923067.JPG\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/195536899.JPG\" alt=\"mark\"></li><li>$y=C+Dt$<br>$$<br>C+D=1 \\\\<br>C+2D=2 \\\\<br>C+3D=2 \\\\<br>$$</li><li><br>$$<br>||e||^2=(C+D-1)^2+(C+2D-2)^2+(C+3D-2)^2 \\\\<br>$$</li><li><p>CD0:<br>$$<br>\\begin{cases}<br>3C+6D=5\\\\<br>6C+14D=11\\\\<br>\\end{cases}<br>$$</p></li><li><p>$C,D$$C,D$bp$C,D$<br>$$<br>Ax=b \\\\<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 2 \\\\<br>1 &amp; 3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>C \\\\<br>D \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>$$</p></li><li>AbA$e=Ax-b$$||e||^2$y$b_1,b_2,b_3$$e_1,e_2,e_3$$p_1,p_2,p_3$bp</li><li>$x^{},p$$p=Ax^{}=A(A^TA)^{-1}A^Tb$$Ax=b$$A^T$<br>$$<br>A^TAx^{}=A^Tb<br>$$</li><li><p><br>$$<br>\\begin{cases}<br>3C+6D=5\\\\<br>6C+14D=11\\\\<br>\\end{cases}<br>$$</p></li><li><p>,$C,D$</p></li><li>$b,p,e$$C,D$$C,D$p</li><li>A$A^TA$<br>$A^TAx=0$x<br>$$<br>A^TAx=0 \\\\<br>x^TA^TAx=0 \\\\<br>(Ax)^T(Ax)=0 \\\\<br>Ax=0 \\\\<br>$$</li><li>A<br>$$<br>x=0<br>$$</li><li></li><li></li></ul><h1 id=\"Gram-Schmidt\"><a href=\"#Gram-Schmidt\" class=\"headerlink\" title=\"Gram-Schmidt\"></a>Gram-Schmidt</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>q_i^Tq_j=<br>\\begin{cases}<br>0 \\quad if \\quad i \\neq j \\\\<br>1 \\quad if \\quad i=j \\\\<br>\\end{cases}<br>$$<br>$$<br>Q=<br>\\begin{bmatrix}<br>q_1 &amp; q_2 &amp;  &amp; q_n \\\\<br>\\end{bmatrix} \\\\<br>Q^TQ=I \\\\<br>$$</li><li>$Q^TQ=I$,$Q^T=Q^{-1}$,<br>$$<br>Q=\\begin{bmatrix}<br>cos \\theta &amp; -sin \\theta \\\\<br>sin \\theta &amp; cos \\theta \\\\<br>\\end{bmatrix}or<br>\\frac {1}{\\sqrt 2}<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; -1 \\\\<br>\\end{bmatrix}<br>$$</li><li>QQ</li><li>QQP$P=Q(Q^TQ)^{-1}Q^T=QQ^T$</li></ul><h2 id=\"Gram-Schmidt\"><a href=\"#Gram-Schmidt\" class=\"headerlink\" title=\"Gram-Schmidt\"></a>Gram-Schmidt</h2><ul><li>aba,bA,BA=aBbAe<br>$$<br>B=e=b-\\frac{A^Tb}{A^TA}A<br>$$</li><li>A,B$q_1=\\frac{A}{||A||}$</li><li>A,B,CABCcAB<br>$$<br>C=c- \\frac {A^Tc}{A^TA}A- \\frac {B^Tc}{B^TB} B<br>$$</li><li>a,bAQ,Q$q_1,q_2,$$a,b,.$<br>$$<br>A=QR \\\\<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>a &amp; b \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>q_1 &amp; q_2 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>q_1^Ta &amp; q_1^Tb \\\\<br>q_2^Ta &amp; q_2^Tb \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>$QQ^T=I$</li><li>$R=Q^TA$</li><li>$q_2$$q_1$$q_1$$a$$q_2^Ta=0$$R$</li></ul>","site":{"data":{}},"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>:Am&lt;nmn-m</li><li>$x_1,x_2,x_3x_n$?0,</li><li></li><li></li><li>A</li><li>$v_1,v_2v_n$AA</li><li>nn</li></ul>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$v_1,v_l$</li><li></li><li>$R^3$<br>$$<br>\\begin{bmatrix}<br>1 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>0 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li><p>:<br>$$<br>\\begin{bmatrix}<br>1 \\\\<br>1 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>2 \\\\<br>2 \\\\<br>5 \\\\<br>\\end{bmatrix}<br>$$</p></li><li><p></p></li><li>()</li><li>22</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><strong></strong></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>A<br>$$<br>\\begin{bmatrix}<br>1 &amp; 2 &amp; 3 &amp;1 \\\\<br>1 &amp; 1 &amp; 2 &amp; 1 \\\\<br>1 &amp; 2 &amp; 3 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</p><ul><li></li><li>2=A==</li><li></li><li></li><li>()<br>$$<br>\\begin{bmatrix}<br>-1 \\\\<br>-1 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix}<br>,<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>,n-r,4-2=2</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>C(A)N(A)C($A^T$)N($A^T$)</li><li>$R^mR^nR^nR^m$</li><li>rn-rm-r</li><li>r()n-rR0,r</li><li>AR</li><li><br>$$<br>rref\\begin{bmatrix}<br>A_{m*n} &amp; I_{m*n}<br>\\end{bmatrix}\\rightarrow<br>\\begin{bmatrix}<br>R_{m*n} &amp; E_{m*n}<br>\\end{bmatrix} \\\\<br>$$</li><li>rref=EEA=R</li><li>E</li><li></li><li>R0E,m-r</li></ul><h1 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>$3*3$M91,9<br>$$<br>\\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 1 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}..<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>$3*3$S936<br>$$<br>\\begin{bmatrix}<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 1 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$<br>$$<br>\\begin{bmatrix}<br>0 &amp; 1 &amp; 0 \\\\<br>1 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 0 &amp; 0 \\\\<br>1 &amp; 0 &amp; 0 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>0 &amp; 0 &amp; 0 \\\\<br>0 &amp; 0 &amp; 1 \\\\<br>0 &amp; 1 &amp; 0 \\\\<br>\\end{bmatrix}<br>$$</li><li>U6</li><li>$S \\bigcap U$ D3</li><li>$S \\bigcup U $M9</li><li><br>$$<br>dim(S)=6,dim(U)=6,dim(S \\bigcap U)=3,dim(S \\bigcup U)=3 \\\\<br>dim(S)+dim(U)=dim(S \\bigcap U)+dim(S \\bigcup U) \\\\<br>$$</li><li><br>$$<br>\\frac{d^2y}{dx^2}+y=0<br>$$</li><li><br>$$<br>y=cos(x),y=sin(x)<br>$$</li><li><br>$$<br>y=c_1cos(x)+c_2sin(x)<br>$$</li><li>2</li></ul><h2 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h2><ul><li>1<br>$$<br>\\begin{bmatrix}<br>1 &amp; 4 &amp; 5 \\\\<br>2 &amp; 8 &amp; 10 \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>\\end{bmatrix}*<br>\\begin{bmatrix}<br>1 &amp; 4 &amp; 5 \\\\<br>\\end{bmatrix}<br>$$</li><li>1</li><li>1441</li><li>1$v=(v_1,v_2,v_3,v_4)$,$S=\\{v|v_1+v_2+v_3+v_4=0\\}$,S$Av=0$A<br>$$<br>A=\\begin{bmatrix}<br>1 &amp; 1 &amp; 1 &amp; 1 \\\\<br>\\end{bmatrix}<br>$$</li><li>$dimN(A)=n-r$S$4-1=3$S<br>$$<br>\\begin{bmatrix}<br>-1 \\\\<br>1 \\\\<br>0 \\\\<br>0 \\\\<br>\\end{bmatrix},<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>1 \\\\<br>0 \\\\<br>\\end{bmatrix},<br>\\begin{bmatrix}<br>-1 \\\\<br>0 \\\\<br>0 \\\\<br>1 \\\\<br>\\end{bmatrix}<br>$$</li><li>A:()1$C(A^T)=\\{a,a,a,a\\}$$C(A)=R^1$$N(A)$S$N(A^T)={0}$</li><li><br>$$<br>dim(N(A))+dim(C(A^T))=3+1=4=n \\\\<br>dim(C(A))+dim(N(A^T))=1+0=1=m \\\\<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><p>A-110</p></li><li><p></p></li><li><p>A</p></li><li><p>$dimN(A^T)=m-r$</p></li><li><p>$Ax$x$Ax=0$$A^Ty$y$A^Ty=0$</p></li><li><p></p></li><li><p>$dimN(A^T)=m-r$</p></li><li><p>$dimN(A^T)$=</p></li><li>$m$=</li><li>$r=n-1$=-1 ()</li><li>:-+=1()</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p>e,$e=Ax$</p></li><li><p>$y=Ce$</p></li><li><p>,$A^Ty=0$</p></li><li><p><br>$$<br>A^TCAx=f<br>$$<br></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>n90</li><li>$x^Ty=0$,xy</li><li>xy:<br>$$<br>{||x||}^2+{||y||}^2={||x+y||}^2 \\\\<br>$$</li><li><br>$$<br>x^Tx+y^Ty={(x+y)}^T(x+y)=x^Tx+y^Ty+x^Ty+xy^T=2x^Ty \\\\<br>$$</li><li><br>$$<br>x^Ty=0 \\\\<br>$$</li></ul><ul><li></li><li></li><li>$Ax=0$()()0</li><li>A</li><li>nmn:rn-rm:rm-r</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>$Ax=0$$A^TA$</li><li>$A^TA$$n*n$</li><li>$A^T$</li><li>$A^TA$$N(A^TA)=N(A)$</li><li>$A^TA$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170228/203158686.JPG\" alt=\"mark\"></p><ul><li></li><li>baaappbappee=b-p</li><li>paaxp=xa</li><li>ae<br>$$<br>a^T(b-xa)=0 \\\\<br>xa^Ta=a^Tb \\\\<br>x= \\frac {a^Tb}{a^Ta} \\\\<br>p=a\\frac {a^Tb}{a^Ta} \\\\<br>$$</li><li>ba</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>P(projection matrix)$p=Pb$,$P= \\frac {aa^T}{a^Ta}$</li><li>ba(bap),1</li><li><ul><li>,$P^T=P$</li><li>$P^2=P$</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>bb</li><li>bpb$Ax^{}=p$,pb</li><li>$x^{}$,$p=Ax^{}$$e=b-Ax^{}$eA</li><li><br>$$<br>A^T(b-Ax^{})=0 \\\\<br>$$</li><li>eA<br>$$<br>x^{}=(A^TA)^{-1}A^Tb \\\\<br>p=Ax^{}=A(A^TA)^{-1}A^Tb \\\\<br>$$</li><li>Pn:<br>$$<br>A(A^TA)^{-1}A^T \\\\<br>$$</li><li>Pn1</li><li></li><li>$a_1,a_2,a_3$,$b=C+Da$</li><li>$a_1=(1,1),a_2=(2,2),a_3=(3,2)$,<br>$$<br>C+D=1 \\\\<br>C+2D=2 \\\\<br>C+3D=2 \\\\<br>$$<br>:<br>$$<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 2 \\\\<br>1 &amp; 3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>C \\\\<br>D \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>$$</li><li>Ax=b,A$x^{}$</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$P=A(A^TA)^{-1}A^T$,$Pb$bAbb<br>b$Pb=b$b$b=Ax$A$(A^TA)$$P=A(A^TA)^{-1}A^T$$Pb=b$<br>b$Pb=0$bb$A^Tb=0$$P=A(A^TA)^{-1}A^T$$Pb=0$</li></ul><ul><li>pbeb<br>$$<br>b=p+e \\\\<br>p=Pb \\\\<br>$$</li><li><br>$$<br>e=(I-P)b \\\\<br>$$</li><li><p>$(I-P)$</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/192923067.JPG\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170301/195536899.JPG\" alt=\"mark\"></li><li>$y=C+Dt$<br>$$<br>C+D=1 \\\\<br>C+2D=2 \\\\<br>C+3D=2 \\\\<br>$$</li><li><br>$$<br>||e||^2=(C+D-1)^2+(C+2D-2)^2+(C+3D-2)^2 \\\\<br>$$</li><li><p>CD0:<br>$$<br>\\begin{cases}<br>3C+6D=5\\\\<br>6C+14D=11\\\\<br>\\end{cases}<br>$$</p></li><li><p>$C,D$$C,D$bp$C,D$<br>$$<br>Ax=b \\\\<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; 2 \\\\<br>1 &amp; 3 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>C \\\\<br>D \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>1 \\\\<br>2 \\\\<br>2 \\\\<br>\\end{bmatrix}<br>$$</p></li><li>AbA$e=Ax-b$$||e||^2$y$b_1,b_2,b_3$$e_1,e_2,e_3$$p_1,p_2,p_3$bp</li><li>$x^{},p$$p=Ax^{}=A(A^TA)^{-1}A^Tb$$Ax=b$$A^T$<br>$$<br>A^TAx^{}=A^Tb<br>$$</li><li><p><br>$$<br>\\begin{cases}<br>3C+6D=5\\\\<br>6C+14D=11\\\\<br>\\end{cases}<br>$$</p></li><li><p>,$C,D$</p></li><li>$b,p,e$$C,D$$C,D$p</li><li>A$A^TA$<br>$A^TAx=0$x<br>$$<br>A^TAx=0 \\\\<br>x^TA^TAx=0 \\\\<br>(Ax)^T(Ax)=0 \\\\<br>Ax=0 \\\\<br>$$</li><li>A<br>$$<br>x=0<br>$$</li><li></li><li></li></ul><h1 id=\"Gram-Schmidt\"><a href=\"#Gram-Schmidt\" class=\"headerlink\" title=\"Gram-Schmidt\"></a>Gram-Schmidt</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>q_i^Tq_j=<br>\\begin{cases}<br>0 \\quad if \\quad i \\neq j \\\\<br>1 \\quad if \\quad i=j \\\\<br>\\end{cases}<br>$$<br>$$<br>Q=<br>\\begin{bmatrix}<br>q_1 &amp; q_2 &amp;  &amp; q_n \\\\<br>\\end{bmatrix} \\\\<br>Q^TQ=I \\\\<br>$$</li><li>$Q^TQ=I$,$Q^T=Q^{-1}$,<br>$$<br>Q=\\begin{bmatrix}<br>cos \\theta &amp; -sin \\theta \\\\<br>sin \\theta &amp; cos \\theta \\\\<br>\\end{bmatrix}or<br>\\frac {1}{\\sqrt 2}<br>\\begin{bmatrix}<br>1 &amp; 1 \\\\<br>1 &amp; -1 \\\\<br>\\end{bmatrix}<br>$$</li><li>QQ</li><li>QQP$P=Q(Q^TQ)^{-1}Q^T=QQ^T$</li></ul><h2 id=\"Gram-Schmidt\"><a href=\"#Gram-Schmidt\" class=\"headerlink\" title=\"Gram-Schmidt\"></a>Gram-Schmidt</h2><ul><li>aba,bA,BA=aBbAe<br>$$<br>B=e=b-\\frac{A^Tb}{A^TA}A<br>$$</li><li>A,B$q_1=\\frac{A}{||A||}$</li><li>A,B,CABCcAB<br>$$<br>C=c- \\frac {A^Tc}{A^TA}A- \\frac {B^Tc}{B^TB} B<br>$$</li><li>a,bAQ,Q$q_1,q_2,$$a,b,.$<br>$$<br>A=QR \\\\<br>$$</li><li><br>$$<br>\\begin{bmatrix}<br>a &amp; b \\\\<br>\\end{bmatrix}=<br>\\begin{bmatrix}<br>q_1 &amp; q_2 \\\\<br>\\end{bmatrix}<br>\\begin{bmatrix}<br>q_1^Ta &amp; q_1^Tb \\\\<br>q_2^Ta &amp; q_2^Tb \\\\<br>\\end{bmatrix} \\\\<br>$$</li><li>$QQ^T=I$</li><li>$R=Q^TA$</li><li>$q_2$$q_1$$q_1$$a$$q_2^Ta=0$$R$</li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Sep 03 2018 09:21:54 GMT+0800 ()","title":"MIT2","path":"2017/01/21/LinearAlgebra2/","eyeCatchImage":null,"excerpt":"<hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>:Am&lt;nmn-m</li><li>$x_1,x_2,x_3x_n$?0,</li><li></li><li></li><li>A</li><li>$v_1,v_2v_n$AA</li><li>nn</li></ul>","date":"2017-01-21T11:28:03.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","linearalgebra"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","mathjax":true,"html":true,"date":"2017-02-12T14:40:38.000Z","_content":"\n***\n:\n-\t()\n-\t\n-\t\n-\t[exacity/deeplearningbook-chinese](https://github.com/exacity/deeplearningbook-chinese)\n\n\n-\t2017-02-12 \n-\t2017-03-01 k\n-\t2017-03-08 SVM\n-\t2018-01-04 \n-\t2018-08-09 \n<!--more-->\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t()\n-\t\n-\t:=++()()()\n-\t:0-1$L(Y,P(Y|X))$,()$$R_{exp}(f)=E_p[L(Y,f(X))]=\\int_{x*y}L(y,f(x))P(x,y)dxdy$$():$$R_{emp}(f)=\\frac 1N \\sum_{i=1}^NL(y_i,f(x_i))$$\n-\t()$$R_{srm}(f)=\\frac1N \\sum_{i=1}^NL(y_i,f(x_i))+ \\lambda J(f)$$,J(f)$\\lambda$MLMAP\n\n## <font size=4 ></font>\n-\t\n-\t:\n-\t\n\n## <font size=4 ></font>\n-\t()\n-\t:\n-\t:;S;\n\n## <font size=4 ></font>\n-\t:\n-\t0\n-\td$1-\\delta$\n\n$$\nR_{exp}(f)\\leq R_{emp}(f)+\\varepsilon (d,N,\\delta ) \\\\\n\\varepsilon (d,N,\\delta )=\\sqrt{\\frac 1{2N}(log d+log \\frac 1 \\delta)} \\\\\n$$\n\n## <font size=4 ></font>\n-\t\n-\tk\n-\t\n-\t\n\n## <font size=4 ></font>\n-\t\n-\t:TP;FNFPTN\n$$\n:P=\\frac{TP}{TP+FP} \\\\\n:R=\\frac{TP}{TP+FN} \\\\\n1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\\n$$\n-\t:\n-\t\n\n# <font size=5 >k</font>\n## <font size=4 >k</font>\n\n- kk\n- kk\n-\tk\n\n## <font size=4 >k</font>\n\n- kk:\n  $$\n  y=arg \\max_{c_j} \\sum_{x_i \\in N_k(x)} I(y_i=c_j), \\  i=1,2,...,N; \\ j=1,2,...,K\n  $$\n  $y_i=c_i$$I=1$$N_k(x)$xk\n\n- k=1\n\n- k\n\n## <font size=4 >k</font>\n\n- k\n\n- \n\n-\t$L_p$Minkowski\n\n-\t$L_p$(p=2)p=1\n  $$\n  L_p(x_i,x_j)=(\\sum _{l=1}^n |x_i^{(l)}-x_j^{(l)}|^p)^{\\frac1p}\n  $$\n\n-\tkk\n\n-\tk\n\n-\t\n\n## <font size=4 >kd</font>\n-\tkdk\n-\tkdk\n-\tkd:xyzx,y,z\n-\tkdkdkk=1\n\t-\t\n\t-\t\n\t-\t\n\t\t-\t\n\t\t-\t\n\t\t-\t\n-\tkd$O(logN)$k\n\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t()$wx+b=0$wb(w,b)\n-\tx$(x_1,x_2,...)$y\n-\t$wx+b=0$$f(x)=sign(wx+b)$\n-\t$wx+b=0$(x,y)\n$$\n\\gamma _i=\\frac{w}{||w||}x_i+\\frac{b}{||w||}\n$$\n-\t$wx+b$y$y=\\pm 1$\n$$\n\\gamma _i=y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||}) \\\\\n(w,b)T \\\\\n\\gamma=min\\gamma _i \\\\\n$$\n-\t\n$$\n\\gamma _i=y_i(wx_i+b) \\\\\n\\gamma =min\\gamma _i \\\\\n$$\n-\t\n-\t\n$$\nmax_{(w,b)} \\gamma \\\\\ns.t. \\quad y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||})\\geq \\gamma ,i=1,2,...,N \\\\\n$$\n-\t(1)$||w||$\n$$\nmin_{(w,b)} \\frac12 {||w||}^2 \\\\\ns.t. \\quad y_i(wx_i+b)-1 \\geq 0 \\\\\n$$\n-\tSVM,\n-\t\n-\t\n-\t$y_i=1$$wx+b=1$$wx+b=-1$(margin)w$\\frac 2 {||w||}$\n-\t()\n-\t\n-\t\n\n# <font size=5 ></font>\n## <font size=4 >Moore-penrose</font>\n-\tMoore-Penrose \n$$\nA^+=lim_{\\alpha \\rightarrow 0}(A^TA+\\alpha I)^{-1}A^T\n$$ \n-\t\n$$\nA^+=VD^+U^T\n$$\n\tUDVA D $D^+$\n-\t A $x = A^+y$\n-\t A $x$$Ax$$y$\n-\t\n\n## <font size=4 ></font>\n-\t.\n-\tFrobenius\n$$\n||A_F||=\\sqrt{Tr(AA^T)}\n$$\n-\t\n-\t\n\n## <font size=4 >PCA</font>\n-\t\n\n# <font size=5 ></font>\n## <font size=4 >Logistic Sigmoid</font>\n-\tLogisticsigmoid(0,1)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/cla6i1maiE.png?imageslim)\n-\tSoftmax sigmoidargmaxargmaxone hot softmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/KhILG09Ij4.png?imageslim)\n-\t(?)\n-\tSoftmax00xz=x-max(xi)softmax(softmax01\n-\tsoftmaxsigmoidsoftmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aA4kidJj2d.png?imageslim)\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CamKlC3dk8.png?imageslim)\n-\tsoftplus:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/daC267kkFk.png?imageslim)\n-\tSigmoidsoftplus\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/dJJb644g25.png?imageslim)\n\t\n## <font size=4 >KL</font>\n-\tKL\tPQ\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BDDchFGAAI.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BG2cdG0efL.png?imageslim)\n-\tQKLKLKLPQ\n-\tlogisticq(x)logistic,p(x)(01)\n-\tqp(Logistic):\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Ebg5CkFI9A.png?imageslim)\n-\t(Softmaxs):\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fhih6BdcbH.png?imageslim)\n\n## <font size=4 ></font>\t\n-\tX$P_{data}(x)$$P_{model}(x,\\theta)$$P_{data}(x)$$P_model(x,\\theta)$x$P_{data}(x)$\n$P_{model}(x,\\theta)$$\\theta$$\\theta$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jlKK7jmHlG.png?imageslim)\n-\targmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIkh1LjjBH.png?imageslim)\n-\tPdata(x)=Pmodel(x,):\n-\t===KL=\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/L3E7HC8D8J.png?imageslim)\n-\t\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n-\t\n-\tJacobian\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/F3A336L1gH.png?imageslim)\n\n## <font size=4 ></font>\n-\t:0HessianHessian\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/K9Bhe01f2l.png?imageslim)\n\n## <font size=4 ></font>\n-\tLagrange \n-\tKTT\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEGe5ge292.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli\n\n## <font size=4 ></font>\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Bif507aI3F.png?imageslim)\n\t\n\n\n\n\n\n","source":"_posts/MachineLearningNote.md","raw":"---\ntitle: \ncategories: \ntags:\n- code\n- machine learning\n\nmathjax: true\nhtml: true\ndate: 2017-02-12 22:40:38\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/20170328/174921231.png\n---\n\n***\n:\n-\t()\n-\t\n-\t\n-\t[exacity/deeplearningbook-chinese](https://github.com/exacity/deeplearningbook-chinese)\n\n\n-\t2017-02-12 \n-\t2017-03-01 k\n-\t2017-03-08 SVM\n-\t2018-01-04 \n-\t2018-08-09 \n<!--more-->\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t()\n-\t\n-\t:=++()()()\n-\t:0-1$L(Y,P(Y|X))$,()$$R_{exp}(f)=E_p[L(Y,f(X))]=\\int_{x*y}L(y,f(x))P(x,y)dxdy$$():$$R_{emp}(f)=\\frac 1N \\sum_{i=1}^NL(y_i,f(x_i))$$\n-\t()$$R_{srm}(f)=\\frac1N \\sum_{i=1}^NL(y_i,f(x_i))+ \\lambda J(f)$$,J(f)$\\lambda$MLMAP\n\n## <font size=4 ></font>\n-\t\n-\t:\n-\t\n\n## <font size=4 ></font>\n-\t()\n-\t:\n-\t:;S;\n\n## <font size=4 ></font>\n-\t:\n-\t0\n-\td$1-\\delta$\n\n$$\nR_{exp}(f)\\leq R_{emp}(f)+\\varepsilon (d,N,\\delta ) \\\\\n\\varepsilon (d,N,\\delta )=\\sqrt{\\frac 1{2N}(log d+log \\frac 1 \\delta)} \\\\\n$$\n\n## <font size=4 ></font>\n-\t\n-\tk\n-\t\n-\t\n\n## <font size=4 ></font>\n-\t\n-\t:TP;FNFPTN\n$$\n:P=\\frac{TP}{TP+FP} \\\\\n:R=\\frac{TP}{TP+FN} \\\\\n1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\\n$$\n-\t:\n-\t\n\n# <font size=5 >k</font>\n## <font size=4 >k</font>\n\n- kk\n- kk\n-\tk\n\n## <font size=4 >k</font>\n\n- kk:\n  $$\n  y=arg \\max_{c_j} \\sum_{x_i \\in N_k(x)} I(y_i=c_j), \\  i=1,2,...,N; \\ j=1,2,...,K\n  $$\n  $y_i=c_i$$I=1$$N_k(x)$xk\n\n- k=1\n\n- k\n\n## <font size=4 >k</font>\n\n- k\n\n- \n\n-\t$L_p$Minkowski\n\n-\t$L_p$(p=2)p=1\n  $$\n  L_p(x_i,x_j)=(\\sum _{l=1}^n |x_i^{(l)}-x_j^{(l)}|^p)^{\\frac1p}\n  $$\n\n-\tkk\n\n-\tk\n\n-\t\n\n## <font size=4 >kd</font>\n-\tkdk\n-\tkdk\n-\tkd:xyzx,y,z\n-\tkdkdkk=1\n\t-\t\n\t-\t\n\t-\t\n\t\t-\t\n\t\t-\t\n\t\t-\t\n-\tkd$O(logN)$k\n\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t()$wx+b=0$wb(w,b)\n-\tx$(x_1,x_2,...)$y\n-\t$wx+b=0$$f(x)=sign(wx+b)$\n-\t$wx+b=0$(x,y)\n$$\n\\gamma _i=\\frac{w}{||w||}x_i+\\frac{b}{||w||}\n$$\n-\t$wx+b$y$y=\\pm 1$\n$$\n\\gamma _i=y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||}) \\\\\n(w,b)T \\\\\n\\gamma=min\\gamma _i \\\\\n$$\n-\t\n$$\n\\gamma _i=y_i(wx_i+b) \\\\\n\\gamma =min\\gamma _i \\\\\n$$\n-\t\n-\t\n$$\nmax_{(w,b)} \\gamma \\\\\ns.t. \\quad y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||})\\geq \\gamma ,i=1,2,...,N \\\\\n$$\n-\t(1)$||w||$\n$$\nmin_{(w,b)} \\frac12 {||w||}^2 \\\\\ns.t. \\quad y_i(wx_i+b)-1 \\geq 0 \\\\\n$$\n-\tSVM,\n-\t\n-\t\n-\t$y_i=1$$wx+b=1$$wx+b=-1$(margin)w$\\frac 2 {||w||}$\n-\t()\n-\t\n-\t\n\n# <font size=5 ></font>\n## <font size=4 >Moore-penrose</font>\n-\tMoore-Penrose \n$$\nA^+=lim_{\\alpha \\rightarrow 0}(A^TA+\\alpha I)^{-1}A^T\n$$ \n-\t\n$$\nA^+=VD^+U^T\n$$\n\tUDVA D $D^+$\n-\t A $x = A^+y$\n-\t A $x$$Ax$$y$\n-\t\n\n## <font size=4 ></font>\n-\t.\n-\tFrobenius\n$$\n||A_F||=\\sqrt{Tr(AA^T)}\n$$\n-\t\n-\t\n\n## <font size=4 >PCA</font>\n-\t\n\n# <font size=5 ></font>\n## <font size=4 >Logistic Sigmoid</font>\n-\tLogisticsigmoid(0,1)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/cla6i1maiE.png?imageslim)\n-\tSoftmax sigmoidargmaxargmaxone hot softmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/KhILG09Ij4.png?imageslim)\n-\t(?)\n-\tSoftmax00xz=x-max(xi)softmax(softmax01\n-\tsoftmaxsigmoidsoftmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aA4kidJj2d.png?imageslim)\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CamKlC3dk8.png?imageslim)\n-\tsoftplus:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/daC267kkFk.png?imageslim)\n-\tSigmoidsoftplus\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/dJJb644g25.png?imageslim)\n\t\n## <font size=4 >KL</font>\n-\tKL\tPQ\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BDDchFGAAI.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BG2cdG0efL.png?imageslim)\n-\tQKLKLKLPQ\n-\tlogisticq(x)logistic,p(x)(01)\n-\tqp(Logistic):\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Ebg5CkFI9A.png?imageslim)\n-\t(Softmaxs):\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fhih6BdcbH.png?imageslim)\n\n## <font size=4 ></font>\t\n-\tX$P_{data}(x)$$P_{model}(x,\\theta)$$P_{data}(x)$$P_model(x,\\theta)$x$P_{data}(x)$\n$P_{model}(x,\\theta)$$\\theta$$\\theta$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jlKK7jmHlG.png?imageslim)\n-\targmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIkh1LjjBH.png?imageslim)\n-\tPdata(x)=Pmodel(x,):\n-\t===KL=\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/L3E7HC8D8J.png?imageslim)\n-\t\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n-\t\n-\tJacobian\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/F3A336L1gH.png?imageslim)\n\n## <font size=4 ></font>\n-\t:0HessianHessian\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/K9Bhe01f2l.png?imageslim)\n\n## <font size=4 ></font>\n-\tLagrange \n-\tKTT\n\n# <font size=5 ></font>\n## <font size=4 ></font>\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEGe5ge292.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli\n\n## <font size=4 ></font>\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Bif507aI3F.png?imageslim)\n\t\n\n\n\n\n\n","slug":"MachineLearningNote","published":1,"updated":"2018-09-15T02:03:54.578Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170328/174921231.png"],"comments":1,"layout":"post","link":"","_id":"cjmd072ci000dqcw68lvwmb07","content":"<hr><p>:</p><ul><li>()</li><li></li><li></li><li><a href=\"https://github.com/exacity/deeplearningbook-chinese\" target=\"_blank\" rel=\"noopener\">exacity/deeplearningbook-chinese</a></li></ul><p></p><ul><li>2017-02-12 </li><li>2017-03-01 k</li><li>2017-03-08 SVM</li><li>2018-01-04 </li><li>2018-08-09 <a id=\"more\"></a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li></li><li></li><li></li><li></li><li>()</li><li></li><li>:=++()()()</li><li>:0-1$L(Y,P(Y|X))$,()$$R_{exp}(f)=E_p[L(Y,f(X))]=\\int_{x*y}L(y,f(x))P(x,y)dxdy$$():$$R_{emp}(f)=\\frac 1N \\sum_{i=1}^NL(y_i,f(x_i))$$</li><li>()$$R_{srm}(f)=\\frac1N \\sum_{i=1}^NL(y_i,f(x_i))+ \\lambda J(f)$$,J(f)$\\lambda$MLMAP</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>:</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()</li><li>:</li><li>:;S;</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>:</li><li>0</li><li>d$1-\\delta$</li></ul><p>$$<br>R_{exp}(f)\\leq R_{emp}(f)+\\varepsilon (d,N,\\delta ) \\\\<br>\\varepsilon (d,N,\\delta )=\\sqrt{\\frac 1{2N}(log d+log \\frac 1 \\delta)} \\\\<br>$$</p><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>k</li><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>:TP;FNFPTN<br>$$<br>:P=\\frac{TP}{TP+FP} \\\\<br>:R=\\frac{TP}{TP+FN} \\\\<br>1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\<br>$$</li><li>:</li><li></li></ul><h1 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"5\">k</font></h1><h2 id=\"k-1\"><a href=\"#k-1\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li>kk</li><li>kk</li><li>k</li></ul><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li><p>kk:<br>$$<br>y=arg \\max_{c_j} \\sum_{x_i \\in N_k(x)} I(y_i=c_j), \\ i=1,2,,N; \\ j=1,2,,K<br>$$<br>$y_i=c_i$$I=1$$N_k(x)$xk</p></li><li><p>k=1</p></li><li><p>k</p></li></ul><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li><p>k</p></li><li><p></p></li><li><p>$L_p$Minkowski</p></li><li><p>$L_p$(p=2)p=1<br>$$<br>L_p(x_i,x_j)=(\\sum _{l=1}^n |x_i^{(l)}-x_j^{(l)}|^p)^{\\frac1p}<br>$$</p></li><li><p>kk</p></li><li><p>k</p></li><li><p></p></li></ul><h2 id=\"kd\"><a href=\"#kd\" class=\"headerlink\" title=\"kd\"></a><font size=\"4\">kd</font></h2><ul><li>kdk</li><li>kdk</li><li>kd:xyzx,y,z</li><li>kdkdkk=1<ul><li></li><li></li><li><ul><li></li><li></li><li></li></ul></li></ul></li><li>kd$O(logN)$k</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()$wx+b=0$wb(w,b)</li><li>x$(x_1,x_2,)$y</li><li>$wx+b=0$$f(x)=sign(wx+b)$</li><li>$wx+b=0$(x,y)<br>$$<br>\\gamma _i=\\frac{w}{||w||}x_i+\\frac{b}{||w||}<br>$$</li><li>$wx+b$y$y=\\pm 1$<br>$$<br>\\gamma _i=y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||}) \\\\<br>(w,b)T \\\\<br>\\gamma=min\\gamma _i \\\\<br>$$</li><li><br>$$<br>\\gamma _i=y_i(wx_i+b) \\\\<br>\\gamma =min\\gamma _i \\\\<br>$$</li><li></li><li><br>$$<br>max_{(w,b)} \\gamma \\\\<br>s.t. \\quad y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||})\\geq \\gamma ,i=1,2,,N \\\\<br>$$</li><li>(1)$||w||$<br>$$<br>min_{(w,b)} \\frac12 {||w||}^2 \\\\<br>s.t. \\quad y_i(wx_i+b)-1 \\geq 0 \\\\<br>$$</li><li>SVM,</li><li></li><li></li><li>$y_i=1$$wx+b=1$$wx+b=-1$(margin)w$\\frac 2 {||w||}$</li><li>()</li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"Moore-penrose\"><a href=\"#Moore-penrose\" class=\"headerlink\" title=\"Moore-penrose\"></a><font size=\"4\">Moore-penrose</font></h2><ul><li>Moore-Penrose <br>$$<br>A^+=lim_{\\alpha \\rightarrow 0}(A^TA+\\alpha I)^{-1}A^T<br>$$</li><li><br>$$<br>A^+=VD^+U^T<br>$$<br>UDVA D $D^+$</li><li> A $x = A^+y$</li><li> A $x$$Ax$$y$</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>.</li><li>Frobenius<br>$$<br>||A_F||=\\sqrt{Tr(AA^T)}<br>$$</li><li></li><li></li></ul><h2 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a><font size=\"4\">PCA</font></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"Logistic-Sigmoid\"><a href=\"#Logistic-Sigmoid\" class=\"headerlink\" title=\"Logistic Sigmoid\"></a><font size=\"4\">Logistic Sigmoid</font></h2><ul><li>Logisticsigmoid(0,1)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/cla6i1maiE.png?imageslim\" alt=\"mark\"></li><li>Softmax sigmoidargmaxargmaxone hot softmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/KhILG09Ij4.png?imageslim\" alt=\"mark\"></li><li>(?)</li><li>Softmax00xz=x-max(xi)softmax(softmax01</li><li>softmaxsigmoidsoftmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aA4kidJj2d.png?imageslim\" alt=\"mark\"></li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CamKlC3dk8.png?imageslim\" alt=\"mark\"></li><li>softplus:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/daC267kkFk.png?imageslim\" alt=\"mark\"></li><li>Sigmoidsoftplus<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/dJJb644g25.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"KL\"><a href=\"#KL\" class=\"headerlink\" title=\"KL\"></a><font size=\"4\">KL</font></h2><ul><li>KL PQ<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BDDchFGAAI.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BG2cdG0efL.png?imageslim\" alt=\"mark\"></li><li>QKLKLKLPQ</li><li>logisticq(x)logistic,p(x)(01)</li><li>qp(Logistic):<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Ebg5CkFI9A.png?imageslim\" alt=\"mark\"></li><li>(Softmaxs):<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fhih6BdcbH.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>X$P_{data}(x)$$P_{model}(x,\\theta)$$P_{data}(x)$$P_model(x,\\theta)$x$P_{data}(x)$<br>$P_{model}(x,\\theta)$$\\theta$$\\theta$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jlKK7jmHlG.png?imageslim\" alt=\"mark\"></li><li>argmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIkh1LjjBH.png?imageslim\" alt=\"mark\"></li><li>Pdata(x)=Pmodel(x,):</li><li>===KL=</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/L3E7HC8D8J.png?imageslim\" alt=\"mark\"></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li></li><li></li><li>Jacobian<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/F3A336L1gH.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>:0HessianHessian<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/K9Bhe01f2l.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>Lagrange</li><li>KTT</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEGe5ge292.png?imageslim\" alt=\"mark\"></li><li><br>![mark](<a href=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli\" target=\"_blank\" rel=\"noopener\">http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Bif507aI3F.png?imageslim\" alt=\"mark\"><br></li></ul>","site":{"data":{}},"excerpt":"<hr><p>:</p><ul><li>()</li><li></li><li></li><li><a href=\"https://github.com/exacity/deeplearningbook-chinese\" target=\"_blank\" rel=\"noopener\">exacity/deeplearningbook-chinese</a></li></ul><p></p><ul><li>2017-02-12 </li><li>2017-03-01 k</li><li>2017-03-08 SVM</li><li>2018-01-04 </li><li>2018-08-09 ","more":"</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li></li><li></li><li></li><li></li><li>()</li><li></li><li>:=++()()()</li><li>:0-1$L(Y,P(Y|X))$,()$$R_{exp}(f)=E_p[L(Y,f(X))]=\\int_{x*y}L(y,f(x))P(x,y)dxdy$$():$$R_{emp}(f)=\\frac 1N \\sum_{i=1}^NL(y_i,f(x_i))$$</li><li>()$$R_{srm}(f)=\\frac1N \\sum_{i=1}^NL(y_i,f(x_i))+ \\lambda J(f)$$,J(f)$\\lambda$MLMAP</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>:</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()</li><li>:</li><li>:;S;</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>:</li><li>0</li><li>d$1-\\delta$</li></ul><p>$$<br>R_{exp}(f)\\leq R_{emp}(f)+\\varepsilon (d,N,\\delta ) \\\\<br>\\varepsilon (d,N,\\delta )=\\sqrt{\\frac 1{2N}(log d+log \\frac 1 \\delta)} \\\\<br>$$</p><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>k</li><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>:TP;FNFPTN<br>$$<br>:P=\\frac{TP}{TP+FP} \\\\<br>:R=\\frac{TP}{TP+FN} \\\\<br>1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\<br>$$</li><li>:</li><li></li></ul><h1 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"5\">k</font></h1><h2 id=\"k-1\"><a href=\"#k-1\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li>kk</li><li>kk</li><li>k</li></ul><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li><p>kk:<br>$$<br>y=arg \\max_{c_j} \\sum_{x_i \\in N_k(x)} I(y_i=c_j), \\ i=1,2,,N; \\ j=1,2,,K<br>$$<br>$y_i=c_i$$I=1$$N_k(x)$xk</p></li><li><p>k=1</p></li><li><p>k</p></li></ul><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a><font size=\"4\">k</font></h2><ul><li><p>k</p></li><li><p></p></li><li><p>$L_p$Minkowski</p></li><li><p>$L_p$(p=2)p=1<br>$$<br>L_p(x_i,x_j)=(\\sum _{l=1}^n |x_i^{(l)}-x_j^{(l)}|^p)^{\\frac1p}<br>$$</p></li><li><p>kk</p></li><li><p>k</p></li><li><p></p></li></ul><h2 id=\"kd\"><a href=\"#kd\" class=\"headerlink\" title=\"kd\"></a><font size=\"4\">kd</font></h2><ul><li>kdk</li><li>kdk</li><li>kd:xyzx,y,z</li><li>kdkdkk=1<ul><li></li><li></li><li><ul><li></li><li></li><li></li></ul></li></ul></li><li>kd$O(logN)$k</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()$wx+b=0$wb(w,b)</li><li>x$(x_1,x_2,)$y</li><li>$wx+b=0$$f(x)=sign(wx+b)$</li><li>$wx+b=0$(x,y)<br>$$<br>\\gamma _i=\\frac{w}{||w||}x_i+\\frac{b}{||w||}<br>$$</li><li>$wx+b$y$y=\\pm 1$<br>$$<br>\\gamma _i=y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||}) \\\\<br>(w,b)T \\\\<br>\\gamma=min\\gamma _i \\\\<br>$$</li><li><br>$$<br>\\gamma _i=y_i(wx_i+b) \\\\<br>\\gamma =min\\gamma _i \\\\<br>$$</li><li></li><li><br>$$<br>max_{(w,b)} \\gamma \\\\<br>s.t. \\quad y_i(\\frac{w}{||w||}x_i+\\frac{b}{||w||})\\geq \\gamma ,i=1,2,,N \\\\<br>$$</li><li>(1)$||w||$<br>$$<br>min_{(w,b)} \\frac12 {||w||}^2 \\\\<br>s.t. \\quad y_i(wx_i+b)-1 \\geq 0 \\\\<br>$$</li><li>SVM,</li><li></li><li></li><li>$y_i=1$$wx+b=1$$wx+b=-1$(margin)w$\\frac 2 {||w||}$</li><li>()</li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"Moore-penrose\"><a href=\"#Moore-penrose\" class=\"headerlink\" title=\"Moore-penrose\"></a><font size=\"4\">Moore-penrose</font></h2><ul><li>Moore-Penrose <br>$$<br>A^+=lim_{\\alpha \\rightarrow 0}(A^TA+\\alpha I)^{-1}A^T<br>$$</li><li><br>$$<br>A^+=VD^+U^T<br>$$<br>UDVA D $D^+$</li><li> A $x = A^+y$</li><li> A $x$$Ax$$y$</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>.</li><li>Frobenius<br>$$<br>||A_F||=\\sqrt{Tr(AA^T)}<br>$$</li><li></li><li></li></ul><h2 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a><font size=\"4\">PCA</font></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"Logistic-Sigmoid\"><a href=\"#Logistic-Sigmoid\" class=\"headerlink\" title=\"Logistic Sigmoid\"></a><font size=\"4\">Logistic Sigmoid</font></h2><ul><li>Logisticsigmoid(0,1)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/cla6i1maiE.png?imageslim\" alt=\"mark\"></li><li>Softmax sigmoidargmaxargmaxone hot softmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/KhILG09Ij4.png?imageslim\" alt=\"mark\"></li><li>(?)</li><li>Softmax00xz=x-max(xi)softmax(softmax01</li><li>softmaxsigmoidsoftmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aA4kidJj2d.png?imageslim\" alt=\"mark\"></li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CamKlC3dk8.png?imageslim\" alt=\"mark\"></li><li>softplus:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/daC267kkFk.png?imageslim\" alt=\"mark\"></li><li>Sigmoidsoftplus<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/dJJb644g25.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"KL\"><a href=\"#KL\" class=\"headerlink\" title=\"KL\"></a><font size=\"4\">KL</font></h2><ul><li>KL PQ<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BDDchFGAAI.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/BG2cdG0efL.png?imageslim\" alt=\"mark\"></li><li>QKLKLKLPQ</li><li>logisticq(x)logistic,p(x)(01)</li><li>qp(Logistic):<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Ebg5CkFI9A.png?imageslim\" alt=\"mark\"></li><li>(Softmaxs):<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fhih6BdcbH.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>X$P_{data}(x)$$P_{model}(x,\\theta)$$P_{data}(x)$$P_model(x,\\theta)$x$P_{data}(x)$<br>$P_{model}(x,\\theta)$$\\theta$$\\theta$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jlKK7jmHlG.png?imageslim\" alt=\"mark\"></li><li>argmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIkh1LjjBH.png?imageslim\" alt=\"mark\"></li><li>Pdata(x)=Pmodel(x,):</li><li>===KL=</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/L3E7HC8D8J.png?imageslim\" alt=\"mark\"></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li></li><li></li><li>Jacobian<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/F3A336L1gH.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>:0HessianHessian<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/K9Bhe01f2l.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>Lagrange</li><li>KTT</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEGe5ge292.png?imageslim\" alt=\"mark\"></li><li><br>![mark](<a href=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli\" target=\"_blank\" rel=\"noopener\">http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GK8AHej2Fe.png?imagesli</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Bif507aI3F.png?imageslim\" alt=\"mark\"><br></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sat Sep 15 2018 10:03:54 GMT+0800 ()","title":"","path":"2017/02/12/MachineLearningNote/","eyeCatchImage":null,"excerpt":"<hr><p>:</p><ul><li>()</li><li></li><li></li><li><a href=\"https://github.com/exacity/deeplearningbook-chinese\" target=\"_blank\" rel=\"noopener\">exacity/deeplearningbook-chinese</a></li></ul><p></p><ul><li>2017-02-12 </li><li>2017-03-01 k</li><li>2017-03-08 SVM</li><li>2018-01-04 </li><li>2018-08-09 ","date":"2017-02-12T14:40:38.000Z","pv":0,"totalPV":0,"categories":"","tags":["code","machine learning"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":":","date":"2017-02-10T04:20:17.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/225753048.png"],"html":true,"_content":"\n***\nBP\n\n\n<!--more-->\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n- ()()inputoutput\n- 2\n\n## <font size=4 ></font>\n\n- \n  $$\n  y=f(\\sum_{i=1}^nw_ix_i-\\theta )\n  $$\n  n$w_i$$\\theta$,$f$:-1$w_{n+1}$\n\n- $\\Delta$\n  $$\n  \\Delta w_i=\\eta (y-y_0)x_i\n  $$\n  ()$\\eta$\n  \n## <font size=4 ></font>\n\n- (1)SigmoidtanhSoftmax\n\n- Sigmoid:$f'(x)=f(x)(1-f(x))$\n\n  tanh:$tanh'(x)=1-tanh^2(x)$\n\n  \n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n- \n- BP:\n\n## <font size=4 ></font>\n\n- \n  $$\n  L_i=-log(\\frac {e^f_{yi}} {\\sum_je^{f_j}})\n  $$\n  flogaa0,$L_i$1$L_i$0\n\n  \n  $$\n  L=\\frac1N \\sum_iL_I+ \\frac12 \\lambda \\sum_k\\sum_lW_{k,l}^2\n  $$\n\n\n\n\n\n\n\n\n## <font size=4 ></font>\n\n- \n  $$\n  E_k=\\frac12\\sum_{j=1}^l(y_0j^k-y_j^k)^2\n  $$\n  $\\frac 12$\n\n\n# <font size=5 >BP</font>\n\n## <font size=4 ></font>\n\n- \n\n- BP\n\n $$\n \\Delta w=-\\eta \\frac {\\partial L}{\\partial w}\n $$\n\n  \n\n- \n\n  ![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/194245109.jpg)\n\n  $W_1,b_1$$W_2,b_2$\n\n## <font size=4 ></font>\n\n- \n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n```python\nclass Config:\n    nn_input_dim = 2  # input layer dimensionality\n    nn_output_dim = 2  # output layer dimensionality\n    # Gradient descent parameters (I picked these by hand)\n    epsilon = 0.01  # learning rate for gradient descent\n    reg_lambda = 0.01  # regularization strength\n\n\ndef generate_data():\n    np.random.seed(0)\n    X, y = datasets.make_moons(200, noise=0.20)\n    return X, y\n\n\ndef visualize(X, y, model):\n    # plt.scatter(X[:, 0], X[:, 1], s=40, c=y, cmap=plt.cm.Spectral)\n    # plt.show()\n    plot_decision_boundary(lambda x:predict(model,x), X, y)\n    plt.title(\"Logistic Regression\")\n\n\ndef plot_decision_boundary(pred_func, X, y):\n    # Set min and max values and give it some padding\n    x_min, x_max = X[:, 0].min() - .5, X[:, 0].max() + .5\n    y_min, y_max = X[:, 1].min() - .5, X[:, 1].max() + .5\n    h = 0.01\n    # Generate a grid of points with distance h between them\n    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))\n    # Predict the function value for the whole gid\n    Z = pred_func(np.c_[xx.ravel(), yy.ravel()])\n    Z = Z.reshape(xx.shape)\n    # Plot the contour and training examples\n    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)\n    plt.scatter(X[:, 0], X[:, 1], c=y, cmap=plt.cm.Spectral)\n    plt.show()\n```\n\n\n\n## <font size=4 ></font>\n\n- probs\n- probs[range(num_examples), y]logdata_loss,\n\n```python\n# Helper function to evaluate the total loss on the dataset\ndef calculate_loss(model, X, y):\n    num_examples = len(X)  # training set size\n    W1, b1, W2, b2 = model['W1'], model['b1'], model['W2'], model['b2']\n    # Forward propagation to calculate our predictions\n    z1 = X.dot(W1) + b1\n    a1 = np.tanh(z1)\n    z2 = a1.dot(W2) + b2\n    exp_scores = np.exp(z2)\n    probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n    # Calculating the loss\n    corect_logprobs = -np.log(probs[range(num_examples), y])\n    data_loss = np.sum(corect_logprobs)\n    # Add regulatization term to loss (optional)\n    data_loss += Config.reg_lambda / 2 * (np.sum(np.square(W1)) + np.sum(np.square(W2)))\n    return 1. / num_examples * data_loss\n```\n\n\n\n## <font size=4 ></font>\n\n```python\n# This function learns parameters for the neural network and returns the model.\n# - nn_hdim: Number of nodes in the hidden layer\n# - num_passes: Number of passes through the training data for gradient descent\n# - print_loss: If True, print the loss every 1000 iterations\ndef build_model(X, y, nn_hdim, num_passes=20000, print_loss=False):\n    # Initialize the parameters to random values. We need to learn these.\n    num_examples = len(X)\n    np.random.seed(0)\n    W1 = np.random.randn(Config.nn_input_dim, nn_hdim) / np.sqrt(Config.nn_input_dim)\n    b1 = np.zeros((1, nn_hdim))\n    W2 = np.random.randn(nn_hdim, Config.nn_output_dim) / np.sqrt(nn_hdim)\n    b2 = np.zeros((1, Config.nn_output_dim))\n\n    # This is what we return at the end\n    model = {}\n\n    # Gradient descent. For each batch...\n    for i in range(0, num_passes):\n\n        # Forward propagation\n        z1 = X.dot(W1) + b1\n        a1 = np.tanh(z1)\n        z2 = a1.dot(W2) + b2\n        exp_scores = np.exp(z2)\n        probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n\n        # Backpropagation\n        delta3 = probs\n        delta3[range(num_examples), y] -= 1\n        dW2 = (a1.T).dot(delta3)\n        db2 = np.sum(delta3, axis=0, keepdims=True)\n        delta2 = delta3.dot(W2.T) * (1 - np.power(a1, 2))\n        dW1 = np.dot(X.T, delta2)\n        db1 = np.sum(delta2, axis=0)\n\n        # Add regularization terms (b1 and b2 don't have regularization terms)\n        dW2 += Config.reg_lambda * W2\n        dW1 += Config.reg_lambda * W1\n\n        # Gradient descent parameter update\n        W1 += -Config.epsilon * dW1\n        b1 += -Config.epsilon * db1\n        W2 += -Config.epsilon * dW2\n        b2 += -Config.epsilon * db2\n\n        # Assign new parameters to the model\n        model = {'W1': W1, 'b1': b1, 'W2': W2, 'b2': b2}\n\n        # Optionally print the loss.\n        # This is expensive because it uses the whole dataset, so we don't want to do it too often.\n        if print_loss and i % 1000 == 0:\n            print(\"Loss after iteration %i: %f\" % (i, calculate_loss(model, X, y)))\n\n    return model\n```\n\n\n\n## <font size=4 ></font>\n\n```python\ndef predict(model, x):\n    W1, b1, W2, b2 = model['W1'], model['b1'], model['W2'], model['b2']\n    # Forward propagation\n    z1 = x.dot(W1) + b1\n    a1 = np.tanh(z1)\n    z2 = a1.dot(W2) + b2\n    exp_scores = np.exp(z2)\n    probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n    return np.argmax(probs, axis=1)\n```\n\n\n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n## <font size=4 ></font>\n\n# <font size=5 ></font>\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/223945007.JPG)\n\n# <font size=5 ></font>\n\n# <font size=5 ></font>\n\n# <font size=5 ></font>\n\n>[IMPLEMENTING A NEURAL NETWORK FROM SCRATCH IN PYTHON  AN INTRODUCTION](http://www.wildml.com/2015/09/implementing-a-neural-network-from-scratch/)\n>[CS231n Convolutional Neural Networks or Visual Recognition---optimization](http://cs231n.github.io/optimization-1/#gd)\n>[CS231n Convolutional Neural Networks or Visual Recognition---neural-networks](http://cs231n.github.io/neural-networks-3/#gradcheck)\n>[](http://blog.csdn.net/longxinchen_ml/article/details/50521933)\n\n\n\n\n","source":"_posts/NeuralNetworks1.md","raw":"---\ntitle: ':'\ndate: 2017-02-10 12:20:17\ncategories: \ntags:\n  - code\n  - machinelearning\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/225753048.png\nhtml: true\n---\n\n***\nBP\n\n\n<!--more-->\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n- ()()inputoutput\n- 2\n\n## <font size=4 ></font>\n\n- \n  $$\n  y=f(\\sum_{i=1}^nw_ix_i-\\theta )\n  $$\n  n$w_i$$\\theta$,$f$:-1$w_{n+1}$\n\n- $\\Delta$\n  $$\n  \\Delta w_i=\\eta (y-y_0)x_i\n  $$\n  ()$\\eta$\n  \n## <font size=4 ></font>\n\n- (1)SigmoidtanhSoftmax\n\n- Sigmoid:$f'(x)=f(x)(1-f(x))$\n\n  tanh:$tanh'(x)=1-tanh^2(x)$\n\n  \n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n- \n- BP:\n\n## <font size=4 ></font>\n\n- \n  $$\n  L_i=-log(\\frac {e^f_{yi}} {\\sum_je^{f_j}})\n  $$\n  flogaa0,$L_i$1$L_i$0\n\n  \n  $$\n  L=\\frac1N \\sum_iL_I+ \\frac12 \\lambda \\sum_k\\sum_lW_{k,l}^2\n  $$\n\n\n\n\n\n\n\n\n## <font size=4 ></font>\n\n- \n  $$\n  E_k=\\frac12\\sum_{j=1}^l(y_0j^k-y_j^k)^2\n  $$\n  $\\frac 12$\n\n\n# <font size=5 >BP</font>\n\n## <font size=4 ></font>\n\n- \n\n- BP\n\n $$\n \\Delta w=-\\eta \\frac {\\partial L}{\\partial w}\n $$\n\n  \n\n- \n\n  ![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/194245109.jpg)\n\n  $W_1,b_1$$W_2,b_2$\n\n## <font size=4 ></font>\n\n- \n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n```python\nclass Config:\n    nn_input_dim = 2  # input layer dimensionality\n    nn_output_dim = 2  # output layer dimensionality\n    # Gradient descent parameters (I picked these by hand)\n    epsilon = 0.01  # learning rate for gradient descent\n    reg_lambda = 0.01  # regularization strength\n\n\ndef generate_data():\n    np.random.seed(0)\n    X, y = datasets.make_moons(200, noise=0.20)\n    return X, y\n\n\ndef visualize(X, y, model):\n    # plt.scatter(X[:, 0], X[:, 1], s=40, c=y, cmap=plt.cm.Spectral)\n    # plt.show()\n    plot_decision_boundary(lambda x:predict(model,x), X, y)\n    plt.title(\"Logistic Regression\")\n\n\ndef plot_decision_boundary(pred_func, X, y):\n    # Set min and max values and give it some padding\n    x_min, x_max = X[:, 0].min() - .5, X[:, 0].max() + .5\n    y_min, y_max = X[:, 1].min() - .5, X[:, 1].max() + .5\n    h = 0.01\n    # Generate a grid of points with distance h between them\n    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))\n    # Predict the function value for the whole gid\n    Z = pred_func(np.c_[xx.ravel(), yy.ravel()])\n    Z = Z.reshape(xx.shape)\n    # Plot the contour and training examples\n    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)\n    plt.scatter(X[:, 0], X[:, 1], c=y, cmap=plt.cm.Spectral)\n    plt.show()\n```\n\n\n\n## <font size=4 ></font>\n\n- probs\n- probs[range(num_examples), y]logdata_loss,\n\n```python\n# Helper function to evaluate the total loss on the dataset\ndef calculate_loss(model, X, y):\n    num_examples = len(X)  # training set size\n    W1, b1, W2, b2 = model['W1'], model['b1'], model['W2'], model['b2']\n    # Forward propagation to calculate our predictions\n    z1 = X.dot(W1) + b1\n    a1 = np.tanh(z1)\n    z2 = a1.dot(W2) + b2\n    exp_scores = np.exp(z2)\n    probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n    # Calculating the loss\n    corect_logprobs = -np.log(probs[range(num_examples), y])\n    data_loss = np.sum(corect_logprobs)\n    # Add regulatization term to loss (optional)\n    data_loss += Config.reg_lambda / 2 * (np.sum(np.square(W1)) + np.sum(np.square(W2)))\n    return 1. / num_examples * data_loss\n```\n\n\n\n## <font size=4 ></font>\n\n```python\n# This function learns parameters for the neural network and returns the model.\n# - nn_hdim: Number of nodes in the hidden layer\n# - num_passes: Number of passes through the training data for gradient descent\n# - print_loss: If True, print the loss every 1000 iterations\ndef build_model(X, y, nn_hdim, num_passes=20000, print_loss=False):\n    # Initialize the parameters to random values. We need to learn these.\n    num_examples = len(X)\n    np.random.seed(0)\n    W1 = np.random.randn(Config.nn_input_dim, nn_hdim) / np.sqrt(Config.nn_input_dim)\n    b1 = np.zeros((1, nn_hdim))\n    W2 = np.random.randn(nn_hdim, Config.nn_output_dim) / np.sqrt(nn_hdim)\n    b2 = np.zeros((1, Config.nn_output_dim))\n\n    # This is what we return at the end\n    model = {}\n\n    # Gradient descent. For each batch...\n    for i in range(0, num_passes):\n\n        # Forward propagation\n        z1 = X.dot(W1) + b1\n        a1 = np.tanh(z1)\n        z2 = a1.dot(W2) + b2\n        exp_scores = np.exp(z2)\n        probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n\n        # Backpropagation\n        delta3 = probs\n        delta3[range(num_examples), y] -= 1\n        dW2 = (a1.T).dot(delta3)\n        db2 = np.sum(delta3, axis=0, keepdims=True)\n        delta2 = delta3.dot(W2.T) * (1 - np.power(a1, 2))\n        dW1 = np.dot(X.T, delta2)\n        db1 = np.sum(delta2, axis=0)\n\n        # Add regularization terms (b1 and b2 don't have regularization terms)\n        dW2 += Config.reg_lambda * W2\n        dW1 += Config.reg_lambda * W1\n\n        # Gradient descent parameter update\n        W1 += -Config.epsilon * dW1\n        b1 += -Config.epsilon * db1\n        W2 += -Config.epsilon * dW2\n        b2 += -Config.epsilon * db2\n\n        # Assign new parameters to the model\n        model = {'W1': W1, 'b1': b1, 'W2': W2, 'b2': b2}\n\n        # Optionally print the loss.\n        # This is expensive because it uses the whole dataset, so we don't want to do it too often.\n        if print_loss and i % 1000 == 0:\n            print(\"Loss after iteration %i: %f\" % (i, calculate_loss(model, X, y)))\n\n    return model\n```\n\n\n\n## <font size=4 ></font>\n\n```python\ndef predict(model, x):\n    W1, b1, W2, b2 = model['W1'], model['b1'], model['W2'], model['b2']\n    # Forward propagation\n    z1 = x.dot(W1) + b1\n    a1 = np.tanh(z1)\n    z2 = a1.dot(W2) + b2\n    exp_scores = np.exp(z2)\n    probs = exp_scores / np.sum(exp_scores, axis=1, keepdims=True)\n    return np.argmax(probs, axis=1)\n```\n\n\n\n\n# <font size=5 ></font>\n\n## <font size=4 ></font>\n\n## <font size=4 ></font>\n\n# <font size=5 ></font>\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/223945007.JPG)\n\n# <font size=5 ></font>\n\n# <font size=5 ></font>\n\n# <font size=5 ></font>\n\n>[IMPLEMENTING A NEURAL NETWORK FROM SCRATCH IN PYTHON  AN INTRODUCTION](http://www.wildml.com/2015/09/implementing-a-neural-network-from-scratch/)\n>[CS231n Convolutional Neural Networks or Visual Recognition---optimization](http://cs231n.github.io/optimization-1/#gd)\n>[CS231n Convolutional Neural Networks or Visual Recognition---neural-networks](http://cs231n.github.io/neural-networks-3/#gradcheck)\n>[](http://blog.csdn.net/longxinchen_ml/article/details/50521933)\n\n\n\n\n","slug":"NeuralNetworks1","published":1,"updated":"2018-07-23T01:28:38.487Z","comments":1,"layout":"post","link":"","_id":"cjmd072cj000eqcw6fqw2quk3","content":"<hr><p>BP</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()()inputoutput</li><li>2</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p><br>$$<br>y=f(\\sum_{i=1}^nw_ix_i-\\theta )<br>$$<br>n$w_i$$\\theta$,$f$:-1$w_{n+1}$</p></li><li><p>$\\Delta$<br>$$<br>\\Delta w_i=\\eta (y-y_0)x_i<br>$$<br>()$\\eta$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p>(1)SigmoidtanhSoftmax</p></li><li><p>Sigmoid:$f(x)=f(x)(1-f(x))$</p><p>tanh:$tanh(x)=1-tanh^2(x)$</p><p></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>BP:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p><br>$$<br>L_i=-log(\\frac {e^f_{yi}} {\\sum_je^{f_j}})<br>$$<br>flogaa0,$L_i$1$L_i$0</p><p><br>$$<br>L=\\frac1N \\sum_iL_I+ \\frac12 \\lambda \\sum_k\\sum_lW_{k,l}^2<br>$$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><br>$$<br>E_k=\\frac12\\sum_{j=1}^l(y_0j^k-y_j^k)^2<br>$$<br>$\\frac 12$</li></ul><h1 id=\"BP\"><a href=\"#BP\" class=\"headerlink\" title=\"BP\"></a><font size=\"5\">BP</font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p></p></li><li><p>BP</p><p>$$<br>\\Delta w=-\\eta \\frac {\\partial L}{\\partial w}<br>$$</p><p></p></li><li><p></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/194245109.jpg\" alt=\"mark\"></p><p>$W_1,b_1$$W_2,b_2$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Config</span>:</span></span><br><span class=\"line\">    nn_input_dim = <span class=\"number\">2</span>  <span class=\"comment\"># input layer dimensionality</span></span><br><span class=\"line\">    nn_output_dim = <span class=\"number\">2</span>  <span class=\"comment\"># output layer dimensionality</span></span><br><span class=\"line\">    <span class=\"comment\"># Gradient descent parameters (I picked these by hand)</span></span><br><span class=\"line\">    epsilon = <span class=\"number\">0.01</span>  <span class=\"comment\"># learning rate for gradient descent</span></span><br><span class=\"line\">    reg_lambda = <span class=\"number\">0.01</span>  <span class=\"comment\"># regularization strength</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">generate_data</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    np.random.seed(<span class=\"number\">0</span>)</span><br><span class=\"line\">    X, y = datasets.make_moons(<span class=\"number\">200</span>, noise=<span class=\"number\">0.20</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X, y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">visualize</span><span class=\"params\">(X, y, model)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.scatter(X[:, 0], X[:, 1], s=40, c=y, cmap=plt.cm.Spectral)</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.show()</span></span><br><span class=\"line\">    plot_decision_boundary(<span class=\"keyword\">lambda</span> x:predict(model,x), X, y)</span><br><span class=\"line\">    plt.title(<span class=\"string\">\"Logistic Regression\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plot_decision_boundary</span><span class=\"params\">(pred_func, X, y)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># Set min and max values and give it some padding</span></span><br><span class=\"line\">    x_min, x_max = X[:, <span class=\"number\">0</span>].min() - <span class=\"number\">.5</span>, X[:, <span class=\"number\">0</span>].max() + <span class=\"number\">.5</span></span><br><span class=\"line\">    y_min, y_max = X[:, <span class=\"number\">1</span>].min() - <span class=\"number\">.5</span>, X[:, <span class=\"number\">1</span>].max() + <span class=\"number\">.5</span></span><br><span class=\"line\">    h = <span class=\"number\">0.01</span></span><br><span class=\"line\">    <span class=\"comment\"># Generate a grid of points with distance h between them</span></span><br><span class=\"line\">    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))</span><br><span class=\"line\">    <span class=\"comment\"># Predict the function value for the whole gid</span></span><br><span class=\"line\">    Z = pred_func(np.c_[xx.ravel(), yy.ravel()])</span><br><span class=\"line\">    Z = Z.reshape(xx.shape)</span><br><span class=\"line\">    <span class=\"comment\"># Plot the contour and training examples</span></span><br><span class=\"line\">    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)</span><br><span class=\"line\">    plt.scatter(X[:, <span class=\"number\">0</span>], X[:, <span class=\"number\">1</span>], c=y, cmap=plt.cm.Spectral)</span><br><span class=\"line\">    plt.show()</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>probs</li><li>probs[range(num_examples), y]logdata_loss,</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Helper function to evaluate the total loss on the dataset</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_loss</span><span class=\"params\">(model, X, y)</span>:</span></span><br><span class=\"line\">    num_examples = len(X)  <span class=\"comment\"># training set size</span></span><br><span class=\"line\">    W1, b1, W2, b2 = model[<span class=\"string\">'W1'</span>], model[<span class=\"string\">'b1'</span>], model[<span class=\"string\">'W2'</span>], model[<span class=\"string\">'b2'</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Forward propagation to calculate our predictions</span></span><br><span class=\"line\">    z1 = X.dot(W1) + b1</span><br><span class=\"line\">    a1 = np.tanh(z1)</span><br><span class=\"line\">    z2 = a1.dot(W2) + b2</span><br><span class=\"line\">    exp_scores = np.exp(z2)</span><br><span class=\"line\">    probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">    <span class=\"comment\"># Calculating the loss</span></span><br><span class=\"line\">    corect_logprobs = -np.log(probs[range(num_examples), y])</span><br><span class=\"line\">    data_loss = np.sum(corect_logprobs)</span><br><span class=\"line\">    <span class=\"comment\"># Add regulatization term to loss (optional)</span></span><br><span class=\"line\">    data_loss += Config.reg_lambda / <span class=\"number\">2</span> * (np.sum(np.square(W1)) + np.sum(np.square(W2)))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1.</span> / num_examples * data_loss</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># This function learns parameters for the neural network and returns the model.</span></span><br><span class=\"line\"><span class=\"comment\"># - nn_hdim: Number of nodes in the hidden layer</span></span><br><span class=\"line\"><span class=\"comment\"># - num_passes: Number of passes through the training data for gradient descent</span></span><br><span class=\"line\"><span class=\"comment\"># - print_loss: If True, print the loss every 1000 iterations</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">build_model</span><span class=\"params\">(X, y, nn_hdim, num_passes=<span class=\"number\">20000</span>, print_loss=False)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># Initialize the parameters to random values. We need to learn these.</span></span><br><span class=\"line\">    num_examples = len(X)</span><br><span class=\"line\">    np.random.seed(<span class=\"number\">0</span>)</span><br><span class=\"line\">    W1 = np.random.randn(Config.nn_input_dim, nn_hdim) / np.sqrt(Config.nn_input_dim)</span><br><span class=\"line\">    b1 = np.zeros((<span class=\"number\">1</span>, nn_hdim))</span><br><span class=\"line\">    W2 = np.random.randn(nn_hdim, Config.nn_output_dim) / np.sqrt(nn_hdim)</span><br><span class=\"line\">    b2 = np.zeros((<span class=\"number\">1</span>, Config.nn_output_dim))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># This is what we return at the end</span></span><br><span class=\"line\">    model = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Gradient descent. For each batch...</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, num_passes):</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Forward propagation</span></span><br><span class=\"line\">        z1 = X.dot(W1) + b1</span><br><span class=\"line\">        a1 = np.tanh(z1)</span><br><span class=\"line\">        z2 = a1.dot(W2) + b2</span><br><span class=\"line\">        exp_scores = np.exp(z2)</span><br><span class=\"line\">        probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Backpropagation</span></span><br><span class=\"line\">        delta3 = probs</span><br><span class=\"line\">        delta3[range(num_examples), y] -= <span class=\"number\">1</span></span><br><span class=\"line\">        dW2 = (a1.T).dot(delta3)</span><br><span class=\"line\">        db2 = np.sum(delta3, axis=<span class=\"number\">0</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">        delta2 = delta3.dot(W2.T) * (<span class=\"number\">1</span> - np.power(a1, <span class=\"number\">2</span>))</span><br><span class=\"line\">        dW1 = np.dot(X.T, delta2)</span><br><span class=\"line\">        db1 = np.sum(delta2, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Add regularization terms (b1 and b2 don't have regularization terms)</span></span><br><span class=\"line\">        dW2 += Config.reg_lambda * W2</span><br><span class=\"line\">        dW1 += Config.reg_lambda * W1</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Gradient descent parameter update</span></span><br><span class=\"line\">        W1 += -Config.epsilon * dW1</span><br><span class=\"line\">        b1 += -Config.epsilon * db1</span><br><span class=\"line\">        W2 += -Config.epsilon * dW2</span><br><span class=\"line\">        b2 += -Config.epsilon * db2</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Assign new parameters to the model</span></span><br><span class=\"line\">        model = &#123;<span class=\"string\">'W1'</span>: W1, <span class=\"string\">'b1'</span>: b1, <span class=\"string\">'W2'</span>: W2, <span class=\"string\">'b2'</span>: b2&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Optionally print the loss.</span></span><br><span class=\"line\">        <span class=\"comment\"># This is expensive because it uses the whole dataset, so we don't want to do it too often.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> print_loss <span class=\"keyword\">and</span> i % <span class=\"number\">1000</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">            print(<span class=\"string\">\"Loss after iteration %i: %f\"</span> % (i, calculate_loss(model, X, y)))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> model</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">predict</span><span class=\"params\">(model, x)</span>:</span></span><br><span class=\"line\">    W1, b1, W2, b2 = model[<span class=\"string\">'W1'</span>], model[<span class=\"string\">'b1'</span>], model[<span class=\"string\">'W2'</span>], model[<span class=\"string\">'b2'</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Forward propagation</span></span><br><span class=\"line\">    z1 = x.dot(W1) + b1</span><br><span class=\"line\">    a1 = np.tanh(z1)</span><br><span class=\"line\">    z2 = a1.dot(W2) + b2</span><br><span class=\"line\">    exp_scores = np.exp(z2)</span><br><span class=\"line\">    probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.argmax(probs, axis=<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/223945007.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><blockquote><p><a href=\"http://www.wildml.com/2015/09/implementing-a-neural-network-from-scratch/\" target=\"_blank\" rel=\"noopener\">IMPLEMENTING A NEURAL NETWORK FROM SCRATCH IN PYTHON  AN INTRODUCTION</a><br><a href=\"http://cs231n.github.io/optimization-1/#gd\" target=\"_blank\" rel=\"noopener\">CS231n Convolutional Neural Networks or Visual Recognitionoptimization</a><br><a href=\"http://cs231n.github.io/neural-networks-3/#gradcheck\" target=\"_blank\" rel=\"noopener\">CS231n Convolutional Neural Networks or Visual Recognitionneural-networks</a><br><a href=\"http://blog.csdn.net/longxinchen_ml/article/details/50521933\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote>","site":{"data":{}},"excerpt":"<hr><p>BP</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>()()inputoutput</li><li>2</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p><br>$$<br>y=f(\\sum_{i=1}^nw_ix_i-\\theta )<br>$$<br>n$w_i$$\\theta$,$f$:-1$w_{n+1}$</p></li><li><p>$\\Delta$<br>$$<br>\\Delta w_i=\\eta (y-y_0)x_i<br>$$<br>()$\\eta$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p>(1)SigmoidtanhSoftmax</p></li><li><p>Sigmoid:$f(x)=f(x)(1-f(x))$</p><p>tanh:$tanh(x)=1-tanh^2(x)$</p><p></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li><li>BP:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p><br>$$<br>L_i=-log(\\frac {e^f_{yi}} {\\sum_je^{f_j}})<br>$$<br>flogaa0,$L_i$1$L_i$0</p><p><br>$$<br>L=\\frac1N \\sum_iL_I+ \\frac12 \\lambda \\sum_k\\sum_lW_{k,l}^2<br>$$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><br>$$<br>E_k=\\frac12\\sum_{j=1}^l(y_0j^k-y_j^k)^2<br>$$<br>$\\frac 12$</li></ul><h1 id=\"BP\"><a href=\"#BP\" class=\"headerlink\" title=\"BP\"></a><font size=\"5\">BP</font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li><p></p></li><li><p>BP</p><p>$$<br>\\Delta w=-\\eta \\frac {\\partial L}{\\partial w}<br>$$</p><p></p></li><li><p></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170213/194245109.jpg\" alt=\"mark\"></p><p>$W_1,b_1$$W_2,b_2$</p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Config</span>:</span></span><br><span class=\"line\">    nn_input_dim = <span class=\"number\">2</span>  <span class=\"comment\"># input layer dimensionality</span></span><br><span class=\"line\">    nn_output_dim = <span class=\"number\">2</span>  <span class=\"comment\"># output layer dimensionality</span></span><br><span class=\"line\">    <span class=\"comment\"># Gradient descent parameters (I picked these by hand)</span></span><br><span class=\"line\">    epsilon = <span class=\"number\">0.01</span>  <span class=\"comment\"># learning rate for gradient descent</span></span><br><span class=\"line\">    reg_lambda = <span class=\"number\">0.01</span>  <span class=\"comment\"># regularization strength</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">generate_data</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    np.random.seed(<span class=\"number\">0</span>)</span><br><span class=\"line\">    X, y = datasets.make_moons(<span class=\"number\">200</span>, noise=<span class=\"number\">0.20</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X, y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">visualize</span><span class=\"params\">(X, y, model)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.scatter(X[:, 0], X[:, 1], s=40, c=y, cmap=plt.cm.Spectral)</span></span><br><span class=\"line\">    <span class=\"comment\"># plt.show()</span></span><br><span class=\"line\">    plot_decision_boundary(<span class=\"keyword\">lambda</span> x:predict(model,x), X, y)</span><br><span class=\"line\">    plt.title(<span class=\"string\">\"Logistic Regression\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">plot_decision_boundary</span><span class=\"params\">(pred_func, X, y)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># Set min and max values and give it some padding</span></span><br><span class=\"line\">    x_min, x_max = X[:, <span class=\"number\">0</span>].min() - <span class=\"number\">.5</span>, X[:, <span class=\"number\">0</span>].max() + <span class=\"number\">.5</span></span><br><span class=\"line\">    y_min, y_max = X[:, <span class=\"number\">1</span>].min() - <span class=\"number\">.5</span>, X[:, <span class=\"number\">1</span>].max() + <span class=\"number\">.5</span></span><br><span class=\"line\">    h = <span class=\"number\">0.01</span></span><br><span class=\"line\">    <span class=\"comment\"># Generate a grid of points with distance h between them</span></span><br><span class=\"line\">    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))</span><br><span class=\"line\">    <span class=\"comment\"># Predict the function value for the whole gid</span></span><br><span class=\"line\">    Z = pred_func(np.c_[xx.ravel(), yy.ravel()])</span><br><span class=\"line\">    Z = Z.reshape(xx.shape)</span><br><span class=\"line\">    <span class=\"comment\"># Plot the contour and training examples</span></span><br><span class=\"line\">    plt.contourf(xx, yy, Z, cmap=plt.cm.Spectral)</span><br><span class=\"line\">    plt.scatter(X[:, <span class=\"number\">0</span>], X[:, <span class=\"number\">1</span>], c=y, cmap=plt.cm.Spectral)</span><br><span class=\"line\">    plt.show()</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><ul><li>probs</li><li>probs[range(num_examples), y]logdata_loss,</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Helper function to evaluate the total loss on the dataset</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_loss</span><span class=\"params\">(model, X, y)</span>:</span></span><br><span class=\"line\">    num_examples = len(X)  <span class=\"comment\"># training set size</span></span><br><span class=\"line\">    W1, b1, W2, b2 = model[<span class=\"string\">'W1'</span>], model[<span class=\"string\">'b1'</span>], model[<span class=\"string\">'W2'</span>], model[<span class=\"string\">'b2'</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Forward propagation to calculate our predictions</span></span><br><span class=\"line\">    z1 = X.dot(W1) + b1</span><br><span class=\"line\">    a1 = np.tanh(z1)</span><br><span class=\"line\">    z2 = a1.dot(W2) + b2</span><br><span class=\"line\">    exp_scores = np.exp(z2)</span><br><span class=\"line\">    probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">    <span class=\"comment\"># Calculating the loss</span></span><br><span class=\"line\">    corect_logprobs = -np.log(probs[range(num_examples), y])</span><br><span class=\"line\">    data_loss = np.sum(corect_logprobs)</span><br><span class=\"line\">    <span class=\"comment\"># Add regulatization term to loss (optional)</span></span><br><span class=\"line\">    data_loss += Config.reg_lambda / <span class=\"number\">2</span> * (np.sum(np.square(W1)) + np.sum(np.square(W2)))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">1.</span> / num_examples * data_loss</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># This function learns parameters for the neural network and returns the model.</span></span><br><span class=\"line\"><span class=\"comment\"># - nn_hdim: Number of nodes in the hidden layer</span></span><br><span class=\"line\"><span class=\"comment\"># - num_passes: Number of passes through the training data for gradient descent</span></span><br><span class=\"line\"><span class=\"comment\"># - print_loss: If True, print the loss every 1000 iterations</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">build_model</span><span class=\"params\">(X, y, nn_hdim, num_passes=<span class=\"number\">20000</span>, print_loss=False)</span>:</span></span><br><span class=\"line\">    <span class=\"comment\"># Initialize the parameters to random values. We need to learn these.</span></span><br><span class=\"line\">    num_examples = len(X)</span><br><span class=\"line\">    np.random.seed(<span class=\"number\">0</span>)</span><br><span class=\"line\">    W1 = np.random.randn(Config.nn_input_dim, nn_hdim) / np.sqrt(Config.nn_input_dim)</span><br><span class=\"line\">    b1 = np.zeros((<span class=\"number\">1</span>, nn_hdim))</span><br><span class=\"line\">    W2 = np.random.randn(nn_hdim, Config.nn_output_dim) / np.sqrt(nn_hdim)</span><br><span class=\"line\">    b2 = np.zeros((<span class=\"number\">1</span>, Config.nn_output_dim))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># This is what we return at the end</span></span><br><span class=\"line\">    model = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Gradient descent. For each batch...</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">0</span>, num_passes):</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Forward propagation</span></span><br><span class=\"line\">        z1 = X.dot(W1) + b1</span><br><span class=\"line\">        a1 = np.tanh(z1)</span><br><span class=\"line\">        z2 = a1.dot(W2) + b2</span><br><span class=\"line\">        exp_scores = np.exp(z2)</span><br><span class=\"line\">        probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Backpropagation</span></span><br><span class=\"line\">        delta3 = probs</span><br><span class=\"line\">        delta3[range(num_examples), y] -= <span class=\"number\">1</span></span><br><span class=\"line\">        dW2 = (a1.T).dot(delta3)</span><br><span class=\"line\">        db2 = np.sum(delta3, axis=<span class=\"number\">0</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">        delta2 = delta3.dot(W2.T) * (<span class=\"number\">1</span> - np.power(a1, <span class=\"number\">2</span>))</span><br><span class=\"line\">        dW1 = np.dot(X.T, delta2)</span><br><span class=\"line\">        db1 = np.sum(delta2, axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Add regularization terms (b1 and b2 don't have regularization terms)</span></span><br><span class=\"line\">        dW2 += Config.reg_lambda * W2</span><br><span class=\"line\">        dW1 += Config.reg_lambda * W1</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Gradient descent parameter update</span></span><br><span class=\"line\">        W1 += -Config.epsilon * dW1</span><br><span class=\"line\">        b1 += -Config.epsilon * db1</span><br><span class=\"line\">        W2 += -Config.epsilon * dW2</span><br><span class=\"line\">        b2 += -Config.epsilon * db2</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Assign new parameters to the model</span></span><br><span class=\"line\">        model = &#123;<span class=\"string\">'W1'</span>: W1, <span class=\"string\">'b1'</span>: b1, <span class=\"string\">'W2'</span>: W2, <span class=\"string\">'b2'</span>: b2&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\"># Optionally print the loss.</span></span><br><span class=\"line\">        <span class=\"comment\"># This is expensive because it uses the whole dataset, so we don't want to do it too often.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> print_loss <span class=\"keyword\">and</span> i % <span class=\"number\">1000</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">            print(<span class=\"string\">\"Loss after iteration %i: %f\"</span> % (i, calculate_loss(model, X, y)))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> model</span><br></pre></td></tr></table></figure><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">predict</span><span class=\"params\">(model, x)</span>:</span></span><br><span class=\"line\">    W1, b1, W2, b2 = model[<span class=\"string\">'W1'</span>], model[<span class=\"string\">'b1'</span>], model[<span class=\"string\">'W2'</span>], model[<span class=\"string\">'b2'</span>]</span><br><span class=\"line\">    <span class=\"comment\"># Forward propagation</span></span><br><span class=\"line\">    z1 = x.dot(W1) + b1</span><br><span class=\"line\">    a1 = np.tanh(z1)</span><br><span class=\"line\">    z2 = a1.dot(W2) + b2</span><br><span class=\"line\">    exp_scores = np.exp(z2)</span><br><span class=\"line\">    probs = exp_scores / np.sum(exp_scores, axis=<span class=\"number\">1</span>, keepdims=<span class=\"keyword\">True</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> np.argmax(probs, axis=<span class=\"number\">1</span>)</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"4\"></font></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/223945007.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><font size=\"5\"></font></h1><blockquote><p><a href=\"http://www.wildml.com/2015/09/implementing-a-neural-network-from-scratch/\" target=\"_blank\" rel=\"noopener\">IMPLEMENTING A NEURAL NETWORK FROM SCRATCH IN PYTHON  AN INTRODUCTION</a><br><a href=\"http://cs231n.github.io/optimization-1/#gd\" target=\"_blank\" rel=\"noopener\">CS231n Convolutional Neural Networks or Visual Recognitionoptimization</a><br><a href=\"http://cs231n.github.io/neural-networks-3/#gradcheck\" target=\"_blank\" rel=\"noopener\">CS231n Convolutional Neural Networks or Visual Recognitionneural-networks</a><br><a href=\"http://blog.csdn.net/longxinchen_ml/article/details/50521933\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":":","path":"2017/02/10/NeuralNetworks1/","eyeCatchImage":null,"excerpt":"<hr><p>BP</p>","date":"2017-02-10T04:20:17.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-03-07T01:56:23.000Z","author":"Thinkwee","mathjax":true,"_content":"NLPseq2seq\n\n<!--more-->\n\n# \n-\t\n\n# \n-\t\n-\t.(?)\n-\tSoftmaxsigmoid\n-\tReLU0\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6I6a2Eccce.png?imageslim)\n\t-1\n\t\n\t\n\n# \n-\t =Jacobian*\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/4c4HJ2L5Eg.png?imageslim)\n\t\n\t1\n\tJacobian\n\t\n\n# RNN\n## RNN\n-\t\n-\t\n-\txxhhoLoy\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6KB34Ef356.png?imageslim)\n-\t\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/FfDA7bJIce.png?imageslim)\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CDfgfKaH5d.png?imageslim)\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GJ2CBjhGII.png?imageslim)\n-\tsoftmax\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/kj5bKAgKfc.png?imageslim)\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/b0dL8g7clF.png?imageslim)\n-\tRNN(?)WW\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jehilKjam9.png?imageslim)\n\n## RNN\n-\t\n\n## \n-\tLSTMc\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CdI13aLb2A.png?imageslim)\n\n## RNN\n-\tA.\n-\tB.\n-\tC.\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/clfEmm1Kj5.png?imageslim)\n\n## RNN\n-\t\n-\t11\n-\t1\n\n## RNN\n-RNNLSTMGRU\n-\t(?) v   (t)  (t1) + (1)v (t)   (t)    (t1)   (t)    1    0\n\n# LSTM\n-\tLSTM\n-\tLSTMRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6iK5ld6Aij.png?imageslim)\n-\tRNNsh\n-\tsigmoid\n-\txshsigmoid0,1)s\n-\ts\n-\th\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/5f3GlGB9Ek.png?imageslim)\n\n# LSTM\n-\tRNNlstmw1w66\n-\t\n -\t(concat)\t\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/B4FKeKIc7f.png?imageslim)\n\n# Word2Vec\n-\t-(one-hot)one-hot-softmaxone-hotW2VNLM\n-\tsoftmaxW2VW2V\n-\t(?)\n-\tsoftmax[ | Part2softmax](https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650720050&idx=2&sn=9fedc937d3128462c478ef7911e77687&chksm=871b034cb06c8a5a8db8a10f708c81025fc62084d871ac5d184bab5098cb64e939c1c23a7369&scene=21#wechat_redirect)\n\n# \n-\tseq2seq\n-\t\n","source":"_posts/NLPBasic.md","raw":"---\ntitle: \ndate: 2018-03-07 09:56:23\ntags:\n  - abstractive summarization\n  - math\n  - machinelearning\n  -\ttheory\n  -\tnlp\ncategories:\n  - \nauthor: Thinkwee\nmathjax: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180307/D16L2739kI.jpg?imageslim\n---\nNLPseq2seq\n\n<!--more-->\n\n# \n-\t\n\n# \n-\t\n-\t.(?)\n-\tSoftmaxsigmoid\n-\tReLU0\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6I6a2Eccce.png?imageslim)\n\t-1\n\t\n\t\n\n# \n-\t =Jacobian*\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/4c4HJ2L5Eg.png?imageslim)\n\t\n\t1\n\tJacobian\n\t\n\n# RNN\n## RNN\n-\t\n-\t\n-\txxhhoLoy\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6KB34Ef356.png?imageslim)\n-\t\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/FfDA7bJIce.png?imageslim)\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CDfgfKaH5d.png?imageslim)\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GJ2CBjhGII.png?imageslim)\n-\tsoftmax\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/kj5bKAgKfc.png?imageslim)\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/b0dL8g7clF.png?imageslim)\n-\tRNN(?)WW\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jehilKjam9.png?imageslim)\n\n## RNN\n-\t\n\n## \n-\tLSTMc\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CdI13aLb2A.png?imageslim)\n\n## RNN\n-\tA.\n-\tB.\n-\tC.\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/clfEmm1Kj5.png?imageslim)\n\n## RNN\n-\t\n-\t11\n-\t1\n\n## RNN\n-RNNLSTMGRU\n-\t(?) v   (t)  (t1) + (1)v (t)   (t)    (t1)   (t)    1    0\n\n# LSTM\n-\tLSTM\n-\tLSTMRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6iK5ld6Aij.png?imageslim)\n-\tRNNsh\n-\tsigmoid\n-\txshsigmoid0,1)s\n-\ts\n-\th\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/5f3GlGB9Ek.png?imageslim)\n\n# LSTM\n-\tRNNlstmw1w66\n-\t\n -\t(concat)\t\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/B4FKeKIc7f.png?imageslim)\n\n# Word2Vec\n-\t-(one-hot)one-hot-softmaxone-hotW2VNLM\n-\tsoftmaxW2VW2V\n-\t(?)\n-\tsoftmax[ | Part2softmax](https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650720050&idx=2&sn=9fedc937d3128462c478ef7911e77687&chksm=871b034cb06c8a5a8db8a10f708c81025fc62084d871ac5d184bab5098cb64e939c1c23a7369&scene=21#wechat_redirect)\n\n# \n-\tseq2seq\n-\t\n","slug":"NLPBasic","published":1,"updated":"2018-07-23T01:28:38.487Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180307/D16L2739kI.jpg?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072cl000iqcw6gj4y2i1c","content":"<p>NLPseq2seq</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li>.(?)</li><li>Softmaxsigmoid</li><li>ReLU0<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6I6a2Eccce.png?imageslim\" alt=\"mark\"><br>-1<br><br></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li> =Jacobian*</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/4c4HJ2L5Eg.png?imageslim\" alt=\"mark\"><br><br>1<br>Jacobian<br></li></ul><h1 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h1><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li><li></li><li>xxhhoLoy</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6KB34Ef356.png?imageslim\" alt=\"mark\"></li><li><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/FfDA7bJIce.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CDfgfKaH5d.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GJ2CBjhGII.png?imageslim\" alt=\"mark\"></li></ul></li><li>softmax<br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/kj5bKAgKfc.png?imageslim\" alt=\"mark\"><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/b0dL8g7clF.png?imageslim\" alt=\"mark\"></li><li>RNN(?)WW<br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jehilKjam9.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>LSTMc<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CdI13aLb2A.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li>A.</li><li>B.</li><li>C.<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/clfEmm1Kj5.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li><li>11</li><li>1</li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><p>-RNNLSTMGRU</p><ul><li>(?) v   (t)  (t1) + (1)v (t)   (t)    (t1)   (t)    1    0</li></ul><h1 id=\"LSTM\"><a href=\"#LSTM\" class=\"headerlink\" title=\"LSTM\"></a>LSTM</h1><ul><li>LSTM</li><li>LSTMRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6iK5ld6Aij.png?imageslim\" alt=\"mark\"></li><li>RNNsh</li><li>sigmoid</li><li>xshsigmoid0,1)s</li><li>s</li><li>h</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/5f3GlGB9Ek.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"LSTM\"><a href=\"#LSTM\" class=\"headerlink\" title=\"LSTM\"></a>LSTM</h1><ul><li>RNNlstmw1w66</li><li><ul><li>(concat)</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/B4FKeKIc7f.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"Word2Vec\"><a href=\"#Word2Vec\" class=\"headerlink\" title=\"Word2Vec\"></a>Word2Vec</h1><ul><li>-(one-hot)one-hot-softmaxone-hotW2VNLM</li><li>softmaxW2VW2V</li><li>(?)</li><li>softmax<a href=\"https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650720050&amp;idx=2&amp;sn=9fedc937d3128462c478ef7911e77687&amp;chksm=871b034cb06c8a5a8db8a10f708c81025fc62084d871ac5d184bab5098cb64e939c1c23a7369&amp;scene=21#wechat_redirect\" target=\"_blank\" rel=\"noopener\"> | Part2softmax</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>seq2seq</li><li></li></ul>","site":{"data":{}},"excerpt":"<p>NLPseq2seq</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li>.(?)</li><li>Softmaxsigmoid</li><li>ReLU0<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6I6a2Eccce.png?imageslim\" alt=\"mark\"><br>-1<br><br></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li> =Jacobian*</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/4c4HJ2L5Eg.png?imageslim\" alt=\"mark\"><br><br>1<br>Jacobian<br></li></ul><h1 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h1><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li><li></li><li>xxhhoLoy</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6KB34Ef356.png?imageslim\" alt=\"mark\"></li><li><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/FfDA7bJIce.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CDfgfKaH5d.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/GJ2CBjhGII.png?imageslim\" alt=\"mark\"></li></ul></li><li>softmax<br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/kj5bKAgKfc.png?imageslim\" alt=\"mark\"><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/b0dL8g7clF.png?imageslim\" alt=\"mark\"></li><li>RNN(?)WW<br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/jehilKjam9.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>LSTMc<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/CdI13aLb2A.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li>A.</li><li>B.</li><li>C.<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/clfEmm1Kj5.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><ul><li></li><li>11</li><li>1</li></ul><h2 id=\"RNN\"><a href=\"#RNN\" class=\"headerlink\" title=\"RNN\"></a>RNN</h2><p>-RNNLSTMGRU</p><ul><li>(?) v   (t)  (t1) + (1)v (t)   (t)    (t1)   (t)    1    0</li></ul><h1 id=\"LSTM\"><a href=\"#LSTM\" class=\"headerlink\" title=\"LSTM\"></a>LSTM</h1><ul><li>LSTM</li><li>LSTMRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6iK5ld6Aij.png?imageslim\" alt=\"mark\"></li><li>RNNsh</li><li>sigmoid</li><li>xshsigmoid0,1)s</li><li>s</li><li>h</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/5f3GlGB9Ek.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"LSTM\"><a href=\"#LSTM\" class=\"headerlink\" title=\"LSTM\"></a>LSTM</h1><ul><li>RNNlstmw1w66</li><li><ul><li>(concat)</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/B4FKeKIc7f.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"Word2Vec\"><a href=\"#Word2Vec\" class=\"headerlink\" title=\"Word2Vec\"></a>Word2Vec</h1><ul><li>-(one-hot)one-hot-softmaxone-hotW2VNLM</li><li>softmaxW2VW2V</li><li>(?)</li><li>softmax<a href=\"https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&amp;mid=2650720050&amp;idx=2&amp;sn=9fedc937d3128462c478ef7911e77687&amp;chksm=871b034cb06c8a5a8db8a10f708c81025fc62084d871ac5d184bab5098cb64e939c1c23a7369&amp;scene=21#wechat_redirect\" target=\"_blank\" rel=\"noopener\"> | Part2softmax</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>seq2seq</li><li></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"","path":"2018/03/07/NLPBasic/","eyeCatchImage":null,"excerpt":"<p>NLPseq2seq</p>","date":"2018-03-07T01:56:23.000Z","pv":0,"totalPV":0,"categories":"","tags":["abstractive summarization","math","machinelearning","theory","nlp"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Python","date":"2017-03-28T12:02:39.000Z","_content":"***\nPython\n\nPython3.5\n\n<!--more-->\n\n# \n-\tC++PythonPython\n-\tPython\n\t```Python\n\t\ta=3\n\t\tb=a\n\t```\n\tab3ba\n-\tb=a[:]\n\n# string\n-\t\n\n# lambda\n-\tlambda :\n-\treduce\n-\tlambdalambda\n\t```Python\n\t\tx=10\n\t\ta=lambda y,x=x:x+y\n\t\tx=20\n\t\tprint(a(10))\n\t\t\n\t>>> 20\n\t```\n\t30\n\t\n# \n-\t__iter__yieldnext\n\t```Python\n\t\tclass Countdown:\n\t\t\tdef __init__(self, start):\n\t\t\t\tself.start = start\n\t\t\n\t\t\tdef __iter__(self):\n\t\t\t\tn = self.start\n\t\t\t\twhile n > 0:\n\t\t\t\t\tyield n\n\t\t\t\t\tn -= 1\n    \n\t\t\tdef __reversed__(self):\n\t\t\t\tn = 1\n\t\t\t\twhile n <= self.start:\n\t\t\t\t\tn += 1\n    \n    \n\t\tfor rr in (Countdown(3)):\n\t\t\tprint(rr)\n\t\t\n\t>>> 3\n\t    2\n\t    1\n\t```\n\n# enumerate\n-\t\n\t```Python\n\t\tfor idx,val in enumerate(my_list,1):\n\t\t\tprint(idx,val)\n\t```\n\n# \n-\t\n\t```Python\n\tdef avg(first,*rest):\n\t\treturn (first+sum(rest))/(1+len(rest))\n\t```\n\t\\*\\*\\*\\*\\*\\*\n\t(\\*\\*\\*)\n-\t\n\treturn a,b,c\n\n# \n-\t\n\t```Python\n\t\timport time\n\t\tfrom functools import wraps\n\t\t\n\t\t\n\t\tdef timethis(func):\n\t\t\t@wraps(func)\n\t\t\tdef wrapper(*args, **kwargs):\n\t\t\t\tstart = time.time()\n\t\t\t\tresult = func(*args, **kwargs)\n\t\t\t\tend = time.time()\n\t\t\t\tprint(func.__name__, end - start)\n\t\t\t\treturn result\n\t\t\n\t\t\treturn wrapper\n\t\t\n\t\t@timethis\n\t\tdef loop(n):\n\t\t\twhile n > 0:\n\t\t\t\tn -= 1\n\t\t\n\t\t\n\t\tloop(100000)\n\t\n\t>>> loop 0.03971695899963379\n\t```\n\ttimethisfuncargskwargs\n\twrapperfunc\n-\ttimethis@wraps__wrapped__\n\n# \n-\t\n-\t\n\n# filter\n-\t\n\t```Python\n\t\tdef is_odd(n):\n\t\t\treturn n % 2 == 1\n\n\t\tfilter(is_odd, [1, 2, 4, 5, 6, 9, 10, 15])\n\t```\n\n# any\n-\t\n\t```Python\t\t\t\t\n\t\tdef any(iterable):\n\t\t   for element in iterable:\n\t\t\t   if  element:\n\t\t\t\t   return False\n\t\t   return True\n\t```\n\n# yield\n-\tyieldgeneratorgeneratornext()fornext()yieldyield yield yield \n\t```Python\n\t\t>>> def g(n):\n\t\t...     for i in range(n):\n\t\t...             yield i **2\n\t\t...\n\t\t>>> for i in g(5):\n\t\t...     print i,\":\",\n\t\t...\n\t\t0 : 1 : 4 : 9 : 16 :\n\t```","source":"_posts/PythonNotes.md","raw":"title: Python\ndate: 2017-03-28 20:02:39\ntags:\n-\tcode\n-\tpython\ncategories:\n-\tPython\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/20170328/200539402.png\n---\n***\nPython\n\nPython3.5\n\n<!--more-->\n\n# \n-\tC++PythonPython\n-\tPython\n\t```Python\n\t\ta=3\n\t\tb=a\n\t```\n\tab3ba\n-\tb=a[:]\n\n# string\n-\t\n\n# lambda\n-\tlambda :\n-\treduce\n-\tlambdalambda\n\t```Python\n\t\tx=10\n\t\ta=lambda y,x=x:x+y\n\t\tx=20\n\t\tprint(a(10))\n\t\t\n\t>>> 20\n\t```\n\t30\n\t\n# \n-\t__iter__yieldnext\n\t```Python\n\t\tclass Countdown:\n\t\t\tdef __init__(self, start):\n\t\t\t\tself.start = start\n\t\t\n\t\t\tdef __iter__(self):\n\t\t\t\tn = self.start\n\t\t\t\twhile n > 0:\n\t\t\t\t\tyield n\n\t\t\t\t\tn -= 1\n    \n\t\t\tdef __reversed__(self):\n\t\t\t\tn = 1\n\t\t\t\twhile n <= self.start:\n\t\t\t\t\tn += 1\n    \n    \n\t\tfor rr in (Countdown(3)):\n\t\t\tprint(rr)\n\t\t\n\t>>> 3\n\t    2\n\t    1\n\t```\n\n# enumerate\n-\t\n\t```Python\n\t\tfor idx,val in enumerate(my_list,1):\n\t\t\tprint(idx,val)\n\t```\n\n# \n-\t\n\t```Python\n\tdef avg(first,*rest):\n\t\treturn (first+sum(rest))/(1+len(rest))\n\t```\n\t\\*\\*\\*\\*\\*\\*\n\t(\\*\\*\\*)\n-\t\n\treturn a,b,c\n\n# \n-\t\n\t```Python\n\t\timport time\n\t\tfrom functools import wraps\n\t\t\n\t\t\n\t\tdef timethis(func):\n\t\t\t@wraps(func)\n\t\t\tdef wrapper(*args, **kwargs):\n\t\t\t\tstart = time.time()\n\t\t\t\tresult = func(*args, **kwargs)\n\t\t\t\tend = time.time()\n\t\t\t\tprint(func.__name__, end - start)\n\t\t\t\treturn result\n\t\t\n\t\t\treturn wrapper\n\t\t\n\t\t@timethis\n\t\tdef loop(n):\n\t\t\twhile n > 0:\n\t\t\t\tn -= 1\n\t\t\n\t\t\n\t\tloop(100000)\n\t\n\t>>> loop 0.03971695899963379\n\t```\n\ttimethisfuncargskwargs\n\twrapperfunc\n-\ttimethis@wraps__wrapped__\n\n# \n-\t\n-\t\n\n# filter\n-\t\n\t```Python\n\t\tdef is_odd(n):\n\t\t\treturn n % 2 == 1\n\n\t\tfilter(is_odd, [1, 2, 4, 5, 6, 9, 10, 15])\n\t```\n\n# any\n-\t\n\t```Python\t\t\t\t\n\t\tdef any(iterable):\n\t\t   for element in iterable:\n\t\t\t   if  element:\n\t\t\t\t   return False\n\t\t   return True\n\t```\n\n# yield\n-\tyieldgeneratorgeneratornext()fornext()yieldyield yield yield \n\t```Python\n\t\t>>> def g(n):\n\t\t...     for i in range(n):\n\t\t...             yield i **2\n\t\t...\n\t\t>>> for i in g(5):\n\t\t...     print i,\":\",\n\t\t...\n\t\t0 : 1 : 4 : 9 : 16 :\n\t```","slug":"PythonNotes","published":1,"updated":"2018-07-23T01:28:38.502Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170328/200539402.png"],"comments":1,"layout":"post","link":"","_id":"cjmd072cm000jqcw667rfquno","content":"<hr><p>Python<br><br>Python3.5</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>C++PythonPython</li><li><p>Python</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a=<span class=\"number\">3</span></span><br><span class=\"line\">b=a</span><br></pre></td></tr></table></figure><p>ab3ba</p></li><li>b=a[:]</li></ul><h1 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\"string\"></a>string</h1><ul><li></li></ul><h1 id=\"lambda\"><a href=\"#lambda\" class=\"headerlink\" title=\"lambda\"></a>lambda</h1><ul><li>lambda :</li><li>reduce</li><li><p>lambdalambda</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\tx=<span class=\"number\">10</span></span><br><span class=\"line\">\ta=<span class=\"keyword\">lambda</span> y,x=x:x+y</span><br><span class=\"line\">\tx=<span class=\"number\">20</span></span><br><span class=\"line\">\tprint(a(<span class=\"number\">10</span>))</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">20</span></span><br></pre></td></tr></table></figure><p>30</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><strong>iter</strong>yieldnext<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Countdown</span>:</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, start)</span>:</span></span><br><span class=\"line\">\t\t\tself.start = start</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">\t\t\tn = self.start</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">yield</span> n</span><br><span class=\"line\">\t\t\t\tn -= <span class=\"number\">1</span></span><br><span class=\"line\">   </span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__reversed__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">\t\t\tn = <span class=\"number\">1</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> n &lt;= self.start:</span><br><span class=\"line\">\t\t\t\tn += <span class=\"number\">1</span></span><br><span class=\"line\">   </span><br><span class=\"line\">   </span><br><span class=\"line\">\t<span class=\"keyword\">for</span> rr <span class=\"keyword\">in</span> (Countdown(<span class=\"number\">3</span>)):</span><br><span class=\"line\">\t\tprint(rr)</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">3</span></span><br><span class=\"line\">    <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li></ul><h1 id=\"enumerate\"><a href=\"#enumerate\" class=\"headerlink\" title=\"enumerate\"></a>enumerate</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> idx,val <span class=\"keyword\">in</span> enumerate(my_list,<span class=\"number\">1</span>):</span><br><span class=\"line\">\tprint(idx,val)</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">avg</span><span class=\"params\">(first,*rest)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (first+sum(rest))/(<span class=\"number\">1</span>+len(rest))</span><br></pre></td></tr></table></figure><p>******<br>(***)</p></li><li><br>return a,b,c</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"keyword\">import</span> time</span><br><span class=\"line\">\t<span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> wraps</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">timethis</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">\t\t@wraps(func)</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrapper</span><span class=\"params\">(*args, **kwargs)</span>:</span></span><br><span class=\"line\">\t\t\tstart = time.time()</span><br><span class=\"line\">\t\t\tresult = func(*args, **kwargs)</span><br><span class=\"line\">\t\t\tend = time.time()</span><br><span class=\"line\">\t\t\tprint(func.__name__, end - start)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">\t@timethis</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">loop</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\tn -= <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tloop(<span class=\"number\">100000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>loop <span class=\"number\">0.03971695899963379</span></span><br></pre></td></tr></table></figure><p>timethisfuncargskwargs<br>wrapperfunc</p></li><li>timethis@wraps<strong>wrapped</strong></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li></li></ul><h1 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_odd</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n % <span class=\"number\">2</span> == <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">filter(is_odd, [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>, <span class=\"number\">15</span>])</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"any\"><a href=\"#any\" class=\"headerlink\" title=\"any\"></a>any</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">any</span><span class=\"params\">(iterable)</span>:</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> element <span class=\"keyword\">in</span> iterable:</span><br><span class=\"line\">\t   <span class=\"keyword\">if</span>  element:</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br></pre></td></tr></table></figure></li></ul><h1 id=\"yield\"><a href=\"#yield\" class=\"headerlink\" title=\"yield\"></a>yield</h1><ul><li>yieldgeneratorgeneratornext()fornext()yieldyield yield yield <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">g</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\"><span class=\"meta\">... </span>            <span class=\"keyword\">yield</span> i **<span class=\"number\">2</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> g(<span class=\"number\">5</span>):</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">print</span> i,<span class=\"string\">\":\"</span>,</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">0</span> : <span class=\"number\">1</span> : <span class=\"number\">4</span> : <span class=\"number\">9</span> : <span class=\"number\">16</span> :</span><br></pre></td></tr></table></figure></li></ul>","site":{"data":{}},"excerpt":"<hr><p>Python<br><br>Python3.5</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>C++PythonPython</li><li><p>Python</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a=<span class=\"number\">3</span></span><br><span class=\"line\">b=a</span><br></pre></td></tr></table></figure><p>ab3ba</p></li><li>b=a[:]</li></ul><h1 id=\"string\"><a href=\"#string\" class=\"headerlink\" title=\"string\"></a>string</h1><ul><li></li></ul><h1 id=\"lambda\"><a href=\"#lambda\" class=\"headerlink\" title=\"lambda\"></a>lambda</h1><ul><li>lambda :</li><li>reduce</li><li><p>lambdalambda</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\tx=<span class=\"number\">10</span></span><br><span class=\"line\">\ta=<span class=\"keyword\">lambda</span> y,x=x:x+y</span><br><span class=\"line\">\tx=<span class=\"number\">20</span></span><br><span class=\"line\">\tprint(a(<span class=\"number\">10</span>))</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">20</span></span><br></pre></td></tr></table></figure><p>30</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><strong>iter</strong>yieldnext<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Countdown</span>:</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__init__</span><span class=\"params\">(self, start)</span>:</span></span><br><span class=\"line\">\t\t\tself.start = start</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__iter__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">\t\t\tn = self.start</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">yield</span> n</span><br><span class=\"line\">\t\t\t\tn -= <span class=\"number\">1</span></span><br><span class=\"line\">   </span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">__reversed__</span><span class=\"params\">(self)</span>:</span></span><br><span class=\"line\">\t\t\tn = <span class=\"number\">1</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> n &lt;= self.start:</span><br><span class=\"line\">\t\t\t\tn += <span class=\"number\">1</span></span><br><span class=\"line\">   </span><br><span class=\"line\">   </span><br><span class=\"line\">\t<span class=\"keyword\">for</span> rr <span class=\"keyword\">in</span> (Countdown(<span class=\"number\">3</span>)):</span><br><span class=\"line\">\t\tprint(rr)</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"number\">3</span></span><br><span class=\"line\">    <span class=\"number\">2</span></span><br><span class=\"line\">    <span class=\"number\">1</span></span><br></pre></td></tr></table></figure></li></ul><h1 id=\"enumerate\"><a href=\"#enumerate\" class=\"headerlink\" title=\"enumerate\"></a>enumerate</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> idx,val <span class=\"keyword\">in</span> enumerate(my_list,<span class=\"number\">1</span>):</span><br><span class=\"line\">\tprint(idx,val)</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">avg</span><span class=\"params\">(first,*rest)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> (first+sum(rest))/(<span class=\"number\">1</span>+len(rest))</span><br></pre></td></tr></table></figure><p>******<br>(***)</p></li><li><br>return a,b,c</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"keyword\">import</span> time</span><br><span class=\"line\">\t<span class=\"keyword\">from</span> functools <span class=\"keyword\">import</span> wraps</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">timethis</span><span class=\"params\">(func)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">\t\t@wraps(func)</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wrapper</span><span class=\"params\">(*args, **kwargs)</span>:</span></span><br><span class=\"line\">\t\t\tstart = time.time()</span><br><span class=\"line\">\t\t\tresult = func(*args, **kwargs)</span><br><span class=\"line\">\t\t\tend = time.time()</span><br><span class=\"line\">\t\t\tprint(func.__name__, end - start)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">return</span> result</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> wrapper</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"meta\">\t@timethis</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">loop</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">while</span> n &gt; <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\tn -= <span class=\"number\">1</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tloop(<span class=\"number\">100000</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>loop <span class=\"number\">0.03971695899963379</span></span><br></pre></td></tr></table></figure><p>timethisfuncargskwargs<br>wrapperfunc</p></li><li>timethis@wraps<strong>wrapped</strong></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li></li></ul><h1 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">is_odd</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">return</span> n % <span class=\"number\">2</span> == <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">filter(is_odd, [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>, <span class=\"number\">9</span>, <span class=\"number\">10</span>, <span class=\"number\">15</span>])</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"any\"><a href=\"#any\" class=\"headerlink\" title=\"any\"></a>any</h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">any</span><span class=\"params\">(iterable)</span>:</span></span><br><span class=\"line\">   <span class=\"keyword\">for</span> element <span class=\"keyword\">in</span> iterable:</span><br><span class=\"line\">\t   <span class=\"keyword\">if</span>  element:</span><br><span class=\"line\">\t\t   <span class=\"keyword\">return</span> <span class=\"keyword\">False</span></span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">True</span></span><br></pre></td></tr></table></figure></li></ul><h1 id=\"yield\"><a href=\"#yield\" class=\"headerlink\" title=\"yield\"></a>yield</h1><ul><li>yieldgeneratorgeneratornext()fornext()yieldyield yield yield <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">g</span><span class=\"params\">(n)</span>:</span></span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(n):</span><br><span class=\"line\"><span class=\"meta\">... </span>            <span class=\"keyword\">yield</span> i **<span class=\"number\">2</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> g(<span class=\"number\">5</span>):</span><br><span class=\"line\"><span class=\"meta\">... </span>    <span class=\"keyword\">print</span> i,<span class=\"string\">\":\"</span>,</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"number\">0</span> : <span class=\"number\">1</span> : <span class=\"number\">4</span> : <span class=\"number\">9</span> : <span class=\"number\">16</span> :</span><br></pre></td></tr></table></figure></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Python","path":"2017/03/28/PythonNotes/","eyeCatchImage":null,"excerpt":"<hr><p>Python<br><br>Python3.5</p>","date":"2017-03-28T12:02:39.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["code","python"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"2018","date":"2018-03-07T02:20:14.000Z","author":"Thinkwee","mathjax":true,"_content":"\n\n\n<!--more-->\n\n# Neural Machine Translation By Jointly Learning To Align And Translate\n-\t2015.5(ICLR2015)Dzmitry Bahdanau\n-\t\n-\tGRU\n-\t\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2a61D9C0bJ.png?imageslim)\n\n# Effective Approaches to Attention-based Neural Machine Translation\n-\t2015.8Minh-Thang LuongRNN\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Jhd4h2ic23.png?imageslim)\n\tsoftmax\n\t\n## \n-\t,,(,).Dzmitry BahdanauRNNRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEl1fi1b3B.png?imageslim)\n-\tEffective Approachesinput-feeding\n\n## \n-\t\n -\tii,\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2km3e0C7Hl.png?imageslim)\n\thtt\n\tWpvp\n\tS,sigmoid\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fk5dLHDFIf.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HGb9LdgmKf.png?imageslim)\n\n## Input-feeding\n-\tInput-feedingfeed\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6ag84hdbdg.png?imageslim)\n\n# A Neural Attention Model for Abstractive Sentence Summarization\n-\t2015.9Alexander M. Rush\n-\tNNLM\n-\tRNN\n-\t,(yc)\n-\tRNN\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/1ihKc65elf.png?imageslim)\n\t\n# Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond\n-\t2016.8Ramesh NallapatiRNN\n-\tDzmitry BahdanauGRUGRU\n-\tLVTlarge vocabulary trick)Feature-rich encoderswitching generator-pointer\n\n## LVT\n-\tsoftmaxmini-batchbatchbatchbatch\n\n## Feature-rich Encoder\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ekCiaiiCK5.png?imageslim)\n\t\n## Switching Generator-pointer\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/8FK4CfIBmm.png?imageslim)\n\tSwitching generator/pointer model\n\tG\n\tP\n\t\n## \n-\tRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JfLDj1G2Hb.png?imageslim)\n\n# Recurrent Neural Network Regularization\n-\tdropout\n-\tDropout\n-\tdropout12\n-\tRNNRNN\n-\tRNN\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ji48kaCe2H.png?imageslim)\n\n# Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models\n-\tRNNnon-goal-driven\n-\ttriplesA-B-A\n-\tRNNRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HkHJghaaa0.png?imageslim)\n\tRNN\n\tRNN\n-\tbootstrappingw2vQA4epoch\n-\tEvaluationword perplexityword classification error\n-\ti dont knowim sorry123infertripleinfer\n\n# News Event Summarization Complemented by Micropoints\n-\tmicropointsROUGE\n-\tmicropointsmicropoints\n-\tCDWSnippet Growth Model\n-\tMicropointsmicropointsmicropoints\n-\tCDWcosJoint Topic Modeling(Joint topic modeling for event summarization across news and social media streams)\n-\tLDAp(topic|tweet)v(t) = (p(topic 1 |t), p(topic 2 |t), ..., p(topic n |t))DBSCAN\n-\tSnippet Growth Model\n-\tKL\n-\tmicropoints0-1\n\n# DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding\n-\tfast disan\n-\tRNNCNNNLP\n-\tRNNA Neural Attention Model for Abstractive Sentence SummarizationRNN\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/IkFjGiG4L8.png?imageslim)\n\t\n\t\n-\ttoken2tokensource2token\n-\ttoken2token0ij0jitoken2tokensoftmax0token2token\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/km7mbBdDmC.png?imageslim)\n-\ttoken2tokenblstmsource2token\n\n# Neural Summarization by Extracting Sentences and Words\n-\t\n-\tCNNw2v\n-\t\n-\tCNNRNN\n-\tRNN\n-\ttraininferinfer1\n-\t\n-\t\n-\tbatch\n\n# A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIEJhaelI8.png?imageslim)\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t/\n-\t\n-\texposure bias(ground truth)inferinfer\n-\tpolicy learningself-critical policy gradient training algorithm\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/I631A6dL8J.png?imageslim)\n\tr\n\tr\n\tLr\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/bbkcG52m3E.png?imageslim)\n\n# Thumbs up? Sentiment Classification using Machine Learning Techniques\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JAGd4Fm0md.png?imageslim)\n\tdc\n\td\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/d2eaGg3lIg.png?imageslim)\n\tfn\n-\tadd-one smoothing0\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/0KkljD37i9.png?imageslim)\n\tZ(d)F\n-\t\n-\t\n-\t\n-\tcontextual effect of negationnot very goodgoodNOT_\n-\t\n-\tpresence10svmsvmsvmsvm\n-\tPOSSVM\n-\tSVM\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/E9jaE6AcFB.png?imageslim)\n-\t\n-\t\n-\tBiLSTM+Attention+attentionLSTMBiLSTMBahdanau AttentionA\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Ej83dIEagl.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/4jDkmhKDh1.png?imageslim)\n\tWbAA\n-\t\n-\tsoftmaxNLPCC20132014\n\n# \n-\tw2v\n-\tw2vCBOW-W2V\n-\tCBOWsoftmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/A300DIhIDL.png?imageslim)\n-\tS\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/kl5JeLec9b.png?imageslim)\n-\tXwTHETAs\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/8e88bi8Lh8.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/I0KBEGG94b.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Le6A1e20bh.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/49aLkb5AH8.png?imageslim)\n-\t3SVMlogisticsCNN\n-\tTF-IDFCNNmax-pooling\n\n# \n-\t , ; , ;\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/h5b728245A.png?imageslim)\n-\t\n-\tReRmEL2\n-\tE\n-\tMLPsoftmax\n-\t\n\n# Distributed Representations of Words and Phrases and their Compositionality\n-\tw2v\n-\tidiomatic phrase\n-\tncesoftmaxncesoftmaxw2vnce\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/FH1960aACj.png?imageslim)\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/j1mjCDC8DI.png?imageslim)\n-\tsoftmaxlabelklabellabelk+11klogisticlogisticsPn\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/AgEkIaGCGJ.png?imageslim)\n\tft\n-\tskip-gram+","source":"_posts/PaperReading.md","raw":"---\ntitle: 2018\ndate: 2018-03-07 10:20:14\ntags:\n  - abstractive summarization\n  - math\n  - machinelearning\n  -\ttheory\n  -\tnlp\ncategories:\n  - \nauthor: Thinkwee\nmathjax: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180307/14f9JEiGeI.jpg?imageslim\n---\n\n\n\n<!--more-->\n\n# Neural Machine Translation By Jointly Learning To Align And Translate\n-\t2015.5(ICLR2015)Dzmitry Bahdanau\n-\t\n-\tGRU\n-\t\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2a61D9C0bJ.png?imageslim)\n\n# Effective Approaches to Attention-based Neural Machine Translation\n-\t2015.8Minh-Thang LuongRNN\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Jhd4h2ic23.png?imageslim)\n\tsoftmax\n\t\n## \n-\t,,(,).Dzmitry BahdanauRNNRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEl1fi1b3B.png?imageslim)\n-\tEffective Approachesinput-feeding\n\n## \n-\t\n -\tii,\n -\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2km3e0C7Hl.png?imageslim)\n\thtt\n\tWpvp\n\tS,sigmoid\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fk5dLHDFIf.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HGb9LdgmKf.png?imageslim)\n\n## Input-feeding\n-\tInput-feedingfeed\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6ag84hdbdg.png?imageslim)\n\n# A Neural Attention Model for Abstractive Sentence Summarization\n-\t2015.9Alexander M. Rush\n-\tNNLM\n-\tRNN\n-\t,(yc)\n-\tRNN\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/1ihKc65elf.png?imageslim)\n\t\n# Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond\n-\t2016.8Ramesh NallapatiRNN\n-\tDzmitry BahdanauGRUGRU\n-\tLVTlarge vocabulary trick)Feature-rich encoderswitching generator-pointer\n\n## LVT\n-\tsoftmaxmini-batchbatchbatchbatch\n\n## Feature-rich Encoder\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ekCiaiiCK5.png?imageslim)\n\t\n## Switching Generator-pointer\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/8FK4CfIBmm.png?imageslim)\n\tSwitching generator/pointer model\n\tG\n\tP\n\t\n## \n-\tRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JfLDj1G2Hb.png?imageslim)\n\n# Recurrent Neural Network Regularization\n-\tdropout\n-\tDropout\n-\tdropout12\n-\tRNNRNN\n-\tRNN\n-\t:\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ji48kaCe2H.png?imageslim)\n\n# Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models\n-\tRNNnon-goal-driven\n-\ttriplesA-B-A\n-\tRNNRNN\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HkHJghaaa0.png?imageslim)\n\tRNN\n\tRNN\n-\tbootstrappingw2vQA4epoch\n-\tEvaluationword perplexityword classification error\n-\ti dont knowim sorry123infertripleinfer\n\n# News Event Summarization Complemented by Micropoints\n-\tmicropointsROUGE\n-\tmicropointsmicropoints\n-\tCDWSnippet Growth Model\n-\tMicropointsmicropointsmicropoints\n-\tCDWcosJoint Topic Modeling(Joint topic modeling for event summarization across news and social media streams)\n-\tLDAp(topic|tweet)v(t) = (p(topic 1 |t), p(topic 2 |t), ..., p(topic n |t))DBSCAN\n-\tSnippet Growth Model\n-\tKL\n-\tmicropoints0-1\n\n# DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding\n-\tfast disan\n-\tRNNCNNNLP\n-\tRNNA Neural Attention Model for Abstractive Sentence SummarizationRNN\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/IkFjGiG4L8.png?imageslim)\n\t\n\t\n-\ttoken2tokensource2token\n-\ttoken2token0ij0jitoken2tokensoftmax0token2token\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/km7mbBdDmC.png?imageslim)\n-\ttoken2tokenblstmsource2token\n\n# Neural Summarization by Extracting Sentences and Words\n-\t\n-\tCNNw2v\n-\t\n-\tCNNRNN\n-\tRNN\n-\ttraininferinfer1\n-\t\n-\t\n-\tbatch\n\n# A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIEJhaelI8.png?imageslim)\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t/\n-\t\n-\texposure bias(ground truth)inferinfer\n-\tpolicy learningself-critical policy gradient training algorithm\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/I631A6dL8J.png?imageslim)\n\tr\n\tr\n\tLr\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/bbkcG52m3E.png?imageslim)\n\n# Thumbs up? Sentiment Classification using Machine Learning Techniques\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JAGd4Fm0md.png?imageslim)\n\tdc\n\td\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/d2eaGg3lIg.png?imageslim)\n\tfn\n-\tadd-one smoothing0\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180307/0KkljD37i9.png?imageslim)\n\tZ(d)F\n-\t\n-\t\n-\t\n-\tcontextual effect of negationnot very goodgoodNOT_\n-\t\n-\tpresence10svmsvmsvmsvm\n-\tPOSSVM\n-\tSVM\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/E9jaE6AcFB.png?imageslim)\n-\t\n-\t\n-\tBiLSTM+Attention+attentionLSTMBiLSTMBahdanau AttentionA\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Ej83dIEagl.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/4jDkmhKDh1.png?imageslim)\n\tWbAA\n-\t\n-\tsoftmaxNLPCC20132014\n\n# \n-\tw2v\n-\tw2vCBOW-W2V\n-\tCBOWsoftmax\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/A300DIhIDL.png?imageslim)\n-\tS\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/kl5JeLec9b.png?imageslim)\n-\tXwTHETAs\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/8e88bi8Lh8.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/I0KBEGG94b.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Le6A1e20bh.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/49aLkb5AH8.png?imageslim)\n-\t3SVMlogisticsCNN\n-\tTF-IDFCNNmax-pooling\n\n# \n-\t , ; , ;\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/h5b728245A.png?imageslim)\n-\t\n-\tReRmEL2\n-\tE\n-\tMLPsoftmax\n-\t\n\n# Distributed Representations of Words and Phrases and their Compositionality\n-\tw2v\n-\tidiomatic phrase\n-\tncesoftmaxncesoftmaxw2vnce\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/FH1960aACj.png?imageslim)\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/j1mjCDC8DI.png?imageslim)\n-\tsoftmaxlabelklabellabelk+11klogisticlogisticsPn\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180324/AgEkIaGCGJ.png?imageslim)\n\tft\n-\tskip-gram+","slug":"PaperReading","published":1,"updated":"2018-09-20T13:49:14.711Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180307/14f9JEiGeI.jpg?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072co000nqcw6ejn1yfkb","content":"<p><br><br><a id=\"more\"></a></p><h1 id=\"Neural-Machine-Translation-By-Jointly-Learning-To-Align-And-Translate\"><a href=\"#Neural-Machine-Translation-By-Jointly-Learning-To-Align-And-Translate\" class=\"headerlink\" title=\"Neural Machine Translation By Jointly Learning To Align And Translate\"></a>Neural Machine Translation By Jointly Learning To Align And Translate</h1><ul><li>2015.5(ICLR2015)Dzmitry Bahdanau</li><li></li><li>GRU</li><li></li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2a61D9C0bJ.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Effective-Approaches-to-Attention-based-Neural-Machine-Translation\"><a href=\"#Effective-Approaches-to-Attention-based-Neural-Machine-Translation\" class=\"headerlink\" title=\"Effective Approaches to Attention-based Neural Machine Translation\"></a>Effective Approaches to Attention-based Neural Machine Translation</h1><ul><li>2015.8Minh-Thang LuongRNN</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Jhd4h2ic23.png?imageslim\" alt=\"mark\"><br>softmax</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>,,(,).Dzmitry BahdanauRNNRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEl1fi1b3B.png?imageslim\" alt=\"mark\"></li><li>Effective Approachesinput-feeding</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><ul><li>ii,</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2km3e0C7Hl.png?imageslim\" alt=\"mark\"><br>htt<br>Wpvp<br>S,sigmoid</li></ul></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fk5dLHDFIf.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HGb9LdgmKf.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"Input-feeding\"><a href=\"#Input-feeding\" class=\"headerlink\" title=\"Input-feeding\"></a>Input-feeding</h2><ul><li>Input-feedingfeed</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6ag84hdbdg.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"A-Neural-Attention-Model-for-Abstractive-Sentence-Summarization\"><a href=\"#A-Neural-Attention-Model-for-Abstractive-Sentence-Summarization\" class=\"headerlink\" title=\"A Neural Attention Model for Abstractive Sentence Summarization\"></a>A Neural Attention Model for Abstractive Sentence Summarization</h1><ul><li>2015.9Alexander M. Rush</li><li>NNLM</li><li>RNN</li><li>,(yc)</li><li>RNN</li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/1ihKc65elf.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Abstractive-Text-Summarization-using-Sequence-to-sequence-RNNs-and-Beyond\"><a href=\"#Abstractive-Text-Summarization-using-Sequence-to-sequence-RNNs-and-Beyond\" class=\"headerlink\" title=\"Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond\"></a>Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond</h1><ul><li>2016.8Ramesh NallapatiRNN</li><li>Dzmitry BahdanauGRUGRU</li><li>LVTlarge vocabulary trick)Feature-rich encoderswitching generator-pointer</li></ul><h2 id=\"LVT\"><a href=\"#LVT\" class=\"headerlink\" title=\"LVT\"></a>LVT</h2><ul><li>softmaxmini-batchbatchbatchbatch</li></ul><h2 id=\"Feature-rich-Encoder\"><a href=\"#Feature-rich-Encoder\" class=\"headerlink\" title=\"Feature-rich Encoder\"></a>Feature-rich Encoder</h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ekCiaiiCK5.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"Switching-Generator-pointer\"><a href=\"#Switching-Generator-pointer\" class=\"headerlink\" title=\"Switching Generator-pointer\"></a>Switching Generator-pointer</h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/8FK4CfIBmm.png?imageslim\" alt=\"mark\"><br>Switching generator/pointer model<br>G<br>P</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>RNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JfLDj1G2Hb.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Recurrent-Neural-Network-Regularization\"><a href=\"#Recurrent-Neural-Network-Regularization\" class=\"headerlink\" title=\"Recurrent Neural Network Regularization\"></a>Recurrent Neural Network Regularization</h1><ul><li>dropout</li><li>Dropout</li><li>dropout12</li><li>RNNRNN</li><li>RNN</li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ji48kaCe2H.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Building-End-To-End-Dialogue-Systems-Using-Generative-Hierarchical-Neural-Network-Models\"><a href=\"#Building-End-To-End-Dialogue-Systems-Using-Generative-Hierarchical-Neural-Network-Models\" class=\"headerlink\" title=\"Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models\"></a>Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models</h1><ul><li>RNNnon-goal-driven</li><li>triplesA-B-A</li><li>RNNRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HkHJghaaa0.png?imageslim\" alt=\"mark\"><br>RNN<br>RNN</li><li>bootstrappingw2vQA4epoch</li><li>Evaluationword perplexityword classification error</li><li>i dont knowim sorry123infertripleinfer</li></ul><h1 id=\"News-Event-Summarization-Complemented-by-Micropoints\"><a href=\"#News-Event-Summarization-Complemented-by-Micropoints\" class=\"headerlink\" title=\"News Event Summarization Complemented by Micropoints\"></a>News Event Summarization Complemented by Micropoints</h1><ul><li>micropointsROUGE</li><li>micropointsmicropoints</li><li>CDWSnippet Growth Model</li><li>Micropointsmicropointsmicropoints</li><li>CDWcosJoint Topic Modeling(Joint topic modeling for event summarization across news and social media streams)</li><li>LDAp(topic|tweet)v(t) = (p(topic 1 |t), p(topic 2 |t), , p(topic n |t))DBSCAN</li><li>Snippet Growth Model</li><li>KL</li><li>micropoints0-1</li></ul><h1 id=\"DiSAN-Directional-Self-Attention-Network-for-RNN-CNN-Free-Language-Understanding\"><a href=\"#DiSAN-Directional-Self-Attention-Network-for-RNN-CNN-Free-Language-Understanding\" class=\"headerlink\" title=\"DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding\"></a>DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding</h1><ul><li>fast disan</li><li>RNNCNNNLP</li><li>RNNA Neural Attention Model for Abstractive Sentence SummarizationRNN</li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/IkFjGiG4L8.png?imageslim\" alt=\"mark\"><br><br></li><li>token2tokensource2token</li><li>token2token0ij0jitoken2tokensoftmax0token2token<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/km7mbBdDmC.png?imageslim\" alt=\"mark\"></li><li>token2tokenblstmsource2token</li></ul><h1 id=\"Neural-Summarization-by-Extracting-Sentences-and-Words\"><a href=\"#Neural-Summarization-by-Extracting-Sentences-and-Words\" class=\"headerlink\" title=\"Neural Summarization by Extracting Sentences and Words\"></a>Neural Summarization by Extracting Sentences and Words</h1><ul><li></li><li>CNNw2v</li><li></li><li>CNNRNN</li><li>RNN</li><li>traininferinfer1</li><li></li><li></li><li>batch</li></ul><h1 id=\"A-DEEP-REINFORCED-MODEL-FOR-ABSTRACTIVE-SUMMARIZATION\"><a href=\"#A-DEEP-REINFORCED-MODEL-FOR-ABSTRACTIVE-SUMMARIZATION\" class=\"headerlink\" title=\"A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION\"></a>A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION</h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIEJhaelI8.png?imageslim\" alt=\"mark\"></li><li></li><li></li><li></li><li></li><li></li><li></li><li>/</li><li></li><li>exposure bias(ground truth)inferinfer</li><li>policy learningself-critical policy gradient training algorithm<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/I631A6dL8J.png?imageslim\" alt=\"mark\"><br>r<br>r<br>Lr</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/bbkcG52m3E.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Thumbs-up-Sentiment-Classification-using-Machine-Learning-Techniques\"><a href=\"#Thumbs-up-Sentiment-Classification-using-Machine-Learning-Techniques\" class=\"headerlink\" title=\"Thumbs up? Sentiment Classification using Machine Learning Techniques\"></a>Thumbs up? Sentiment Classification using Machine Learning Techniques</h1><ul><li></li><li></li><li></li><li></li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JAGd4Fm0md.png?imageslim\" alt=\"mark\"><br>dc<br>d<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/d2eaGg3lIg.png?imageslim\" alt=\"mark\"><br>fn</li><li>add-one smoothing0</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/0KkljD37i9.png?imageslim\" alt=\"mark\"><br>Z(d)F</li><li></li><li></li><li></li><li>contextual effect of negationnot very goodgoodNOT_</li><li></li><li>presence10svmsvmsvmsvm</li><li>POSSVM</li><li>SVM</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/E9jaE6AcFB.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li><li>BiLSTM+Attention+attentionLSTMBiLSTMBahdanau AttentionA<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Ej83dIEagl.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/4jDkmhKDh1.png?imageslim\" alt=\"mark\"><br>WbAA</li><li></li><li>softmaxNLPCC20132014</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>w2v</li><li>w2vCBOW-W2V</li><li>CBOWsoftmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/A300DIhIDL.png?imageslim\" alt=\"mark\"></li><li>S<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/kl5JeLec9b.png?imageslim\" alt=\"mark\"></li><li>XwTHETAs<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/8e88bi8Lh8.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/I0KBEGG94b.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Le6A1e20bh.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/49aLkb5AH8.png?imageslim\" alt=\"mark\"></li><li>3SVMlogisticsCNN</li><li>TF-IDFCNNmax-pooling</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li> , ; , ;<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/h5b728245A.png?imageslim\" alt=\"mark\"></li><li></li><li>ReRmEL2</li><li>E</li><li>MLPsoftmax</li><li></li></ul><h1 id=\"Distributed-Representations-of-Words-and-Phrases-and-their-Compositionality\"><a href=\"#Distributed-Representations-of-Words-and-Phrases-and-their-Compositionality\" class=\"headerlink\" title=\"Distributed Representations of Words and Phrases and their Compositionality\"></a>Distributed Representations of Words and Phrases and their Compositionality</h1><ul><li>w2v</li><li>idiomatic phrase</li><li>ncesoftmaxncesoftmaxw2vnce<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/FH1960aACj.png?imageslim\" alt=\"mark\"><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/j1mjCDC8DI.png?imageslim\" alt=\"mark\"></li><li>softmaxlabelklabellabelk+11klogisticlogisticsPn</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/AgEkIaGCGJ.png?imageslim\" alt=\"mark\"><br>ft</li><li>skip-gram+</li></ul>","site":{"data":{}},"excerpt":"<p><br><br>","more":"</p><h1 id=\"Neural-Machine-Translation-By-Jointly-Learning-To-Align-And-Translate\"><a href=\"#Neural-Machine-Translation-By-Jointly-Learning-To-Align-And-Translate\" class=\"headerlink\" title=\"Neural Machine Translation By Jointly Learning To Align And Translate\"></a>Neural Machine Translation By Jointly Learning To Align And Translate</h1><ul><li>2015.5(ICLR2015)Dzmitry Bahdanau</li><li></li><li>GRU</li><li></li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2a61D9C0bJ.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Effective-Approaches-to-Attention-based-Neural-Machine-Translation\"><a href=\"#Effective-Approaches-to-Attention-based-Neural-Machine-Translation\" class=\"headerlink\" title=\"Effective Approaches to Attention-based Neural Machine Translation\"></a>Effective Approaches to Attention-based Neural Machine Translation</h1><ul><li>2015.8Minh-Thang LuongRNN</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Jhd4h2ic23.png?imageslim\" alt=\"mark\"><br>softmax</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>,,(,).Dzmitry BahdanauRNNRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/aEl1fi1b3B.png?imageslim\" alt=\"mark\"></li><li>Effective Approachesinput-feeding</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><ul><li>ii,</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/2km3e0C7Hl.png?imageslim\" alt=\"mark\"><br>htt<br>Wpvp<br>S,sigmoid</li></ul></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/Fk5dLHDFIf.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HGb9LdgmKf.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"Input-feeding\"><a href=\"#Input-feeding\" class=\"headerlink\" title=\"Input-feeding\"></a>Input-feeding</h2><ul><li>Input-feedingfeed</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/6ag84hdbdg.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"A-Neural-Attention-Model-for-Abstractive-Sentence-Summarization\"><a href=\"#A-Neural-Attention-Model-for-Abstractive-Sentence-Summarization\" class=\"headerlink\" title=\"A Neural Attention Model for Abstractive Sentence Summarization\"></a>A Neural Attention Model for Abstractive Sentence Summarization</h1><ul><li>2015.9Alexander M. Rush</li><li>NNLM</li><li>RNN</li><li>,(yc)</li><li>RNN</li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/1ihKc65elf.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Abstractive-Text-Summarization-using-Sequence-to-sequence-RNNs-and-Beyond\"><a href=\"#Abstractive-Text-Summarization-using-Sequence-to-sequence-RNNs-and-Beyond\" class=\"headerlink\" title=\"Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond\"></a>Abstractive Text Summarization using Sequence-to-sequence RNNs and Beyond</h1><ul><li>2016.8Ramesh NallapatiRNN</li><li>Dzmitry BahdanauGRUGRU</li><li>LVTlarge vocabulary trick)Feature-rich encoderswitching generator-pointer</li></ul><h2 id=\"LVT\"><a href=\"#LVT\" class=\"headerlink\" title=\"LVT\"></a>LVT</h2><ul><li>softmaxmini-batchbatchbatchbatch</li></ul><h2 id=\"Feature-rich-Encoder\"><a href=\"#Feature-rich-Encoder\" class=\"headerlink\" title=\"Feature-rich Encoder\"></a>Feature-rich Encoder</h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ekCiaiiCK5.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"Switching-Generator-pointer\"><a href=\"#Switching-Generator-pointer\" class=\"headerlink\" title=\"Switching Generator-pointer\"></a>Switching Generator-pointer</h2><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/8FK4CfIBmm.png?imageslim\" alt=\"mark\"><br>Switching generator/pointer model<br>G<br>P</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>RNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JfLDj1G2Hb.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Recurrent-Neural-Network-Regularization\"><a href=\"#Recurrent-Neural-Network-Regularization\" class=\"headerlink\" title=\"Recurrent Neural Network Regularization\"></a>Recurrent Neural Network Regularization</h1><ul><li>dropout</li><li>Dropout</li><li>dropout12</li><li>RNNRNN</li><li>RNN</li><li>:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/ji48kaCe2H.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Building-End-To-End-Dialogue-Systems-Using-Generative-Hierarchical-Neural-Network-Models\"><a href=\"#Building-End-To-End-Dialogue-Systems-Using-Generative-Hierarchical-Neural-Network-Models\" class=\"headerlink\" title=\"Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models\"></a>Building End-To-End Dialogue Systems Using Generative Hierarchical Neural Network Models</h1><ul><li>RNNnon-goal-driven</li><li>triplesA-B-A</li><li>RNNRNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HkHJghaaa0.png?imageslim\" alt=\"mark\"><br>RNN<br>RNN</li><li>bootstrappingw2vQA4epoch</li><li>Evaluationword perplexityword classification error</li><li>i dont knowim sorry123infertripleinfer</li></ul><h1 id=\"News-Event-Summarization-Complemented-by-Micropoints\"><a href=\"#News-Event-Summarization-Complemented-by-Micropoints\" class=\"headerlink\" title=\"News Event Summarization Complemented by Micropoints\"></a>News Event Summarization Complemented by Micropoints</h1><ul><li>micropointsROUGE</li><li>micropointsmicropoints</li><li>CDWSnippet Growth Model</li><li>Micropointsmicropointsmicropoints</li><li>CDWcosJoint Topic Modeling(Joint topic modeling for event summarization across news and social media streams)</li><li>LDAp(topic|tweet)v(t) = (p(topic 1 |t), p(topic 2 |t), , p(topic n |t))DBSCAN</li><li>Snippet Growth Model</li><li>KL</li><li>micropoints0-1</li></ul><h1 id=\"DiSAN-Directional-Self-Attention-Network-for-RNN-CNN-Free-Language-Understanding\"><a href=\"#DiSAN-Directional-Self-Attention-Network-for-RNN-CNN-Free-Language-Understanding\" class=\"headerlink\" title=\"DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding\"></a>DiSAN: Directional Self-Attention Network for RNN/CNN-Free Language Understanding</h1><ul><li>fast disan</li><li>RNNCNNNLP</li><li>RNNA Neural Attention Model for Abstractive Sentence SummarizationRNN</li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/IkFjGiG4L8.png?imageslim\" alt=\"mark\"><br><br></li><li>token2tokensource2token</li><li>token2token0ij0jitoken2tokensoftmax0token2token<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/km7mbBdDmC.png?imageslim\" alt=\"mark\"></li><li>token2tokenblstmsource2token</li></ul><h1 id=\"Neural-Summarization-by-Extracting-Sentences-and-Words\"><a href=\"#Neural-Summarization-by-Extracting-Sentences-and-Words\" class=\"headerlink\" title=\"Neural Summarization by Extracting Sentences and Words\"></a>Neural Summarization by Extracting Sentences and Words</h1><ul><li></li><li>CNNw2v</li><li></li><li>CNNRNN</li><li>RNN</li><li>traininferinfer1</li><li></li><li></li><li>batch</li></ul><h1 id=\"A-DEEP-REINFORCED-MODEL-FOR-ABSTRACTIVE-SUMMARIZATION\"><a href=\"#A-DEEP-REINFORCED-MODEL-FOR-ABSTRACTIVE-SUMMARIZATION\" class=\"headerlink\" title=\"A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION\"></a>A DEEP REINFORCED MODEL FOR ABSTRACTIVE SUMMARIZATION</h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/HIEJhaelI8.png?imageslim\" alt=\"mark\"></li><li></li><li></li><li></li><li></li><li></li><li></li><li>/</li><li></li><li>exposure bias(ground truth)inferinfer</li><li>policy learningself-critical policy gradient training algorithm<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/I631A6dL8J.png?imageslim\" alt=\"mark\"><br>r<br>r<br>Lr</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/bbkcG52m3E.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"Thumbs-up-Sentiment-Classification-using-Machine-Learning-Techniques\"><a href=\"#Thumbs-up-Sentiment-Classification-using-Machine-Learning-Techniques\" class=\"headerlink\" title=\"Thumbs up? Sentiment Classification using Machine Learning Techniques\"></a>Thumbs up? Sentiment Classification using Machine Learning Techniques</h1><ul><li></li><li></li><li></li><li></li><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/JAGd4Fm0md.png?imageslim\" alt=\"mark\"><br>dc<br>d<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/d2eaGg3lIg.png?imageslim\" alt=\"mark\"><br>fn</li><li>add-one smoothing0</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180307/0KkljD37i9.png?imageslim\" alt=\"mark\"><br>Z(d)F</li><li></li><li></li><li></li><li>contextual effect of negationnot very goodgoodNOT_</li><li></li><li>presence10svmsvmsvmsvm</li><li>POSSVM</li><li>SVM</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/E9jaE6AcFB.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li><li>BiLSTM+Attention+attentionLSTMBiLSTMBahdanau AttentionA<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Ej83dIEagl.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/4jDkmhKDh1.png?imageslim\" alt=\"mark\"><br>WbAA</li><li></li><li>softmaxNLPCC20132014</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>w2v</li><li>w2vCBOW-W2V</li><li>CBOWsoftmax<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/A300DIhIDL.png?imageslim\" alt=\"mark\"></li><li>S<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/kl5JeLec9b.png?imageslim\" alt=\"mark\"></li><li>XwTHETAs<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/8e88bi8Lh8.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/I0KBEGG94b.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/Le6A1e20bh.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/49aLkb5AH8.png?imageslim\" alt=\"mark\"></li><li>3SVMlogisticsCNN</li><li>TF-IDFCNNmax-pooling</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li> , ; , ;<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/h5b728245A.png?imageslim\" alt=\"mark\"></li><li></li><li>ReRmEL2</li><li>E</li><li>MLPsoftmax</li><li></li></ul><h1 id=\"Distributed-Representations-of-Words-and-Phrases-and-their-Compositionality\"><a href=\"#Distributed-Representations-of-Words-and-Phrases-and-their-Compositionality\" class=\"headerlink\" title=\"Distributed Representations of Words and Phrases and their Compositionality\"></a>Distributed Representations of Words and Phrases and their Compositionality</h1><ul><li>w2v</li><li>idiomatic phrase</li><li>ncesoftmaxncesoftmaxw2vnce<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/FH1960aACj.png?imageslim\" alt=\"mark\"><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/j1mjCDC8DI.png?imageslim\" alt=\"mark\"></li><li>softmaxlabelklabellabelk+11klogisticlogisticsPn</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180324/AgEkIaGCGJ.png?imageslim\" alt=\"mark\"><br>ft</li><li>skip-gram+</li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Thu Sep 20 2018 21:49:14 GMT+0800 ()","title":"2018","path":"2018/03/07/PaperReading/","eyeCatchImage":null,"excerpt":"<p><br><br>","date":"2018-03-07T02:20:14.000Z","pv":0,"totalPV":0,"categories":"","tags":["abstractive summarization","math","machinelearning","theory","nlp"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":":Coding","mathjax":true,"date":"2017-02-07T13:57:22.000Z","_content":"![](http://ojtdnrpmt.bkt.clouddn.com/17-1-15/62213897-file_1484471472044_c2cc.jpg)\n\n***\n# \n\n201611\nKaggle\n\n20172:pandasscikit-learnLinearRegression\n\n[Titanic: Machine Learning from Disaster](https://www.kaggle.com/c/titanic)\n\n12\n\n<!--more-->\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG)\n\n\n***\n# \n\n(.....)\n01\n\n\n\n```Python\n    # -*- coding: utf-8 -*-\n    \"\"\"\n    Created on Sun Oct 30 15:28:22 2016\n    \n    @author: thinkwee\n    \"\"\"\n    \n    import csv as csv \n    import numpy as np\n    from glue import qglue\n    \n    \n    test_file=(open(r'', 'r'))\n    test_file_object = csv.reader(open(r'', 'r'))\n    testheader = next(test_file_object)\n    predictions_file = open(r\"\", \"w\")\n    predictions_file_object = csv.writer(predictions_file)\n    p = csv.writer(predictions_file)\n    p.writerow([\"PassengerId\", \"Survived\"])\n    csv_file_object = csv.reader(open(r'', 'r')) \n    trainheader = next(csv_file_object)  # The next() command just skips the \n\t\t\t\t\t\t\t\t\t\t # first line which is a header\n    data=[]                          \t # Create a variable called 'data'.\n    for row in csv_file_object:      \t # Run through each row in the csv file,\n        data.append(row)             \t # adding each row to the data variable\n    print(type(data))\n    data = np.array(data) \t         \t # Then convert from a list to an array\n\t\t\t\t\t\t\t\t\t\t # Be aware that each item is currently\n\t\t\t\t\t\t\t\t\t\t # a string in this format\n    \n    number_passengers = np.size(data[0::,1].astype(np.float))\n    number_survived = np.sum(data[0::,1].astype(np.float))\n    proportion_survivors = number_survived / number_passengers\n    \n    women_only_stats = data[0::,4] == \"female\" # This finds where all \n                                               # the elements in the gender\n                                               # column that equals female\n    men_only_stats = data[0::,4] != \"female\"   # This finds where all the \n                                               # elements do not equal \n                                               # female (i.e. male)\n                                               \n    # Using the index from above we select the females and males separately\n    women_onboard = data[women_only_stats,1].astype(np.float)     \n    men_onboard = data[men_only_stats,1].astype(np.float)\n    \n    # Then we finds the proportions of them that survived\n    proportion_women_survived = \\\n                           np.sum(women_onboard) / np.size(women_onboard)  \n    proportion_men_survived = \\\n                           np.sum(men_onboard) / np.size(men_onboard) \n    \n    # and then print it out\n    print ('Proportion of women who survived is %s' % proportion_women_survived)\n    print ('Proportion of men who survived is %s' % proportion_men_survived)\n    \n    \n    \n    \n    # The script will systematically will loop through each combination \n    # and use the 'where' function in python to search the passengers that fit that combination of variables. \n    # Just like before, you can ask what indices in your data equals female, 1st class, and paid more than $30. \n    # The problem is that looping through requires bins of equal sizes, i.e. $0-9,  $10-19,  $20-29,  $30-39.  \n    # For the sake of binning let's say everything equal to and above 40 \"equals\" 39 so it falls in this bin. \n    # So then you can set the bins\n    \n    # So we add a ceiling\n    fare_ceiling = 40\n    \n    # then modify the data in the Fare column to = 39, if it is greater or equal to the ceiling\n    data[ data[0::,9].astype(np.float) >= fare_ceiling, 9 ] = fare_ceiling - 1.0\n    \n    fare_bracket_size = 10\n    number_of_price_brackets = fare_ceiling // fare_bracket_size\n    \n    # Take the length of an array of unique values in column index 2\n    number_of_classes = len(np.unique(data[0::,2]))\n    \n    number_of_age_brackets=8 \n    \n    # Initialize the survival table with all zeros\n    survival_table = np.zeros((2, number_of_classes, \n    \t\t\t\t\t\t   number_of_price_brackets,\n    \t\t\t\t\t\t   number_of_age_brackets))\n    \n    \n    \n    #Now that these are set up, \n    #you can loop through each variable \n    #and find all those passengers that agree with the statements\n    \n    for i in range(number_of_classes):       \t\t#loop through each class\n      for j in range(number_of_price_brackets):   \t#loop through each price bin\n        for k in range(number_of_age_brackets):     #loop through each age bin\n            women_only_stats_plus = data[                 #Which element           \n                            (data[0::,4] == \"female\")     #is a female\n                           &(data[0::,2].astype(np.float) #and was ith class\n                                 == i+1)                        \n                           &(data[0:,9].astype(np.float)  #was greater \n                                >= j*fare_bracket_size)   #than this bin              \n                           &(data[0:,9].astype(np.float)  #and less than\n                                < (j+1)*fare_bracket_size)\n                           &(data[0:,5].astype(np.float)>=k*10)\n                           &(data[0:,5].astype(np.float)<(k+1)*10)#the next bin\n                           \n                              , 1]                        #in the 2nd col                           \n     \t\t\t\t\t\t                                    \t\t\t\t\t\t\t\t\t\n    \n            men_only_stats_plus = data[                   #Which element           \n                             (data[0::,4] != \"female\")    #is a male\n                           &(data[0::,2].astype(np.float) #and was ith class\n                                 == i+1)                                       \n                           &(data[0:,9].astype(np.float)  #was greater \n                                >= j*fare_bracket_size)   #than this bin              \n                           &(data[0:,9].astype(np.float)  #and less than\n                                < (j+1)*fare_bracket_size)#the next bin\n                           &(data[0:,5].astype(np.float)>=k*10)\n                           &(data[0:,5].astype(np.float)<(k+1)*10)\n                              , 1]\n                              \n            survival_table[0,i,j,k] = np.mean(women_only_stats_plus.astype(np.float)) \n            survival_table[1,i,j,k] = np.mean(men_only_stats_plus.astype(np.float))\n    \t\t\n    \t\t#if nan then the type will change to string from float so this sentence can set nan to 0. \n            survival_table[ survival_table != survival_table ] = 0.\n    \n    #Notice that  data[ where function, 1]  means \n    #it is finding the Survived column for the conditional criteria which is being called. \n    #As the loop starts with i=0 and j=0, \n    #the first loop will return the Survived values for all the 1st-class females (i + 1) \n    #who paid less than 10 ((j+1)*fare_bracket_size) \n    #and similarly all the 1st-class males who paid less than 10.  \n    #Before resetting to the top of the loop, \n    #we can calculate the proportion of survivors for this particular \n    #combination of criteria and record it to our survival table\n    \n        \n    #0.5\n    #\n    #survival_table[ survival_table < 0.5 ] = 0\n    #survival_table[ survival_table >= 0.5 ] = 1 \n        \n        \n    #Then we can make the prediction\n    \n    for row in test_file_object:                  # We are going to loop\n                                                  # through each passenger\n                                                  # in the test set                     \n      for j in range(number_of_price_brackets):   # For each passenger we\n                                                  # loop thro each price bin\n        try:                                      # Some passengers have no\n                                                  # Fare data so try to make\n          row[8] = float(row[8])                  # a float\n        except:                                   # If fails: no data, so \n          bin_fare = 3 - float(row[1])            # bin the fare according Pclass\n          break                                   # Break from the loop\n        if row[8] > fare_ceiling:              \t  # If there is data see if\n                                                  # it is greater than fare\n                                                  # ceiling we set earlier\n          bin_fare = number_of_price_brackets-1   # If so set to highest bin\n          break                                   # And then break loop\n        if row[8] >= j * fare_bracket_size\\\n           and row[8] < \\\n           (j+1) * fare_bracket_size:             # If passed these tests \n                                                  # then loop through each bin \n          bin_fare = j                            # then assign index\n          break\n      \n      for j in range(number_of_age_brackets): \n                                                 \n        try:                                    \n                                                \n          row[4] = float(row[4])              \n        except:                                   \n          bin_age = -1      \n          break                                  \n                                   \n        if row[4] >= j * 10\\\n           and row[4] < \\\n           (j+1) * 10:             # If passed these tests \n                                   # then loop through each bin \n          bin_age = j              # then assign index\n          break\n      \n      if row[3] == 'female':       #If the passenger is female\n            p.writerow([row[0], \"%f %%\" % \\\n                       (survival_table[0, int(row[1])-1, bin_fare,bin_age]*100)])\n      else:                        #else if male\n            p.writerow([row[0], \"%f %%\" % \\\n                       (survival_table[1, int(row[1])-1, bin_fare,bin_age]*100)])\n         \n    # Close out the files.\n    test_file.close() \n    predictions_file.close()\n```\n\n\n***\n# \n    \n\n\n\n\nww\n\n\n\t** $$ w^*=(X^TX)^{-1}X^Ty $$ **\n\n-\tX:1\n\t  mnm*(n+1)\n-\tw:\n-\ty: $$ y=w^T*x $$\n\n89119375.155280 %\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220426082.JPG)\n\n\n\n```Python\n        train1=train.dropna(subset=(['Age']),axis=0)\n    vali1=vali.dropna(subset=(['Age']),axis=0)\n    \n    validata=np.array(vali1)\n    data=np.array(train1)\n    \n    fare_ceiling = 40\n    data[data[0::,9].astype(np.float)>=fare_ceiling,9] = fare_ceiling - 1.0\n    \n    train = np.column_stack((data[0::,9],data[0::,2],data[0::,5],data[0::,4]))\n    predict=np.column_stack((validata[0::,9],validata[0::,2],validata[0::,5],validata[0::,4]))\n    survive = np.column_stack((data[0::,1]))\n    \n    \n    for i in range(train.shape[0]):\n        if (train[i][3]=='male'):\n            train[i][3]=0.00\n        else:\n            train[i][3]=1.00\n    for i in range(predict.shape[0]):\n        if (predict[i][3]=='male'):\n            predict[i][3]=0.00\n        else:\n            predict[i][3]=1.00\n    \n    x0=np.ones((train.shape[0],1))\n    train=np.concatenate((train,x0),axis=1)\n    \n    x0=np.ones((predict.shape[0],1))\n    predict=np.concatenate((predict,x0),axis=1)\n    \n    print('raw data finish')\n    \n    survive=survive.T.astype(np.float)\n    traint=train.T.astype(np.float)\n    w0=traint.dot(train.astype(np.float))\n    w1=(np.linalg.inv(w0))  \n    w2=w1.dot(traint)\n    w=w2.dot(survive)  #w=(Xt*X)^-1*Xt*y\n    print('w calc finish')\n    \n    feature=['Fare','Pclass','Age','Sex','b']\n    for i in zip(feature,w):\n        print(i)\n    \n    \n    valipredict_file_object.writerow([\"PassengerName\", \"Actual Survived\",\"Predict Survived\",\"XO\"])\n    count=0.0\n    for i in range(predict.shape[0]):\n        temp=predict[i,0::].T.astype(float)\n        answer=temp.dot(w)\n        answer=answer[0]\n        if ((answer>0.5 and validata[i][1]==1) or (answer<0.5 and validata[i][1]==0)):\n            flag=\"Correct\"\n            count=count+1.0;\n        else:\n            flag=\"Error\"\n        valipredict_file_object.writerow([validata[i][3],validata[i][1],answer,flag])\n    \n    print(\"prediction finish\")\n    print(\"prediction ratio:\",\"%f %%\"%(count/predict.shape[0]*100))  \n```\n***\n# scikit-learn\nscikit,64.375000 %\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220441164.JPG)\n\nfitfitx,yinfo()\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/093538631.JPG)\n\n```Python\n    train=train.dropna(subset=['Age','Embarked'],axis=0)\n    vali=vali.dropna(subset=(['Age','Embarked']),axis=0)\n    \n    train.loc[train[\"Sex\"]==\"male\",\"Sex\"]=0\n    train.loc[train[\"Sex\"]==\"female\",\"Sex\"]=1\n    train.loc[train[\"Embarked\"] == \"S\", \"Embarked\"] = 0\n    train.loc[train[\"Embarked\"] == \"C\", \"Embarked\"] = 1\n    train.loc[train[\"Embarked\"] == \"Q\", \"Embarked\"] = 2\n    trainx=train.reindex(index=train.index[:],columns=['Age']+['Sex']+['Parch']+['Fare']+['Embarked']+['SibSp'])\n    \n    vali.loc[vali[\"Sex\"]==\"male\",\"Sex\"]=0\n    vali.loc[vali[\"Sex\"]==\"female\",\"Sex\"]=1\n    vali.loc[vali[\"Embarked\"] == \"S\", \"Embarked\"] = 0\n    vali.loc[vali[\"Embarked\"] == \"C\", \"Embarked\"] = 1\n    vali.loc[vali[\"Embarked\"] == \"Q\", \"Embarked\"] = 2\n    vali1=vali.reindex(index=vali.index[:],columns=['Age']+['Sex']+['Parch']+['Fare']+['Embarked']+['SibSp'])\n    \n    survive=vali.reindex(index=vali.index[:],columns=['Survived'])\n    survive=np.array(survive)\n    \n    feature=['Age','Sex','Parch','Fare','Embarked','SibSp']\n    \n    trainy=train.reindex(index=train.index[:],columns=['Survived'])  \n    trainy=trainy.Survived\n    \n    X_train, X_test, y_train, y_test = train_test_split(trainx, trainy, random_state=1)\n    \n    \n    model=LinearRegression()\n    model.fit(X_train,y_train)\n    print(model)\n    \n    \n    for i in zip(feature,model.coef_):\n        print(i)\n    \n    predict=model.predict(vali1)\n    \n    count=0\n    for i in range(len(predict)):\n        if (predict[i]>1 and survive[i] == 1) or  (predict[i]<1 and survive [i]== 0 ):\n            count=count+1.0\n    \n    print(\"prediction finish\")\n    print(\"prediction ratio:\",\"%f %%\"%(count/len(predict)*100))\n```","source":"_posts/TitanicLinearRegression.md","raw":"title: ':Coding'\ncategories: \ntags:\n  - code\n  - machinelearning\nmathjax: true\ndate: 2017-02-07 21:57:22\n---\n![](http://ojtdnrpmt.bkt.clouddn.com/17-1-15/62213897-file_1484471472044_c2cc.jpg)\n\n***\n# \n\n201611\nKaggle\n\n20172:pandasscikit-learnLinearRegression\n\n[Titanic: Machine Learning from Disaster](https://www.kaggle.com/c/titanic)\n\n12\n\n<!--more-->\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG)\n\n\n***\n# \n\n(.....)\n01\n\n\n\n```Python\n    # -*- coding: utf-8 -*-\n    \"\"\"\n    Created on Sun Oct 30 15:28:22 2016\n    \n    @author: thinkwee\n    \"\"\"\n    \n    import csv as csv \n    import numpy as np\n    from glue import qglue\n    \n    \n    test_file=(open(r'', 'r'))\n    test_file_object = csv.reader(open(r'', 'r'))\n    testheader = next(test_file_object)\n    predictions_file = open(r\"\", \"w\")\n    predictions_file_object = csv.writer(predictions_file)\n    p = csv.writer(predictions_file)\n    p.writerow([\"PassengerId\", \"Survived\"])\n    csv_file_object = csv.reader(open(r'', 'r')) \n    trainheader = next(csv_file_object)  # The next() command just skips the \n\t\t\t\t\t\t\t\t\t\t # first line which is a header\n    data=[]                          \t # Create a variable called 'data'.\n    for row in csv_file_object:      \t # Run through each row in the csv file,\n        data.append(row)             \t # adding each row to the data variable\n    print(type(data))\n    data = np.array(data) \t         \t # Then convert from a list to an array\n\t\t\t\t\t\t\t\t\t\t # Be aware that each item is currently\n\t\t\t\t\t\t\t\t\t\t # a string in this format\n    \n    number_passengers = np.size(data[0::,1].astype(np.float))\n    number_survived = np.sum(data[0::,1].astype(np.float))\n    proportion_survivors = number_survived / number_passengers\n    \n    women_only_stats = data[0::,4] == \"female\" # This finds where all \n                                               # the elements in the gender\n                                               # column that equals female\n    men_only_stats = data[0::,4] != \"female\"   # This finds where all the \n                                               # elements do not equal \n                                               # female (i.e. male)\n                                               \n    # Using the index from above we select the females and males separately\n    women_onboard = data[women_only_stats,1].astype(np.float)     \n    men_onboard = data[men_only_stats,1].astype(np.float)\n    \n    # Then we finds the proportions of them that survived\n    proportion_women_survived = \\\n                           np.sum(women_onboard) / np.size(women_onboard)  \n    proportion_men_survived = \\\n                           np.sum(men_onboard) / np.size(men_onboard) \n    \n    # and then print it out\n    print ('Proportion of women who survived is %s' % proportion_women_survived)\n    print ('Proportion of men who survived is %s' % proportion_men_survived)\n    \n    \n    \n    \n    # The script will systematically will loop through each combination \n    # and use the 'where' function in python to search the passengers that fit that combination of variables. \n    # Just like before, you can ask what indices in your data equals female, 1st class, and paid more than $30. \n    # The problem is that looping through requires bins of equal sizes, i.e. $0-9,  $10-19,  $20-29,  $30-39.  \n    # For the sake of binning let's say everything equal to and above 40 \"equals\" 39 so it falls in this bin. \n    # So then you can set the bins\n    \n    # So we add a ceiling\n    fare_ceiling = 40\n    \n    # then modify the data in the Fare column to = 39, if it is greater or equal to the ceiling\n    data[ data[0::,9].astype(np.float) >= fare_ceiling, 9 ] = fare_ceiling - 1.0\n    \n    fare_bracket_size = 10\n    number_of_price_brackets = fare_ceiling // fare_bracket_size\n    \n    # Take the length of an array of unique values in column index 2\n    number_of_classes = len(np.unique(data[0::,2]))\n    \n    number_of_age_brackets=8 \n    \n    # Initialize the survival table with all zeros\n    survival_table = np.zeros((2, number_of_classes, \n    \t\t\t\t\t\t   number_of_price_brackets,\n    \t\t\t\t\t\t   number_of_age_brackets))\n    \n    \n    \n    #Now that these are set up, \n    #you can loop through each variable \n    #and find all those passengers that agree with the statements\n    \n    for i in range(number_of_classes):       \t\t#loop through each class\n      for j in range(number_of_price_brackets):   \t#loop through each price bin\n        for k in range(number_of_age_brackets):     #loop through each age bin\n            women_only_stats_plus = data[                 #Which element           \n                            (data[0::,4] == \"female\")     #is a female\n                           &(data[0::,2].astype(np.float) #and was ith class\n                                 == i+1)                        \n                           &(data[0:,9].astype(np.float)  #was greater \n                                >= j*fare_bracket_size)   #than this bin              \n                           &(data[0:,9].astype(np.float)  #and less than\n                                < (j+1)*fare_bracket_size)\n                           &(data[0:,5].astype(np.float)>=k*10)\n                           &(data[0:,5].astype(np.float)<(k+1)*10)#the next bin\n                           \n                              , 1]                        #in the 2nd col                           \n     \t\t\t\t\t\t                                    \t\t\t\t\t\t\t\t\t\n    \n            men_only_stats_plus = data[                   #Which element           \n                             (data[0::,4] != \"female\")    #is a male\n                           &(data[0::,2].astype(np.float) #and was ith class\n                                 == i+1)                                       \n                           &(data[0:,9].astype(np.float)  #was greater \n                                >= j*fare_bracket_size)   #than this bin              \n                           &(data[0:,9].astype(np.float)  #and less than\n                                < (j+1)*fare_bracket_size)#the next bin\n                           &(data[0:,5].astype(np.float)>=k*10)\n                           &(data[0:,5].astype(np.float)<(k+1)*10)\n                              , 1]\n                              \n            survival_table[0,i,j,k] = np.mean(women_only_stats_plus.astype(np.float)) \n            survival_table[1,i,j,k] = np.mean(men_only_stats_plus.astype(np.float))\n    \t\t\n    \t\t#if nan then the type will change to string from float so this sentence can set nan to 0. \n            survival_table[ survival_table != survival_table ] = 0.\n    \n    #Notice that  data[ where function, 1]  means \n    #it is finding the Survived column for the conditional criteria which is being called. \n    #As the loop starts with i=0 and j=0, \n    #the first loop will return the Survived values for all the 1st-class females (i + 1) \n    #who paid less than 10 ((j+1)*fare_bracket_size) \n    #and similarly all the 1st-class males who paid less than 10.  \n    #Before resetting to the top of the loop, \n    #we can calculate the proportion of survivors for this particular \n    #combination of criteria and record it to our survival table\n    \n        \n    #0.5\n    #\n    #survival_table[ survival_table < 0.5 ] = 0\n    #survival_table[ survival_table >= 0.5 ] = 1 \n        \n        \n    #Then we can make the prediction\n    \n    for row in test_file_object:                  # We are going to loop\n                                                  # through each passenger\n                                                  # in the test set                     \n      for j in range(number_of_price_brackets):   # For each passenger we\n                                                  # loop thro each price bin\n        try:                                      # Some passengers have no\n                                                  # Fare data so try to make\n          row[8] = float(row[8])                  # a float\n        except:                                   # If fails: no data, so \n          bin_fare = 3 - float(row[1])            # bin the fare according Pclass\n          break                                   # Break from the loop\n        if row[8] > fare_ceiling:              \t  # If there is data see if\n                                                  # it is greater than fare\n                                                  # ceiling we set earlier\n          bin_fare = number_of_price_brackets-1   # If so set to highest bin\n          break                                   # And then break loop\n        if row[8] >= j * fare_bracket_size\\\n           and row[8] < \\\n           (j+1) * fare_bracket_size:             # If passed these tests \n                                                  # then loop through each bin \n          bin_fare = j                            # then assign index\n          break\n      \n      for j in range(number_of_age_brackets): \n                                                 \n        try:                                    \n                                                \n          row[4] = float(row[4])              \n        except:                                   \n          bin_age = -1      \n          break                                  \n                                   \n        if row[4] >= j * 10\\\n           and row[4] < \\\n           (j+1) * 10:             # If passed these tests \n                                   # then loop through each bin \n          bin_age = j              # then assign index\n          break\n      \n      if row[3] == 'female':       #If the passenger is female\n            p.writerow([row[0], \"%f %%\" % \\\n                       (survival_table[0, int(row[1])-1, bin_fare,bin_age]*100)])\n      else:                        #else if male\n            p.writerow([row[0], \"%f %%\" % \\\n                       (survival_table[1, int(row[1])-1, bin_fare,bin_age]*100)])\n         \n    # Close out the files.\n    test_file.close() \n    predictions_file.close()\n```\n\n\n***\n# \n    \n\n\n\n\nww\n\n\n\t** $$ w^*=(X^TX)^{-1}X^Ty $$ **\n\n-\tX:1\n\t  mnm*(n+1)\n-\tw:\n-\ty: $$ y=w^T*x $$\n\n89119375.155280 %\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220426082.JPG)\n\n\n\n```Python\n        train1=train.dropna(subset=(['Age']),axis=0)\n    vali1=vali.dropna(subset=(['Age']),axis=0)\n    \n    validata=np.array(vali1)\n    data=np.array(train1)\n    \n    fare_ceiling = 40\n    data[data[0::,9].astype(np.float)>=fare_ceiling,9] = fare_ceiling - 1.0\n    \n    train = np.column_stack((data[0::,9],data[0::,2],data[0::,5],data[0::,4]))\n    predict=np.column_stack((validata[0::,9],validata[0::,2],validata[0::,5],validata[0::,4]))\n    survive = np.column_stack((data[0::,1]))\n    \n    \n    for i in range(train.shape[0]):\n        if (train[i][3]=='male'):\n            train[i][3]=0.00\n        else:\n            train[i][3]=1.00\n    for i in range(predict.shape[0]):\n        if (predict[i][3]=='male'):\n            predict[i][3]=0.00\n        else:\n            predict[i][3]=1.00\n    \n    x0=np.ones((train.shape[0],1))\n    train=np.concatenate((train,x0),axis=1)\n    \n    x0=np.ones((predict.shape[0],1))\n    predict=np.concatenate((predict,x0),axis=1)\n    \n    print('raw data finish')\n    \n    survive=survive.T.astype(np.float)\n    traint=train.T.astype(np.float)\n    w0=traint.dot(train.astype(np.float))\n    w1=(np.linalg.inv(w0))  \n    w2=w1.dot(traint)\n    w=w2.dot(survive)  #w=(Xt*X)^-1*Xt*y\n    print('w calc finish')\n    \n    feature=['Fare','Pclass','Age','Sex','b']\n    for i in zip(feature,w):\n        print(i)\n    \n    \n    valipredict_file_object.writerow([\"PassengerName\", \"Actual Survived\",\"Predict Survived\",\"XO\"])\n    count=0.0\n    for i in range(predict.shape[0]):\n        temp=predict[i,0::].T.astype(float)\n        answer=temp.dot(w)\n        answer=answer[0]\n        if ((answer>0.5 and validata[i][1]==1) or (answer<0.5 and validata[i][1]==0)):\n            flag=\"Correct\"\n            count=count+1.0;\n        else:\n            flag=\"Error\"\n        valipredict_file_object.writerow([validata[i][3],validata[i][1],answer,flag])\n    \n    print(\"prediction finish\")\n    print(\"prediction ratio:\",\"%f %%\"%(count/predict.shape[0]*100))  \n```\n***\n# scikit-learn\nscikit,64.375000 %\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220441164.JPG)\n\nfitfitx,yinfo()\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/093538631.JPG)\n\n```Python\n    train=train.dropna(subset=['Age','Embarked'],axis=0)\n    vali=vali.dropna(subset=(['Age','Embarked']),axis=0)\n    \n    train.loc[train[\"Sex\"]==\"male\",\"Sex\"]=0\n    train.loc[train[\"Sex\"]==\"female\",\"Sex\"]=1\n    train.loc[train[\"Embarked\"] == \"S\", \"Embarked\"] = 0\n    train.loc[train[\"Embarked\"] == \"C\", \"Embarked\"] = 1\n    train.loc[train[\"Embarked\"] == \"Q\", \"Embarked\"] = 2\n    trainx=train.reindex(index=train.index[:],columns=['Age']+['Sex']+['Parch']+['Fare']+['Embarked']+['SibSp'])\n    \n    vali.loc[vali[\"Sex\"]==\"male\",\"Sex\"]=0\n    vali.loc[vali[\"Sex\"]==\"female\",\"Sex\"]=1\n    vali.loc[vali[\"Embarked\"] == \"S\", \"Embarked\"] = 0\n    vali.loc[vali[\"Embarked\"] == \"C\", \"Embarked\"] = 1\n    vali.loc[vali[\"Embarked\"] == \"Q\", \"Embarked\"] = 2\n    vali1=vali.reindex(index=vali.index[:],columns=['Age']+['Sex']+['Parch']+['Fare']+['Embarked']+['SibSp'])\n    \n    survive=vali.reindex(index=vali.index[:],columns=['Survived'])\n    survive=np.array(survive)\n    \n    feature=['Age','Sex','Parch','Fare','Embarked','SibSp']\n    \n    trainy=train.reindex(index=train.index[:],columns=['Survived'])  \n    trainy=trainy.Survived\n    \n    X_train, X_test, y_train, y_test = train_test_split(trainx, trainy, random_state=1)\n    \n    \n    model=LinearRegression()\n    model.fit(X_train,y_train)\n    print(model)\n    \n    \n    for i in zip(feature,model.coef_):\n        print(i)\n    \n    predict=model.predict(vali1)\n    \n    count=0\n    for i in range(len(predict)):\n        if (predict[i]>1 and survive[i] == 1) or  (predict[i]<1 and survive [i]== 0 ):\n            count=count+1.0\n    \n    print(\"prediction finish\")\n    print(\"prediction ratio:\",\"%f %%\"%(count/len(predict)*100))\n```","slug":"TitanicLinearRegression","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072cp000oqcw65ode1hfz","content":"<p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-15/62213897-file_1484471472044_c2cc.jpg\" alt=\"\"></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>201611<br>Kaggle</p><p>20172:pandasscikit-learnLinearRegression</p><p><a href=\"https://www.kaggle.com/c/titanic\" target=\"_blank\" rel=\"noopener\">Titanic: Machine Learning from Disaster</a></p><p>12</p><a id=\"more\"></a><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG\" alt=\"mark\"></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>(..)<br>01<br><br><br><br></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">Created on Sun Oct 30 15:28:22 2016</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">@author: thinkwee</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> csv <span class=\"keyword\">as</span> csv </span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> glue <span class=\"keyword\">import</span> qglue</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">test_file=(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>))</span><br><span class=\"line\">test_file_object = csv.reader(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>))</span><br><span class=\"line\">testheader = next(test_file_object)</span><br><span class=\"line\">predictions_file = open(<span class=\"string\">r\"\"</span>, <span class=\"string\">\"w\"</span>)</span><br><span class=\"line\">predictions_file_object = csv.writer(predictions_file)</span><br><span class=\"line\">p = csv.writer(predictions_file)</span><br><span class=\"line\">p.writerow([<span class=\"string\">\"PassengerId\"</span>, <span class=\"string\">\"Survived\"</span>])</span><br><span class=\"line\">csv_file_object = csv.reader(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>)) </span><br><span class=\"line\">trainheader = next(csv_file_object)  <span class=\"comment\"># The next() command just skips the </span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># first line which is a header</span></span><br><span class=\"line\">data=[]                          \t <span class=\"comment\"># Create a variable called 'data'.</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> csv_file_object:      \t <span class=\"comment\"># Run through each row in the csv file,</span></span><br><span class=\"line\">    data.append(row)             \t <span class=\"comment\"># adding each row to the data variable</span></span><br><span class=\"line\">print(type(data))</span><br><span class=\"line\">data = np.array(data) \t         \t <span class=\"comment\"># Then convert from a list to an array</span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># Be aware that each item is currently</span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># a string in this format</span></span><br><span class=\"line\"></span><br><span class=\"line\">number_passengers = np.size(data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>].astype(np.float))</span><br><span class=\"line\">number_survived = np.sum(data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>].astype(np.float))</span><br><span class=\"line\">proportion_survivors = number_survived / number_passengers</span><br><span class=\"line\"></span><br><span class=\"line\">women_only_stats = data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] == <span class=\"string\">\"female\"</span> <span class=\"comment\"># This finds where all </span></span><br><span class=\"line\">                                           <span class=\"comment\"># the elements in the gender</span></span><br><span class=\"line\">                                           <span class=\"comment\"># column that equals female</span></span><br><span class=\"line\">men_only_stats = data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] != <span class=\"string\">\"female\"</span>   <span class=\"comment\"># This finds where all the </span></span><br><span class=\"line\">                                           <span class=\"comment\"># elements do not equal </span></span><br><span class=\"line\">                                           <span class=\"comment\"># female (i.e. male)</span></span><br><span class=\"line\">                                           </span><br><span class=\"line\"><span class=\"comment\"># Using the index from above we select the females and males separately</span></span><br><span class=\"line\">women_onboard = data[women_only_stats,<span class=\"number\">1</span>].astype(np.float)     </span><br><span class=\"line\">men_onboard = data[men_only_stats,<span class=\"number\">1</span>].astype(np.float)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Then we finds the proportions of them that survived</span></span><br><span class=\"line\">proportion_women_survived = \\</span><br><span class=\"line\">                       np.sum(women_onboard) / np.size(women_onboard)  </span><br><span class=\"line\">proportion_men_survived = \\</span><br><span class=\"line\">                       np.sum(men_onboard) / np.size(men_onboard) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># and then print it out</span></span><br><span class=\"line\"><span class=\"keyword\">print</span> (<span class=\"string\">'Proportion of women who survived is %s'</span> % proportion_women_survived)</span><br><span class=\"line\"><span class=\"keyword\">print</span> (<span class=\"string\">'Proportion of men who survived is %s'</span> % proportion_men_survived)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The script will systematically will loop through each combination </span></span><br><span class=\"line\"><span class=\"comment\"># and use the 'where' function in python to search the passengers that fit that combination of variables. </span></span><br><span class=\"line\"><span class=\"comment\"># Just like before, you can ask what indices in your data equals female, 1st class, and paid more than $30. </span></span><br><span class=\"line\"><span class=\"comment\"># The problem is that looping through requires bins of equal sizes, i.e. $0-9,  $10-19,  $20-29,  $30-39.  </span></span><br><span class=\"line\"><span class=\"comment\"># For the sake of binning let's say everything equal to and above 40 \"equals\" 39 so it falls in this bin. </span></span><br><span class=\"line\"><span class=\"comment\"># So then you can set the bins</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># So we add a ceiling</span></span><br><span class=\"line\">fare_ceiling = <span class=\"number\">40</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># then modify the data in the Fare column to = 39, if it is greater or equal to the ceiling</span></span><br><span class=\"line\">data[ data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>].astype(np.float) &gt;= fare_ceiling, <span class=\"number\">9</span> ] = fare_ceiling - <span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">fare_bracket_size = <span class=\"number\">10</span></span><br><span class=\"line\">number_of_price_brackets = fare_ceiling // fare_bracket_size</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Take the length of an array of unique values in column index 2</span></span><br><span class=\"line\">number_of_classes = len(np.unique(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\">number_of_age_brackets=<span class=\"number\">8</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Initialize the survival table with all zeros</span></span><br><span class=\"line\">survival_table = np.zeros((<span class=\"number\">2</span>, number_of_classes, </span><br><span class=\"line\">\t\t\t\t\t\t   number_of_price_brackets,</span><br><span class=\"line\">\t\t\t\t\t\t   number_of_age_brackets))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Now that these are set up, </span></span><br><span class=\"line\"><span class=\"comment\">#you can loop through each variable </span></span><br><span class=\"line\"><span class=\"comment\">#and find all those passengers that agree with the statements</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(number_of_classes):       \t\t<span class=\"comment\">#loop through each class</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_price_brackets):   \t<span class=\"comment\">#loop through each price bin</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> range(number_of_age_brackets):     <span class=\"comment\">#loop through each age bin</span></span><br><span class=\"line\">        women_only_stats_plus = data[                 <span class=\"comment\">#Which element           </span></span><br><span class=\"line\">                        (data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] == <span class=\"string\">\"female\"</span>)     <span class=\"comment\">#is a female</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>].astype(np.float) <span class=\"comment\">#and was ith class</span></span><br><span class=\"line\">                             == i+<span class=\"number\">1</span>)                        </span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#was greater </span></span><br><span class=\"line\">                            &gt;= j*fare_bracket_size)   <span class=\"comment\">#than this bin              </span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#and less than</span></span><br><span class=\"line\">                            &lt; (j+<span class=\"number\">1</span>)*fare_bracket_size)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&gt;=k*<span class=\"number\">10</span>)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&lt;(k+<span class=\"number\">1</span>)*<span class=\"number\">10</span>)<span class=\"comment\">#the next bin</span></span><br><span class=\"line\">                       </span><br><span class=\"line\">                          , <span class=\"number\">1</span>]                        <span class=\"comment\">#in the 2nd col                           </span></span><br><span class=\"line\"> \t\t\t\t\t\t                                    \t\t\t\t\t\t\t\t\t</span><br><span class=\"line\"></span><br><span class=\"line\">        men_only_stats_plus = data[                   <span class=\"comment\">#Which element           </span></span><br><span class=\"line\">                         (data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] != <span class=\"string\">\"female\"</span>)    <span class=\"comment\">#is a male</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>].astype(np.float) <span class=\"comment\">#and was ith class</span></span><br><span class=\"line\">                             == i+<span class=\"number\">1</span>)                                       </span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#was greater </span></span><br><span class=\"line\">                            &gt;= j*fare_bracket_size)   <span class=\"comment\">#than this bin              </span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#and less than</span></span><br><span class=\"line\">                            &lt; (j+<span class=\"number\">1</span>)*fare_bracket_size)<span class=\"comment\">#the next bin</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&gt;=k*<span class=\"number\">10</span>)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&lt;(k+<span class=\"number\">1</span>)*<span class=\"number\">10</span>)</span><br><span class=\"line\">                          , <span class=\"number\">1</span>]</span><br><span class=\"line\">                          </span><br><span class=\"line\">        survival_table[<span class=\"number\">0</span>,i,j,k] = np.mean(women_only_stats_plus.astype(np.float)) </span><br><span class=\"line\">        survival_table[<span class=\"number\">1</span>,i,j,k] = np.mean(men_only_stats_plus.astype(np.float))</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">#if nan then the type will change to string from float so this sentence can set nan to 0. </span></span><br><span class=\"line\">        survival_table[ survival_table != survival_table ] = <span class=\"number\">0.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Notice that  data[ where function, 1]  means </span></span><br><span class=\"line\"><span class=\"comment\">#it is finding the Survived column for the conditional criteria which is being called. </span></span><br><span class=\"line\"><span class=\"comment\">#As the loop starts with i=0 and j=0, </span></span><br><span class=\"line\"><span class=\"comment\">#the first loop will return the Survived values for all the 1st-class females (i + 1) </span></span><br><span class=\"line\"><span class=\"comment\">#who paid less than 10 ((j+1)*fare_bracket_size) </span></span><br><span class=\"line\"><span class=\"comment\">#and similarly all the 1st-class males who paid less than 10.  </span></span><br><span class=\"line\"><span class=\"comment\">#Before resetting to the top of the loop, </span></span><br><span class=\"line\"><span class=\"comment\">#we can calculate the proportion of survivors for this particular </span></span><br><span class=\"line\"><span class=\"comment\">#combination of criteria and record it to our survival table</span></span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#0.5</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#survival_table[ survival_table &lt; 0.5 ] = 0</span></span><br><span class=\"line\"><span class=\"comment\">#survival_table[ survival_table &gt;= 0.5 ] = 1 </span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#Then we can make the prediction</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> test_file_object:                  <span class=\"comment\"># We are going to loop</span></span><br><span class=\"line\">                                              <span class=\"comment\"># through each passenger</span></span><br><span class=\"line\">                                              <span class=\"comment\"># in the test set                     </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_price_brackets):   <span class=\"comment\"># For each passenger we</span></span><br><span class=\"line\">                                              <span class=\"comment\"># loop thro each price bin</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:                                      <span class=\"comment\"># Some passengers have no</span></span><br><span class=\"line\">                                              <span class=\"comment\"># Fare data so try to make</span></span><br><span class=\"line\">      row[<span class=\"number\">8</span>] = float(row[<span class=\"number\">8</span>])                  <span class=\"comment\"># a float</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:                                   <span class=\"comment\"># If fails: no data, so </span></span><br><span class=\"line\">      bin_fare = <span class=\"number\">3</span> - float(row[<span class=\"number\">1</span>])            <span class=\"comment\"># bin the fare according Pclass</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                   <span class=\"comment\"># Break from the loop</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">8</span>] &gt; fare_ceiling:              \t  <span class=\"comment\"># If there is data see if</span></span><br><span class=\"line\">                                              <span class=\"comment\"># it is greater than fare</span></span><br><span class=\"line\">                                              <span class=\"comment\"># ceiling we set earlier</span></span><br><span class=\"line\">      bin_fare = number_of_price_brackets<span class=\"number\">-1</span>   <span class=\"comment\"># If so set to highest bin</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                   <span class=\"comment\"># And then break loop</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">8</span>] &gt;= j * fare_bracket_size\\</span><br><span class=\"line\">       <span class=\"keyword\">and</span> row[<span class=\"number\">8</span>] &lt; \\</span><br><span class=\"line\">       (j+<span class=\"number\">1</span>) * fare_bracket_size:             <span class=\"comment\"># If passed these tests </span></span><br><span class=\"line\">                                              <span class=\"comment\"># then loop through each bin </span></span><br><span class=\"line\">      bin_fare = j                            <span class=\"comment\"># then assign index</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_age_brackets): </span><br><span class=\"line\">                                             </span><br><span class=\"line\">    <span class=\"keyword\">try</span>:                                    </span><br><span class=\"line\">                                            </span><br><span class=\"line\">      row[<span class=\"number\">4</span>] = float(row[<span class=\"number\">4</span>])              </span><br><span class=\"line\">    <span class=\"keyword\">except</span>:                                   </span><br><span class=\"line\">      bin_age = <span class=\"number\">-1</span>      </span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                  </span><br><span class=\"line\">                               </span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">4</span>] &gt;= j * <span class=\"number\">10</span>\\</span><br><span class=\"line\">       <span class=\"keyword\">and</span> row[<span class=\"number\">4</span>] &lt; \\</span><br><span class=\"line\">       (j+<span class=\"number\">1</span>) * <span class=\"number\">10</span>:             <span class=\"comment\"># If passed these tests </span></span><br><span class=\"line\">                               <span class=\"comment\"># then loop through each bin </span></span><br><span class=\"line\">      bin_age = j              <span class=\"comment\"># then assign index</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> row[<span class=\"number\">3</span>] == <span class=\"string\">'female'</span>:       <span class=\"comment\">#If the passenger is female</span></span><br><span class=\"line\">        p.writerow([row[<span class=\"number\">0</span>], <span class=\"string\">\"%f %%\"</span> % \\</span><br><span class=\"line\">                   (survival_table[<span class=\"number\">0</span>, int(row[<span class=\"number\">1</span>])<span class=\"number\">-1</span>, bin_fare,bin_age]*<span class=\"number\">100</span>)])</span><br><span class=\"line\">  <span class=\"keyword\">else</span>:                        <span class=\"comment\">#else if male</span></span><br><span class=\"line\">        p.writerow([row[<span class=\"number\">0</span>], <span class=\"string\">\"%f %%\"</span> % \\</span><br><span class=\"line\">                   (survival_table[<span class=\"number\">1</span>, int(row[<span class=\"number\">1</span>])<span class=\"number\">-1</span>, bin_fare,bin_age]*<span class=\"number\">100</span>)])</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># Close out the files.</span></span><br><span class=\"line\">test_file.close() </span><br><span class=\"line\">predictions_file.close()</span><br></pre></td></tr></table></figure><p></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><br><br><br><br>ww</p><p><br><strong>$$ w^*=(X^TX)^{-1}X^Ty $$</strong></p><ul><li>X:1<br>mnm*(n+1)</li><li>w:</li><li>y: $$ y=w^T*x $$</li></ul><p>89119375.155280 %</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220426082.JPG\" alt=\"mark\"></p><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    train1=train.dropna(subset=([<span class=\"string\">'Age'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">vali1=vali.dropna(subset=([<span class=\"string\">'Age'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">validata=np.array(vali1)</span><br><span class=\"line\">data=np.array(train1)</span><br><span class=\"line\"></span><br><span class=\"line\">fare_ceiling = <span class=\"number\">40</span></span><br><span class=\"line\">data[data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>].astype(np.float)&gt;=fare_ceiling,<span class=\"number\">9</span>] = fare_ceiling - <span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">train = np.column_stack((data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">5</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>]))</span><br><span class=\"line\">predict=np.column_stack((validata[<span class=\"number\">0</span>::,<span class=\"number\">9</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">2</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">5</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">4</span>]))</span><br><span class=\"line\">survive = np.column_stack((data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(train.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (train[i][<span class=\"number\">3</span>]==<span class=\"string\">'male'</span>):</span><br><span class=\"line\">        train[i][<span class=\"number\">3</span>]=<span class=\"number\">0.00</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        train[i][<span class=\"number\">3</span>]=<span class=\"number\">1.00</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(predict.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (predict[i][<span class=\"number\">3</span>]==<span class=\"string\">'male'</span>):</span><br><span class=\"line\">        predict[i][<span class=\"number\">3</span>]=<span class=\"number\">0.00</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        predict[i][<span class=\"number\">3</span>]=<span class=\"number\">1.00</span></span><br><span class=\"line\"></span><br><span class=\"line\">x0=np.ones((train.shape[<span class=\"number\">0</span>],<span class=\"number\">1</span>))</span><br><span class=\"line\">train=np.concatenate((train,x0),axis=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">x0=np.ones((predict.shape[<span class=\"number\">0</span>],<span class=\"number\">1</span>))</span><br><span class=\"line\">predict=np.concatenate((predict,x0),axis=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">'raw data finish'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">survive=survive.T.astype(np.float)</span><br><span class=\"line\">traint=train.T.astype(np.float)</span><br><span class=\"line\">w0=traint.dot(train.astype(np.float))</span><br><span class=\"line\">w1=(np.linalg.inv(w0))  </span><br><span class=\"line\">w2=w1.dot(traint)</span><br><span class=\"line\">w=w2.dot(survive)  <span class=\"comment\">#w=(Xt*X)^-1*Xt*y</span></span><br><span class=\"line\">print(<span class=\"string\">'w calc finish'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">feature=[<span class=\"string\">'Fare'</span>,<span class=\"string\">'Pclass'</span>,<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>,<span class=\"string\">'b'</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> zip(feature,w):</span><br><span class=\"line\">    print(i)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">valipredict_file_object.writerow([<span class=\"string\">\"PassengerName\"</span>, <span class=\"string\">\"Actual Survived\"</span>,<span class=\"string\">\"Predict Survived\"</span>,<span class=\"string\">\"XO\"</span>])</span><br><span class=\"line\">count=<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(predict.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    temp=predict[i,<span class=\"number\">0</span>::].T.astype(float)</span><br><span class=\"line\">    answer=temp.dot(w)</span><br><span class=\"line\">    answer=answer[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((answer&gt;<span class=\"number\">0.5</span> <span class=\"keyword\">and</span> validata[i][<span class=\"number\">1</span>]==<span class=\"number\">1</span>) <span class=\"keyword\">or</span> (answer&lt;<span class=\"number\">0.5</span> <span class=\"keyword\">and</span> validata[i][<span class=\"number\">1</span>]==<span class=\"number\">0</span>)):</span><br><span class=\"line\">        flag=<span class=\"string\">\"Correct\"</span></span><br><span class=\"line\">        count=count+<span class=\"number\">1.0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        flag=<span class=\"string\">\"Error\"</span></span><br><span class=\"line\">    valipredict_file_object.writerow([validata[i][<span class=\"number\">3</span>],validata[i][<span class=\"number\">1</span>],answer,flag])</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"prediction finish\"</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"prediction ratio:\"</span>,<span class=\"string\">\"%f %%\"</span>%(count/predict.shape[<span class=\"number\">0</span>]*<span class=\"number\">100</span>))</span><br></pre></td></tr></table></figure><hr><h1 id=\"scikit-learn\"><a href=\"#scikit-learn\" class=\"headerlink\" title=\"scikit-learn\"></a>scikit-learn</h1><p>scikit,64.375000 %</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220441164.JPG\" alt=\"mark\"></p><p>fitfitx,yinfo()</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/093538631.JPG\" alt=\"mark\"></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train=train.dropna(subset=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Embarked'</span>],axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">vali=vali.dropna(subset=([<span class=\"string\">'Age'</span>,<span class=\"string\">'Embarked'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"male\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">0</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"female\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"S\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"C\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"Q\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">2</span></span><br><span class=\"line\">trainx=train.reindex(index=train.index[:],columns=[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>]+[<span class=\"string\">'Parch'</span>]+[<span class=\"string\">'Fare'</span>]+[<span class=\"string\">'Embarked'</span>]+[<span class=\"string\">'SibSp'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"male\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">0</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"female\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"S\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"C\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"Q\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">2</span></span><br><span class=\"line\">vali1=vali.reindex(index=vali.index[:],columns=[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>]+[<span class=\"string\">'Parch'</span>]+[<span class=\"string\">'Fare'</span>]+[<span class=\"string\">'Embarked'</span>]+[<span class=\"string\">'SibSp'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">survive=vali.reindex(index=vali.index[:],columns=[<span class=\"string\">'Survived'</span>])</span><br><span class=\"line\">survive=np.array(survive)</span><br><span class=\"line\"></span><br><span class=\"line\">feature=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>,<span class=\"string\">'Parch'</span>,<span class=\"string\">'Fare'</span>,<span class=\"string\">'Embarked'</span>,<span class=\"string\">'SibSp'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">trainy=train.reindex(index=train.index[:],columns=[<span class=\"string\">'Survived'</span>])  </span><br><span class=\"line\">trainy=trainy.Survived</span><br><span class=\"line\"></span><br><span class=\"line\">X_train, X_test, y_train, y_test = train_test_split(trainx, trainy, random_state=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">model=LinearRegression()</span><br><span class=\"line\">model.fit(X_train,y_train)</span><br><span class=\"line\">print(model)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> zip(feature,model.coef_):</span><br><span class=\"line\">    print(i)</span><br><span class=\"line\"></span><br><span class=\"line\">predict=model.predict(vali1)</span><br><span class=\"line\"></span><br><span class=\"line\">count=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(predict)):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (predict[i]&gt;<span class=\"number\">1</span> <span class=\"keyword\">and</span> survive[i] == <span class=\"number\">1</span>) <span class=\"keyword\">or</span>  (predict[i]&lt;<span class=\"number\">1</span> <span class=\"keyword\">and</span> survive [i]== <span class=\"number\">0</span> ):</span><br><span class=\"line\">        count=count+<span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"prediction finish\"</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"prediction ratio:\"</span>,<span class=\"string\">\"%f %%\"</span>%(count/len(predict)*<span class=\"number\">100</span>))</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-15/62213897-file_1484471472044_c2cc.jpg\" alt=\"\"></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>201611<br>Kaggle</p><p>20172:pandasscikit-learnLinearRegression</p><p><a href=\"https://www.kaggle.com/c/titanic\" target=\"_blank\" rel=\"noopener\">Titanic: Machine Learning from Disaster</a></p><p>12</p>","more":"<p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG\" alt=\"mark\"></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>(..)<br>01<br><br><br><br></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">Created on Sun Oct 30 15:28:22 2016</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">@author: thinkwee</span></span><br><span class=\"line\"><span class=\"string\">\"\"\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> csv <span class=\"keyword\">as</span> csv </span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> glue <span class=\"keyword\">import</span> qglue</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">test_file=(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>))</span><br><span class=\"line\">test_file_object = csv.reader(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>))</span><br><span class=\"line\">testheader = next(test_file_object)</span><br><span class=\"line\">predictions_file = open(<span class=\"string\">r\"\"</span>, <span class=\"string\">\"w\"</span>)</span><br><span class=\"line\">predictions_file_object = csv.writer(predictions_file)</span><br><span class=\"line\">p = csv.writer(predictions_file)</span><br><span class=\"line\">p.writerow([<span class=\"string\">\"PassengerId\"</span>, <span class=\"string\">\"Survived\"</span>])</span><br><span class=\"line\">csv_file_object = csv.reader(open(<span class=\"string\">r''</span>, <span class=\"string\">'r'</span>)) </span><br><span class=\"line\">trainheader = next(csv_file_object)  <span class=\"comment\"># The next() command just skips the </span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># first line which is a header</span></span><br><span class=\"line\">data=[]                          \t <span class=\"comment\"># Create a variable called 'data'.</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> csv_file_object:      \t <span class=\"comment\"># Run through each row in the csv file,</span></span><br><span class=\"line\">    data.append(row)             \t <span class=\"comment\"># adding each row to the data variable</span></span><br><span class=\"line\">print(type(data))</span><br><span class=\"line\">data = np.array(data) \t         \t <span class=\"comment\"># Then convert from a list to an array</span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># Be aware that each item is currently</span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\"># a string in this format</span></span><br><span class=\"line\"></span><br><span class=\"line\">number_passengers = np.size(data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>].astype(np.float))</span><br><span class=\"line\">number_survived = np.sum(data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>].astype(np.float))</span><br><span class=\"line\">proportion_survivors = number_survived / number_passengers</span><br><span class=\"line\"></span><br><span class=\"line\">women_only_stats = data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] == <span class=\"string\">\"female\"</span> <span class=\"comment\"># This finds where all </span></span><br><span class=\"line\">                                           <span class=\"comment\"># the elements in the gender</span></span><br><span class=\"line\">                                           <span class=\"comment\"># column that equals female</span></span><br><span class=\"line\">men_only_stats = data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] != <span class=\"string\">\"female\"</span>   <span class=\"comment\"># This finds where all the </span></span><br><span class=\"line\">                                           <span class=\"comment\"># elements do not equal </span></span><br><span class=\"line\">                                           <span class=\"comment\"># female (i.e. male)</span></span><br><span class=\"line\">                                           </span><br><span class=\"line\"><span class=\"comment\"># Using the index from above we select the females and males separately</span></span><br><span class=\"line\">women_onboard = data[women_only_stats,<span class=\"number\">1</span>].astype(np.float)     </span><br><span class=\"line\">men_onboard = data[men_only_stats,<span class=\"number\">1</span>].astype(np.float)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Then we finds the proportions of them that survived</span></span><br><span class=\"line\">proportion_women_survived = \\</span><br><span class=\"line\">                       np.sum(women_onboard) / np.size(women_onboard)  </span><br><span class=\"line\">proportion_men_survived = \\</span><br><span class=\"line\">                       np.sum(men_onboard) / np.size(men_onboard) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># and then print it out</span></span><br><span class=\"line\"><span class=\"keyword\">print</span> (<span class=\"string\">'Proportion of women who survived is %s'</span> % proportion_women_survived)</span><br><span class=\"line\"><span class=\"keyword\">print</span> (<span class=\"string\">'Proportion of men who survived is %s'</span> % proportion_men_survived)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># The script will systematically will loop through each combination </span></span><br><span class=\"line\"><span class=\"comment\"># and use the 'where' function in python to search the passengers that fit that combination of variables. </span></span><br><span class=\"line\"><span class=\"comment\"># Just like before, you can ask what indices in your data equals female, 1st class, and paid more than $30. </span></span><br><span class=\"line\"><span class=\"comment\"># The problem is that looping through requires bins of equal sizes, i.e. $0-9,  $10-19,  $20-29,  $30-39.  </span></span><br><span class=\"line\"><span class=\"comment\"># For the sake of binning let's say everything equal to and above 40 \"equals\" 39 so it falls in this bin. </span></span><br><span class=\"line\"><span class=\"comment\"># So then you can set the bins</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># So we add a ceiling</span></span><br><span class=\"line\">fare_ceiling = <span class=\"number\">40</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># then modify the data in the Fare column to = 39, if it is greater or equal to the ceiling</span></span><br><span class=\"line\">data[ data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>].astype(np.float) &gt;= fare_ceiling, <span class=\"number\">9</span> ] = fare_ceiling - <span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">fare_bracket_size = <span class=\"number\">10</span></span><br><span class=\"line\">number_of_price_brackets = fare_ceiling // fare_bracket_size</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Take the length of an array of unique values in column index 2</span></span><br><span class=\"line\">number_of_classes = len(np.unique(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\">number_of_age_brackets=<span class=\"number\">8</span> </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Initialize the survival table with all zeros</span></span><br><span class=\"line\">survival_table = np.zeros((<span class=\"number\">2</span>, number_of_classes, </span><br><span class=\"line\">\t\t\t\t\t\t   number_of_price_brackets,</span><br><span class=\"line\">\t\t\t\t\t\t   number_of_age_brackets))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Now that these are set up, </span></span><br><span class=\"line\"><span class=\"comment\">#you can loop through each variable </span></span><br><span class=\"line\"><span class=\"comment\">#and find all those passengers that agree with the statements</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(number_of_classes):       \t\t<span class=\"comment\">#loop through each class</span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_price_brackets):   \t<span class=\"comment\">#loop through each price bin</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> k <span class=\"keyword\">in</span> range(number_of_age_brackets):     <span class=\"comment\">#loop through each age bin</span></span><br><span class=\"line\">        women_only_stats_plus = data[                 <span class=\"comment\">#Which element           </span></span><br><span class=\"line\">                        (data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] == <span class=\"string\">\"female\"</span>)     <span class=\"comment\">#is a female</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>].astype(np.float) <span class=\"comment\">#and was ith class</span></span><br><span class=\"line\">                             == i+<span class=\"number\">1</span>)                        </span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#was greater </span></span><br><span class=\"line\">                            &gt;= j*fare_bracket_size)   <span class=\"comment\">#than this bin              </span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#and less than</span></span><br><span class=\"line\">                            &lt; (j+<span class=\"number\">1</span>)*fare_bracket_size)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&gt;=k*<span class=\"number\">10</span>)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&lt;(k+<span class=\"number\">1</span>)*<span class=\"number\">10</span>)<span class=\"comment\">#the next bin</span></span><br><span class=\"line\">                       </span><br><span class=\"line\">                          , <span class=\"number\">1</span>]                        <span class=\"comment\">#in the 2nd col                           </span></span><br><span class=\"line\"> \t\t\t\t\t\t                                    \t\t\t\t\t\t\t\t\t</span><br><span class=\"line\"></span><br><span class=\"line\">        men_only_stats_plus = data[                   <span class=\"comment\">#Which element           </span></span><br><span class=\"line\">                         (data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>] != <span class=\"string\">\"female\"</span>)    <span class=\"comment\">#is a male</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>].astype(np.float) <span class=\"comment\">#and was ith class</span></span><br><span class=\"line\">                             == i+<span class=\"number\">1</span>)                                       </span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#was greater </span></span><br><span class=\"line\">                            &gt;= j*fare_bracket_size)   <span class=\"comment\">#than this bin              </span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">9</span>].astype(np.float)  <span class=\"comment\">#and less than</span></span><br><span class=\"line\">                            &lt; (j+<span class=\"number\">1</span>)*fare_bracket_size)<span class=\"comment\">#the next bin</span></span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&gt;=k*<span class=\"number\">10</span>)</span><br><span class=\"line\">                       &amp;(data[<span class=\"number\">0</span>:,<span class=\"number\">5</span>].astype(np.float)&lt;(k+<span class=\"number\">1</span>)*<span class=\"number\">10</span>)</span><br><span class=\"line\">                          , <span class=\"number\">1</span>]</span><br><span class=\"line\">                          </span><br><span class=\"line\">        survival_table[<span class=\"number\">0</span>,i,j,k] = np.mean(women_only_stats_plus.astype(np.float)) </span><br><span class=\"line\">        survival_table[<span class=\"number\">1</span>,i,j,k] = np.mean(men_only_stats_plus.astype(np.float))</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"comment\">#if nan then the type will change to string from float so this sentence can set nan to 0. </span></span><br><span class=\"line\">        survival_table[ survival_table != survival_table ] = <span class=\"number\">0.</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#Notice that  data[ where function, 1]  means </span></span><br><span class=\"line\"><span class=\"comment\">#it is finding the Survived column for the conditional criteria which is being called. </span></span><br><span class=\"line\"><span class=\"comment\">#As the loop starts with i=0 and j=0, </span></span><br><span class=\"line\"><span class=\"comment\">#the first loop will return the Survived values for all the 1st-class females (i + 1) </span></span><br><span class=\"line\"><span class=\"comment\">#who paid less than 10 ((j+1)*fare_bracket_size) </span></span><br><span class=\"line\"><span class=\"comment\">#and similarly all the 1st-class males who paid less than 10.  </span></span><br><span class=\"line\"><span class=\"comment\">#Before resetting to the top of the loop, </span></span><br><span class=\"line\"><span class=\"comment\">#we can calculate the proportion of survivors for this particular </span></span><br><span class=\"line\"><span class=\"comment\">#combination of criteria and record it to our survival table</span></span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#0.5</span></span><br><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"comment\">#survival_table[ survival_table &lt; 0.5 ] = 0</span></span><br><span class=\"line\"><span class=\"comment\">#survival_table[ survival_table &gt;= 0.5 ] = 1 </span></span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#Then we can make the prediction</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> test_file_object:                  <span class=\"comment\"># We are going to loop</span></span><br><span class=\"line\">                                              <span class=\"comment\"># through each passenger</span></span><br><span class=\"line\">                                              <span class=\"comment\"># in the test set                     </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_price_brackets):   <span class=\"comment\"># For each passenger we</span></span><br><span class=\"line\">                                              <span class=\"comment\"># loop thro each price bin</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:                                      <span class=\"comment\"># Some passengers have no</span></span><br><span class=\"line\">                                              <span class=\"comment\"># Fare data so try to make</span></span><br><span class=\"line\">      row[<span class=\"number\">8</span>] = float(row[<span class=\"number\">8</span>])                  <span class=\"comment\"># a float</span></span><br><span class=\"line\">    <span class=\"keyword\">except</span>:                                   <span class=\"comment\"># If fails: no data, so </span></span><br><span class=\"line\">      bin_fare = <span class=\"number\">3</span> - float(row[<span class=\"number\">1</span>])            <span class=\"comment\"># bin the fare according Pclass</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                   <span class=\"comment\"># Break from the loop</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">8</span>] &gt; fare_ceiling:              \t  <span class=\"comment\"># If there is data see if</span></span><br><span class=\"line\">                                              <span class=\"comment\"># it is greater than fare</span></span><br><span class=\"line\">                                              <span class=\"comment\"># ceiling we set earlier</span></span><br><span class=\"line\">      bin_fare = number_of_price_brackets<span class=\"number\">-1</span>   <span class=\"comment\"># If so set to highest bin</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                   <span class=\"comment\"># And then break loop</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">8</span>] &gt;= j * fare_bracket_size\\</span><br><span class=\"line\">       <span class=\"keyword\">and</span> row[<span class=\"number\">8</span>] &lt; \\</span><br><span class=\"line\">       (j+<span class=\"number\">1</span>) * fare_bracket_size:             <span class=\"comment\"># If passed these tests </span></span><br><span class=\"line\">                                              <span class=\"comment\"># then loop through each bin </span></span><br><span class=\"line\">      bin_fare = j                            <span class=\"comment\"># then assign index</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(number_of_age_brackets): </span><br><span class=\"line\">                                             </span><br><span class=\"line\">    <span class=\"keyword\">try</span>:                                    </span><br><span class=\"line\">                                            </span><br><span class=\"line\">      row[<span class=\"number\">4</span>] = float(row[<span class=\"number\">4</span>])              </span><br><span class=\"line\">    <span class=\"keyword\">except</span>:                                   </span><br><span class=\"line\">      bin_age = <span class=\"number\">-1</span>      </span><br><span class=\"line\">      <span class=\"keyword\">break</span>                                  </span><br><span class=\"line\">                               </span><br><span class=\"line\">    <span class=\"keyword\">if</span> row[<span class=\"number\">4</span>] &gt;= j * <span class=\"number\">10</span>\\</span><br><span class=\"line\">       <span class=\"keyword\">and</span> row[<span class=\"number\">4</span>] &lt; \\</span><br><span class=\"line\">       (j+<span class=\"number\">1</span>) * <span class=\"number\">10</span>:             <span class=\"comment\"># If passed these tests </span></span><br><span class=\"line\">                               <span class=\"comment\"># then loop through each bin </span></span><br><span class=\"line\">      bin_age = j              <span class=\"comment\"># then assign index</span></span><br><span class=\"line\">      <span class=\"keyword\">break</span></span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"keyword\">if</span> row[<span class=\"number\">3</span>] == <span class=\"string\">'female'</span>:       <span class=\"comment\">#If the passenger is female</span></span><br><span class=\"line\">        p.writerow([row[<span class=\"number\">0</span>], <span class=\"string\">\"%f %%\"</span> % \\</span><br><span class=\"line\">                   (survival_table[<span class=\"number\">0</span>, int(row[<span class=\"number\">1</span>])<span class=\"number\">-1</span>, bin_fare,bin_age]*<span class=\"number\">100</span>)])</span><br><span class=\"line\">  <span class=\"keyword\">else</span>:                        <span class=\"comment\">#else if male</span></span><br><span class=\"line\">        p.writerow([row[<span class=\"number\">0</span>], <span class=\"string\">\"%f %%\"</span> % \\</span><br><span class=\"line\">                   (survival_table[<span class=\"number\">1</span>, int(row[<span class=\"number\">1</span>])<span class=\"number\">-1</span>, bin_fare,bin_age]*<span class=\"number\">100</span>)])</span><br><span class=\"line\">     </span><br><span class=\"line\"><span class=\"comment\"># Close out the files.</span></span><br><span class=\"line\">test_file.close() </span><br><span class=\"line\">predictions_file.close()</span><br></pre></td></tr></table></figure><p></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><br><br><br><br>ww</p><p><br><strong>$$ w^*=(X^TX)^{-1}X^Ty $$</strong></p><ul><li>X:1<br>mnm*(n+1)</li><li>w:</li><li>y: $$ y=w^T*x $$</li></ul><p>89119375.155280 %</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220426082.JPG\" alt=\"mark\"></p><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    train1=train.dropna(subset=([<span class=\"string\">'Age'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">vali1=vali.dropna(subset=([<span class=\"string\">'Age'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">validata=np.array(vali1)</span><br><span class=\"line\">data=np.array(train1)</span><br><span class=\"line\"></span><br><span class=\"line\">fare_ceiling = <span class=\"number\">40</span></span><br><span class=\"line\">data[data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>].astype(np.float)&gt;=fare_ceiling,<span class=\"number\">9</span>] = fare_ceiling - <span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">train = np.column_stack((data[<span class=\"number\">0</span>::,<span class=\"number\">9</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">2</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">5</span>],data[<span class=\"number\">0</span>::,<span class=\"number\">4</span>]))</span><br><span class=\"line\">predict=np.column_stack((validata[<span class=\"number\">0</span>::,<span class=\"number\">9</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">2</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">5</span>],validata[<span class=\"number\">0</span>::,<span class=\"number\">4</span>]))</span><br><span class=\"line\">survive = np.column_stack((data[<span class=\"number\">0</span>::,<span class=\"number\">1</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(train.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (train[i][<span class=\"number\">3</span>]==<span class=\"string\">'male'</span>):</span><br><span class=\"line\">        train[i][<span class=\"number\">3</span>]=<span class=\"number\">0.00</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        train[i][<span class=\"number\">3</span>]=<span class=\"number\">1.00</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(predict.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (predict[i][<span class=\"number\">3</span>]==<span class=\"string\">'male'</span>):</span><br><span class=\"line\">        predict[i][<span class=\"number\">3</span>]=<span class=\"number\">0.00</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        predict[i][<span class=\"number\">3</span>]=<span class=\"number\">1.00</span></span><br><span class=\"line\"></span><br><span class=\"line\">x0=np.ones((train.shape[<span class=\"number\">0</span>],<span class=\"number\">1</span>))</span><br><span class=\"line\">train=np.concatenate((train,x0),axis=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">x0=np.ones((predict.shape[<span class=\"number\">0</span>],<span class=\"number\">1</span>))</span><br><span class=\"line\">predict=np.concatenate((predict,x0),axis=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">'raw data finish'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">survive=survive.T.astype(np.float)</span><br><span class=\"line\">traint=train.T.astype(np.float)</span><br><span class=\"line\">w0=traint.dot(train.astype(np.float))</span><br><span class=\"line\">w1=(np.linalg.inv(w0))  </span><br><span class=\"line\">w2=w1.dot(traint)</span><br><span class=\"line\">w=w2.dot(survive)  <span class=\"comment\">#w=(Xt*X)^-1*Xt*y</span></span><br><span class=\"line\">print(<span class=\"string\">'w calc finish'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">feature=[<span class=\"string\">'Fare'</span>,<span class=\"string\">'Pclass'</span>,<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>,<span class=\"string\">'b'</span>]</span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> zip(feature,w):</span><br><span class=\"line\">    print(i)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">valipredict_file_object.writerow([<span class=\"string\">\"PassengerName\"</span>, <span class=\"string\">\"Actual Survived\"</span>,<span class=\"string\">\"Predict Survived\"</span>,<span class=\"string\">\"XO\"</span>])</span><br><span class=\"line\">count=<span class=\"number\">0.0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(predict.shape[<span class=\"number\">0</span>]):</span><br><span class=\"line\">    temp=predict[i,<span class=\"number\">0</span>::].T.astype(float)</span><br><span class=\"line\">    answer=temp.dot(w)</span><br><span class=\"line\">    answer=answer[<span class=\"number\">0</span>]</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((answer&gt;<span class=\"number\">0.5</span> <span class=\"keyword\">and</span> validata[i][<span class=\"number\">1</span>]==<span class=\"number\">1</span>) <span class=\"keyword\">or</span> (answer&lt;<span class=\"number\">0.5</span> <span class=\"keyword\">and</span> validata[i][<span class=\"number\">1</span>]==<span class=\"number\">0</span>)):</span><br><span class=\"line\">        flag=<span class=\"string\">\"Correct\"</span></span><br><span class=\"line\">        count=count+<span class=\"number\">1.0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        flag=<span class=\"string\">\"Error\"</span></span><br><span class=\"line\">    valipredict_file_object.writerow([validata[i][<span class=\"number\">3</span>],validata[i][<span class=\"number\">1</span>],answer,flag])</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"prediction finish\"</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"prediction ratio:\"</span>,<span class=\"string\">\"%f %%\"</span>%(count/predict.shape[<span class=\"number\">0</span>]*<span class=\"number\">100</span>))</span><br></pre></td></tr></table></figure><hr><h1 id=\"scikit-learn\"><a href=\"#scikit-learn\" class=\"headerlink\" title=\"scikit-learn\"></a>scikit-learn</h1><p>scikit,64.375000 %</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170207/220441164.JPG\" alt=\"mark\"></p><p>fitfitx,yinfo()</p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170210/093538631.JPG\" alt=\"mark\"></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train=train.dropna(subset=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Embarked'</span>],axis=<span class=\"number\">0</span>)</span><br><span class=\"line\">vali=vali.dropna(subset=([<span class=\"string\">'Age'</span>,<span class=\"string\">'Embarked'</span>]),axis=<span class=\"number\">0</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"male\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">0</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"female\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"S\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"C\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">train.loc[train[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"Q\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">2</span></span><br><span class=\"line\">trainx=train.reindex(index=train.index[:],columns=[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>]+[<span class=\"string\">'Parch'</span>]+[<span class=\"string\">'Fare'</span>]+[<span class=\"string\">'Embarked'</span>]+[<span class=\"string\">'SibSp'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"male\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">0</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Sex\"</span>]==<span class=\"string\">\"female\"</span>,<span class=\"string\">\"Sex\"</span>]=<span class=\"number\">1</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"S\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">0</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"C\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">1</span></span><br><span class=\"line\">vali.loc[vali[<span class=\"string\">\"Embarked\"</span>] == <span class=\"string\">\"Q\"</span>, <span class=\"string\">\"Embarked\"</span>] = <span class=\"number\">2</span></span><br><span class=\"line\">vali1=vali.reindex(index=vali.index[:],columns=[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>]+[<span class=\"string\">'Parch'</span>]+[<span class=\"string\">'Fare'</span>]+[<span class=\"string\">'Embarked'</span>]+[<span class=\"string\">'SibSp'</span>])</span><br><span class=\"line\"></span><br><span class=\"line\">survive=vali.reindex(index=vali.index[:],columns=[<span class=\"string\">'Survived'</span>])</span><br><span class=\"line\">survive=np.array(survive)</span><br><span class=\"line\"></span><br><span class=\"line\">feature=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>,<span class=\"string\">'Parch'</span>,<span class=\"string\">'Fare'</span>,<span class=\"string\">'Embarked'</span>,<span class=\"string\">'SibSp'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\">trainy=train.reindex(index=train.index[:],columns=[<span class=\"string\">'Survived'</span>])  </span><br><span class=\"line\">trainy=trainy.Survived</span><br><span class=\"line\"></span><br><span class=\"line\">X_train, X_test, y_train, y_test = train_test_split(trainx, trainy, random_state=<span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">model=LinearRegression()</span><br><span class=\"line\">model.fit(X_train,y_train)</span><br><span class=\"line\">print(model)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> zip(feature,model.coef_):</span><br><span class=\"line\">    print(i)</span><br><span class=\"line\"></span><br><span class=\"line\">predict=model.predict(vali1)</span><br><span class=\"line\"></span><br><span class=\"line\">count=<span class=\"number\">0</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(predict)):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (predict[i]&gt;<span class=\"number\">1</span> <span class=\"keyword\">and</span> survive[i] == <span class=\"number\">1</span>) <span class=\"keyword\">or</span>  (predict[i]&lt;<span class=\"number\">1</span> <span class=\"keyword\">and</span> survive [i]== <span class=\"number\">0</span> ):</span><br><span class=\"line\">        count=count+<span class=\"number\">1.0</span></span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"prediction finish\"</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"prediction ratio:\"</span>,<span class=\"string\">\"%f %%\"</span>%(count/len(predict)*<span class=\"number\">100</span>))</span><br></pre></td></tr></table></figure>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":":Coding","path":"2017/02/07/TitanicLinearRegression/","eyeCatchImage":null,"excerpt":"<p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-15/62213897-file_1484471472044_c2cc.jpg\" alt=\"\"></p><hr><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>201611<br>Kaggle</p><p>20172:pandasscikit-learnLinearRegression</p><p><a href=\"https://www.kaggle.com/c/titanic\" target=\"_blank\" rel=\"noopener\">Titanic: Machine Learning from Disaster</a></p><p>12</p>","date":"2017-02-07T13:57:22.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"2018","date":"2018-07-03T07:18:52.000Z","author":"Thinkwee","mathjax":true,"html":true,"_content":"\n\n\n\n\n\n\n<!--more-->\n\n# TODO\n- [ ]\tself-critical sequence training for image captioning\n- [ ]\trecurrent highway networks\n- [ ]\trecurrent convolutional neural networks for scene labeling\n- [ ]\tneural word embedding as implicit matrix factorization\n- [ ]\thierarchically-attentive rnn for album summarization and storytelling\n- [ ]\tlearning phrase representations using rnn encoder-decoder for statistical machine translation\n- [x]\tneural headline generation with sentence-wise optimization\n- [x]\tlda\n- [ ]\tincorporating copying mechanism in sequence-to-sequence learning\n- [ ]\tgenerating sentences from a continuous space\n- [x]\tgenerating news headlines with recurrent neural networks\n- [ ]\tcalculus on computational graphs: backpropagation\n- [ ]\tconvolutional sequence to sequence learning\n- [ ]\tcutting-off redundant repeating generations for neural abstractive summarization\n- [ ]\tattention and augmented recurrent neural networks\n- [x]\tattention is all you need\n- [ ]\tadmissible stopping in viterbi beam search for unit selection in concatenative speech synthesis\n- [ ]\tabstractive document summarization with a graph-based attentional neural model\n- [ ]\taddressing the rare word problem in neural machine translation\n- [ ]\tabstractive sentence summarization with attentive recurrent neural networks\n- [ ]\tunsupervised machine translation using monolingual corpora only\n- [x]\tthe nested chinese restaurant process and bayesian nonparametric inference of topic hierarchies\n- [ ] \tneural architecture search with reinforcement learning\n- [ ] \tan introduction to conditional random fields\n\n# SOTA\n-\tROUGE-1,ROUGE-2,ROUGE-L\n-\tpyrougePerlpyrouge\n\n<table style=\"border-collapse:collapse;border-spacing:0;border-color:#ccc\" class=\"tg\"><tr><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\">pyrouge</th></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">Deep Communicating Agents for Abstractive Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2018.8</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.69<br>19.47<br>37.92</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">48.08<br>31.19<br>42.33</td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Document Modeling with External Attention for Sentence Extraction</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN news highlights</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">54.2<br>21.6<br>48.1</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Multi-Reward Reinforced Summarization with Saliency and Entailment</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.5</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.43<br>18.00<br>37.10</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Ranking Sentences for Extractive Summarization with Reinforcement Learning</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.4</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.0<br>18.2<br>36.6</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">A Deep Reinforced Model for Abstractive Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2017.11</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.16<br>15.82<br>39.08</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">47.22<br>30.72<br>43.27</td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Abstractive Document Summarization with a Graph-Based Attentional Neural Model</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.8</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">38.1<br>13.9<br>34.0</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Get To The Point: Summarization with Pointer-Generator Networks</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.4</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.53<br>17.82<br>36.38</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">SummaRuNNer: A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.11</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.6<br>16.2<br>35.3</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Distraction-Based Neural Networks for Document Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.1</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">27.1<br>8.2<br>18.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Neural Summarization by Extracting Sentences and Words</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">500 DailyMail</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">21.2<br>8.3<br>12.0</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr></table>\n\n# Distraction-Based Neural Networks for Document Summarization\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/H6IBk7f0bk.png?imageslim)\n-\tGRU\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LjAaidg72e.png?imageslim)\n-\t$s_t^{'}$$c_t$$e(y_{t-1})$embedding\n-\t\n\t-\tM1c_tc_tc_t^'coverage\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/j3ijmk54kj.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/3dCkK5ie7F.png?imageslim)\n\t-\tM2\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/Ei4m9iKA9D.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JbHf12J8gG.png?imageslim)\n\t-\tM3$c_t$$s_t$$\\alpha _t$$c_t$$s_t$$\\alpha _t$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/IJ3Li6AA3m.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/HIfge59Ji8.png?imageslim)\n\n# Document Modeling with External Attention for Sentence Extraction\n-\t\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/I5GHHELAdb.png?imageslim)\n\n-\tCNN24maxpooling6\n-\t6LSTM\n-\tLSTMseq2seqseq2seq$s_t$$h_t$$h_t^{'}$\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k8hHm3A3CL.png?imageslim)\n\n# Get To The Point: Summarization with Pointer-Generator Networks\n-\tPointer-GeneratorOOVcoverage\n-\tPointer-Generator:contexttimestepdecoder\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k707Ael05k.png?imageslim)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/5idDIiI9ik.png?imageslim)\n\n-\tlabelOOV0label0decoder\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JhmIg667i7.png?imageslim)\n\n-\tCoverage:coveragetimestep\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/gjFeh5GHm9.png?imageslim)\n\n-\tcoverage:\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/deabGEiC00.png?imageslim)\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/099iBDA88m.png?imageslim)\n\n-\tcoverage\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/36LFjHbch5.png?imageslim)\n\n-\tminattentioncoveragecoverageattentioncovlosscoverageattentioncovloss\n\n# SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/F08I4Ll22f.png?imageslim)\n\n-\tRNN,\n-\t\n-\tGRUGRUpooling\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/a77EbCH3Eg.png?imageslim)\n\n-\td$h_j^f$$h_j^b$GRU\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/eG9Ka8G1lA.png?imageslim)\n\n-\tsjj\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/f2Fg71Hjdg.png?imageslim)\n\n-\t\n-\t\n-\tWe squash the summary representation using the tanh operation so that the magnitude of summary remains the same for all time-steps.\n-\tThe absolute position denotes the actual sentence number, whereas the relative position refers to a quantized representation that divides each document into a fixed number of segments and computes the segment ID of a given sentence.\n-\t:\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/KBeh4fEfIh.png?imageslim)\n\n-\tlabellabel1ROUGEROUGE\n-\ts\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/J1C5aaef5j.png?imageslim)\n\n# Attention Is All You Need\n-\tRNNCNNseq2seqmulti head attentionBN\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/g1BhFElcff.png?imageslim)\n\n-\tattention\n-\tmulti-head attention512\n-\t6attentionbn\n-\t6attentionattentionmaski\n-\t6(stack)\n-\tAttentionqueryqueryattentionqueryattentionattentionkey,value,query\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/DbhA9j0iba.png?imageslim)\n\n-\tMulti-head attentionscaled dot-product attention\n-\tScaled dot-product attentionquerykeyattentionmasksoftmaxvalueattentionquery,key,valueQ,K,Vattentionksoftmax\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/mJFA1DJ8DC.png?imageslim)\n\n-\tMulti-head attentionhscaled dot-product attentionV,K,Qhmulti-head\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/0IBA23dbEJ.png?imageslim)\n\n-\th=8headq,k,v512/8=64\n-\tmulti-head attention\n\t-\tkey,valuequerymasked multi-head attentionattention\n\t-\t\n\t-\t\n-\tReLU\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/AKjaJ4KLLj.png?imageslim)\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LELGH5F9ge.png?imageslim)","source":"_posts/PaperReading2.md","raw":"---\ntitle: 2018\ndate: 2018-07-03 15:18:52\ntags:\n  - abstractive summarization\n  - math\n  - machinelearning\n  -\ttheory\n  -\tnlp\ncategories:\n  - \nauthor: Thinkwee\nmathjax: true\nhtml: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180804/E1lIhI4li1.jpg?imageslim\n---\n\n\n\n\n\n\n\n<!--more-->\n\n# TODO\n- [ ]\tself-critical sequence training for image captioning\n- [ ]\trecurrent highway networks\n- [ ]\trecurrent convolutional neural networks for scene labeling\n- [ ]\tneural word embedding as implicit matrix factorization\n- [ ]\thierarchically-attentive rnn for album summarization and storytelling\n- [ ]\tlearning phrase representations using rnn encoder-decoder for statistical machine translation\n- [x]\tneural headline generation with sentence-wise optimization\n- [x]\tlda\n- [ ]\tincorporating copying mechanism in sequence-to-sequence learning\n- [ ]\tgenerating sentences from a continuous space\n- [x]\tgenerating news headlines with recurrent neural networks\n- [ ]\tcalculus on computational graphs: backpropagation\n- [ ]\tconvolutional sequence to sequence learning\n- [ ]\tcutting-off redundant repeating generations for neural abstractive summarization\n- [ ]\tattention and augmented recurrent neural networks\n- [x]\tattention is all you need\n- [ ]\tadmissible stopping in viterbi beam search for unit selection in concatenative speech synthesis\n- [ ]\tabstractive document summarization with a graph-based attentional neural model\n- [ ]\taddressing the rare word problem in neural machine translation\n- [ ]\tabstractive sentence summarization with attentive recurrent neural networks\n- [ ]\tunsupervised machine translation using monolingual corpora only\n- [x]\tthe nested chinese restaurant process and bayesian nonparametric inference of topic hierarchies\n- [ ] \tneural architecture search with reinforcement learning\n- [ ] \tan introduction to conditional random fields\n\n# SOTA\n-\tROUGE-1,ROUGE-2,ROUGE-L\n-\tpyrougePerlpyrouge\n\n<table style=\"border-collapse:collapse;border-spacing:0;border-color:#ccc\" class=\"tg\"><tr><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial, sans-serif;font-size:14px;font-weight:bold;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\">pyrouge</th></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">Deep Communicating Agents for Abstractive Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2018.8</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.69<br>19.47<br>37.92</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">48.08<br>31.19<br>42.33</td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Document Modeling with External Attention for Sentence Extraction</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN news highlights</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">54.2<br>21.6<br>48.1</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Multi-Reward Reinforced Summarization with Saliency and Entailment</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.5</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.43<br>18.00<br>37.10</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Ranking Sentences for Extractive Summarization with Reinforcement Learning</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.4</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.0<br>18.2<br>36.6</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">A Deep Reinforced Model for Abstractive Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2017.11</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.16<br>15.82<br>39.08</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">47.22<br>30.72<br>43.27</td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Abstractive Document Summarization with a Graph-Based Attentional Neural Model</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.8</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">38.1<br>13.9<br>34.0</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Get To The Point: Summarization with Pointer-Generator Networks</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.4</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.53<br>17.82<br>36.38</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">SummaRuNNer: A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.11</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.6<br>16.2<br>35.3</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Distraction-Based Neural Networks for Document Summarization</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.1</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">27.1<br>8.2<br>18.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Neural Summarization by Extracting Sentences and Words</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.7</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">500 DailyMail</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">21.2<br>8.3<br>12.0</td><td style=\"font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr></table>\n\n# Distraction-Based Neural Networks for Document Summarization\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/H6IBk7f0bk.png?imageslim)\n-\tGRU\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LjAaidg72e.png?imageslim)\n-\t$s_t^{'}$$c_t$$e(y_{t-1})$embedding\n-\t\n\t-\tM1c_tc_tc_t^'coverage\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/j3ijmk54kj.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/3dCkK5ie7F.png?imageslim)\n\t-\tM2\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/Ei4m9iKA9D.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JbHf12J8gG.png?imageslim)\n\t-\tM3$c_t$$s_t$$\\alpha _t$$c_t$$s_t$$\\alpha _t$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/IJ3Li6AA3m.png?imageslim)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/HIfge59Ji8.png?imageslim)\n\n# Document Modeling with External Attention for Sentence Extraction\n-\t\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/I5GHHELAdb.png?imageslim)\n\n-\tCNN24maxpooling6\n-\t6LSTM\n-\tLSTMseq2seqseq2seq$s_t$$h_t$$h_t^{'}$\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k8hHm3A3CL.png?imageslim)\n\n# Get To The Point: Summarization with Pointer-Generator Networks\n-\tPointer-GeneratorOOVcoverage\n-\tPointer-Generator:contexttimestepdecoder\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k707Ael05k.png?imageslim)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/5idDIiI9ik.png?imageslim)\n\n-\tlabelOOV0label0decoder\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JhmIg667i7.png?imageslim)\n\n-\tCoverage:coveragetimestep\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/gjFeh5GHm9.png?imageslim)\n\n-\tcoverage:\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/deabGEiC00.png?imageslim)\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/099iBDA88m.png?imageslim)\n\n-\tcoverage\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/36LFjHbch5.png?imageslim)\n\n-\tminattentioncoveragecoverageattentioncovlosscoverageattentioncovloss\n\n# SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/F08I4Ll22f.png?imageslim)\n\n-\tRNN,\n-\t\n-\tGRUGRUpooling\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/a77EbCH3Eg.png?imageslim)\n\n-\td$h_j^f$$h_j^b$GRU\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/eG9Ka8G1lA.png?imageslim)\n\n-\tsjj\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/f2Fg71Hjdg.png?imageslim)\n\n-\t\n-\t\n-\tWe squash the summary representation using the tanh operation so that the magnitude of summary remains the same for all time-steps.\n-\tThe absolute position denotes the actual sentence number, whereas the relative position refers to a quantized representation that divides each document into a fixed number of segments and computes the segment ID of a given sentence.\n-\t:\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/KBeh4fEfIh.png?imageslim)\n\n-\tlabellabel1ROUGEROUGE\n-\ts\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/J1C5aaef5j.png?imageslim)\n\n# Attention Is All You Need\n-\tRNNCNNseq2seqmulti head attentionBN\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/g1BhFElcff.png?imageslim)\n\n-\tattention\n-\tmulti-head attention512\n-\t6attentionbn\n-\t6attentionattentionmaski\n-\t6(stack)\n-\tAttentionqueryqueryattentionqueryattentionattentionkey,value,query\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/DbhA9j0iba.png?imageslim)\n\n-\tMulti-head attentionscaled dot-product attention\n-\tScaled dot-product attentionquerykeyattentionmasksoftmaxvalueattentionquery,key,valueQ,K,Vattentionksoftmax\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/mJFA1DJ8DC.png?imageslim)\n\n-\tMulti-head attentionhscaled dot-product attentionV,K,Qhmulti-head\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/0IBA23dbEJ.png?imageslim)\n\n-\th=8headq,k,v512/8=64\n-\tmulti-head attention\n\t-\tkey,valuequerymasked multi-head attentionattention\n\t-\t\n\t-\t\n-\tReLU\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/AKjaJ4KLLj.png?imageslim)\n\n-\t\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LELGH5F9ge.png?imageslim)","slug":"PaperReading2","published":1,"updated":"2018-09-08T13:00:40.145Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180804/E1lIhI4li1.jpg?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072cr000sqcw6ptpwtvbc","content":"<p><br><br><br><br></p><a id=\"more\"></a><h1 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO\"></a>TODO</h1><ul><li style=\"list-style:none\"><input type=\"checkbox\">self-critical sequence training for image captioning</li><li style=\"list-style:none\"><input type=\"checkbox\">recurrent highway networks</li><li style=\"list-style:none\"><input type=\"checkbox\">recurrent convolutional neural networks for scene labeling</li><li style=\"list-style:none\"><input type=\"checkbox\">neural word embedding as implicit matrix factorization</li><li style=\"list-style:none\"><input type=\"checkbox\">hierarchically-attentive rnn for album summarization and storytelling</li><li style=\"list-style:none\"><input type=\"checkbox\">learning phrase representations using rnn encoder-decoder for statistical machine translation</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>neural headline generation with sentence-wise optimization</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>lda</li><li style=\"list-style:none\"><input type=\"checkbox\">incorporating copying mechanism in sequence-to-sequence learning</li><li style=\"list-style:none\"><input type=\"checkbox\">generating sentences from a continuous space</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>generating news headlines with recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\">calculus on computational graphs: backpropagation</li><li style=\"list-style:none\"><input type=\"checkbox\">convolutional sequence to sequence learning</li><li style=\"list-style:none\"><input type=\"checkbox\">cutting-off redundant repeating generations for neural abstractive summarization</li><li style=\"list-style:none\"><input type=\"checkbox\">attention and augmented recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>attention is all you need</li><li style=\"list-style:none\"><input type=\"checkbox\">admissible stopping in viterbi beam search for unit selection in concatenative speech synthesis</li><li style=\"list-style:none\"><input type=\"checkbox\">abstractive document summarization with a graph-based attentional neural model</li><li style=\"list-style:none\"><input type=\"checkbox\">addressing the rare word problem in neural machine translation</li><li style=\"list-style:none\"><input type=\"checkbox\">abstractive sentence summarization with attentive recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\">unsupervised machine translation using monolingual corpora only</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>the nested chinese restaurant process and bayesian nonparametric inference of topic hierarchies</li><li style=\"list-style:none\"><input type=\"checkbox\">neural architecture search with reinforcement learning</li><li style=\"list-style:none\"><input type=\"checkbox\">an introduction to conditional random fields</li></ul><h1 id=\"SOTA\"><a href=\"#SOTA\" class=\"headerlink\" title=\"SOTA\"></a>SOTA</h1><ul><li>ROUGE-1,ROUGE-2,ROUGE-L</li><li>pyrougePerlpyrouge</li></ul><table style=\"border-collapse:collapse;border-spacing:0;border-color:#ccc\" class=\"tg\"><tr><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\">pyrouge</th></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">Deep Communicating Agents for Abstractive Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2018.8</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.69<br>19.47<br>37.92</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">48.08<br>31.19<br>42.33</td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Document Modeling with External Attention for Sentence Extraction</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN news highlights</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">54.2<br>21.6<br>48.1</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Multi-Reward Reinforced Summarization with Saliency and Entailment</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.5</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.43<br>18.00<br>37.10</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Ranking Sentences for Extractive Summarization with Reinforcement Learning</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.4</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.0<br>18.2<br>36.6</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">A Deep Reinforced Model for Abstractive Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2017.11</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.16<br>15.82<br>39.08</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">47.22<br>30.72<br>43.27</td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Abstractive Document Summarization with a Graph-Based Attentional Neural Model</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.8</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">38.1<br>13.9<br>34.0</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Get To The Point: Summarization with Pointer-Generator Networks</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.4</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.53<br>17.82<br>36.38</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">SummaRuNNer: A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.11</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.6<br>16.2<br>35.3</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Distraction-Based Neural Networks for Document Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.1</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">27.1<br>8.2<br>18.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Neural Summarization by Extracting Sentences and Words</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">500 DailyMail</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">21.2<br>8.3<br>12.0</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr></table><h1 id=\"Distraction-Based-Neural-Networks-for-Document-Summarization\"><a href=\"#Distraction-Based-Neural-Networks-for-Document-Summarization\" class=\"headerlink\" title=\"Distraction-Based Neural Networks for Document Summarization\"></a>Distraction-Based Neural Networks for Document Summarization</h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/H6IBk7f0bk.png?imageslim\" alt=\"mark\"></li><li>GRU<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LjAaidg72e.png?imageslim\" alt=\"mark\"></li><li>$s_t^{}$$c_t$$e(y_{t-1})$embedding</li><li><ul><li>M1c_tc_tc_t^coverage<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/j3ijmk54kj.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/3dCkK5ie7F.png?imageslim\" alt=\"mark\"></li><li>M2<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/Ei4m9iKA9D.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JbHf12J8gG.png?imageslim\" alt=\"mark\"></li><li>M3$c_t$$s_t$$\\alpha _t$$c_t$$s_t$$\\alpha _t$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/IJ3Li6AA3m.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/HIfge59Ji8.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"Document-Modeling-with-External-Attention-for-Sentence-Extraction\"><a href=\"#Document-Modeling-with-External-Attention-for-Sentence-Extraction\" class=\"headerlink\" title=\"Document Modeling with External Attention for Sentence Extraction\"></a>Document Modeling with External Attention for Sentence Extraction</h1><ul><li><br></li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/I5GHHELAdb.png?imageslim\" alt=\"mark\"></p><ul><li>CNN24maxpooling6</li><li>6LSTM</li><li>LSTMseq2seqseq2seq$s_t$$h_t$$h_t^{}$</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k8hHm3A3CL.png?imageslim\" alt=\"mark\"></p><h1 id=\"Get-To-The-Point-Summarization-with-Pointer-Generator-Networks\"><a href=\"#Get-To-The-Point-Summarization-with-Pointer-Generator-Networks\" class=\"headerlink\" title=\"Get To The Point: Summarization with Pointer-Generator Networks\"></a>Get To The Point: Summarization with Pointer-Generator Networks</h1><ul><li>Pointer-GeneratorOOVcoverage</li><li>Pointer-Generator:contexttimestepdecoder</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k707Ael05k.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/5idDIiI9ik.png?imageslim\" alt=\"mark\"></p><ul><li>labelOOV0label0decoder</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JhmIg667i7.png?imageslim\" alt=\"mark\"></p><ul><li>Coverage:coveragetimestep</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/gjFeh5GHm9.png?imageslim\" alt=\"mark\"></p><ul><li>coverage:</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/deabGEiC00.png?imageslim\" alt=\"mark\"></p><ul><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/099iBDA88m.png?imageslim\" alt=\"mark\"></p><ul><li>coverage</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/36LFjHbch5.png?imageslim\" alt=\"mark\"></p><ul><li>minattentioncoveragecoverageattentioncovlosscoverageattentioncovloss</li></ul><h1 id=\"SummaRuNNer-A-Recurrent-Neural-Network-based-Sequence-Model-for-Extractive-Summarization-of-Documents\"><a href=\"#SummaRuNNer-A-Recurrent-Neural-Network-based-Sequence-Model-for-Extractive-Summarization-of-Documents\" class=\"headerlink\" title=\"SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents\"></a>SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/F08I4Ll22f.png?imageslim\" alt=\"mark\"></p><ul><li>RNN,</li><li></li><li>GRUGRUpooling</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/a77EbCH3Eg.png?imageslim\" alt=\"mark\"></p><ul><li>d$h_j^f$$h_j^b$GRU</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/eG9Ka8G1lA.png?imageslim\" alt=\"mark\"></p><ul><li>sjj</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/f2Fg71Hjdg.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li><li>We squash the summary representation using the tanh operation so that the magnitude of summary remains the same for all time-steps.</li><li>The absolute position denotes the actual sentence number, whereas the relative position refers to a quantized representation that divides each document into a fixed number of segments and computes the segment ID of a given sentence.</li><li>:</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/KBeh4fEfIh.png?imageslim\" alt=\"mark\"></p><ul><li>labellabel1ROUGEROUGE</li><li>s</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/J1C5aaef5j.png?imageslim\" alt=\"mark\"></p><h1 id=\"Attention-Is-All-You-Need\"><a href=\"#Attention-Is-All-You-Need\" class=\"headerlink\" title=\"Attention Is All You Need\"></a>Attention Is All You Need</h1><ul><li>RNNCNNseq2seqmulti head attentionBN</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/g1BhFElcff.png?imageslim\" alt=\"mark\"></p><ul><li>attention</li><li>multi-head attention512</li><li>6attentionbn</li><li>6attentionattentionmaski</li><li>6(stack)</li><li>Attentionqueryqueryattentionqueryattentionattentionkey,value,query</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/DbhA9j0iba.png?imageslim\" alt=\"mark\"></p><ul><li>Multi-head attentionscaled dot-product attention</li><li>Scaled dot-product attentionquerykeyattentionmasksoftmaxvalueattentionquery,key,valueQ,K,Vattentionksoftmax</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/mJFA1DJ8DC.png?imageslim\" alt=\"mark\"></p><ul><li>Multi-head attentionhscaled dot-product attentionV,K,Qhmulti-head</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/0IBA23dbEJ.png?imageslim\" alt=\"mark\"></p><ul><li>h=8headq,k,v512/8=64</li><li>multi-head attention<ul><li>key,valuequerymasked multi-head attentionattention</li><li></li><li></li></ul></li><li>ReLU</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/AKjaJ4KLLj.png?imageslim\" alt=\"mark\"></p><ul><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LELGH5F9ge.png?imageslim\" alt=\"mark\"></p>","site":{"data":{}},"excerpt":"<p><br><br><br><br></p>","more":"<h1 id=\"TODO\"><a href=\"#TODO\" class=\"headerlink\" title=\"TODO\"></a>TODO</h1><ul><li style=\"list-style:none\"><input type=\"checkbox\">self-critical sequence training for image captioning</li><li style=\"list-style:none\"><input type=\"checkbox\">recurrent highway networks</li><li style=\"list-style:none\"><input type=\"checkbox\">recurrent convolutional neural networks for scene labeling</li><li style=\"list-style:none\"><input type=\"checkbox\">neural word embedding as implicit matrix factorization</li><li style=\"list-style:none\"><input type=\"checkbox\">hierarchically-attentive rnn for album summarization and storytelling</li><li style=\"list-style:none\"><input type=\"checkbox\">learning phrase representations using rnn encoder-decoder for statistical machine translation</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>neural headline generation with sentence-wise optimization</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>lda</li><li style=\"list-style:none\"><input type=\"checkbox\">incorporating copying mechanism in sequence-to-sequence learning</li><li style=\"list-style:none\"><input type=\"checkbox\">generating sentences from a continuous space</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>generating news headlines with recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\">calculus on computational graphs: backpropagation</li><li style=\"list-style:none\"><input type=\"checkbox\">convolutional sequence to sequence learning</li><li style=\"list-style:none\"><input type=\"checkbox\">cutting-off redundant repeating generations for neural abstractive summarization</li><li style=\"list-style:none\"><input type=\"checkbox\">attention and augmented recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>attention is all you need</li><li style=\"list-style:none\"><input type=\"checkbox\">admissible stopping in viterbi beam search for unit selection in concatenative speech synthesis</li><li style=\"list-style:none\"><input type=\"checkbox\">abstractive document summarization with a graph-based attentional neural model</li><li style=\"list-style:none\"><input type=\"checkbox\">addressing the rare word problem in neural machine translation</li><li style=\"list-style:none\"><input type=\"checkbox\">abstractive sentence summarization with attentive recurrent neural networks</li><li style=\"list-style:none\"><input type=\"checkbox\">unsupervised machine translation using monolingual corpora only</li><li style=\"list-style:none\"><input type=\"checkbox\" checked>the nested chinese restaurant process and bayesian nonparametric inference of topic hierarchies</li><li style=\"list-style:none\"><input type=\"checkbox\">neural architecture search with reinforcement learning</li><li style=\"list-style:none\"><input type=\"checkbox\">an introduction to conditional random fields</li></ul><h1 id=\"SOTA\"><a href=\"#SOTA\" class=\"headerlink\" title=\"SOTA\"></a>SOTA</h1><ul><li>ROUGE-1,ROUGE-2,ROUGE-L</li><li>pyrougePerlpyrouge</li></ul><table style=\"border-collapse:collapse;border-spacing:0;border-color:#ccc\" class=\"tg\"><tr><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\"></th><th style=\"font-family:Arial,sans-serif;font-size:14px;font-weight:700;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#f0f0f0;text-align:center\">pyrouge</th></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">Deep Communicating Agents for Abstractive Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2018.8</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.69<br>19.47<br>37.92</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">48.08<br>31.19<br>42.33</td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Document Modeling with External Attention for Sentence Extraction</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN news highlights</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">54.2<br>21.6<br>48.1</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Multi-Reward Reinforced Summarization with Saliency and Entailment</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.5</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.43<br>18.00<br>37.10</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Ranking Sentences for Extractive Summarization with Reinforcement Learning</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2018.4</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">40.0<br>18.2<br>36.6</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">A Deep Reinforced Model for Abstractive Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\">2017.11</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">41.16<br>15.82<br>39.08</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\" rowspan=\"2\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">NYT</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">47.22<br>30.72<br>43.27</td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Abstractive Document Summarization with a Graph-Based Attentional Neural Model</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.8</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">38.1<br>13.9<br>34.0</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Get To The Point: Summarization with Pointer-Generator Networks</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2017.4</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.53<br>17.82<br>36.38</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">SummaRuNNer: A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.11</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">39.6<br>16.2<br>35.3</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Distraction-Based Neural Networks for Document Summarization</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.1</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">CNN/DM</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">27.1<br>8.2<br>18.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr><tr><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">Neural Summarization by Extracting Sentences and Words</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">2016.7</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">500 DailyMail</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\">21.2<br>8.3<br>12.0</td><td style=\"font-family:Arial,sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:inherit;color:#333;background-color:#fff;text-align:center\"></td></tr></table><h1 id=\"Distraction-Based-Neural-Networks-for-Document-Summarization\"><a href=\"#Distraction-Based-Neural-Networks-for-Document-Summarization\" class=\"headerlink\" title=\"Distraction-Based Neural Networks for Document Summarization\"></a>Distraction-Based Neural Networks for Document Summarization</h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/H6IBk7f0bk.png?imageslim\" alt=\"mark\"></li><li>GRU<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LjAaidg72e.png?imageslim\" alt=\"mark\"></li><li>$s_t^{}$$c_t$$e(y_{t-1})$embedding</li><li><ul><li>M1c_tc_tc_t^coverage<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/j3ijmk54kj.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/3dCkK5ie7F.png?imageslim\" alt=\"mark\"></li><li>M2<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/Ei4m9iKA9D.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JbHf12J8gG.png?imageslim\" alt=\"mark\"></li><li>M3$c_t$$s_t$$\\alpha _t$$c_t$$s_t$$\\alpha _t$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/IJ3Li6AA3m.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/HIfge59Ji8.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"Document-Modeling-with-External-Attention-for-Sentence-Extraction\"><a href=\"#Document-Modeling-with-External-Attention-for-Sentence-Extraction\" class=\"headerlink\" title=\"Document Modeling with External Attention for Sentence Extraction\"></a>Document Modeling with External Attention for Sentence Extraction</h1><ul><li><br></li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/I5GHHELAdb.png?imageslim\" alt=\"mark\"></p><ul><li>CNN24maxpooling6</li><li>6LSTM</li><li>LSTMseq2seqseq2seq$s_t$$h_t$$h_t^{}$</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k8hHm3A3CL.png?imageslim\" alt=\"mark\"></p><h1 id=\"Get-To-The-Point-Summarization-with-Pointer-Generator-Networks\"><a href=\"#Get-To-The-Point-Summarization-with-Pointer-Generator-Networks\" class=\"headerlink\" title=\"Get To The Point: Summarization with Pointer-Generator Networks\"></a>Get To The Point: Summarization with Pointer-Generator Networks</h1><ul><li>Pointer-GeneratorOOVcoverage</li><li>Pointer-Generator:contexttimestepdecoder</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/k707Ael05k.png?imageslim\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/5idDIiI9ik.png?imageslim\" alt=\"mark\"></p><ul><li>labelOOV0label0decoder</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/JhmIg667i7.png?imageslim\" alt=\"mark\"></p><ul><li>Coverage:coveragetimestep</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/gjFeh5GHm9.png?imageslim\" alt=\"mark\"></p><ul><li>coverage:</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/deabGEiC00.png?imageslim\" alt=\"mark\"></p><ul><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/099iBDA88m.png?imageslim\" alt=\"mark\"></p><ul><li>coverage</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/36LFjHbch5.png?imageslim\" alt=\"mark\"></p><ul><li>minattentioncoveragecoverageattentioncovlosscoverageattentioncovloss</li></ul><h1 id=\"SummaRuNNer-A-Recurrent-Neural-Network-based-Sequence-Model-for-Extractive-Summarization-of-Documents\"><a href=\"#SummaRuNNer-A-Recurrent-Neural-Network-based-Sequence-Model-for-Extractive-Summarization-of-Documents\" class=\"headerlink\" title=\"SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents\"></a>SummaRuNNer A Recurrent Neural Network based Sequence Model for Extractive Summarization of Documents</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/F08I4Ll22f.png?imageslim\" alt=\"mark\"></p><ul><li>RNN,</li><li></li><li>GRUGRUpooling</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/a77EbCH3Eg.png?imageslim\" alt=\"mark\"></p><ul><li>d$h_j^f$$h_j^b$GRU</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/eG9Ka8G1lA.png?imageslim\" alt=\"mark\"></p><ul><li>sjj</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/f2Fg71Hjdg.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li><li>We squash the summary representation using the tanh operation so that the magnitude of summary remains the same for all time-steps.</li><li>The absolute position denotes the actual sentence number, whereas the relative position refers to a quantized representation that divides each document into a fixed number of segments and computes the segment ID of a given sentence.</li><li>:</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/KBeh4fEfIh.png?imageslim\" alt=\"mark\"></p><ul><li>labellabel1ROUGEROUGE</li><li>s</li><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/J1C5aaef5j.png?imageslim\" alt=\"mark\"></p><h1 id=\"Attention-Is-All-You-Need\"><a href=\"#Attention-Is-All-You-Need\" class=\"headerlink\" title=\"Attention Is All You Need\"></a>Attention Is All You Need</h1><ul><li>RNNCNNseq2seqmulti head attentionBN</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/g1BhFElcff.png?imageslim\" alt=\"mark\"></p><ul><li>attention</li><li>multi-head attention512</li><li>6attentionbn</li><li>6attentionattentionmaski</li><li>6(stack)</li><li>Attentionqueryqueryattentionqueryattentionattentionkey,value,query</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/DbhA9j0iba.png?imageslim\" alt=\"mark\"></p><ul><li>Multi-head attentionscaled dot-product attention</li><li>Scaled dot-product attentionquerykeyattentionmasksoftmaxvalueattentionquery,key,valueQ,K,Vattentionksoftmax</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/mJFA1DJ8DC.png?imageslim\" alt=\"mark\"></p><ul><li>Multi-head attentionhscaled dot-product attentionV,K,Qhmulti-head</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/0IBA23dbEJ.png?imageslim\" alt=\"mark\"></p><ul><li>h=8headq,k,v512/8=64</li><li>multi-head attention<ul><li>key,valuequerymasked multi-head attentionattention</li><li></li><li></li></ul></li><li>ReLU</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/AKjaJ4KLLj.png?imageslim\" alt=\"mark\"></p><ul><li></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180908/LELGH5F9ge.png?imageslim\" alt=\"mark\"></p>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sat Sep 08 2018 21:00:40 GMT+0800 ()","title":"2018","path":"2018/07/03/PaperReading2/","eyeCatchImage":null,"excerpt":"<p><br><br><br><br></p>","date":"2018-07-03T07:18:52.000Z","pv":0,"totalPV":0,"categories":"","tags":["abstractive summarization","math","machinelearning","theory","nlp"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-08-04T02:07:26.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180804/Hk49mE6DDC.jpg?imageslim"],"html":true,"_content":"***\n\nConvex Optimization By Stephen Boyd & Lieven Vandenberghe\n\n<!--more-->\n\n# \n\n# \n\n## \n\n## \n\n## \n\n## \n\n# \n\n## \n\n## \n\n## \n\n# \n\n## \n\n## \n\n##  ","source":"_posts/convex-optimization.md","raw":"---\ntitle: \ndate: 2018-08-04 10:07:26\ncategories: \ntags:\n  - convex optimization\n  - math\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180804/Hk49mE6DDC.jpg?imageslim\nhtml: true\n---\n***\n\nConvex Optimization By Stephen Boyd & Lieven Vandenberghe\n\n<!--more-->\n\n# \n\n# \n\n## \n\n## \n\n## \n\n## \n\n# \n\n## \n\n## \n\n## \n\n# \n\n## \n\n## \n\n##  ","slug":"convex-optimization","published":1,"updated":"2018-08-04T02:14:48.460Z","comments":1,"layout":"post","link":"","_id":"cjmd072cs000uqcw6wnw7fvpf","content":"<hr><p><br>Convex Optimization By Stephen Boyd &amp; Lieven Vandenberghe</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","site":{"data":{}},"excerpt":"<hr><p><br>Convex Optimization By Stephen Boyd &amp; Lieven Vandenberghe</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sat Aug 04 2018 10:14:48 GMT+0800 ()","title":"","path":"2018/08/04/convex-optimization/","eyeCatchImage":null,"excerpt":"<hr><p><br>Convex Optimization By Stephen Boyd &amp; Lieven Vandenberghe</p>","date":"2018-08-04T02:07:26.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","convex optimization"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-07-03T07:17:27.000Z","mathjax":true,"html":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180703/15D61BF7mL.png?imageslim"],"_content":"***\n\nConvex Optimization Overview\nZico Kolter (updated by Honglak Lee)\n\n<!--more-->\n\n# \n-\t\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/e78fGmcAgj.png?imageslim)\n-\t)$\\theta x+(1-\\theta)y$\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/m18774d3Gk.png?imageslim)\n\n## \n-\tn\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/De00K79cF6.png?imageslim)\n-\t\n\t-\t\n\t-\t\n\t-\t\n\n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C4cAECJLhb.png?imageslim)\n-\t\n-\t\n\n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/elbdAFA9aH.png?imageslim)\n-\tHessian\n\n## Jensen\n-\t3\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/AE34lI2FFj.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/c2GgbjigdA.png?imageslim)\n-\tJensen\n\n## \n-\t$\\alpha$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/L3fjcKl5if.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/8ff5831B1d.png?imageslim)\n\n## \n-\t\n-\t\n-\tHessian00\n-\t\n-\t\n-\t\n\n# \n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/hD8Ka52AcG.png?imageslim)\n-\t\n\n## \n-\t\n-\t\n\txyxxzxRzxy\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/DCd7l9lDbl.png?imageslim)\n\tzx\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/j4D5hg8l4J.png?imageslim)\n\tzxxyz\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C0l3BC192a.png?imageslim)\n\n\n## \n-\t\n-\tLPfg\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Ci58g01eF5.png?imageslim)\n-\tQPgf\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/HkiCClD4eh.png?imageslim)\n-\tQCQPfg\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/l45kgmJ8j1.png?imageslim)\n-\tSDP\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Kce3mdA3FG.png?imageslim)\n-\tQCQPSDPQPQCQPLPQP\n\n## \n-\tSVM\n-\t\n-\t\n\n# \n","source":"_posts/cvxopt.md","raw":"---\ntitle: \ndate: 2018-07-03 15:17:27\ntags: [convex optimization ,math]\ncategories: \nmathjax: true\nhtml: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180703/15D61BF7mL.png?imageslim\n---\n***\n\nConvex Optimization Overview\nZico Kolter (updated by Honglak Lee)\n\n<!--more-->\n\n# \n-\t\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/e78fGmcAgj.png?imageslim)\n-\t)$\\theta x+(1-\\theta)y$\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/m18774d3Gk.png?imageslim)\n\n## \n-\tn\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/De00K79cF6.png?imageslim)\n-\t\n\t-\t\n\t-\t\n\t-\t\n\n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C4cAECJLhb.png?imageslim)\n-\t\n-\t\n\n## \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/elbdAFA9aH.png?imageslim)\n-\tHessian\n\n## Jensen\n-\t3\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/AE34lI2FFj.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/c2GgbjigdA.png?imageslim)\n-\tJensen\n\n## \n-\t$\\alpha$\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/L3fjcKl5if.png?imageslim)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/8ff5831B1d.png?imageslim)\n\n## \n-\t\n-\t\n-\tHessian00\n-\t\n-\t\n-\t\n\n# \n-\t\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/hD8Ka52AcG.png?imageslim)\n-\t\n\n## \n-\t\n-\t\n\txyxxzxRzxy\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/DCd7l9lDbl.png?imageslim)\n\tzx\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/j4D5hg8l4J.png?imageslim)\n\tzxxyz\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C0l3BC192a.png?imageslim)\n\n\n## \n-\t\n-\tLPfg\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Ci58g01eF5.png?imageslim)\n-\tQPgf\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/HkiCClD4eh.png?imageslim)\n-\tQCQPfg\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/l45kgmJ8j1.png?imageslim)\n-\tSDP\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Kce3mdA3FG.png?imageslim)\n-\tQCQPSDPQPQCQPLPQP\n\n## \n-\tSVM\n-\t\n-\t\n\n# \n","slug":"cvxopt","published":1,"updated":"2018-07-06T07:37:11.346Z","comments":1,"layout":"post","link":"","_id":"cjmd072cu000xqcw6l4m00fyh","content":"<hr><p><br>Convex Optimization Overview<br>Zico Kolter (updated by Honglak Lee)</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/e78fGmcAgj.png?imageslim\" alt=\"mark\"></li><li>)$\\theta x+(1-\\theta)y$</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/m18774d3Gk.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>n</li><li></li><li></li><li></li><li></li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/De00K79cF6.png?imageslim\" alt=\"mark\"></li><li><ul><li></li><li></li><li></li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C4cAECJLhb.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/elbdAFA9aH.png?imageslim\" alt=\"mark\"></p><ul><li>Hessian</li></ul><h2 id=\"Jensen\"><a href=\"#Jensen\" class=\"headerlink\" title=\"Jensen\"></a>Jensen</h2><ul><li>3<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/AE34lI2FFj.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/c2GgbjigdA.png?imageslim\" alt=\"mark\"></li><li>Jensen</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$\\alpha$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/L3fjcKl5if.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/8ff5831B1d.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>Hessian00</li><li></li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/hD8Ka52AcG.png?imageslim\" alt=\"mark\"></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><br>xyxxzxRzxy<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/DCd7l9lDbl.png?imageslim\" alt=\"mark\"><br>zx<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/j4D5hg8l4J.png?imageslim\" alt=\"mark\"><br>zxxyz<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C0l3BC192a.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>LPfg<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Ci58g01eF5.png?imageslim\" alt=\"mark\"></li><li>QPgf<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/HkiCClD4eh.png?imageslim\" alt=\"mark\"></li><li>QCQPfg<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/l45kgmJ8j1.png?imageslim\" alt=\"mark\"></li><li>SDP<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Kce3mdA3FG.png?imageslim\" alt=\"mark\"></li><li>QCQPSDPQPQCQPLPQP</li></ul><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>SVM</li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>","site":{"data":{}},"excerpt":"<hr><p><br>Convex Optimization Overview<br>Zico Kolter (updated by Honglak Lee)</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/e78fGmcAgj.png?imageslim\" alt=\"mark\"></li><li>)$\\theta x+(1-\\theta)y$</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/m18774d3Gk.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>n</li><li></li><li></li><li></li><li></li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/De00K79cF6.png?imageslim\" alt=\"mark\"></li><li><ul><li></li><li></li><li></li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C4cAECJLhb.png?imageslim\" alt=\"mark\"></p><ul><li></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/elbdAFA9aH.png?imageslim\" alt=\"mark\"></p><ul><li>Hessian</li></ul><h2 id=\"Jensen\"><a href=\"#Jensen\" class=\"headerlink\" title=\"Jensen\"></a>Jensen</h2><ul><li>3<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/AE34lI2FFj.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/c2GgbjigdA.png?imageslim\" alt=\"mark\"></li><li>Jensen</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$\\alpha$<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/L3fjcKl5if.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/8ff5831B1d.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>Hessian00</li><li></li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/hD8Ka52AcG.png?imageslim\" alt=\"mark\"></li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li><br>xyxxzxRzxy<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/DCd7l9lDbl.png?imageslim\" alt=\"mark\"><br>zx<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/j4D5hg8l4J.png?imageslim\" alt=\"mark\"><br>zxxyz<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/C0l3BC192a.png?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>LPfg<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Ci58g01eF5.png?imageslim\" alt=\"mark\"></li><li>QPgf<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/HkiCClD4eh.png?imageslim\" alt=\"mark\"></li><li>QCQPfg<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/l45kgmJ8j1.png?imageslim\" alt=\"mark\"></li><li>SDP<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180703/Kce3mdA3FG.png?imageslim\" alt=\"mark\"></li><li>QCQPSDPQPQCQPLPQP</li></ul><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>SVM</li><li></li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Fri Jul 06 2018 15:37:11 GMT+0800 ()","title":"","path":"2018/07/03/cvxopt/","eyeCatchImage":null,"excerpt":"<hr><p><br>Convex Optimization Overview<br>Zico Kolter (updated by Honglak Lee)</p>","date":"2018-07-03T07:17:27.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","convex optimization"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Android:Melodia","date":"2017-03-09T09:19:53.000Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170309/172109957.gif"],"_content":"***\napp\nwavjsonwavmidimidiarduino\n[qiao](https://github.com/qiao)midi[euphony](https://github.com/qiao/euphony)\n\n<!--more-->\n\n# midi\nMediaPlayerandroid5.1midi\n-\tMediaPlayerassert,rawuri\n-\trawplayer = MediaPlayer.create(this, R.raw.test1)\n-\tUrinew->setDataSource->prepare->start\n\n# \n[androidAudioRecord](http://blog.csdn.net/jiangliloveyou/article/details/11218555)\n```Java\n\tprivate class RecordTask extends AsyncTask<Void, Integer, Void> {\n\t\t@Override\n\t\tprotected Void doInBackground(Void... arg0) {\n\t\t\tisRecording = true;\n\t\t\ttry {\n\t\t\t\t//\n\t\t\t\tDataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(pcmFile)));\n\t\t\t\t//\n\t\t\t\tint bufferSize = AudioRecord.getMinBufferSize(audioRate, channelConfig, audioEncoding);\n\t\t\t\t//AudioRecord\n\t\t\t\tAudioRecord record = new AudioRecord(MediaRecorder.AudioSource.MIC, audioRate, channelConfig, audioEncoding, bufferSize);\n\t\t\t\t//\n\t\t\t\tshort[] buffer = new short[bufferSize];\n\n\t\t\t\t//\n\t\t\t\trecord.startRecording();\n\n\t\t\t\tint r = 0; //\n\t\t\t\t//isRecording\n\t\t\t\twhile (isRecording) {\n\t\t\t\t\t//bufferSizeshort\n\t\t\t\t\t//buffer overflowTODO\n\t\t\t\t\tint bufferReadResult = record.read(buffer, 0, buffer.length);\n\t\t\t\t\t//bufferOutputStream\n\t\t\t\t\tfor (int i = 0; i < bufferReadResult; i++) {\n\t\t\t\t\t\tdos.writeShort(buffer[i]);\n\t\t\t\t\t}\n\t\t\t\t\tpublishProgress(new Integer(r)); //UI\n\t\t\t\t\tr++; //\n\t\t\t\t}\n\t\t\t\t//\n\t\t\t\trecord.stop();\n\t\t\t\tconvertWaveFile();\n\t\t\t\tdos.close();\n\t\t\t} catch (Exception e) {\n\t\t\t\t// TODO: handle exception\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n```\n\n# pcmwav\npcmwav\n```Java\n\tprivate void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen, long totalDataLen, long longSampleRate,\n\t\t\t\t\t\t\t\t\t int channels, long byteRate) throws IOException {\n\t\tbyte[] header = new byte[45];\n\t\theader[0] = 'R'; // RIFF\n\t\theader[1] = 'I';\n\t\theader[2] = 'F';\n\t\theader[3] = 'F';\n\t\theader[4] = (byte) (totalDataLen & 0xff);//\n\t\theader[5] = (byte) ((totalDataLen >> 8) & 0xff);\n\t\theader[6] = (byte) ((totalDataLen >> 16) & 0xff);\n\t\theader[7] = (byte) ((totalDataLen >> 24) & 0xff);\n\t\theader[8] = 'W';//WAVE\n\t\theader[9] = 'A';\n\t\theader[10] = 'V';\n\t\theader[11] = 'E';\n\t\t//FMT Chunk\n\t\theader[12] = 'f'; // 'fmt '\n\t\theader[13] = 'm';\n\t\theader[14] = 't';\n\t\theader[15] = ' ';//\n\t\t//\n\t\theader[16] = 16; // 4 bytes: size of 'fmt ' chunk\n\t\theader[17] = 0;\n\t\theader[18] = 0;\n\t\theader[19] = 0;\n\t\t// 10HPCM\n\t\theader[20] = 1; // format = 1\n\t\theader[21] = 0;\n\t\t//\n\t\theader[22] = (byte) channels;\n\t\theader[23] = 0;\n\t\t//\n\t\theader[24] = (byte) (longSampleRate & 0xff);\n\t\theader[25] = (byte) ((longSampleRate >> 8) & 0xff);\n\t\theader[26] = (byte) ((longSampleRate >> 16) & 0xff);\n\t\theader[27] = (byte) ((longSampleRate >> 24) & 0xff);\n\t\t//,**/8\n\t\theader[28] = (byte) (byteRate & 0xff);\n\t\theader[29] = (byte) ((byteRate >> 8) & 0xff);\n\t\theader[30] = (byte) ((byteRate >> 16) & 0xff);\n\t\theader[31] = (byte) ((byteRate >> 24) & 0xff);\n\t\t// *\n\t\theader[32] = (byte) (1 * 16 / 8);\n\t\theader[33] = 0;\n\t\t//\n\t\theader[34] = 16;\n\t\theader[35] = 0;\n\t\t//Data chunk\n\t\theader[36] = 'd';//data\n\t\theader[37] = 'a';\n\t\theader[38] = 't';\n\t\theader[39] = 'a';\n\t\theader[40] = (byte) (totalAudioLen & 0xff);\n\t\theader[41] = (byte) ((totalAudioLen >> 8) & 0xff);\n\t\theader[42] = (byte) ((totalAudioLen >> 16) & 0xff);\n\t\theader[43] = (byte) ((totalAudioLen >> 24) & 0xff);\n\t\theader[44] = 0;\n\t\tout.write(header, 0, 45);\n\t}\n```\n\n# json\njsonwavwavwavjson\njsonmd5jsonmidi\n```Java\n    private JSONObject makejson(int request, String identifycode, String data) {\n        if (identifycode == \"a\") {\n            try {\n                JSONObject pack = new JSONObject();\n                pack.put(\"request\", request);\n                JSONObject config = new JSONObject();\n                config.put(\"n\", lowf);\n                config.put(\"m\", highf);\n                config.put(\"w\", interval);\n                pack.put(\"config\", config);\n                pack.put(\"data\", data);\n                return pack;\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        } else {\n            try {\n                JSONObject pack = new JSONObject();\n                pack.put(\"request\", request);\n                pack.put(\"config\", \"\");\n                pack.put(\"data\", identifycode);\n                return pack;\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n\n        }\n        return null;\n    }\n```\n# socket\nsocketjson\njsonjsonbase64javastring\nwavwavwav\"endbidou\"\n```Java\nprivate class MsgThread extends Thread {\n        @Override\n        public void run() {\n            File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/data/files/Melodia.wav\");\n            FileInputStream reader = null;\n            try {\n                reader = new FileInputStream(file);\n                int len = reader.available();\n                byte[] buff = new byte[len];\n                reader.read(buff);\n                String data = Base64.encodeToString(buff, Base64.DEFAULT);\n                String senda = makejson(1, \"a\", data).toString();\n                Log.i(TAG, \"request1: \" + senda);\n                OutputStream os = null;\n                InputStream is = null;\n                DataInputStream in = null;\n                try {\n                    os = soc.getOutputStream();\n                    BufferedReader bra = null;\n                    os.write(senda.getBytes());\n                    os.write(\"endbidou1\".getBytes());\n                    os.flush();\n                    Log.i(TAG, \"request1 send successful\");\n                    if (soc.isConnected()) {\n                        is = soc.getInputStream();\n                        bra = new BufferedReader(new InputStreamReader(is));\n                        md5 = bra.readLine();\n                        Log.i(TAG, \"md5: \" + md5);\n                        bra.close();\n                    } else\n                        Log.i(TAG, \"socket closed while reading\");\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                soc.close();\n                startflag = 1;\n\n                StartThread st = new StartThread();\n                st.start();\n\n                while (soc.isClosed()) ;\n\n                String sendb = makejson(2, md5, \"request2\").toString();\n                Log.i(TAG, \"request2: \" + sendb);\n                os = soc.getOutputStream();\n                os.write(sendb.getBytes());\n                os.write(\"endbidou1\".getBytes());\n                os.flush();\n                Log.i(TAG, \"request2 send successful\");\n\n                is = soc.getInputStream();\n                byte buffer[] = new byte[1024 * 100];\n                is.read(buffer);\n                Log.i(TAG, \"midifilecontent: \" + buffer.toString());\n                soc.close();\n                File filemid = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/data/files/Melodia.mid\");\n                FileOutputStream writer = null;\n                writer = new FileOutputStream(filemid);\n                writer.write(buffer);\n                writer.close();\n                Message msg = myhandler.obtainMessage();\n                msg.what = 1;\n                myhandler.sendMessage(msg);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n\n        }\n    }\n```\n\n# \nGithub[ShineButton](https://github.com/ChadCSong/ShineButton)\n\n```Java\n\tfabrecord.setOnTouchListener(new View.OnTouchListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic boolean onTouch(View v, MotionEvent event) {\n\t\t\t\t\tswitch (event.getAction()) {\n\t\t\t\t\t\tcase MotionEvent.ACTION_DOWN:\n\t\t\t\t\t\t\tuploadbt.setVisibility(View.INVISIBLE);\n\t\t\t\t\t\t\tif (isUploadingIcon) {\n\t\t\t\t\t\t\t\tisPressUpload = false;\n\t\t\t\t\t\t\t\tuploadbt.performClick();\n\t\t\t\t\t\t\t\tisPressUpload = true;\n\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tLog.i(TAG, \"ACTION_DOWN\");\n\t\t\t\t\t\t\tif (!shinebtstatus) {\n\t\t\t\t\t\t\t\tshinebt.performClick();\n\t\t\t\t\t\t\t\tshinebtstatus = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tox = event.getX();\n\t\t\t\t\t\t\toy = event.getY();\n\n\t\t\t\t\t\t\tisRecording = true;\n\t\t\t\t\t\t\trecLen = 0;\n\t\t\t\t\t\t\trecTime = 0;\n\t\t\t\t\t\t\tpb.setValue(0);\n\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);\n\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\n\t\t\t\t\t\t\trecorder = new RecordTask();\n\t\t\t\t\t\t\trecorder.execute();\n\t\t\t\t\t\t\thandler.postDelayed(runrecord, 0);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase MotionEvent.ACTION_UP:\n\t\t\t\t\t\t\thandler.removeCallbacks(runrecord);\n\t\t\t\t\t\t\tLog.i(TAG, \"ACTION_UP\");\n\t\t\t\t\t\t\tif (shinebtstatus) {\n\t\t\t\t\t\t\t\tshinebt.performClick();\n\t\t\t\t\t\t\t\tshinebtstatus = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfloat x1 = event.getX();\n\t\t\t\t\t\t\tfloat y1 = event.getY();\n\t\t\t\t\t\t\tfloat dis1 = (x1 - ox) * (x1 - ox) + (y1 - oy) * (y1 - oy);\n\n\t\t\t\t\t\t\tisRecording = false;\n\t\t\t\t\t\t\tpb.setValue(0);\n\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_fiber_manual_record_white_24dp);\n\t\t\t\t\t\t\tif (dis1 > 30000) {\n\t\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!isUploadingIcon) {\n\t\t\t\t\t\t\t\t\tuploadbt.setVisibility(View.VISIBLE);\n\t\t\t\t\t\t\t\t\tisPressUpload = false;\n\t\t\t\t\t\t\t\t\tuploadbt.performClick();\n\t\t\t\t\t\t\t\t\tisPressUpload = true;\n\t\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\t\t\thandler.postDelayed(runreplay, 0);\n\t\t\t\t\t\t\t\treplay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase MotionEvent.ACTION_MOVE:\n\t\t\t\t\t\t\tfloat x2 = event.getX();\n\t\t\t\t\t\t\tfloat y2 = event.getY();\n\t\t\t\t\t\t\tfloat dis2 = (x2 - ox) * (x2 - ox) + (y2 - oy) * (y2 - oy);\n\t\t\t\t\t\t\tif (dis2 > 30000) {\n\t\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_cancel_white_24dp);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n```\n# \n-\tsocketApachemd5\n```Java\n    public void init() {\n        md5 = getArguments().getString(\"md5\");\n        final String imageUri = \"\" + md5 + \"_1.png\";\n        Log.i(\"play\", \"pngfile: \" + imageUri);\n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                imageLoader.displayImage(imageUri, showpic);\n            }\n        }, 2000);\n\n    }\n```\n\n# \n-\tsocketarduinoarduino\n```Java\n\tpianobt.setOnClickListener(new View.OnClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic void onClick(View v) {\n\t\t\t\t\tif (!isconnected) {\n\t\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();\n\t\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());\n\t\t\t\t\t\tparam[0] = 0x30;\n\t\t\t\t\t\tStartThread st = new StartThread();\n\t\t\t\t\t\tst.start();\n\t\t\t\t\t\twhile (!isconnected) ;\n\t\t\t\t\t\tMsgThread ms = new MsgThread();\n\t\t\t\t\t\tms.start();\n\t\t\t\t\t\tYoYo.with(Techniques.Wobble)\n\t\t\t\t\t\t\t\t.duration(300)\n\t\t\t\t\t\t\t\t.repeat(6)\n\t\t\t\t\t\t\t\t.playOn(seekBaroctave);\n\t\t\t\t\t\twhile (soc.isConnected()) ;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisconnected = false;\n\t\t\t\t\t\tLog.i(\"piano\", \"socket closed\");\n\t\t\t\t\t}\n\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsamplebt.setOnClickListener(new View.OnClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic void onClick(View v) {\n\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();\n\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());\n\t\t\t\t\tparam[0] = 0x31;\n\t\t\t\t\tStartThread st = new StartThread();\n\t\t\t\t\tst.start();\n\t\t\t\t\twhile (!isconnected) ;\n\t\t\t\t\tMsgThread ms = new MsgThread();\n\t\t\t\t\tms.start();\n\t\t\t\t\tYoYo.with(Techniques.Wobble)\n\t\t\t\t\t\t\t.duration(300)\n\t\t\t\t\t\t\t.repeat(6)\n\t\t\t\t\t\t\t.playOn(seekBaroctave);\n\t\t\t\t\twhile (soc.isConnected()) ;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\tisconnected = false;\n\t\t\t\t\tLog.i(\"piano\", \"socket closed\");\n\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t}\n\n\t\tprivate class StartThread extends Thread {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\ttry {\n\t\t\t\t\tsoc = new Socket(pianoaddr, pianoport);\n\t\t\t\t\tif (soc.isConnected()) {//soc\n\t\t\t\t\t\tLog.i(\"piano\", \"piano is Connected\");\n\t\t\t\t\t\tif (!isconnected)\n\t\t\t\t\t\t\tisconnected = !isconnected;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\tLog.i(\"piano\", \"Connect Failed\");\n\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t}\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\tLog.i(\"piano\", \"Connect Failed\");\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate class MsgThread extends Thread {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\ttry {\n\t\t\t\t\tOutputStream os = soc.getOutputStream();\n\t\t\t\t\tos.write(param);\n\t\t\t\t\tos.flush();\n\t\t\t\t\tLog.i(\"piano\", \"piano msg send successful\");\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\n\t\t\t\t\tsoc.close();\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tLog.i(\"piano\", \"piano msg send successful failed\");\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n```\n\n# \n-\tGithubImageView:[PinchImageView](https://github.com/boycy815/PinchImageView)\n-\tintent\n```Java\n\tshowpic.setOnLongClickListener(new View.OnLongClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic boolean onLongClick(View v) {\n\t\t\t\t\tBitmap drawingCache = getViewBitmap(showpic);\n\t\t\t\t\tif (drawingCache == null) {\n\t\t\t\t\t\tLog.i(\"play\", \"no img to save\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tFile imageFile = new File(Environment.getExternalStorageDirectory(), \"saveImageview.jpg\");\n\t\t\t\t\t\t\tToast toast = Toast.makeText(getActivity(),\n\t\t\t\t\t\t\t\t\t\"\", Toast.LENGTH_LONG);\n\t\t\t\t\t\t\ttoast.setGravity(Gravity.TOP, 0, 200);\n\t\t\t\t\t\t\ttoast.setText(\"\");\n\t\t\t\t\t\t\ttoast.show();\n\t\t\t\t\t\t\tFileOutputStream outStream;\n\t\t\t\t\t\t\toutStream = new FileOutputStream(imageFile);\n\t\t\t\t\t\t\tdrawingCache.compress(Bitmap.CompressFormat.JPEG, 100, outStream);\n\t\t\t\t\t\t\toutStream.flush();\n\t\t\t\t\t\t\toutStream.close();\n\n\t\t\t\t\t\t\tIntent sendIntent = new Intent();\n\t\t\t\t\t\t\tsendIntent.setAction(Intent.ACTION_SEND);\n\t\t\t\t\t\t\tsendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(imageFile));\n\t\t\t\t\t\t\tsendIntent.setType(\"image/png\");\n\t\t\t\t\t\t\tgetActivity().startActivity(Intent.createChooser(sendIntent, \"\"));\n\n\t\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\t\tLog.i(\"play\", \"share img wrong\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n```","source":"_posts/dachuang.md","raw":"---\ntitle: Android:Melodia\ndate: 2017-03-09 17:19:53\ntags: [code,android]\ncategories: Android\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/20170309/172109957.gif\n---\n***\napp\nwavjsonwavmidimidiarduino\n[qiao](https://github.com/qiao)midi[euphony](https://github.com/qiao/euphony)\n\n<!--more-->\n\n# midi\nMediaPlayerandroid5.1midi\n-\tMediaPlayerassert,rawuri\n-\trawplayer = MediaPlayer.create(this, R.raw.test1)\n-\tUrinew->setDataSource->prepare->start\n\n# \n[androidAudioRecord](http://blog.csdn.net/jiangliloveyou/article/details/11218555)\n```Java\n\tprivate class RecordTask extends AsyncTask<Void, Integer, Void> {\n\t\t@Override\n\t\tprotected Void doInBackground(Void... arg0) {\n\t\t\tisRecording = true;\n\t\t\ttry {\n\t\t\t\t//\n\t\t\t\tDataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(pcmFile)));\n\t\t\t\t//\n\t\t\t\tint bufferSize = AudioRecord.getMinBufferSize(audioRate, channelConfig, audioEncoding);\n\t\t\t\t//AudioRecord\n\t\t\t\tAudioRecord record = new AudioRecord(MediaRecorder.AudioSource.MIC, audioRate, channelConfig, audioEncoding, bufferSize);\n\t\t\t\t//\n\t\t\t\tshort[] buffer = new short[bufferSize];\n\n\t\t\t\t//\n\t\t\t\trecord.startRecording();\n\n\t\t\t\tint r = 0; //\n\t\t\t\t//isRecording\n\t\t\t\twhile (isRecording) {\n\t\t\t\t\t//bufferSizeshort\n\t\t\t\t\t//buffer overflowTODO\n\t\t\t\t\tint bufferReadResult = record.read(buffer, 0, buffer.length);\n\t\t\t\t\t//bufferOutputStream\n\t\t\t\t\tfor (int i = 0; i < bufferReadResult; i++) {\n\t\t\t\t\t\tdos.writeShort(buffer[i]);\n\t\t\t\t\t}\n\t\t\t\t\tpublishProgress(new Integer(r)); //UI\n\t\t\t\t\tr++; //\n\t\t\t\t}\n\t\t\t\t//\n\t\t\t\trecord.stop();\n\t\t\t\tconvertWaveFile();\n\t\t\t\tdos.close();\n\t\t\t} catch (Exception e) {\n\t\t\t\t// TODO: handle exception\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n```\n\n# pcmwav\npcmwav\n```Java\n\tprivate void WriteWaveFileHeader(FileOutputStream out, long totalAudioLen, long totalDataLen, long longSampleRate,\n\t\t\t\t\t\t\t\t\t int channels, long byteRate) throws IOException {\n\t\tbyte[] header = new byte[45];\n\t\theader[0] = 'R'; // RIFF\n\t\theader[1] = 'I';\n\t\theader[2] = 'F';\n\t\theader[3] = 'F';\n\t\theader[4] = (byte) (totalDataLen & 0xff);//\n\t\theader[5] = (byte) ((totalDataLen >> 8) & 0xff);\n\t\theader[6] = (byte) ((totalDataLen >> 16) & 0xff);\n\t\theader[7] = (byte) ((totalDataLen >> 24) & 0xff);\n\t\theader[8] = 'W';//WAVE\n\t\theader[9] = 'A';\n\t\theader[10] = 'V';\n\t\theader[11] = 'E';\n\t\t//FMT Chunk\n\t\theader[12] = 'f'; // 'fmt '\n\t\theader[13] = 'm';\n\t\theader[14] = 't';\n\t\theader[15] = ' ';//\n\t\t//\n\t\theader[16] = 16; // 4 bytes: size of 'fmt ' chunk\n\t\theader[17] = 0;\n\t\theader[18] = 0;\n\t\theader[19] = 0;\n\t\t// 10HPCM\n\t\theader[20] = 1; // format = 1\n\t\theader[21] = 0;\n\t\t//\n\t\theader[22] = (byte) channels;\n\t\theader[23] = 0;\n\t\t//\n\t\theader[24] = (byte) (longSampleRate & 0xff);\n\t\theader[25] = (byte) ((longSampleRate >> 8) & 0xff);\n\t\theader[26] = (byte) ((longSampleRate >> 16) & 0xff);\n\t\theader[27] = (byte) ((longSampleRate >> 24) & 0xff);\n\t\t//,**/8\n\t\theader[28] = (byte) (byteRate & 0xff);\n\t\theader[29] = (byte) ((byteRate >> 8) & 0xff);\n\t\theader[30] = (byte) ((byteRate >> 16) & 0xff);\n\t\theader[31] = (byte) ((byteRate >> 24) & 0xff);\n\t\t// *\n\t\theader[32] = (byte) (1 * 16 / 8);\n\t\theader[33] = 0;\n\t\t//\n\t\theader[34] = 16;\n\t\theader[35] = 0;\n\t\t//Data chunk\n\t\theader[36] = 'd';//data\n\t\theader[37] = 'a';\n\t\theader[38] = 't';\n\t\theader[39] = 'a';\n\t\theader[40] = (byte) (totalAudioLen & 0xff);\n\t\theader[41] = (byte) ((totalAudioLen >> 8) & 0xff);\n\t\theader[42] = (byte) ((totalAudioLen >> 16) & 0xff);\n\t\theader[43] = (byte) ((totalAudioLen >> 24) & 0xff);\n\t\theader[44] = 0;\n\t\tout.write(header, 0, 45);\n\t}\n```\n\n# json\njsonwavwavwavjson\njsonmd5jsonmidi\n```Java\n    private JSONObject makejson(int request, String identifycode, String data) {\n        if (identifycode == \"a\") {\n            try {\n                JSONObject pack = new JSONObject();\n                pack.put(\"request\", request);\n                JSONObject config = new JSONObject();\n                config.put(\"n\", lowf);\n                config.put(\"m\", highf);\n                config.put(\"w\", interval);\n                pack.put(\"config\", config);\n                pack.put(\"data\", data);\n                return pack;\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n        } else {\n            try {\n                JSONObject pack = new JSONObject();\n                pack.put(\"request\", request);\n                pack.put(\"config\", \"\");\n                pack.put(\"data\", identifycode);\n                return pack;\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n\n        }\n        return null;\n    }\n```\n# socket\nsocketjson\njsonjsonbase64javastring\nwavwavwav\"endbidou\"\n```Java\nprivate class MsgThread extends Thread {\n        @Override\n        public void run() {\n            File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/data/files/Melodia.wav\");\n            FileInputStream reader = null;\n            try {\n                reader = new FileInputStream(file);\n                int len = reader.available();\n                byte[] buff = new byte[len];\n                reader.read(buff);\n                String data = Base64.encodeToString(buff, Base64.DEFAULT);\n                String senda = makejson(1, \"a\", data).toString();\n                Log.i(TAG, \"request1: \" + senda);\n                OutputStream os = null;\n                InputStream is = null;\n                DataInputStream in = null;\n                try {\n                    os = soc.getOutputStream();\n                    BufferedReader bra = null;\n                    os.write(senda.getBytes());\n                    os.write(\"endbidou1\".getBytes());\n                    os.flush();\n                    Log.i(TAG, \"request1 send successful\");\n                    if (soc.isConnected()) {\n                        is = soc.getInputStream();\n                        bra = new BufferedReader(new InputStreamReader(is));\n                        md5 = bra.readLine();\n                        Log.i(TAG, \"md5: \" + md5);\n                        bra.close();\n                    } else\n                        Log.i(TAG, \"socket closed while reading\");\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                soc.close();\n                startflag = 1;\n\n                StartThread st = new StartThread();\n                st.start();\n\n                while (soc.isClosed()) ;\n\n                String sendb = makejson(2, md5, \"request2\").toString();\n                Log.i(TAG, \"request2: \" + sendb);\n                os = soc.getOutputStream();\n                os.write(sendb.getBytes());\n                os.write(\"endbidou1\".getBytes());\n                os.flush();\n                Log.i(TAG, \"request2 send successful\");\n\n                is = soc.getInputStream();\n                byte buffer[] = new byte[1024 * 100];\n                is.read(buffer);\n                Log.i(TAG, \"midifilecontent: \" + buffer.toString());\n                soc.close();\n                File filemid = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/data/files/Melodia.mid\");\n                FileOutputStream writer = null;\n                writer = new FileOutputStream(filemid);\n                writer.write(buffer);\n                writer.close();\n                Message msg = myhandler.obtainMessage();\n                msg.what = 1;\n                myhandler.sendMessage(msg);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n\n        }\n    }\n```\n\n# \nGithub[ShineButton](https://github.com/ChadCSong/ShineButton)\n\n```Java\n\tfabrecord.setOnTouchListener(new View.OnTouchListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic boolean onTouch(View v, MotionEvent event) {\n\t\t\t\t\tswitch (event.getAction()) {\n\t\t\t\t\t\tcase MotionEvent.ACTION_DOWN:\n\t\t\t\t\t\t\tuploadbt.setVisibility(View.INVISIBLE);\n\t\t\t\t\t\t\tif (isUploadingIcon) {\n\t\t\t\t\t\t\t\tisPressUpload = false;\n\t\t\t\t\t\t\t\tuploadbt.performClick();\n\t\t\t\t\t\t\t\tisPressUpload = true;\n\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tLog.i(TAG, \"ACTION_DOWN\");\n\t\t\t\t\t\t\tif (!shinebtstatus) {\n\t\t\t\t\t\t\t\tshinebt.performClick();\n\t\t\t\t\t\t\t\tshinebtstatus = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tox = event.getX();\n\t\t\t\t\t\t\toy = event.getY();\n\n\t\t\t\t\t\t\tisRecording = true;\n\t\t\t\t\t\t\trecLen = 0;\n\t\t\t\t\t\t\trecTime = 0;\n\t\t\t\t\t\t\tpb.setValue(0);\n\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);\n\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\n\t\t\t\t\t\t\trecorder = new RecordTask();\n\t\t\t\t\t\t\trecorder.execute();\n\t\t\t\t\t\t\thandler.postDelayed(runrecord, 0);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase MotionEvent.ACTION_UP:\n\t\t\t\t\t\t\thandler.removeCallbacks(runrecord);\n\t\t\t\t\t\t\tLog.i(TAG, \"ACTION_UP\");\n\t\t\t\t\t\t\tif (shinebtstatus) {\n\t\t\t\t\t\t\t\tshinebt.performClick();\n\t\t\t\t\t\t\t\tshinebtstatus = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfloat x1 = event.getX();\n\t\t\t\t\t\t\tfloat y1 = event.getY();\n\t\t\t\t\t\t\tfloat dis1 = (x1 - ox) * (x1 - ox) + (y1 - oy) * (y1 - oy);\n\n\t\t\t\t\t\t\tisRecording = false;\n\t\t\t\t\t\t\tpb.setValue(0);\n\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_fiber_manual_record_white_24dp);\n\t\t\t\t\t\t\tif (dis1 > 30000) {\n\t\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (!isUploadingIcon) {\n\t\t\t\t\t\t\t\t\tuploadbt.setVisibility(View.VISIBLE);\n\t\t\t\t\t\t\t\t\tisPressUpload = false;\n\t\t\t\t\t\t\t\t\tuploadbt.performClick();\n\t\t\t\t\t\t\t\t\tisPressUpload = true;\n\t\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tSnackbar.make(fabrecord, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\t\t\thandler.postDelayed(runreplay, 0);\n\t\t\t\t\t\t\t\treplay();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase MotionEvent.ACTION_MOVE:\n\t\t\t\t\t\t\tfloat x2 = event.getX();\n\t\t\t\t\t\t\tfloat y2 = event.getY();\n\t\t\t\t\t\t\tfloat dis2 = (x2 - ox) * (x2 - ox) + (y2 - oy) * (y2 - oy);\n\t\t\t\t\t\t\tif (dis2 > 30000) {\n\t\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_cancel_white_24dp);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n```\n# \n-\tsocketApachemd5\n```Java\n    public void init() {\n        md5 = getArguments().getString(\"md5\");\n        final String imageUri = \"\" + md5 + \"_1.png\";\n        Log.i(\"play\", \"pngfile: \" + imageUri);\n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                imageLoader.displayImage(imageUri, showpic);\n            }\n        }, 2000);\n\n    }\n```\n\n# \n-\tsocketarduinoarduino\n```Java\n\tpianobt.setOnClickListener(new View.OnClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic void onClick(View v) {\n\t\t\t\t\tif (!isconnected) {\n\t\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();\n\t\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());\n\t\t\t\t\t\tparam[0] = 0x30;\n\t\t\t\t\t\tStartThread st = new StartThread();\n\t\t\t\t\t\tst.start();\n\t\t\t\t\t\twhile (!isconnected) ;\n\t\t\t\t\t\tMsgThread ms = new MsgThread();\n\t\t\t\t\t\tms.start();\n\t\t\t\t\t\tYoYo.with(Techniques.Wobble)\n\t\t\t\t\t\t\t\t.duration(300)\n\t\t\t\t\t\t\t\t.repeat(6)\n\t\t\t\t\t\t\t\t.playOn(seekBaroctave);\n\t\t\t\t\t\twhile (soc.isConnected()) ;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisconnected = false;\n\t\t\t\t\t\tLog.i(\"piano\", \"socket closed\");\n\t\t\t\t\t}\n\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsamplebt.setOnClickListener(new View.OnClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic void onClick(View v) {\n\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();\n\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());\n\t\t\t\t\tparam[0] = 0x31;\n\t\t\t\t\tStartThread st = new StartThread();\n\t\t\t\t\tst.start();\n\t\t\t\t\twhile (!isconnected) ;\n\t\t\t\t\tMsgThread ms = new MsgThread();\n\t\t\t\t\tms.start();\n\t\t\t\t\tYoYo.with(Techniques.Wobble)\n\t\t\t\t\t\t\t.duration(300)\n\t\t\t\t\t\t\t.repeat(6)\n\t\t\t\t\t\t\t.playOn(seekBaroctave);\n\t\t\t\t\twhile (soc.isConnected()) ;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\tisconnected = false;\n\t\t\t\t\tLog.i(\"piano\", \"socket closed\");\n\n\t\t\t\t}\n\t\t\t});\n\n\n\t\t}\n\n\t\tprivate class StartThread extends Thread {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\ttry {\n\t\t\t\t\tsoc = new Socket(pianoaddr, pianoport);\n\t\t\t\t\tif (soc.isConnected()) {//soc\n\t\t\t\t\t\tLog.i(\"piano\", \"piano is Connected\");\n\t\t\t\t\t\tif (!isconnected)\n\t\t\t\t\t\t\tisconnected = !isconnected;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\t\tLog.i(\"piano\", \"Connect Failed\");\n\t\t\t\t\t\tsoc.close();\n\t\t\t\t\t}\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\tLog.i(\"piano\", \"Connect Failed\");\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate class MsgThread extends Thread {\n\t\t\t@Override\n\t\t\tpublic void run() {\n\t\t\t\ttry {\n\t\t\t\t\tOutputStream os = soc.getOutputStream();\n\t\t\t\t\tos.write(param);\n\t\t\t\t\tos.flush();\n\t\t\t\t\tLog.i(\"piano\", \"piano msg send successful\");\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\n\t\t\t\t\tsoc.close();\n\t\t\t\t} catch (IOException e) {\n\t\t\t\t\tLog.i(\"piano\", \"piano msg send successful failed\");\n\t\t\t\t\tSnackbar.make(pianobt, \"\", Snackbar.LENGTH_SHORT)\n\t\t\t\t\t\t\t.setAction(\"Action\", null).show();\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n```\n\n# \n-\tGithubImageView:[PinchImageView](https://github.com/boycy815/PinchImageView)\n-\tintent\n```Java\n\tshowpic.setOnLongClickListener(new View.OnLongClickListener() {\n\t\t\t\t@Override\n\t\t\t\tpublic boolean onLongClick(View v) {\n\t\t\t\t\tBitmap drawingCache = getViewBitmap(showpic);\n\t\t\t\t\tif (drawingCache == null) {\n\t\t\t\t\t\tLog.i(\"play\", \"no img to save\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tFile imageFile = new File(Environment.getExternalStorageDirectory(), \"saveImageview.jpg\");\n\t\t\t\t\t\t\tToast toast = Toast.makeText(getActivity(),\n\t\t\t\t\t\t\t\t\t\"\", Toast.LENGTH_LONG);\n\t\t\t\t\t\t\ttoast.setGravity(Gravity.TOP, 0, 200);\n\t\t\t\t\t\t\ttoast.setText(\"\");\n\t\t\t\t\t\t\ttoast.show();\n\t\t\t\t\t\t\tFileOutputStream outStream;\n\t\t\t\t\t\t\toutStream = new FileOutputStream(imageFile);\n\t\t\t\t\t\t\tdrawingCache.compress(Bitmap.CompressFormat.JPEG, 100, outStream);\n\t\t\t\t\t\t\toutStream.flush();\n\t\t\t\t\t\t\toutStream.close();\n\n\t\t\t\t\t\t\tIntent sendIntent = new Intent();\n\t\t\t\t\t\t\tsendIntent.setAction(Intent.ACTION_SEND);\n\t\t\t\t\t\t\tsendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(imageFile));\n\t\t\t\t\t\t\tsendIntent.setType(\"image/png\");\n\t\t\t\t\t\t\tgetActivity().startActivity(Intent.createChooser(sendIntent, \"\"));\n\n\t\t\t\t\t\t} catch (IOException e) {\n\t\t\t\t\t\t\tLog.i(\"play\", \"share img wrong\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n```","slug":"dachuang","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","link":"","_id":"cjmd072cv0011qcw6rzw7215r","content":"<hr><p>app<br>wavjsonwavmidimidiarduino<br><a href=\"https://github.com/qiao\" target=\"_blank\" rel=\"noopener\">qiao</a>midi<a href=\"https://github.com/qiao/euphony\" target=\"_blank\" rel=\"noopener\">euphony</a></p><a id=\"more\"></a><h1 id=\"midi\"><a href=\"#midi\" class=\"headerlink\" title=\"midi\"></a>midi</h1><p>MediaPlayerandroid5.1midi</p><ul><li>MediaPlayerassert,rawuri</li><li>rawplayer = MediaPlayer.create(this, R.raw.test1)</li><li>Urinew-&gt;setDataSource-&gt;prepare-&gt;start</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"http://blog.csdn.net/jiangliloveyou/article/details/11218555\" target=\"_blank\" rel=\"noopener\">androidAudioRecord</a><br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecordTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTask</span>&lt;<span class=\"title\">Void</span>, <span class=\"title\">Integer</span>, <span class=\"title\">Void</span>&gt; </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Void <span class=\"title\">doInBackground</span><span class=\"params\">(Void... arg0)</span> </span>&#123;</span><br><span class=\"line\">\t\tisRecording = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\tDataOutputStream dos = <span class=\"keyword\">new</span> DataOutputStream(<span class=\"keyword\">new</span> BufferedOutputStream(<span class=\"keyword\">new</span> FileOutputStream(pcmFile)));</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> bufferSize = AudioRecord.getMinBufferSize(audioRate, channelConfig, audioEncoding);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//AudioRecord</span></span><br><span class=\"line\">\t\t\tAudioRecord record = <span class=\"keyword\">new</span> AudioRecord(MediaRecorder.AudioSource.MIC, audioRate, channelConfig, audioEncoding, bufferSize);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">short</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">short</span>[bufferSize];</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\trecord.startRecording();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> r = <span class=\"number\">0</span>; <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//isRecording</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (isRecording) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//bufferSizeshort</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//buffer overflowTODO</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> bufferReadResult = record.read(buffer, <span class=\"number\">0</span>, buffer.length);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//bufferOutputStream</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; bufferReadResult; i++) &#123;</span><br><span class=\"line\">\t\t\t\t\tdos.writeShort(buffer[i]);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tpublishProgress(<span class=\"keyword\">new</span> Integer(r)); <span class=\"comment\">//UI</span></span><br><span class=\"line\">\t\t\t\tr++; <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\trecord.stop();</span><br><span class=\"line\">\t\t\tconvertWaveFile();</span><br><span class=\"line\">\t\t\tdos.close();</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// <span class=\"doctag\">TODO:</span> handle exception</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"pcmwav\"><a href=\"#pcmwav\" class=\"headerlink\" title=\"pcmwav\"></a>pcmwav</h1><p>pcmwav<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">WriteWaveFileHeader</span><span class=\"params\">(FileOutputStream out, <span class=\"keyword\">long</span> totalAudioLen, <span class=\"keyword\">long</span> totalDataLen, <span class=\"keyword\">long</span> longSampleRate,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\t\t\t\t\t\t\t <span class=\"keyword\">int</span> channels, <span class=\"keyword\">long</span> byteRate)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">byte</span>[] header = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">45</span>];</span><br><span class=\"line\">\theader[<span class=\"number\">0</span>] = <span class=\"string\">'R'</span>; <span class=\"comment\">// RIFF</span></span><br><span class=\"line\">\theader[<span class=\"number\">1</span>] = <span class=\"string\">'I'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">2</span>] = <span class=\"string\">'F'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">3</span>] = <span class=\"string\">'F'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">4</span>] = (<span class=\"keyword\">byte</span>) (totalDataLen &amp; <span class=\"number\">0xff</span>);<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">5</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">6</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">7</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">8</span>] = <span class=\"string\">'W'</span>;<span class=\"comment\">//WAVE</span></span><br><span class=\"line\">\theader[<span class=\"number\">9</span>] = <span class=\"string\">'A'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">10</span>] = <span class=\"string\">'V'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">11</span>] = <span class=\"string\">'E'</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//FMT Chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">12</span>] = <span class=\"string\">'f'</span>; <span class=\"comment\">// 'fmt '</span></span><br><span class=\"line\">\theader[<span class=\"number\">13</span>] = <span class=\"string\">'m'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">14</span>] = <span class=\"string\">'t'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">15</span>] = <span class=\"string\">' '</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">16</span>] = <span class=\"number\">16</span>; <span class=\"comment\">// 4 bytes: size of 'fmt ' chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">17</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">18</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">19</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// 10HPCM</span></span><br><span class=\"line\">\theader[<span class=\"number\">20</span>] = <span class=\"number\">1</span>; <span class=\"comment\">// format = 1</span></span><br><span class=\"line\">\theader[<span class=\"number\">21</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">22</span>] = (<span class=\"keyword\">byte</span>) channels;</span><br><span class=\"line\">\theader[<span class=\"number\">23</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">24</span>] = (<span class=\"keyword\">byte</span>) (longSampleRate &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">25</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">26</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">27</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//,**/8</span></span><br><span class=\"line\">\theader[<span class=\"number\">28</span>] = (<span class=\"keyword\">byte</span>) (byteRate &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">29</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">30</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">31</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// *</span></span><br><span class=\"line\">\theader[<span class=\"number\">32</span>] = (<span class=\"keyword\">byte</span>) (<span class=\"number\">1</span> * <span class=\"number\">16</span> / <span class=\"number\">8</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">33</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">34</span>] = <span class=\"number\">16</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">35</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//Data chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">36</span>] = <span class=\"string\">'d'</span>;<span class=\"comment\">//data</span></span><br><span class=\"line\">\theader[<span class=\"number\">37</span>] = <span class=\"string\">'a'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">38</span>] = <span class=\"string\">'t'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">39</span>] = <span class=\"string\">'a'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">40</span>] = (<span class=\"keyword\">byte</span>) (totalAudioLen &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">41</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">42</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">43</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">44</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tout.write(header, <span class=\"number\">0</span>, <span class=\"number\">45</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h1><p>jsonwavwavwavjson<br>jsonmd5jsonmidi<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> JSONObject <span class=\"title\">makejson</span><span class=\"params\">(<span class=\"keyword\">int</span> request, String identifycode, String data)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (identifycode == <span class=\"string\">\"a\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            JSONObject pack = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"request\"</span>, request);</span><br><span class=\"line\">            JSONObject config = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            config.put(<span class=\"string\">\"n\"</span>, lowf);</span><br><span class=\"line\">            config.put(<span class=\"string\">\"m\"</span>, highf);</span><br><span class=\"line\">            config.put(<span class=\"string\">\"w\"</span>, interval);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"config\"</span>, config);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"data\"</span>, data);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> pack;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            JSONObject pack = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"request\"</span>, request);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"config\"</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"data\"</span>, identifycode);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> pack;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"socket\"><a href=\"#socket\" class=\"headerlink\" title=\"socket\"></a>socket</h1><p>socketjson<br>jsonjsonbase64javastring<br>wavwavwavendbidou<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MsgThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            File file = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory().getAbsolutePath() + <span class=\"string\">\"/data/files/Melodia.wav\"</span>);</span><br><span class=\"line\">            FileInputStream reader = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                reader = <span class=\"keyword\">new</span> FileInputStream(file);</span><br><span class=\"line\">                <span class=\"keyword\">int</span> len = reader.available();</span><br><span class=\"line\">                <span class=\"keyword\">byte</span>[] buff = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[len];</span><br><span class=\"line\">                reader.read(buff);</span><br><span class=\"line\">                String data = Base64.encodeToString(buff, Base64.DEFAULT);</span><br><span class=\"line\">                String senda = makejson(<span class=\"number\">1</span>, <span class=\"string\">\"a\"</span>, data).toString();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request1: \"</span> + senda);</span><br><span class=\"line\">                OutputStream os = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                InputStream is = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                DataInputStream in = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    os = soc.getOutputStream();</span><br><span class=\"line\">                    BufferedReader bra = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    os.write(senda.getBytes());</span><br><span class=\"line\">                    os.write(<span class=\"string\">\"endbidou1\"</span>.getBytes());</span><br><span class=\"line\">                    os.flush();</span><br><span class=\"line\">                    Log.i(TAG, <span class=\"string\">\"request1 send successful\"</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (soc.isConnected()) &#123;</span><br><span class=\"line\">                        is = soc.getInputStream();</span><br><span class=\"line\">                        bra = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(is));</span><br><span class=\"line\">                        md5 = bra.readLine();</span><br><span class=\"line\">                        Log.i(TAG, <span class=\"string\">\"md5: \"</span> + md5);</span><br><span class=\"line\">                        bra.close();</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span></span><br><span class=\"line\">                        Log.i(TAG, <span class=\"string\">\"socket closed while reading\"</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                soc.close();</span><br><span class=\"line\">                startflag = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                StartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">                st.start();</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">while</span> (soc.isClosed()) ;</span><br><span class=\"line\"></span><br><span class=\"line\">                String sendb = makejson(<span class=\"number\">2</span>, md5, <span class=\"string\">\"request2\"</span>).toString();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request2: \"</span> + sendb);</span><br><span class=\"line\">                os = soc.getOutputStream();</span><br><span class=\"line\">                os.write(sendb.getBytes());</span><br><span class=\"line\">                os.write(<span class=\"string\">\"endbidou1\"</span>.getBytes());</span><br><span class=\"line\">                os.flush();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request2 send successful\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                is = soc.getInputStream();</span><br><span class=\"line\">                <span class=\"keyword\">byte</span> buffer[] = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];</span><br><span class=\"line\">                is.read(buffer);</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"midifilecontent: \"</span> + buffer.toString());</span><br><span class=\"line\">                soc.close();</span><br><span class=\"line\">                File filemid = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory().getAbsolutePath() + <span class=\"string\">\"/data/files/Melodia.mid\"</span>);</span><br><span class=\"line\">                FileOutputStream writer = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                writer = <span class=\"keyword\">new</span> FileOutputStream(filemid);</span><br><span class=\"line\">                writer.write(buffer);</span><br><span class=\"line\">                writer.close();</span><br><span class=\"line\">                Message msg = myhandler.obtainMessage();</span><br><span class=\"line\">                msg.what = <span class=\"number\">1</span>;</span><br><span class=\"line\">                myhandler.sendMessage(msg);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Github<a href=\"https://github.com/ChadCSong/ShineButton\" target=\"_blank\" rel=\"noopener\">ShineButton</a><br><br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fabrecord.setOnTouchListener(<span class=\"keyword\">new</span> View.OnTouchListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouch</span><span class=\"params\">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">switch</span> (event.getAction()) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</span><br><span class=\"line\">\t\t\t\t\t\tuploadbt.setVisibility(View.INVISIBLE);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (isUploadingIcon) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\tuploadbt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tLog.i(TAG, <span class=\"string\">\"ACTION_DOWN\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (!shinebtstatus) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebtstatus = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\tox = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\toy = event.getY();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tisRecording = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\trecLen = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\trecTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\tpb.setValue(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\trecorder = <span class=\"keyword\">new</span> RecordTask();</span><br><span class=\"line\">\t\t\t\t\t\trecorder.execute();</span><br><span class=\"line\">\t\t\t\t\t\thandler.postDelayed(runrecord, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</span><br><span class=\"line\">\t\t\t\t\t\thandler.removeCallbacks(runrecord);</span><br><span class=\"line\">\t\t\t\t\t\tLog.i(TAG, <span class=\"string\">\"ACTION_UP\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (shinebtstatus) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebtstatus = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> x1 = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> y1 = event.getY();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> dis1 = (x1 - ox) * (x1 - ox) + (y1 - oy) * (y1 - oy);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tisRecording = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\tpb.setValue(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_fiber_manual_record_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (dis1 &gt; <span class=\"number\">30000</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">if</span> (!isUploadingIcon) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tuploadbt.setVisibility(View.VISIBLE);</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tuploadbt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\t\t\thandler.postDelayed(runreplay, <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\t\treplay();</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE:</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> x2 = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> y2 = event.getY();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> dis2 = (x2 - ox) * (x2 - ox) + (y2 - oy) * (y2 - oy);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (dis2 &gt; <span class=\"number\">30000</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_cancel_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br></pre></td></tr></table></figure><p></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>socketApachemd5<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    md5 = getArguments().getString(<span class=\"string\">\"md5\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">final</span> String imageUri = <span class=\"string\">\"\"</span> + md5 + <span class=\"string\">\"_1.png\"</span>;</span><br><span class=\"line\">    Log.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"pngfile: \"</span> + imageUri);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            imageLoader.displayImage(imageUri, showpic);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>socketarduinoarduino<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pianobt.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (!isconnected) &#123;</span><br><span class=\"line\">\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();</span><br><span class=\"line\">\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());</span><br><span class=\"line\">\t\t\t\t\tparam[<span class=\"number\">0</span>] = <span class=\"number\">0x30</span>;</span><br><span class=\"line\">\t\t\t\t\tStartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">\t\t\t\t\tst.start();</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> (!isconnected) ;</span><br><span class=\"line\">\t\t\t\t\tMsgThread ms = <span class=\"keyword\">new</span> MsgThread();</span><br><span class=\"line\">\t\t\t\t\tms.start();</span><br><span class=\"line\">\t\t\t\t\tYoYo.with(Techniques.Wobble)</span><br><span class=\"line\">\t\t\t\t\t\t\t.duration(<span class=\"number\">300</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t.repeat(<span class=\"number\">6</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t.playOn(seekBaroctave);</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> (soc.isConnected()) ;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\tisconnected = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"socket closed\"</span>);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tsamplebt.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\tpianoaddr = etpianoaddr.getText().toString();</span><br><span class=\"line\">\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());</span><br><span class=\"line\">\t\t\t\tparam[<span class=\"number\">0</span>] = <span class=\"number\">0x31</span>;</span><br><span class=\"line\">\t\t\t\tStartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">\t\t\t\tst.start();</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (!isconnected) ;</span><br><span class=\"line\">\t\t\t\tMsgThread ms = <span class=\"keyword\">new</span> MsgThread();</span><br><span class=\"line\">\t\t\t\tms.start();</span><br><span class=\"line\">\t\t\t\tYoYo.with(Techniques.Wobble)</span><br><span class=\"line\">\t\t\t\t\t\t.duration(<span class=\"number\">300</span>)</span><br><span class=\"line\">\t\t\t\t\t\t.repeat(<span class=\"number\">6</span>)</span><br><span class=\"line\">\t\t\t\t\t\t.playOn(seekBaroctave);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (soc.isConnected()) ;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tisconnected = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"socket closed\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StartThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\tsoc = <span class=\"keyword\">new</span> Socket(pianoaddr, pianoport);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (soc.isConnected()) &#123;<span class=\"comment\">//soc</span></span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano is Connected\"</span>);</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (!isconnected)</span><br><span class=\"line\">\t\t\t\t\t\tisconnected = !isconnected;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"Connect Failed\"</span>);</span><br><span class=\"line\">\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"Connect Failed\"</span>);</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MsgThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\tOutputStream os = soc.getOutputStream();</span><br><span class=\"line\">\t\t\t\tos.write(param);</span><br><span class=\"line\">\t\t\t\tos.flush();</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano msg send successful\"</span>);</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano msg send successful failed\"</span>);</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>GithubImageView:<a href=\"https://github.com/boycy815/PinchImageView\" target=\"_blank\" rel=\"noopener\">PinchImageView</a></li><li>intent<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">showpic.setOnLongClickListener(<span class=\"keyword\">new</span> View.OnLongClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onLongClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\tBitmap drawingCache = getViewBitmap(showpic);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (drawingCache == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"no img to save\"</span>);</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\tFile imageFile = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory(), <span class=\"string\">\"saveImageview.jpg\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\tToast toast = Toast.makeText(getActivity(),</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"string\">\"\"</span>, Toast.LENGTH_LONG);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.setGravity(Gravity.TOP, <span class=\"number\">0</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.setText(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.show();</span><br><span class=\"line\">\t\t\t\t\t\tFileOutputStream outStream;</span><br><span class=\"line\">\t\t\t\t\t\toutStream = <span class=\"keyword\">new</span> FileOutputStream(imageFile);</span><br><span class=\"line\">\t\t\t\t\t\tdrawingCache.compress(Bitmap.CompressFormat.JPEG, <span class=\"number\">100</span>, outStream);</span><br><span class=\"line\">\t\t\t\t\t\toutStream.flush();</span><br><span class=\"line\">\t\t\t\t\t\toutStream.close();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tIntent sendIntent = <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.setAction(Intent.ACTION_SEND);</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(imageFile));</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.setType(<span class=\"string\">\"image/png\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\tgetActivity().startActivity(Intent.createChooser(sendIntent, <span class=\"string\">\"\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\t\tLog.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"share img wrong\"</span>);</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br></pre></td></tr></table></figure></li></ul>","site":{"data":{}},"excerpt":"<hr><p>app<br>wavjsonwavmidimidiarduino<br><a href=\"https://github.com/qiao\" target=\"_blank\" rel=\"noopener\">qiao</a>midi<a href=\"https://github.com/qiao/euphony\" target=\"_blank\" rel=\"noopener\">euphony</a></p>","more":"<h1 id=\"midi\"><a href=\"#midi\" class=\"headerlink\" title=\"midi\"></a>midi</h1><p>MediaPlayerandroid5.1midi</p><ul><li>MediaPlayerassert,rawuri</li><li>rawplayer = MediaPlayer.create(this, R.raw.test1)</li><li>Urinew-&gt;setDataSource-&gt;prepare-&gt;start</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><a href=\"http://blog.csdn.net/jiangliloveyou/article/details/11218555\" target=\"_blank\" rel=\"noopener\">androidAudioRecord</a><br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RecordTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTask</span>&lt;<span class=\"title\">Void</span>, <span class=\"title\">Integer</span>, <span class=\"title\">Void</span>&gt; </span>&#123;</span><br><span class=\"line\">\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">protected</span> Void <span class=\"title\">doInBackground</span><span class=\"params\">(Void... arg0)</span> </span>&#123;</span><br><span class=\"line\">\t\tisRecording = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\tDataOutputStream dos = <span class=\"keyword\">new</span> DataOutputStream(<span class=\"keyword\">new</span> BufferedOutputStream(<span class=\"keyword\">new</span> FileOutputStream(pcmFile)));</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> bufferSize = AudioRecord.getMinBufferSize(audioRate, channelConfig, audioEncoding);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//AudioRecord</span></span><br><span class=\"line\">\t\t\tAudioRecord record = <span class=\"keyword\">new</span> AudioRecord(MediaRecorder.AudioSource.MIC, audioRate, channelConfig, audioEncoding, bufferSize);</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">short</span>[] buffer = <span class=\"keyword\">new</span> <span class=\"keyword\">short</span>[bufferSize];</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\trecord.startRecording();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">int</span> r = <span class=\"number\">0</span>; <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">//isRecording</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">while</span> (isRecording) &#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//bufferSizeshort</span></span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//buffer overflowTODO</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">int</span> bufferReadResult = record.read(buffer, <span class=\"number\">0</span>, buffer.length);</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">//bufferOutputStream</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; bufferReadResult; i++) &#123;</span><br><span class=\"line\">\t\t\t\t\tdos.writeShort(buffer[i]);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tpublishProgress(<span class=\"keyword\">new</span> Integer(r)); <span class=\"comment\">//UI</span></span><br><span class=\"line\">\t\t\t\tr++; <span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">//</span></span><br><span class=\"line\">\t\t\trecord.stop();</span><br><span class=\"line\">\t\t\tconvertWaveFile();</span><br><span class=\"line\">\t\t\tdos.close();</span><br><span class=\"line\">\t\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\t\t<span class=\"comment\">// <span class=\"doctag\">TODO:</span> handle exception</span></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"pcmwav\"><a href=\"#pcmwav\" class=\"headerlink\" title=\"pcmwav\"></a>pcmwav</h1><p>pcmwav<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">WriteWaveFileHeader</span><span class=\"params\">(FileOutputStream out, <span class=\"keyword\">long</span> totalAudioLen, <span class=\"keyword\">long</span> totalDataLen, <span class=\"keyword\">long</span> longSampleRate,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">\t\t\t\t\t\t\t\t <span class=\"keyword\">int</span> channels, <span class=\"keyword\">long</span> byteRate)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">byte</span>[] header = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">45</span>];</span><br><span class=\"line\">\theader[<span class=\"number\">0</span>] = <span class=\"string\">'R'</span>; <span class=\"comment\">// RIFF</span></span><br><span class=\"line\">\theader[<span class=\"number\">1</span>] = <span class=\"string\">'I'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">2</span>] = <span class=\"string\">'F'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">3</span>] = <span class=\"string\">'F'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">4</span>] = (<span class=\"keyword\">byte</span>) (totalDataLen &amp; <span class=\"number\">0xff</span>);<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">5</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">6</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">7</span>] = (<span class=\"keyword\">byte</span>) ((totalDataLen &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">8</span>] = <span class=\"string\">'W'</span>;<span class=\"comment\">//WAVE</span></span><br><span class=\"line\">\theader[<span class=\"number\">9</span>] = <span class=\"string\">'A'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">10</span>] = <span class=\"string\">'V'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">11</span>] = <span class=\"string\">'E'</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//FMT Chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">12</span>] = <span class=\"string\">'f'</span>; <span class=\"comment\">// 'fmt '</span></span><br><span class=\"line\">\theader[<span class=\"number\">13</span>] = <span class=\"string\">'m'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">14</span>] = <span class=\"string\">'t'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">15</span>] = <span class=\"string\">' '</span>;<span class=\"comment\">//</span></span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">16</span>] = <span class=\"number\">16</span>; <span class=\"comment\">// 4 bytes: size of 'fmt ' chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">17</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">18</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">19</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">// 10HPCM</span></span><br><span class=\"line\">\theader[<span class=\"number\">20</span>] = <span class=\"number\">1</span>; <span class=\"comment\">// format = 1</span></span><br><span class=\"line\">\theader[<span class=\"number\">21</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">22</span>] = (<span class=\"keyword\">byte</span>) channels;</span><br><span class=\"line\">\theader[<span class=\"number\">23</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">24</span>] = (<span class=\"keyword\">byte</span>) (longSampleRate &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">25</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">26</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">27</span>] = (<span class=\"keyword\">byte</span>) ((longSampleRate &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\t<span class=\"comment\">//,**/8</span></span><br><span class=\"line\">\theader[<span class=\"number\">28</span>] = (<span class=\"keyword\">byte</span>) (byteRate &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">29</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">30</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">31</span>] = (<span class=\"keyword\">byte</span>) ((byteRate &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\t<span class=\"comment\">// *</span></span><br><span class=\"line\">\theader[<span class=\"number\">32</span>] = (<span class=\"keyword\">byte</span>) (<span class=\"number\">1</span> * <span class=\"number\">16</span> / <span class=\"number\">8</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">33</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//</span></span><br><span class=\"line\">\theader[<span class=\"number\">34</span>] = <span class=\"number\">16</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">35</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"comment\">//Data chunk</span></span><br><span class=\"line\">\theader[<span class=\"number\">36</span>] = <span class=\"string\">'d'</span>;<span class=\"comment\">//data</span></span><br><span class=\"line\">\theader[<span class=\"number\">37</span>] = <span class=\"string\">'a'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">38</span>] = <span class=\"string\">'t'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">39</span>] = <span class=\"string\">'a'</span>;</span><br><span class=\"line\">\theader[<span class=\"number\">40</span>] = (<span class=\"keyword\">byte</span>) (totalAudioLen &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">41</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">8</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">42</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">16</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">43</span>] = (<span class=\"keyword\">byte</span>) ((totalAudioLen &gt;&gt; <span class=\"number\">24</span>) &amp; <span class=\"number\">0xff</span>);</span><br><span class=\"line\">\theader[<span class=\"number\">44</span>] = <span class=\"number\">0</span>;</span><br><span class=\"line\">\tout.write(header, <span class=\"number\">0</span>, <span class=\"number\">45</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"json\"><a href=\"#json\" class=\"headerlink\" title=\"json\"></a>json</h1><p>jsonwavwavwavjson<br>jsonmd5jsonmidi<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> JSONObject <span class=\"title\">makejson</span><span class=\"params\">(<span class=\"keyword\">int</span> request, String identifycode, String data)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (identifycode == <span class=\"string\">\"a\"</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            JSONObject pack = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"request\"</span>, request);</span><br><span class=\"line\">            JSONObject config = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            config.put(<span class=\"string\">\"n\"</span>, lowf);</span><br><span class=\"line\">            config.put(<span class=\"string\">\"m\"</span>, highf);</span><br><span class=\"line\">            config.put(<span class=\"string\">\"w\"</span>, interval);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"config\"</span>, config);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"data\"</span>, data);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> pack;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            JSONObject pack = <span class=\"keyword\">new</span> JSONObject();</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"request\"</span>, request);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"config\"</span>, <span class=\"string\">\"\"</span>);</span><br><span class=\"line\">            pack.put(<span class=\"string\">\"data\"</span>, identifycode);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> pack;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (JSONException e) &#123;</span><br><span class=\"line\">            e.printStackTrace();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"socket\"><a href=\"#socket\" class=\"headerlink\" title=\"socket\"></a>socket</h1><p>socketjson<br>jsonjsonbase64javastring<br>wavwavwavendbidou<br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MsgThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            File file = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory().getAbsolutePath() + <span class=\"string\">\"/data/files/Melodia.wav\"</span>);</span><br><span class=\"line\">            FileInputStream reader = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                reader = <span class=\"keyword\">new</span> FileInputStream(file);</span><br><span class=\"line\">                <span class=\"keyword\">int</span> len = reader.available();</span><br><span class=\"line\">                <span class=\"keyword\">byte</span>[] buff = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[len];</span><br><span class=\"line\">                reader.read(buff);</span><br><span class=\"line\">                String data = Base64.encodeToString(buff, Base64.DEFAULT);</span><br><span class=\"line\">                String senda = makejson(<span class=\"number\">1</span>, <span class=\"string\">\"a\"</span>, data).toString();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request1: \"</span> + senda);</span><br><span class=\"line\">                OutputStream os = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                InputStream is = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                DataInputStream in = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                    os = soc.getOutputStream();</span><br><span class=\"line\">                    BufferedReader bra = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                    os.write(senda.getBytes());</span><br><span class=\"line\">                    os.write(<span class=\"string\">\"endbidou1\"</span>.getBytes());</span><br><span class=\"line\">                    os.flush();</span><br><span class=\"line\">                    Log.i(TAG, <span class=\"string\">\"request1 send successful\"</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">if</span> (soc.isConnected()) &#123;</span><br><span class=\"line\">                        is = soc.getInputStream();</span><br><span class=\"line\">                        bra = <span class=\"keyword\">new</span> BufferedReader(<span class=\"keyword\">new</span> InputStreamReader(is));</span><br><span class=\"line\">                        md5 = bra.readLine();</span><br><span class=\"line\">                        Log.i(TAG, <span class=\"string\">\"md5: \"</span> + md5);</span><br><span class=\"line\">                        bra.close();</span><br><span class=\"line\">                    &#125; <span class=\"keyword\">else</span></span><br><span class=\"line\">                        Log.i(TAG, <span class=\"string\">\"socket closed while reading\"</span>);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                    e.printStackTrace();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                soc.close();</span><br><span class=\"line\">                startflag = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">                StartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">                st.start();</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">while</span> (soc.isClosed()) ;</span><br><span class=\"line\"></span><br><span class=\"line\">                String sendb = makejson(<span class=\"number\">2</span>, md5, <span class=\"string\">\"request2\"</span>).toString();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request2: \"</span> + sendb);</span><br><span class=\"line\">                os = soc.getOutputStream();</span><br><span class=\"line\">                os.write(sendb.getBytes());</span><br><span class=\"line\">                os.write(<span class=\"string\">\"endbidou1\"</span>.getBytes());</span><br><span class=\"line\">                os.flush();</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"request2 send successful\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">                is = soc.getInputStream();</span><br><span class=\"line\">                <span class=\"keyword\">byte</span> buffer[] = <span class=\"keyword\">new</span> <span class=\"keyword\">byte</span>[<span class=\"number\">1024</span> * <span class=\"number\">100</span>];</span><br><span class=\"line\">                is.read(buffer);</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"midifilecontent: \"</span> + buffer.toString());</span><br><span class=\"line\">                soc.close();</span><br><span class=\"line\">                File filemid = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory().getAbsolutePath() + <span class=\"string\">\"/data/files/Melodia.mid\"</span>);</span><br><span class=\"line\">                FileOutputStream writer = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">                writer = <span class=\"keyword\">new</span> FileOutputStream(filemid);</span><br><span class=\"line\">                writer.write(buffer);</span><br><span class=\"line\">                writer.close();</span><br><span class=\"line\">                Message msg = myhandler.obtainMessage();</span><br><span class=\"line\">                msg.what = <span class=\"number\">1</span>;</span><br><span class=\"line\">                myhandler.sendMessage(msg);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">                e.printStackTrace();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure><p></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>Github<a href=\"https://github.com/ChadCSong/ShineButton\" target=\"_blank\" rel=\"noopener\">ShineButton</a><br><br></p><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fabrecord.setOnTouchListener(<span class=\"keyword\">new</span> View.OnTouchListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouch</span><span class=\"params\">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">switch</span> (event.getAction()) &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</span><br><span class=\"line\">\t\t\t\t\t\tuploadbt.setVisibility(View.INVISIBLE);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (isUploadingIcon) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\tuploadbt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tLog.i(TAG, <span class=\"string\">\"ACTION_DOWN\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (!shinebtstatus) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebtstatus = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\tox = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\toy = event.getY();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tisRecording = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\trecLen = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\trecTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\t\tpb.setValue(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\trecorder = <span class=\"keyword\">new</span> RecordTask();</span><br><span class=\"line\">\t\t\t\t\t\trecorder.execute();</span><br><span class=\"line\">\t\t\t\t\t\thandler.postDelayed(runrecord, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</span><br><span class=\"line\">\t\t\t\t\t\thandler.removeCallbacks(runrecord);</span><br><span class=\"line\">\t\t\t\t\t\tLog.i(TAG, <span class=\"string\">\"ACTION_UP\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (shinebtstatus) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\tshinebtstatus = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> x1 = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> y1 = event.getY();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> dis1 = (x1 - ox) * (x1 - ox) + (y1 - oy) * (y1 - oy);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tisRecording = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\tpb.setValue(<span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_fiber_manual_record_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (dis1 &gt; <span class=\"number\">30000</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">if</span> (!isUploadingIcon) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tuploadbt.setVisibility(View.VISIBLE);</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tuploadbt.performClick();</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisPressUpload = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t\t\t\t\t\tisUploadingIcon = !isUploadingIcon;</span><br><span class=\"line\">\t\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\t\tSnackbar.make(fabrecord, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\t\t\thandler.postDelayed(runreplay, <span class=\"number\">0</span>);</span><br><span class=\"line\">\t\t\t\t\t\t\treplay();</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE:</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> x2 = event.getX();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> y2 = event.getY();</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">float</span> dis2 = (x2 - ox) * (x2 - ox) + (y2 - oy) * (y2 - oy);</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> (dis2 &gt; <span class=\"number\">30000</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_cancel_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\t\tfabrecord.setImageResource(R.drawable.ic_stop_white_24dp);</span><br><span class=\"line\">\t\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br></pre></td></tr></table></figure><p></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>socketApachemd5<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    md5 = getArguments().getString(<span class=\"string\">\"md5\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">final</span> String imageUri = <span class=\"string\">\"\"</span> + md5 + <span class=\"string\">\"_1.png\"</span>;</span><br><span class=\"line\">    Log.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"pngfile: \"</span> + imageUri);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            imageLoader.displayImage(imageUri, showpic);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>socketarduinoarduino<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pianobt.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (!isconnected) &#123;</span><br><span class=\"line\">\t\t\t\t\tpianoaddr = etpianoaddr.getText().toString();</span><br><span class=\"line\">\t\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());</span><br><span class=\"line\">\t\t\t\t\tparam[<span class=\"number\">0</span>] = <span class=\"number\">0x30</span>;</span><br><span class=\"line\">\t\t\t\t\tStartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">\t\t\t\t\tst.start();</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> (!isconnected) ;</span><br><span class=\"line\">\t\t\t\t\tMsgThread ms = <span class=\"keyword\">new</span> MsgThread();</span><br><span class=\"line\">\t\t\t\t\tms.start();</span><br><span class=\"line\">\t\t\t\t\tYoYo.with(Techniques.Wobble)</span><br><span class=\"line\">\t\t\t\t\t\t\t.duration(<span class=\"number\">300</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t.repeat(<span class=\"number\">6</span>)</span><br><span class=\"line\">\t\t\t\t\t\t\t.playOn(seekBaroctave);</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> (soc.isConnected()) ;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\tisconnected = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"socket closed\"</span>);</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\tsamplebt.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\tpianoaddr = etpianoaddr.getText().toString();</span><br><span class=\"line\">\t\t\t\tpianoport = Integer.valueOf(etpianoport.getText().toString());</span><br><span class=\"line\">\t\t\t\tparam[<span class=\"number\">0</span>] = <span class=\"number\">0x31</span>;</span><br><span class=\"line\">\t\t\t\tStartThread st = <span class=\"keyword\">new</span> StartThread();</span><br><span class=\"line\">\t\t\t\tst.start();</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (!isconnected) ;</span><br><span class=\"line\">\t\t\t\tMsgThread ms = <span class=\"keyword\">new</span> MsgThread();</span><br><span class=\"line\">\t\t\t\tms.start();</span><br><span class=\"line\">\t\t\t\tYoYo.with(Techniques.Wobble)</span><br><span class=\"line\">\t\t\t\t\t\t.duration(<span class=\"number\">300</span>)</span><br><span class=\"line\">\t\t\t\t\t\t.repeat(<span class=\"number\">6</span>)</span><br><span class=\"line\">\t\t\t\t\t\t.playOn(seekBaroctave);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">while</span> (soc.isConnected()) ;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\tisconnected = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"socket closed\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StartThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\tsoc = <span class=\"keyword\">new</span> Socket(pianoaddr, pianoport);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (soc.isConnected()) &#123;<span class=\"comment\">//soc</span></span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano is Connected\"</span>);</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (!isconnected)</span><br><span class=\"line\">\t\t\t\t\t\tisconnected = !isconnected;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"Connect Failed\"</span>);</span><br><span class=\"line\">\t\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"Connect Failed\"</span>);</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MsgThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span> </span>&#123;</span><br><span class=\"line\">\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\tOutputStream os = soc.getOutputStream();</span><br><span class=\"line\">\t\t\t\tos.write(param);</span><br><span class=\"line\">\t\t\t\tos.flush();</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano msg send successful\"</span>);</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\tsoc.close();</span><br><span class=\"line\">\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\tLog.i(<span class=\"string\">\"piano\"</span>, <span class=\"string\">\"piano msg send successful failed\"</span>);</span><br><span class=\"line\">\t\t\t\tSnackbar.make(pianobt, <span class=\"string\">\"\"</span>, Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">\t\t\t\t\t\t.setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">\t\t\t\te.printStackTrace();</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>GithubImageView:<a href=\"https://github.com/boycy815/PinchImageView\" target=\"_blank\" rel=\"noopener\">PinchImageView</a></li><li>intent<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">showpic.setOnLongClickListener(<span class=\"keyword\">new</span> View.OnLongClickListener() &#123;</span><br><span class=\"line\">\t\t\t<span class=\"meta\">@Override</span></span><br><span class=\"line\">\t\t\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onLongClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">\t\t\t\tBitmap drawingCache = getViewBitmap(showpic);</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (drawingCache == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\t\t\t\tLog.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"no img to save\"</span>);</span><br><span class=\"line\">\t\t\t\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\t\t\t\t\tFile imageFile = <span class=\"keyword\">new</span> File(Environment.getExternalStorageDirectory(), <span class=\"string\">\"saveImageview.jpg\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\tToast toast = Toast.makeText(getActivity(),</span><br><span class=\"line\">\t\t\t\t\t\t\t\t<span class=\"string\">\"\"</span>, Toast.LENGTH_LONG);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.setGravity(Gravity.TOP, <span class=\"number\">0</span>, <span class=\"number\">200</span>);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.setText(<span class=\"string\">\"\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\ttoast.show();</span><br><span class=\"line\">\t\t\t\t\t\tFileOutputStream outStream;</span><br><span class=\"line\">\t\t\t\t\t\toutStream = <span class=\"keyword\">new</span> FileOutputStream(imageFile);</span><br><span class=\"line\">\t\t\t\t\t\tdrawingCache.compress(Bitmap.CompressFormat.JPEG, <span class=\"number\">100</span>, outStream);</span><br><span class=\"line\">\t\t\t\t\t\toutStream.flush();</span><br><span class=\"line\">\t\t\t\t\t\toutStream.close();</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t\tIntent sendIntent = <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.setAction(Intent.ACTION_SEND);</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(imageFile));</span><br><span class=\"line\">\t\t\t\t\t\tsendIntent.setType(<span class=\"string\">\"image/png\"</span>);</span><br><span class=\"line\">\t\t\t\t\t\tgetActivity().startActivity(Intent.createChooser(sendIntent, <span class=\"string\">\"\"</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">\t\t\t\t\t&#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">\t\t\t\t\t\tLog.i(<span class=\"string\">\"play\"</span>, <span class=\"string\">\"share img wrong\"</span>);</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;);</span><br></pre></td></tr></table></figure></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Android:Melodia","path":"2017/03/09/dachuang/","eyeCatchImage":null,"excerpt":"<hr><p>app<br>wavjsonwavmidimidiarduino<br><a href=\"https://github.com/qiao\" target=\"_blank\" rel=\"noopener\">qiao</a>midi<a href=\"https://github.com/qiao/euphony\" target=\"_blank\" rel=\"noopener\">euphony</a></p>","date":"2017-03-09T09:19:53.000Z","pv":0,"totalPV":0,"categories":"Android","tags":["code","android"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Android:BuptRoom","date":"2017-01-16T03:56:39.000Z","_content":"***\n\n![](http://ojtdnrpmt.bkt.clouddn.com/17-1-16/24437570-file_1484550130084_2fc4.png)\n\n# \nAPP\n,\nandroid\n[BuptRoom](https://fir.im/buptroom)\nrepository:[](https://github.com/thinkwee/BuptRoom)\n3\n1\n\nApp:\n\n<!--more-->\n\n# \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170123/205417119.JPG)\n\n# \n-\tAndroid\n-\tFragment\n-\tJava\n-\tGithub\n-\tapp\n-\t\n-\t\n-\tGitHub\n-\t\n-\tAndroid Material Design\n-\t\n-\tHandler\n\n# \n\n\n-\tAndroid6.05.0permisson:\n\n```Java\n    <uses-permission android:name=\"android.permission.INTERNET\"></uses-permission>\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"></uses-permission>\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"></uses-permission>\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"></uses-permission>\n    <uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"></uses-permission>\n```\n\n-\tjspparsewebviewloadurljavascriptjsoup-1.9.2.jar\n\n```Java\n    final class MyWebViewClient extends WebViewClient {\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            Log.d(\"WebView\",\"onPageStarted\");\n            super.onPageStarted(view, url, favicon);\n        }\n        public void onPageFinished(WebView view, String url) {\n            Log.d(\"WebView\",\"onPageFinished \");\n            view.loadUrl(\"javascript:window.handler.getContent(document.body.innerHTML);\");\n            super.onPageFinished(view, url);\n        }\n    }\n```\n\n-\thandlerjavascript,contentStringhtmlbody\n\n```Java\n    final  class JavascriptHandler{\n        @JavascriptInterface\n        public void getContent(String htmlContent){\n            Log.i(Tag,\"html content: \"+htmlContent);\n            document= Jsoup.parse(htmlContent);\n            htmlstring=htmlContent;\n            content=document.getElementsByTag(\"body\").text();\n            Toast.makeText(MainActivity.this,\"\",Toast.LENGTH_SHORT).show();\n        }\n    }\n```\n\n\n\n-\t\n\n```Java\n    \n    String contenttemp=content;\n    content=\"\";\n    String[] contentstemp=contenttemp.split(\",\");\n    for (String temp:contentstemp){\n        content=content+temp;\n    }\n    \n    \n    contents=content.split(\" |:\");\n    String showcontent=\"\";\n    count=0;\n    int tsgflag=0;\n    int cishu=0;\n    j12.clear();\n    j34.clear();\n    j56.clear();\n    j78.clear();\n    j9.clear();\n    j1011.clear();\n    if (keyword.contains(\"\")) tsgflag=1;\n    for (String temp:contents){\n        if (temp.contains(keyword)){\n            cishu++;\n            SaveBuidlingInfo(count,cishu,tsgflag);\n        }\n        count++;\n    }\n    \n    SaveBuildingInfoj12,j34.....\n    while (1 == 1) {\n        if (contents[k].contains(\"\") || contents[k].contains(\"\") || contents[k].contains(\"\"))\n            break;\n        ;\n        switch (c) {\n            case 1:\n                j12.add(contents[k]);\n                break;\n            case 2:\n                j34.add(contents[k]);\n                break;\n            case 3:\n                j56.add(contents[k]);\n                break;\n            case 4:\n                j78.add(contents[k]);\n                break;\n            case 5:\n                j9.add(contents[k]);\n                break;\n            case 6:\n                j1011.add(contents[k]);\n                break;\n            default:\n                break;\n        }\n        k++;\n    }\n```\n\n-\tNavigationViewTextView\n\n\n-\tMaterialDesign\n\n```Java\n    final Calendar c = Calendar.getInstance();\n     c.setTimeZone(TimeZone.getTimeZone(\"GMT+8:00\"));\n     mYear = String.valueOf(c.get(Calendar.YEAR)); // \n     mMonth = String.valueOf(c.get(Calendar.MONTH) + 1);// \n     mDay = String.valueOf(c.get(Calendar.DAY_OF_MONTH));// \n     mWay = String.valueOf(c.get(Calendar.DAY_OF_WEEK));\n     mHour= c.get(Calendar.HOUR_OF_DAY);\n     mMinute= c.get(Calendar.MINUTE);\n    \n     if (mHour>=8&&mHour<10){\n         nowtime=\"\";\n     }else\n     if (mHour>=10&&mHour<12){\n         nowtime=\"\";\n     }else\n     if ((mHour==13&&mMinute>=30)||(mHour==14)||(mHour==15&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==15&&mMinute>=30)||(mHour==16)||(mHour==17&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==17&&mMinute>=30)||(mHour==18&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==18&&mMinute>=30)||(mHour==19)||(mHour==20&&mMinute<30)){\n         nowtime=\"\";\n     }else\n    nowtime=\"\";\n    \n     if(\"1\".equals(mWay)){\n         mWay =\"\";\n         daycount=6;\n     }else if(\"2\".equals(mWay)){\n         mWay =\"\";\n         daycount=0;\n     }else if(\"3\".equals(mWay)){\n         mWay =\"\";\n         daycount=1;\n     }else if(\"4\".equals(mWay)){\n         mWay =\"\";\n         daycount=2;\n     }else if(\"5\".equals(mWay)){\n         mWay =\"\";\n         daycount=3;\n     }else if(\"6\".equals(mWay)){\n         mWay =\"\";\n         daycount=4;\n     }else if(\"7\".equals(mWay)){\n         mWay =\"\";\n         daycount=5;\n     }\n     Timestring=mYear + \"\" + mMonth + \"\" + mDay+\"\"+\"\"+mWay;\n    \n     FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);\n     fab.setOnClickListener(new View.OnClickListener() {\n         @Override\n         public void onClick(View view) {\n             Snackbar.make(view, \"\"+Timestring+\"\\n\"+nowtime+\"  \"+interesting[daycount], Snackbar.LENGTH_SHORT)\n                     .setAction(\"Action\", null).show();\n         }\n     });\n```\n\n# GitHub\nGitHubfir\nGitHub repository\n-\t[Android-SwipeToDismiss](https://github.com/romannurik/Android-SwipeToDismiss)\n-\tfir:[UpdateDemo](https://github.com/hugeterry/UpdateDemo)\n\n....\n-\t\n```Java\npublic class ShakeService extends Service {\n    public static final String TAG = \"ShakeService\";\n    private SensorManager mSensorManager;\n    public boolean flag=false;\n    private ShakeBinder shakebinder= new ShakeBinder();\n    private String htmlbody=\"\";\n\n    @Override\n    public void onCreate() {\n        // TODO Auto-generated method stub\n        super.onCreate();\n        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        Log.i(TAG,\"Shake Service Create\");\n    }\n\n    @Override\n    public void onDestroy() {\n        // TODO Auto-generated method stub\n        flag=false;\n        super.onDestroy();\n        mSensorManager.unregisterListener(mShakeListener);\n    }\n\n    @Override\n    public void onStart(Intent intent, int startId) {\n        // TODO Auto-generated method stub\n        super.onStart(intent, startId);\n        Log.i(TAG,\"Shake Service Start\");\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        // TODO Auto-generated method stub\n        mSensorManager.registerListener(mShakeListener,\n                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),\n                //SensorManager.SENSOR_DELAY_GAME,\n                50 * 1000); //batch every 50 milliseconds\n        htmlbody=intent.getStringExtra(\"htmlbody\");\n\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n    private final SensorEventListener mShakeListener = new SensorEventListener() {\n        private static final float SENSITIVITY = 10;\n        private static final int BUFFER = 5;\n        private float[] gravity = new float[3];\n        private float average = 0;\n        private int fill = 0;\n\n        @Override\n        public void onAccuracyChanged(Sensor sensor, int acc) {\n        }\n\n        public void onSensorChanged(SensorEvent event) {\n            final float alpha = 0.8F;\n\n            for (int i = 0; i < 3; i++) {\n                gravity[i] = alpha * gravity[i] + (1 - alpha) * event.values[i];\n            }\n\n            float x = event.values[0] - gravity[0];\n            float y = event.values[1] - gravity[1];\n            float z = event.values[2] - gravity[2];\n\n            if (fill <= BUFFER) {\n                average += Math.abs(x) + Math.abs(y) + Math.abs(z);\n                fill++;\n            } else {\n                Log.i(TAG, \"average:\"+average);\n                Log.i(TAG, \"average / BUFFER:\"+(average / BUFFER));\n                if (average / BUFFER >= SENSITIVITY) {\n                    handleShakeAction();//\n                }\n                average = 0;\n                fill = 0;\n            }\n        }\n    };\n\n    protected void handleShakeAction() {\n        // TODO Auto-generated method stub\n        flag=true;\n        Toast.makeText(getApplicationContext(), \"\", Toast.LENGTH_SHORT).show();\n        Intent intent= new Intent();\n        intent.putExtra(\"htmlbody\",htmlbody);\n        intent.addFlags(FLAG_ACTIVITY_NEW_TASK);\n        intent.setClassName(this,\"thinkwee.buptroom.ShakeTestActivity\");\n        startActivity(intent);\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        // TODO Auto-generated method stub\n        return shakebinder;\n    }\n    class ShakeBinder extends Binder{\n\n    }\n}\n\n```\n\n# \n-\tactivity\n-\t2sactivity\n```Java\n        webget = new Webget();\n        webget.init(webView);\n        HaveNetFlag = webget.WebInit();\n\n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                ImageView img = (ImageView) findViewById(R.id.welcomeimg);\n                Animation animation = AnimationUtils.loadAnimation(WelcomeActivity.this, R.anim.enlarge);\n                animation.setFillAfter(true);\n                img.startAnimation(animation);\n            }\n        }, 50);\n        \n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                WrongNet = webget.getWrongnet();\n                HaveNetFlag = webget.getHaveNetFlag();\n                htmlbody = webget.getHtmlbody();\n                Log.i(\"welcome\", \"2HaveNetFlag: \" + HaveNetFlag);\n                Log.i(\"welcome\", \"2Wrongnet: \" + WrongNet);\n                Log.i(\"welcome\", \"2html: \" + htmlbody);\n            }\n        }, 2000);\n\n        new Handler().postDelayed(new Runnable() {\n\n            @Override\n            public void run() {\n                Intent intent = new Intent(WelcomeActivity.this, MainActivity.class);\n                intent.putExtra(\"WrongNet\", WrongNet);\n                intent.putExtra(\"HtmlBody\", htmlbody);\n                startActivity(intent);\n                WelcomeActivity.this.finish();\n\n            }\n\n        }, 2500);\n    }\n```\n\n\n\n\n\n\n\n\n","source":"_posts/buptroomreview.md","raw":"---\ntitle: Android:BuptRoom\ndate: 2017-01-16 11:56:39\ntags: [code,android]\ncategories: Android\n---\n***\n\n![](http://ojtdnrpmt.bkt.clouddn.com/17-1-16/24437570-file_1484550130084_2fc4.png)\n\n# \nAPP\n,\nandroid\n[BuptRoom](https://fir.im/buptroom)\nrepository:[](https://github.com/thinkwee/BuptRoom)\n3\n1\n\nApp:\n\n<!--more-->\n\n# \n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170123/205417119.JPG)\n\n# \n-\tAndroid\n-\tFragment\n-\tJava\n-\tGithub\n-\tapp\n-\t\n-\t\n-\tGitHub\n-\t\n-\tAndroid Material Design\n-\t\n-\tHandler\n\n# \n\n\n-\tAndroid6.05.0permisson:\n\n```Java\n    <uses-permission android:name=\"android.permission.INTERNET\"></uses-permission>\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"></uses-permission>\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"></uses-permission>\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"></uses-permission>\n    <uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"></uses-permission>\n```\n\n-\tjspparsewebviewloadurljavascriptjsoup-1.9.2.jar\n\n```Java\n    final class MyWebViewClient extends WebViewClient {\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            Log.d(\"WebView\",\"onPageStarted\");\n            super.onPageStarted(view, url, favicon);\n        }\n        public void onPageFinished(WebView view, String url) {\n            Log.d(\"WebView\",\"onPageFinished \");\n            view.loadUrl(\"javascript:window.handler.getContent(document.body.innerHTML);\");\n            super.onPageFinished(view, url);\n        }\n    }\n```\n\n-\thandlerjavascript,contentStringhtmlbody\n\n```Java\n    final  class JavascriptHandler{\n        @JavascriptInterface\n        public void getContent(String htmlContent){\n            Log.i(Tag,\"html content: \"+htmlContent);\n            document= Jsoup.parse(htmlContent);\n            htmlstring=htmlContent;\n            content=document.getElementsByTag(\"body\").text();\n            Toast.makeText(MainActivity.this,\"\",Toast.LENGTH_SHORT).show();\n        }\n    }\n```\n\n\n\n-\t\n\n```Java\n    \n    String contenttemp=content;\n    content=\"\";\n    String[] contentstemp=contenttemp.split(\",\");\n    for (String temp:contentstemp){\n        content=content+temp;\n    }\n    \n    \n    contents=content.split(\" |:\");\n    String showcontent=\"\";\n    count=0;\n    int tsgflag=0;\n    int cishu=0;\n    j12.clear();\n    j34.clear();\n    j56.clear();\n    j78.clear();\n    j9.clear();\n    j1011.clear();\n    if (keyword.contains(\"\")) tsgflag=1;\n    for (String temp:contents){\n        if (temp.contains(keyword)){\n            cishu++;\n            SaveBuidlingInfo(count,cishu,tsgflag);\n        }\n        count++;\n    }\n    \n    SaveBuildingInfoj12,j34.....\n    while (1 == 1) {\n        if (contents[k].contains(\"\") || contents[k].contains(\"\") || contents[k].contains(\"\"))\n            break;\n        ;\n        switch (c) {\n            case 1:\n                j12.add(contents[k]);\n                break;\n            case 2:\n                j34.add(contents[k]);\n                break;\n            case 3:\n                j56.add(contents[k]);\n                break;\n            case 4:\n                j78.add(contents[k]);\n                break;\n            case 5:\n                j9.add(contents[k]);\n                break;\n            case 6:\n                j1011.add(contents[k]);\n                break;\n            default:\n                break;\n        }\n        k++;\n    }\n```\n\n-\tNavigationViewTextView\n\n\n-\tMaterialDesign\n\n```Java\n    final Calendar c = Calendar.getInstance();\n     c.setTimeZone(TimeZone.getTimeZone(\"GMT+8:00\"));\n     mYear = String.valueOf(c.get(Calendar.YEAR)); // \n     mMonth = String.valueOf(c.get(Calendar.MONTH) + 1);// \n     mDay = String.valueOf(c.get(Calendar.DAY_OF_MONTH));// \n     mWay = String.valueOf(c.get(Calendar.DAY_OF_WEEK));\n     mHour= c.get(Calendar.HOUR_OF_DAY);\n     mMinute= c.get(Calendar.MINUTE);\n    \n     if (mHour>=8&&mHour<10){\n         nowtime=\"\";\n     }else\n     if (mHour>=10&&mHour<12){\n         nowtime=\"\";\n     }else\n     if ((mHour==13&&mMinute>=30)||(mHour==14)||(mHour==15&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==15&&mMinute>=30)||(mHour==16)||(mHour==17&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==17&&mMinute>=30)||(mHour==18&&mMinute<30)){\n         nowtime=\"\";\n     }else\n     if ((mHour==18&&mMinute>=30)||(mHour==19)||(mHour==20&&mMinute<30)){\n         nowtime=\"\";\n     }else\n    nowtime=\"\";\n    \n     if(\"1\".equals(mWay)){\n         mWay =\"\";\n         daycount=6;\n     }else if(\"2\".equals(mWay)){\n         mWay =\"\";\n         daycount=0;\n     }else if(\"3\".equals(mWay)){\n         mWay =\"\";\n         daycount=1;\n     }else if(\"4\".equals(mWay)){\n         mWay =\"\";\n         daycount=2;\n     }else if(\"5\".equals(mWay)){\n         mWay =\"\";\n         daycount=3;\n     }else if(\"6\".equals(mWay)){\n         mWay =\"\";\n         daycount=4;\n     }else if(\"7\".equals(mWay)){\n         mWay =\"\";\n         daycount=5;\n     }\n     Timestring=mYear + \"\" + mMonth + \"\" + mDay+\"\"+\"\"+mWay;\n    \n     FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);\n     fab.setOnClickListener(new View.OnClickListener() {\n         @Override\n         public void onClick(View view) {\n             Snackbar.make(view, \"\"+Timestring+\"\\n\"+nowtime+\"  \"+interesting[daycount], Snackbar.LENGTH_SHORT)\n                     .setAction(\"Action\", null).show();\n         }\n     });\n```\n\n# GitHub\nGitHubfir\nGitHub repository\n-\t[Android-SwipeToDismiss](https://github.com/romannurik/Android-SwipeToDismiss)\n-\tfir:[UpdateDemo](https://github.com/hugeterry/UpdateDemo)\n\n....\n-\t\n```Java\npublic class ShakeService extends Service {\n    public static final String TAG = \"ShakeService\";\n    private SensorManager mSensorManager;\n    public boolean flag=false;\n    private ShakeBinder shakebinder= new ShakeBinder();\n    private String htmlbody=\"\";\n\n    @Override\n    public void onCreate() {\n        // TODO Auto-generated method stub\n        super.onCreate();\n        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        Log.i(TAG,\"Shake Service Create\");\n    }\n\n    @Override\n    public void onDestroy() {\n        // TODO Auto-generated method stub\n        flag=false;\n        super.onDestroy();\n        mSensorManager.unregisterListener(mShakeListener);\n    }\n\n    @Override\n    public void onStart(Intent intent, int startId) {\n        // TODO Auto-generated method stub\n        super.onStart(intent, startId);\n        Log.i(TAG,\"Shake Service Start\");\n    }\n\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        // TODO Auto-generated method stub\n        mSensorManager.registerListener(mShakeListener,\n                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),\n                //SensorManager.SENSOR_DELAY_GAME,\n                50 * 1000); //batch every 50 milliseconds\n        htmlbody=intent.getStringExtra(\"htmlbody\");\n\n        return super.onStartCommand(intent, flags, startId);\n    }\n\n    private final SensorEventListener mShakeListener = new SensorEventListener() {\n        private static final float SENSITIVITY = 10;\n        private static final int BUFFER = 5;\n        private float[] gravity = new float[3];\n        private float average = 0;\n        private int fill = 0;\n\n        @Override\n        public void onAccuracyChanged(Sensor sensor, int acc) {\n        }\n\n        public void onSensorChanged(SensorEvent event) {\n            final float alpha = 0.8F;\n\n            for (int i = 0; i < 3; i++) {\n                gravity[i] = alpha * gravity[i] + (1 - alpha) * event.values[i];\n            }\n\n            float x = event.values[0] - gravity[0];\n            float y = event.values[1] - gravity[1];\n            float z = event.values[2] - gravity[2];\n\n            if (fill <= BUFFER) {\n                average += Math.abs(x) + Math.abs(y) + Math.abs(z);\n                fill++;\n            } else {\n                Log.i(TAG, \"average:\"+average);\n                Log.i(TAG, \"average / BUFFER:\"+(average / BUFFER));\n                if (average / BUFFER >= SENSITIVITY) {\n                    handleShakeAction();//\n                }\n                average = 0;\n                fill = 0;\n            }\n        }\n    };\n\n    protected void handleShakeAction() {\n        // TODO Auto-generated method stub\n        flag=true;\n        Toast.makeText(getApplicationContext(), \"\", Toast.LENGTH_SHORT).show();\n        Intent intent= new Intent();\n        intent.putExtra(\"htmlbody\",htmlbody);\n        intent.addFlags(FLAG_ACTIVITY_NEW_TASK);\n        intent.setClassName(this,\"thinkwee.buptroom.ShakeTestActivity\");\n        startActivity(intent);\n    }\n\n    @Override\n    public IBinder onBind(Intent intent) {\n        // TODO Auto-generated method stub\n        return shakebinder;\n    }\n    class ShakeBinder extends Binder{\n\n    }\n}\n\n```\n\n# \n-\tactivity\n-\t2sactivity\n```Java\n        webget = new Webget();\n        webget.init(webView);\n        HaveNetFlag = webget.WebInit();\n\n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                ImageView img = (ImageView) findViewById(R.id.welcomeimg);\n                Animation animation = AnimationUtils.loadAnimation(WelcomeActivity.this, R.anim.enlarge);\n                animation.setFillAfter(true);\n                img.startAnimation(animation);\n            }\n        }, 50);\n        \n        new Handler().postDelayed(new Runnable() {\n            public void run() {\n                //execute the task\n                WrongNet = webget.getWrongnet();\n                HaveNetFlag = webget.getHaveNetFlag();\n                htmlbody = webget.getHtmlbody();\n                Log.i(\"welcome\", \"2HaveNetFlag: \" + HaveNetFlag);\n                Log.i(\"welcome\", \"2Wrongnet: \" + WrongNet);\n                Log.i(\"welcome\", \"2html: \" + htmlbody);\n            }\n        }, 2000);\n\n        new Handler().postDelayed(new Runnable() {\n\n            @Override\n            public void run() {\n                Intent intent = new Intent(WelcomeActivity.this, MainActivity.class);\n                intent.putExtra(\"WrongNet\", WrongNet);\n                intent.putExtra(\"HtmlBody\", htmlbody);\n                startActivity(intent);\n                WelcomeActivity.this.finish();\n\n            }\n\n        }, 2500);\n    }\n```\n\n\n\n\n\n\n\n\n","slug":"buptroomreview","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072cx0015qcw6cz5y0k9y","content":"<hr><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-16/24437570-file_1484550130084_2fc4.png\" alt=\"\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>APP<br>,<br>android<br><a href=\"https://fir.im/buptroom\" target=\"_blank\" rel=\"noopener\">BuptRoom</a><br>repository:<a href=\"https://github.com/thinkwee/BuptRoom\" target=\"_blank\" rel=\"noopener\"></a><br>3<br>1<br><br>App:</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170123/205417119.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Android</li><li>Fragment</li><li>Java</li><li>Github</li><li>app</li><li></li><li></li><li>GitHub</li><li></li><li>Android Material Design</li><li></li><li>Handler</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p><ul><li>Android6.05.0permisson:</li></ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;uses-permission android:name=\"android.permission.INTERNET\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"&gt;&lt;/uses-permission&gt;</span><br></pre></td></tr></table></figure><ul><li>jspparsewebviewloadurljavascriptjsoup-1.9.2.jar</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyWebViewClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebViewClient</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldOverrideUrlLoading</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</span><br><span class=\"line\">        view.loadUrl(url);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageStarted</span><span class=\"params\">(WebView view, String url, Bitmap favicon)</span> </span>&#123;</span><br><span class=\"line\">        Log.d(<span class=\"string\">\"WebView\"</span>,<span class=\"string\">\"onPageStarted\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onPageStarted(view, url, favicon);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageFinished</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</span><br><span class=\"line\">        Log.d(<span class=\"string\">\"WebView\"</span>,<span class=\"string\">\"onPageFinished \"</span>);</span><br><span class=\"line\">        view.loadUrl(<span class=\"string\">\"javascript:window.handler.getContent(document.body.innerHTML);\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onPageFinished(view, url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li>handlerjavascript,contentStringhtmlbody</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span>  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JavascriptHandler</span></span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@JavascriptInterface</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getContent</span><span class=\"params\">(String htmlContent)</span></span>&#123;</span><br><span class=\"line\">        Log.i(Tag,<span class=\"string\">\"html content: \"</span>+htmlContent);</span><br><span class=\"line\">        document= Jsoup.parse(htmlContent);</span><br><span class=\"line\">        htmlstring=htmlContent;</span><br><span class=\"line\">        content=document.getElementsByTag(<span class=\"string\">\"body\"</span>).text();</span><br><span class=\"line\">        Toast.makeText(MainActivity.<span class=\"keyword\">this</span>,<span class=\"string\">\"\"</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li></li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">String contenttemp=content;</span><br><span class=\"line\">content=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">String[] contentstemp=contenttemp.split(<span class=\"string\">\",\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String temp:contentstemp)&#123;</span><br><span class=\"line\">    content=content+temp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">contents=content.split(<span class=\"string\">\" |:\"</span>);</span><br><span class=\"line\">String showcontent=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">count=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> tsgflag=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> cishu=<span class=\"number\">0</span>;</span><br><span class=\"line\">j12.clear();</span><br><span class=\"line\">j34.clear();</span><br><span class=\"line\">j56.clear();</span><br><span class=\"line\">j78.clear();</span><br><span class=\"line\">j9.clear();</span><br><span class=\"line\">j1011.clear();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (keyword.contains(<span class=\"string\">\"\"</span>)) tsgflag=<span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String temp:contents)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (temp.contains(keyword))&#123;</span><br><span class=\"line\">        cishu++;</span><br><span class=\"line\">        SaveBuidlingInfo(count,cishu,tsgflag);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">SaveBuildingInfoj12,j34.....</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"number\">1</span> == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (contents[k].contains(<span class=\"string\">\"\"</span>) || contents[k].contains(<span class=\"string\">\"\"</span>) || contents[k].contains(<span class=\"string\">\"\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    ;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (c) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">            j12.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">            j34.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">            j56.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">            j78.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">            j9.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">            j1011.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    k++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li>NavigationViewTextView</li></ul><ul><li>MaterialDesign</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> Calendar c = Calendar.getInstance();</span><br><span class=\"line\"> c.setTimeZone(TimeZone.getTimeZone(<span class=\"string\">\"GMT+8:00\"</span>));</span><br><span class=\"line\"> mYear = String.valueOf(c.get(Calendar.YEAR)); <span class=\"comment\">// </span></span><br><span class=\"line\"> mMonth = String.valueOf(c.get(Calendar.MONTH) + <span class=\"number\">1</span>);<span class=\"comment\">// </span></span><br><span class=\"line\"> mDay = String.valueOf(c.get(Calendar.DAY_OF_MONTH));<span class=\"comment\">// </span></span><br><span class=\"line\"> mWay = String.valueOf(c.get(Calendar.DAY_OF_WEEK));</span><br><span class=\"line\"> mHour= c.get(Calendar.HOUR_OF_DAY);</span><br><span class=\"line\"> mMinute= c.get(Calendar.MINUTE);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span> (mHour&gt;=<span class=\"number\">8</span>&amp;&amp;mHour&lt;<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> (mHour&gt;=<span class=\"number\">10</span>&amp;&amp;mHour&lt;<span class=\"number\">12</span>)&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">13</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">14</span>)||(mHour==<span class=\"number\">15</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">15</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">16</span>)||(mHour==<span class=\"number\">17</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">17</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">18</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">18</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">19</span>)||(mHour==<span class=\"number\">20</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"string\">\"1\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">6</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"2\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">0</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"3\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">1</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"4\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">2</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"5\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">3</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"6\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">4</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"7\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">5</span>;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> Timestring=mYear + <span class=\"string\">\"\"</span> + mMonth + <span class=\"string\">\"\"</span> + mDay+<span class=\"string\">\"\"</span>+<span class=\"string\">\"\"</span>+mWay;</span><br><span class=\"line\"></span><br><span class=\"line\"> FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);</span><br><span class=\"line\"> fab.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">     <span class=\"meta\">@Override</span></span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">         Snackbar.make(view, <span class=\"string\">\"\"</span>+Timestring+<span class=\"string\">\"\\n\"</span>+nowtime+<span class=\"string\">\"  \"</span>+interesting[daycount], Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">                 .setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure><h1 id=\"GitHub\"><a href=\"#GitHub\" class=\"headerlink\" title=\"GitHub\"></a>GitHub</h1><p>GitHubfir<br>GitHub repository</p><ul><li><a href=\"https://github.com/romannurik/Android-SwipeToDismiss\" target=\"_blank\" rel=\"noopener\">Android-SwipeToDismiss</a></li><li>fir:<a href=\"https://github.com/hugeterry/UpdateDemo\" target=\"_blank\" rel=\"noopener\">UpdateDemo</a></li></ul><p>.</p><ul><li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ShakeService</span> <span class=\"keyword\">extends</span> <span class=\"title\">Service</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"ShakeService\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SensorManager mSensorManager;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> flag=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ShakeBinder shakebinder= <span class=\"keyword\">new</span> ShakeBinder();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String htmlbody=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</span><br><span class=\"line\">        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);</span><br><span class=\"line\">        Log.i(TAG,<span class=\"string\">\"Shake Service Create\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        flag=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</span><br><span class=\"line\">        mSensorManager.unregisterListener(mShakeListener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStart</span><span class=\"params\">(Intent intent, <span class=\"keyword\">int</span> startId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onStart(intent, startId);</span><br><span class=\"line\">        Log.i(TAG,<span class=\"string\">\"Shake Service Start\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">onStartCommand</span><span class=\"params\">(Intent intent, <span class=\"keyword\">int</span> flags, <span class=\"keyword\">int</span> startId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        mSensorManager.registerListener(mShakeListener,</span><br><span class=\"line\">                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),</span><br><span class=\"line\">                <span class=\"comment\">//SensorManager.SENSOR_DELAY_GAME,</span></span><br><span class=\"line\">                <span class=\"number\">50</span> * <span class=\"number\">1000</span>); <span class=\"comment\">//batch every 50 milliseconds</span></span><br><span class=\"line\">        htmlbody=intent.getStringExtra(<span class=\"string\">\"htmlbody\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onStartCommand(intent, flags, startId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> SensorEventListener mShakeListener = <span class=\"keyword\">new</span> SensorEventListener() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> SENSITIVITY = <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> BUFFER = <span class=\"number\">5</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">float</span>[] gravity = <span class=\"keyword\">new</span> <span class=\"keyword\">float</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> average = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fill = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAccuracyChanged</span><span class=\"params\">(Sensor sensor, <span class=\"keyword\">int</span> acc)</span> </span>&#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSensorChanged</span><span class=\"params\">(SensorEvent event)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> alpha = <span class=\"number\">0.8F</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                gravity[i] = alpha * gravity[i] + (<span class=\"number\">1</span> - alpha) * event.values[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">float</span> x = event.values[<span class=\"number\">0</span>] - gravity[<span class=\"number\">0</span>];</span><br><span class=\"line\">            <span class=\"keyword\">float</span> y = event.values[<span class=\"number\">1</span>] - gravity[<span class=\"number\">1</span>];</span><br><span class=\"line\">            <span class=\"keyword\">float</span> z = event.values[<span class=\"number\">2</span>] - gravity[<span class=\"number\">2</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fill &lt;= BUFFER) &#123;</span><br><span class=\"line\">                average += Math.abs(x) + Math.abs(y) + Math.abs(z);</span><br><span class=\"line\">                fill++;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"average:\"</span>+average);</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"average / BUFFER:\"</span>+(average / BUFFER));</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (average / BUFFER &gt;= SENSITIVITY) &#123;</span><br><span class=\"line\">                    handleShakeAction();<span class=\"comment\">//</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                average = <span class=\"number\">0</span>;</span><br><span class=\"line\">                fill = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">handleShakeAction</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        flag=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">        Toast.makeText(getApplicationContext(), <span class=\"string\">\"\"</span>, Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">        Intent intent= <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">        intent.putExtra(<span class=\"string\">\"htmlbody\"</span>,htmlbody);</span><br><span class=\"line\">        intent.addFlags(FLAG_ACTIVITY_NEW_TASK);</span><br><span class=\"line\">        intent.setClassName(<span class=\"keyword\">this</span>,<span class=\"string\">\"thinkwee.buptroom.ShakeTestActivity\"</span>);</span><br><span class=\"line\">        startActivity(intent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IBinder <span class=\"title\">onBind</span><span class=\"params\">(Intent intent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> shakebinder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ShakeBinder</span> <span class=\"keyword\">extends</span> <span class=\"title\">Binder</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>activity</li><li>2sactivity<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    webget = <span class=\"keyword\">new</span> Webget();</span><br><span class=\"line\">    webget.init(webView);</span><br><span class=\"line\">    HaveNetFlag = webget.WebInit();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            ImageView img = (ImageView) findViewById(R.id.welcomeimg);</span><br><span class=\"line\">            Animation animation = AnimationUtils.loadAnimation(WelcomeActivity.<span class=\"keyword\">this</span>, R.anim.enlarge);</span><br><span class=\"line\">            animation.setFillAfter(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">            img.startAnimation(animation);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">50</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            WrongNet = webget.getWrongnet();</span><br><span class=\"line\">            HaveNetFlag = webget.getHaveNetFlag();</span><br><span class=\"line\">            htmlbody = webget.getHtmlbody();</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2HaveNetFlag: \"</span> + HaveNetFlag);</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2Wrongnet: \"</span> + WrongNet);</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2html: \"</span> + htmlbody);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            Intent intent = <span class=\"keyword\">new</span> Intent(WelcomeActivity.<span class=\"keyword\">this</span>, MainActivity.class);</span><br><span class=\"line\">            intent.putExtra(<span class=\"string\">\"WrongNet\"</span>, WrongNet);</span><br><span class=\"line\">            intent.putExtra(<span class=\"string\">\"HtmlBody\"</span>, htmlbody);</span><br><span class=\"line\">            startActivity(intent);</span><br><span class=\"line\">            WelcomeActivity.<span class=\"keyword\">this</span>.finish();</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;, <span class=\"number\">2500</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul>","site":{"data":{}},"excerpt":"<hr><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-16/24437570-file_1484550130084_2fc4.png\" alt=\"\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>APP<br>,<br>android<br><a href=\"https://fir.im/buptroom\" target=\"_blank\" rel=\"noopener\">BuptRoom</a><br>repository:<a href=\"https://github.com/thinkwee/BuptRoom\" target=\"_blank\" rel=\"noopener\"></a><br>3<br>1<br><br>App:</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170123/205417119.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Android</li><li>Fragment</li><li>Java</li><li>Github</li><li>app</li><li></li><li></li><li>GitHub</li><li></li><li>Android Material Design</li><li></li><li>Handler</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p></p><ul><li>Android6.05.0permisson:</li></ul><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;uses-permission android:name=\"android.permission.INTERNET\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"&gt;&lt;/uses-permission&gt;</span><br><span class=\"line\">&lt;uses-permission android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"&gt;&lt;/uses-permission&gt;</span><br></pre></td></tr></table></figure><ul><li>jspparsewebviewloadurljavascriptjsoup-1.9.2.jar</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyWebViewClient</span> <span class=\"keyword\">extends</span> <span class=\"title\">WebViewClient</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldOverrideUrlLoading</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</span><br><span class=\"line\">        view.loadUrl(url);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageStarted</span><span class=\"params\">(WebView view, String url, Bitmap favicon)</span> </span>&#123;</span><br><span class=\"line\">        Log.d(<span class=\"string\">\"WebView\"</span>,<span class=\"string\">\"onPageStarted\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onPageStarted(view, url, favicon);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onPageFinished</span><span class=\"params\">(WebView view, String url)</span> </span>&#123;</span><br><span class=\"line\">        Log.d(<span class=\"string\">\"WebView\"</span>,<span class=\"string\">\"onPageFinished \"</span>);</span><br><span class=\"line\">        view.loadUrl(<span class=\"string\">\"javascript:window.handler.getContent(document.body.innerHTML);\"</span>);</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onPageFinished(view, url);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li>handlerjavascript,contentStringhtmlbody</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span>  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">JavascriptHandler</span></span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@JavascriptInterface</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">getContent</span><span class=\"params\">(String htmlContent)</span></span>&#123;</span><br><span class=\"line\">        Log.i(Tag,<span class=\"string\">\"html content: \"</span>+htmlContent);</span><br><span class=\"line\">        document= Jsoup.parse(htmlContent);</span><br><span class=\"line\">        htmlstring=htmlContent;</span><br><span class=\"line\">        content=document.getElementsByTag(<span class=\"string\">\"body\"</span>).text();</span><br><span class=\"line\">        Toast.makeText(MainActivity.<span class=\"keyword\">this</span>,<span class=\"string\">\"\"</span>,Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li></li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\">String contenttemp=content;</span><br><span class=\"line\">content=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">String[] contentstemp=contenttemp.split(<span class=\"string\">\",\"</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String temp:contentstemp)&#123;</span><br><span class=\"line\">    content=content+temp;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">contents=content.split(<span class=\"string\">\" |:\"</span>);</span><br><span class=\"line\">String showcontent=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">count=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> tsgflag=<span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> cishu=<span class=\"number\">0</span>;</span><br><span class=\"line\">j12.clear();</span><br><span class=\"line\">j34.clear();</span><br><span class=\"line\">j56.clear();</span><br><span class=\"line\">j78.clear();</span><br><span class=\"line\">j9.clear();</span><br><span class=\"line\">j1011.clear();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (keyword.contains(<span class=\"string\">\"\"</span>)) tsgflag=<span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (String temp:contents)&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (temp.contains(keyword))&#123;</span><br><span class=\"line\">        cishu++;</span><br><span class=\"line\">        SaveBuidlingInfo(count,cishu,tsgflag);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    count++;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">SaveBuildingInfoj12,j34.....</span><br><span class=\"line\"><span class=\"keyword\">while</span> (<span class=\"number\">1</span> == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (contents[k].contains(<span class=\"string\">\"\"</span>) || contents[k].contains(<span class=\"string\">\"\"</span>) || contents[k].contains(<span class=\"string\">\"\"</span>))</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    ;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (c) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">            j12.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">            j34.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">            j56.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">            j78.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">5</span>:</span><br><span class=\"line\">            j9.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"number\">6</span>:</span><br><span class=\"line\">            j1011.add(contents[k]);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    k++;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><ul><li>NavigationViewTextView</li></ul><ul><li>MaterialDesign</li></ul><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">final</span> Calendar c = Calendar.getInstance();</span><br><span class=\"line\"> c.setTimeZone(TimeZone.getTimeZone(<span class=\"string\">\"GMT+8:00\"</span>));</span><br><span class=\"line\"> mYear = String.valueOf(c.get(Calendar.YEAR)); <span class=\"comment\">// </span></span><br><span class=\"line\"> mMonth = String.valueOf(c.get(Calendar.MONTH) + <span class=\"number\">1</span>);<span class=\"comment\">// </span></span><br><span class=\"line\"> mDay = String.valueOf(c.get(Calendar.DAY_OF_MONTH));<span class=\"comment\">// </span></span><br><span class=\"line\"> mWay = String.valueOf(c.get(Calendar.DAY_OF_WEEK));</span><br><span class=\"line\"> mHour= c.get(Calendar.HOUR_OF_DAY);</span><br><span class=\"line\"> mMinute= c.get(Calendar.MINUTE);</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span> (mHour&gt;=<span class=\"number\">8</span>&amp;&amp;mHour&lt;<span class=\"number\">10</span>)&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> (mHour&gt;=<span class=\"number\">10</span>&amp;&amp;mHour&lt;<span class=\"number\">12</span>)&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">13</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">14</span>)||(mHour==<span class=\"number\">15</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">15</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">16</span>)||(mHour==<span class=\"number\">17</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">17</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">18</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\"> <span class=\"keyword\">if</span> ((mHour==<span class=\"number\">18</span>&amp;&amp;mMinute&gt;=<span class=\"number\">30</span>)||(mHour==<span class=\"number\">19</span>)||(mHour==<span class=\"number\">20</span>&amp;&amp;mMinute&lt;<span class=\"number\">30</span>))&#123;</span><br><span class=\"line\">     nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span></span><br><span class=\"line\">nowtime=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">if</span>(<span class=\"string\">\"1\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">6</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"2\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">0</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"3\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">1</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"4\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">2</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"5\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">3</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"6\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">4</span>;</span><br><span class=\"line\"> &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"string\">\"7\"</span>.equals(mWay))&#123;</span><br><span class=\"line\">     mWay =<span class=\"string\">\"\"</span>;</span><br><span class=\"line\">     daycount=<span class=\"number\">5</span>;</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"> Timestring=mYear + <span class=\"string\">\"\"</span> + mMonth + <span class=\"string\">\"\"</span> + mDay+<span class=\"string\">\"\"</span>+<span class=\"string\">\"\"</span>+mWay;</span><br><span class=\"line\"></span><br><span class=\"line\"> FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);</span><br><span class=\"line\"> fab.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">     <span class=\"meta\">@Override</span></span><br><span class=\"line\">     <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</span><br><span class=\"line\">         Snackbar.make(view, <span class=\"string\">\"\"</span>+Timestring+<span class=\"string\">\"\\n\"</span>+nowtime+<span class=\"string\">\"  \"</span>+interesting[daycount], Snackbar.LENGTH_SHORT)</span><br><span class=\"line\">                 .setAction(<span class=\"string\">\"Action\"</span>, <span class=\"keyword\">null</span>).show();</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\"> &#125;);</span><br></pre></td></tr></table></figure><h1 id=\"GitHub\"><a href=\"#GitHub\" class=\"headerlink\" title=\"GitHub\"></a>GitHub</h1><p>GitHubfir<br>GitHub repository</p><ul><li><a href=\"https://github.com/romannurik/Android-SwipeToDismiss\" target=\"_blank\" rel=\"noopener\">Android-SwipeToDismiss</a></li><li>fir:<a href=\"https://github.com/hugeterry/UpdateDemo\" target=\"_blank\" rel=\"noopener\">UpdateDemo</a></li></ul><p>.</p><ul><li><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ShakeService</span> <span class=\"keyword\">extends</span> <span class=\"title\">Service</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"ShakeService\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> SensorManager mSensorManager;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> flag=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> ShakeBinder shakebinder= <span class=\"keyword\">new</span> ShakeBinder();</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String htmlbody=<span class=\"string\">\"\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</span><br><span class=\"line\">        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);</span><br><span class=\"line\">        Log.i(TAG,<span class=\"string\">\"Shake Service Create\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        flag=<span class=\"keyword\">false</span>;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</span><br><span class=\"line\">        mSensorManager.unregisterListener(mShakeListener);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStart</span><span class=\"params\">(Intent intent, <span class=\"keyword\">int</span> startId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onStart(intent, startId);</span><br><span class=\"line\">        Log.i(TAG,<span class=\"string\">\"Shake Service Start\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">onStartCommand</span><span class=\"params\">(Intent intent, <span class=\"keyword\">int</span> flags, <span class=\"keyword\">int</span> startId)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        mSensorManager.registerListener(mShakeListener,</span><br><span class=\"line\">                mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),</span><br><span class=\"line\">                <span class=\"comment\">//SensorManager.SENSOR_DELAY_GAME,</span></span><br><span class=\"line\">                <span class=\"number\">50</span> * <span class=\"number\">1000</span>); <span class=\"comment\">//batch every 50 milliseconds</span></span><br><span class=\"line\">        htmlbody=intent.getStringExtra(<span class=\"string\">\"htmlbody\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.onStartCommand(intent, flags, startId);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> SensorEventListener mShakeListener = <span class=\"keyword\">new</span> SensorEventListener() &#123;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> SENSITIVITY = <span class=\"number\">10</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> BUFFER = <span class=\"number\">5</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">float</span>[] gravity = <span class=\"keyword\">new</span> <span class=\"keyword\">float</span>[<span class=\"number\">3</span>];</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> average = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> fill = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onAccuracyChanged</span><span class=\"params\">(Sensor sensor, <span class=\"keyword\">int</span> acc)</span> </span>&#123;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSensorChanged</span><span class=\"params\">(SensorEvent event)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">float</span> alpha = <span class=\"number\">0.8F</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">3</span>; i++) &#123;</span><br><span class=\"line\">                gravity[i] = alpha * gravity[i] + (<span class=\"number\">1</span> - alpha) * event.values[i];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">float</span> x = event.values[<span class=\"number\">0</span>] - gravity[<span class=\"number\">0</span>];</span><br><span class=\"line\">            <span class=\"keyword\">float</span> y = event.values[<span class=\"number\">1</span>] - gravity[<span class=\"number\">1</span>];</span><br><span class=\"line\">            <span class=\"keyword\">float</span> z = event.values[<span class=\"number\">2</span>] - gravity[<span class=\"number\">2</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (fill &lt;= BUFFER) &#123;</span><br><span class=\"line\">                average += Math.abs(x) + Math.abs(y) + Math.abs(z);</span><br><span class=\"line\">                fill++;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"average:\"</span>+average);</span><br><span class=\"line\">                Log.i(TAG, <span class=\"string\">\"average / BUFFER:\"</span>+(average / BUFFER));</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (average / BUFFER &gt;= SENSITIVITY) &#123;</span><br><span class=\"line\">                    handleShakeAction();<span class=\"comment\">//</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                average = <span class=\"number\">0</span>;</span><br><span class=\"line\">                fill = <span class=\"number\">0</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">handleShakeAction</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        flag=<span class=\"keyword\">true</span>;</span><br><span class=\"line\">        Toast.makeText(getApplicationContext(), <span class=\"string\">\"\"</span>, Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">        Intent intent= <span class=\"keyword\">new</span> Intent();</span><br><span class=\"line\">        intent.putExtra(<span class=\"string\">\"htmlbody\"</span>,htmlbody);</span><br><span class=\"line\">        intent.addFlags(FLAG_ACTIVITY_NEW_TASK);</span><br><span class=\"line\">        intent.setClassName(<span class=\"keyword\">this</span>,<span class=\"string\">\"thinkwee.buptroom.ShakeTestActivity\"</span>);</span><br><span class=\"line\">        startActivity(intent);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IBinder <span class=\"title\">onBind</span><span class=\"params\">(Intent intent)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// TODO Auto-generated method stub</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> shakebinder;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ShakeBinder</span> <span class=\"keyword\">extends</span> <span class=\"title\">Binder</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>activity</li><li>2sactivity<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    webget = <span class=\"keyword\">new</span> Webget();</span><br><span class=\"line\">    webget.init(webView);</span><br><span class=\"line\">    HaveNetFlag = webget.WebInit();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            ImageView img = (ImageView) findViewById(R.id.welcomeimg);</span><br><span class=\"line\">            Animation animation = AnimationUtils.loadAnimation(WelcomeActivity.<span class=\"keyword\">this</span>, R.anim.enlarge);</span><br><span class=\"line\">            animation.setFillAfter(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">            img.startAnimation(animation);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">50</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"comment\">//execute the task</span></span><br><span class=\"line\">            WrongNet = webget.getWrongnet();</span><br><span class=\"line\">            HaveNetFlag = webget.getHaveNetFlag();</span><br><span class=\"line\">            htmlbody = webget.getHtmlbody();</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2HaveNetFlag: \"</span> + HaveNetFlag);</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2Wrongnet: \"</span> + WrongNet);</span><br><span class=\"line\">            Log.i(<span class=\"string\">\"welcome\"</span>, <span class=\"string\">\"2html: \"</span> + htmlbody);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;, <span class=\"number\">2000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">new</span> Handler().postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            Intent intent = <span class=\"keyword\">new</span> Intent(WelcomeActivity.<span class=\"keyword\">this</span>, MainActivity.class);</span><br><span class=\"line\">            intent.putExtra(<span class=\"string\">\"WrongNet\"</span>, WrongNet);</span><br><span class=\"line\">            intent.putExtra(<span class=\"string\">\"HtmlBody\"</span>, htmlbody);</span><br><span class=\"line\">            startActivity(intent);</span><br><span class=\"line\">            WelcomeActivity.<span class=\"keyword\">this</span>.finish();</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;, <span class=\"number\">2500</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Android:BuptRoom","path":"2017/01/16/buptroomreview/","eyeCatchImage":null,"excerpt":"<hr><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/17-1-16/24437570-file_1484550130084_2fc4.png\" alt=\"\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>APP<br>,<br>android<br><a href=\"https://fir.im/buptroom\" target=\"_blank\" rel=\"noopener\">BuptRoom</a><br>repository:<a href=\"https://github.com/thinkwee/BuptRoom\" target=\"_blank\" rel=\"noopener\"></a><br>3<br>1<br><br>App:</p>","date":"2017-01-16T03:56:39.000Z","pv":0,"totalPV":0,"categories":"Android","tags":["code","android"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Melodia","date":"2017-05-26T11:18:01.000Z","_content":"***\n-\t[Melodia](http://thinkwee.top/2017/03/09/dachuang/)\n-\tandroidPython\n\n<!--more-->\n\n# \n-\tandroidjsonbase64\n-\twavmidijsonrequest1datawavmd5wavwavmd5.midmd5.png,md5jsonrequest2,datamd5md5midi\n\n# \n```Python\n\t# -*- coding:utf-8 -*- \n\t# ! usr/bin/python\n\n\tfrom socket import *\n\timport time\n\timport threading\n\timport os\n\timport md5\n\timport warnings\n\n\tHost = ''\n\tPort = 2017\n\tAddr = (Host, Port)\n\tmidi_dict = {}\n\n\twarnings.filterwarnings(\"ignore\")\n\n\n\tdef md5_encode(src):\n\t\tm1 = md5.new()\n\t\tm1.update(src)\n\t\treturn m1.hexdigest()\n\n\n\tdef tcplink(sock, addr):\n\t\tsessnum = 0\n\t\tmusic_data = ''\n\t\twhile True:\n\t\t\tdata = sock.recv(1480)\n\t\t\tif data[-9:]=='endbidou1':\n\t\t\t\tprint 'wav recv finished'\n\t\t\t\tmusic_data+=data\n\t\t\t\tmusic_data=music_data[:-9]\n\t\t\t\tmidi_data = eval(music_data)\n\t\t\tsessnum = midi_data['request']  \n\t\t\t\tif midi_data['request'] == 1:\n\t\t\t\t\tflag_md5 = md5_encode(str(time.time()))\n\t\t\t\t\tprint 'md5: ', flag_md5\n\t\t\t\t\twav_name = flag_md5 + '.wav'\n\t\t\t\t\twith open(wav_name, 'w+') as f:\n\t\t\t\t\t\tf.write(midi_data['data'].decode('base64'))\n\t\t\t\t\t\tf.close()\n\t\t\t\t\tn = midi_data['config']['n'];\n\t\t\t\t\tm = midi_data['config']['m'];\n\t\t\t\t\tw = midi_data['config']['w'];\n\t\t\t\t\tmidi_name = flag_md5 + '.mid'\n\t\t\t\t\twith open(midi_name, 'w') as f:\n\t\t\t\t\t\tf.close()\n\t\t\t\t\tshellmid = '../mldm/hum2midi.py -n '+str(n)+' -m '+str(m)+' -w '+str(w)+' -o ' + midi_name + ' ' + wav_name\n\t\t\tprint \"running wav2midi shell\"\n\t\t\t\t\tretmid = os.system(shellmid)\n\t\t\t\t\tretmid >= 8\n\t\t\t\t\tif retmid == 0:\n\t\t\t\tprint 'generate midi successful'\n\t\t\t\tshellpng = 'mono ../mlds/sheet '+midi_name+' '+flag_md5\n\t\t\t\tretpng = os.system(shellpng)\n\t\t\t\tif retpng == 0:\n\t\t\t\t\t\t\tsock.send(flag_md5.encode())\n\t\t\t\t\t\t\tprint 'generate png successful'\n\t\t\t\t\t\t\tmidi_dict[flag_md5] = midi_name\n\t\t\t\t\t\t\tbreak\n\t\t\t\telse:\n\t\t\t\tprint 'generate png error'\n\t\t\t\tbreak\n\t\t\t\t\telse:\n\t\t\t\t\t\tprint 'generate midi error'\n\t\t\t\t\t\tbreak\n\t\t\t\telif midi_data['request'] == 2:\n\t\t\t\t\tflag = midi_data['data']\n\t\t\t\t\tif flag in midi_dict.keys():\n\t\t\t\t\t\tfo = open(flag+'.mid', 'rb')\n\t\t\t\t\t\twhile True:\n\t\t\t\t\t\t\tfiledata = fo.read(1024)\n\t\t\t\t\t\t\tif not filedata:\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tsock.send(filedata)\n\t\t\t\tprint 'midi file sent'\n\t\t\t\t\t\tfo.close()\n\t\t\t\t\t\tbreak\n\t\t\t\t\telse:\n\t\t\t\t\t\tprint 'can not find midi'\n\t\t\t\t\t\tbreak\n\t\t\t\telse:\n\t\t\t\t\tprint 'json error'\n\t\t\telse:\n\t\t\t\tmusic_data += data\n\t\tsock.close()\n\t\tprint 'session '+str(sessnum)+' for '+str(addr)+' finished'\n\n\ttcpSerSock = socket(AF_INET, SOCK_STREAM)\n\ttcpSerSock.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)\n\ttcpSerSock.bind(Addr)\n\ttcpSerSock.listen(5)\n\n\twhile True:\n\t\ttcpCliSock, tcpCliAddr = tcpSerSock.accept()\n\t\tprint 'add ', tcpCliAddr\n\t\tt = threading.Thread(target=tcplink, args=(tcpCliSock, tcpCliAddr))\n\t\tt.start()\n\ttcpSerSock.close()\n```","source":"_posts/dachuangserver.md","raw":"---\ntitle: Melodia\ndate: 2017-05-26 19:18:01\ntags: [code,server,linux]\ncategories: Python\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/20170526/191951436.jpg\n---\n***\n-\t[Melodia](http://thinkwee.top/2017/03/09/dachuang/)\n-\tandroidPython\n\n<!--more-->\n\n# \n-\tandroidjsonbase64\n-\twavmidijsonrequest1datawavmd5wavwavmd5.midmd5.png,md5jsonrequest2,datamd5md5midi\n\n# \n```Python\n\t# -*- coding:utf-8 -*- \n\t# ! usr/bin/python\n\n\tfrom socket import *\n\timport time\n\timport threading\n\timport os\n\timport md5\n\timport warnings\n\n\tHost = ''\n\tPort = 2017\n\tAddr = (Host, Port)\n\tmidi_dict = {}\n\n\twarnings.filterwarnings(\"ignore\")\n\n\n\tdef md5_encode(src):\n\t\tm1 = md5.new()\n\t\tm1.update(src)\n\t\treturn m1.hexdigest()\n\n\n\tdef tcplink(sock, addr):\n\t\tsessnum = 0\n\t\tmusic_data = ''\n\t\twhile True:\n\t\t\tdata = sock.recv(1480)\n\t\t\tif data[-9:]=='endbidou1':\n\t\t\t\tprint 'wav recv finished'\n\t\t\t\tmusic_data+=data\n\t\t\t\tmusic_data=music_data[:-9]\n\t\t\t\tmidi_data = eval(music_data)\n\t\t\tsessnum = midi_data['request']  \n\t\t\t\tif midi_data['request'] == 1:\n\t\t\t\t\tflag_md5 = md5_encode(str(time.time()))\n\t\t\t\t\tprint 'md5: ', flag_md5\n\t\t\t\t\twav_name = flag_md5 + '.wav'\n\t\t\t\t\twith open(wav_name, 'w+') as f:\n\t\t\t\t\t\tf.write(midi_data['data'].decode('base64'))\n\t\t\t\t\t\tf.close()\n\t\t\t\t\tn = midi_data['config']['n'];\n\t\t\t\t\tm = midi_data['config']['m'];\n\t\t\t\t\tw = midi_data['config']['w'];\n\t\t\t\t\tmidi_name = flag_md5 + '.mid'\n\t\t\t\t\twith open(midi_name, 'w') as f:\n\t\t\t\t\t\tf.close()\n\t\t\t\t\tshellmid = '../mldm/hum2midi.py -n '+str(n)+' -m '+str(m)+' -w '+str(w)+' -o ' + midi_name + ' ' + wav_name\n\t\t\tprint \"running wav2midi shell\"\n\t\t\t\t\tretmid = os.system(shellmid)\n\t\t\t\t\tretmid >= 8\n\t\t\t\t\tif retmid == 0:\n\t\t\t\tprint 'generate midi successful'\n\t\t\t\tshellpng = 'mono ../mlds/sheet '+midi_name+' '+flag_md5\n\t\t\t\tretpng = os.system(shellpng)\n\t\t\t\tif retpng == 0:\n\t\t\t\t\t\t\tsock.send(flag_md5.encode())\n\t\t\t\t\t\t\tprint 'generate png successful'\n\t\t\t\t\t\t\tmidi_dict[flag_md5] = midi_name\n\t\t\t\t\t\t\tbreak\n\t\t\t\telse:\n\t\t\t\tprint 'generate png error'\n\t\t\t\tbreak\n\t\t\t\t\telse:\n\t\t\t\t\t\tprint 'generate midi error'\n\t\t\t\t\t\tbreak\n\t\t\t\telif midi_data['request'] == 2:\n\t\t\t\t\tflag = midi_data['data']\n\t\t\t\t\tif flag in midi_dict.keys():\n\t\t\t\t\t\tfo = open(flag+'.mid', 'rb')\n\t\t\t\t\t\twhile True:\n\t\t\t\t\t\t\tfiledata = fo.read(1024)\n\t\t\t\t\t\t\tif not filedata:\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tsock.send(filedata)\n\t\t\t\tprint 'midi file sent'\n\t\t\t\t\t\tfo.close()\n\t\t\t\t\t\tbreak\n\t\t\t\t\telse:\n\t\t\t\t\t\tprint 'can not find midi'\n\t\t\t\t\t\tbreak\n\t\t\t\telse:\n\t\t\t\t\tprint 'json error'\n\t\t\telse:\n\t\t\t\tmusic_data += data\n\t\tsock.close()\n\t\tprint 'session '+str(sessnum)+' for '+str(addr)+' finished'\n\n\ttcpSerSock = socket(AF_INET, SOCK_STREAM)\n\ttcpSerSock.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)\n\ttcpSerSock.bind(Addr)\n\ttcpSerSock.listen(5)\n\n\twhile True:\n\t\ttcpCliSock, tcpCliAddr = tcpSerSock.accept()\n\t\tprint 'add ', tcpCliAddr\n\t\tt = threading.Thread(target=tcplink, args=(tcpCliSock, tcpCliAddr))\n\t\tt.start()\n\ttcpSerSock.close()\n```","slug":"dachuangserver","published":1,"updated":"2018-07-23T01:28:38.502Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170526/191951436.jpg"],"comments":1,"layout":"post","link":"","_id":"cjmd072cy0019qcw6dcpt8kzu","content":"<hr><ul><li><a href=\"http://thinkwee.top/2017/03/09/dachuang/\">Melodia</a></li><li>androidPython</li></ul><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>androidjsonbase64</li><li>wavmidijsonrequest1datawavmd5wavwavmd5.midmd5.png,md5jsonrequest2,datamd5md5midi</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*- </span></span><br><span class=\"line\"><span class=\"comment\"># ! usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> socket <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> md5</span><br><span class=\"line\"><span class=\"keyword\">import</span> warnings</span><br><span class=\"line\"></span><br><span class=\"line\">Host = <span class=\"string\">''</span></span><br><span class=\"line\">Port = <span class=\"number\">2017</span></span><br><span class=\"line\">Addr = (Host, Port)</span><br><span class=\"line\">midi_dict = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">warnings.filterwarnings(<span class=\"string\">\"ignore\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">md5_encode</span><span class=\"params\">(src)</span>:</span></span><br><span class=\"line\">\tm1 = md5.new()</span><br><span class=\"line\">\tm1.update(src)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> m1.hexdigest()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tcplink</span><span class=\"params\">(sock, addr)</span>:</span></span><br><span class=\"line\">\tsessnum = <span class=\"number\">0</span></span><br><span class=\"line\">\tmusic_data = <span class=\"string\">''</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\t\tdata = sock.recv(<span class=\"number\">1480</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> data[<span class=\"number\">-9</span>:]==<span class=\"string\">'endbidou1'</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'wav recv finished'</span></span><br><span class=\"line\">\t\t\tmusic_data+=data</span><br><span class=\"line\">\t\t\tmusic_data=music_data[:<span class=\"number\">-9</span>]</span><br><span class=\"line\">\t\t\tmidi_data = eval(music_data)</span><br><span class=\"line\">\t\tsessnum = midi_data[<span class=\"string\">'request'</span>]  </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> midi_data[<span class=\"string\">'request'</span>] == <span class=\"number\">1</span>:</span><br><span class=\"line\">\t\t\t\tflag_md5 = md5_encode(str(time.time()))</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'md5: '</span>, flag_md5</span><br><span class=\"line\">\t\t\t\twav_name = flag_md5 + <span class=\"string\">'.wav'</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">with</span> open(wav_name, <span class=\"string\">'w+'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\t\t\t\t\tf.write(midi_data[<span class=\"string\">'data'</span>].decode(<span class=\"string\">'base64'</span>))</span><br><span class=\"line\">\t\t\t\t\tf.close()</span><br><span class=\"line\">\t\t\t\tn = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'n'</span>];</span><br><span class=\"line\">\t\t\t\tm = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'m'</span>];</span><br><span class=\"line\">\t\t\t\tw = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'w'</span>];</span><br><span class=\"line\">\t\t\t\tmidi_name = flag_md5 + <span class=\"string\">'.mid'</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">with</span> open(midi_name, <span class=\"string\">'w'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\t\t\t\t\tf.close()</span><br><span class=\"line\">\t\t\t\tshellmid = <span class=\"string\">'../mldm/hum2midi.py -n '</span>+str(n)+<span class=\"string\">' -m '</span>+str(m)+<span class=\"string\">' -w '</span>+str(w)+<span class=\"string\">' -o '</span> + midi_name + <span class=\"string\">' '</span> + wav_name</span><br><span class=\"line\">\t\t<span class=\"keyword\">print</span> <span class=\"string\">\"running wav2midi shell\"</span></span><br><span class=\"line\">\t\t\t\tretmid = os.system(shellmid)</span><br><span class=\"line\">\t\t\t\tretmid &gt;= <span class=\"number\">8</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> retmid == <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate midi successful'</span></span><br><span class=\"line\">\t\t\tshellpng = <span class=\"string\">'mono ../mlds/sheet '</span>+midi_name+<span class=\"string\">' '</span>+flag_md5</span><br><span class=\"line\">\t\t\tretpng = os.system(shellpng)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> retpng == <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t\t\t\tsock.send(flag_md5.encode())</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate png successful'</span></span><br><span class=\"line\">\t\t\t\t\t\tmidi_dict[flag_md5] = midi_name</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate png error'</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate midi error'</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">elif</span> midi_data[<span class=\"string\">'request'</span>] == <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\t\tflag = midi_data[<span class=\"string\">'data'</span>]</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> flag <span class=\"keyword\">in</span> midi_dict.keys():</span><br><span class=\"line\">\t\t\t\t\tfo = open(flag+<span class=\"string\">'.mid'</span>, <span class=\"string\">'rb'</span>)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\t\t\t\t\t\tfiledata = fo.read(<span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> <span class=\"keyword\">not</span> filedata:</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t\t\tsock.send(filedata)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'midi file sent'</span></span><br><span class=\"line\">\t\t\t\t\tfo.close()</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'can not find midi'</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'json error'</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\tmusic_data += data</span><br><span class=\"line\">\tsock.close()</span><br><span class=\"line\">\t<span class=\"keyword\">print</span> <span class=\"string\">'session '</span>+str(sessnum)+<span class=\"string\">' for '</span>+str(addr)+<span class=\"string\">' finished'</span></span><br><span class=\"line\"></span><br><span class=\"line\">tcpSerSock = socket(AF_INET, SOCK_STREAM)</span><br><span class=\"line\">tcpSerSock.setsockopt(SOL_SOCKET, SO_REUSEADDR, <span class=\"number\">1</span>)</span><br><span class=\"line\">tcpSerSock.bind(Addr)</span><br><span class=\"line\">tcpSerSock.listen(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\ttcpCliSock, tcpCliAddr = tcpSerSock.accept()</span><br><span class=\"line\">\t<span class=\"keyword\">print</span> <span class=\"string\">'add '</span>, tcpCliAddr</span><br><span class=\"line\">\tt = threading.Thread(target=tcplink, args=(tcpCliSock, tcpCliAddr))</span><br><span class=\"line\">\tt.start()</span><br><span class=\"line\">tcpSerSock.close()</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<hr><ul><li><a href=\"http://thinkwee.top/2017/03/09/dachuang/\">Melodia</a></li><li>androidPython</li></ul>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>androidjsonbase64</li><li>wavmidijsonrequest1datawavmd5wavwavmd5.midmd5.png,md5jsonrequest2,datamd5md5midi</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding:utf-8 -*- </span></span><br><span class=\"line\"><span class=\"comment\"># ! usr/bin/python</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">from</span> socket <span class=\"keyword\">import</span> *</span><br><span class=\"line\"><span class=\"keyword\">import</span> time</span><br><span class=\"line\"><span class=\"keyword\">import</span> threading</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> md5</span><br><span class=\"line\"><span class=\"keyword\">import</span> warnings</span><br><span class=\"line\"></span><br><span class=\"line\">Host = <span class=\"string\">''</span></span><br><span class=\"line\">Port = <span class=\"number\">2017</span></span><br><span class=\"line\">Addr = (Host, Port)</span><br><span class=\"line\">midi_dict = &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">warnings.filterwarnings(<span class=\"string\">\"ignore\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">md5_encode</span><span class=\"params\">(src)</span>:</span></span><br><span class=\"line\">\tm1 = md5.new()</span><br><span class=\"line\">\tm1.update(src)</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> m1.hexdigest()</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">tcplink</span><span class=\"params\">(sock, addr)</span>:</span></span><br><span class=\"line\">\tsessnum = <span class=\"number\">0</span></span><br><span class=\"line\">\tmusic_data = <span class=\"string\">''</span></span><br><span class=\"line\">\t<span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\t\tdata = sock.recv(<span class=\"number\">1480</span>)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> data[<span class=\"number\">-9</span>:]==<span class=\"string\">'endbidou1'</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'wav recv finished'</span></span><br><span class=\"line\">\t\t\tmusic_data+=data</span><br><span class=\"line\">\t\t\tmusic_data=music_data[:<span class=\"number\">-9</span>]</span><br><span class=\"line\">\t\t\tmidi_data = eval(music_data)</span><br><span class=\"line\">\t\tsessnum = midi_data[<span class=\"string\">'request'</span>]  </span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> midi_data[<span class=\"string\">'request'</span>] == <span class=\"number\">1</span>:</span><br><span class=\"line\">\t\t\t\tflag_md5 = md5_encode(str(time.time()))</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'md5: '</span>, flag_md5</span><br><span class=\"line\">\t\t\t\twav_name = flag_md5 + <span class=\"string\">'.wav'</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">with</span> open(wav_name, <span class=\"string\">'w+'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\t\t\t\t\tf.write(midi_data[<span class=\"string\">'data'</span>].decode(<span class=\"string\">'base64'</span>))</span><br><span class=\"line\">\t\t\t\t\tf.close()</span><br><span class=\"line\">\t\t\t\tn = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'n'</span>];</span><br><span class=\"line\">\t\t\t\tm = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'m'</span>];</span><br><span class=\"line\">\t\t\t\tw = midi_data[<span class=\"string\">'config'</span>][<span class=\"string\">'w'</span>];</span><br><span class=\"line\">\t\t\t\tmidi_name = flag_md5 + <span class=\"string\">'.mid'</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">with</span> open(midi_name, <span class=\"string\">'w'</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">\t\t\t\t\tf.close()</span><br><span class=\"line\">\t\t\t\tshellmid = <span class=\"string\">'../mldm/hum2midi.py -n '</span>+str(n)+<span class=\"string\">' -m '</span>+str(m)+<span class=\"string\">' -w '</span>+str(w)+<span class=\"string\">' -o '</span> + midi_name + <span class=\"string\">' '</span> + wav_name</span><br><span class=\"line\">\t\t<span class=\"keyword\">print</span> <span class=\"string\">\"running wav2midi shell\"</span></span><br><span class=\"line\">\t\t\t\tretmid = os.system(shellmid)</span><br><span class=\"line\">\t\t\t\tretmid &gt;= <span class=\"number\">8</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> retmid == <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate midi successful'</span></span><br><span class=\"line\">\t\t\tshellpng = <span class=\"string\">'mono ../mlds/sheet '</span>+midi_name+<span class=\"string\">' '</span>+flag_md5</span><br><span class=\"line\">\t\t\tretpng = os.system(shellpng)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> retpng == <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t\t\t\tsock.send(flag_md5.encode())</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate png successful'</span></span><br><span class=\"line\">\t\t\t\t\t\tmidi_dict[flag_md5] = midi_name</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate png error'</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'generate midi error'</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">elif</span> midi_data[<span class=\"string\">'request'</span>] == <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\t\tflag = midi_data[<span class=\"string\">'data'</span>]</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> flag <span class=\"keyword\">in</span> midi_dict.keys():</span><br><span class=\"line\">\t\t\t\t\tfo = open(flag+<span class=\"string\">'.mid'</span>, <span class=\"string\">'rb'</span>)</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\t\t\t\t\t\tfiledata = fo.read(<span class=\"number\">1024</span>)</span><br><span class=\"line\">\t\t\t\t\t\t<span class=\"keyword\">if</span> <span class=\"keyword\">not</span> filedata:</span><br><span class=\"line\">\t\t\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t\t\tsock.send(filedata)</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'midi file sent'</span></span><br><span class=\"line\">\t\t\t\t\tfo.close()</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'can not find midi'</span></span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">print</span> <span class=\"string\">'json error'</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span>:</span><br><span class=\"line\">\t\t\tmusic_data += data</span><br><span class=\"line\">\tsock.close()</span><br><span class=\"line\">\t<span class=\"keyword\">print</span> <span class=\"string\">'session '</span>+str(sessnum)+<span class=\"string\">' for '</span>+str(addr)+<span class=\"string\">' finished'</span></span><br><span class=\"line\"></span><br><span class=\"line\">tcpSerSock = socket(AF_INET, SOCK_STREAM)</span><br><span class=\"line\">tcpSerSock.setsockopt(SOL_SOCKET, SO_REUSEADDR, <span class=\"number\">1</span>)</span><br><span class=\"line\">tcpSerSock.bind(Addr)</span><br><span class=\"line\">tcpSerSock.listen(<span class=\"number\">5</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> <span class=\"keyword\">True</span>:</span><br><span class=\"line\">\ttcpCliSock, tcpCliAddr = tcpSerSock.accept()</span><br><span class=\"line\">\t<span class=\"keyword\">print</span> <span class=\"string\">'add '</span>, tcpCliAddr</span><br><span class=\"line\">\tt = threading.Thread(target=tcplink, args=(tcpCliSock, tcpCliAddr))</span><br><span class=\"line\">\tt.start()</span><br><span class=\"line\">tcpSerSock.close()</span><br></pre></td></tr></table></figure>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Melodia","path":"2017/05/26/dachuangserver/","eyeCatchImage":null,"excerpt":"<hr><ul><li><a href=\"http://thinkwee.top/2017/03/09/dachuang/\">Melodia</a></li><li>androidPython</li></ul>","date":"2017-05-26T11:18:01.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["code","server","linux"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-09-14T12:17:29.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180914/hJk7lgJGJb.JPG"],"html":true,"_content":"diversity\nE\nDPPBen Taskar2012Determinantal point processes for machine learningvideoslectures.net120pdf250tutorial20132017youtubeWray Buntine\n\n-\tDeterminantal point processes for machine learning ppt&pdf (Alex Kulesza , Ben Taskar)\n-\tDeterminantal point processes (Laurent Decreusefond , Ian Flint , Nicolas Privault)\n-\tDeterminantal Point Process and its Time-varying model (A/Prof Richard Yi Da Xu)\n-\tk-DPPs: Fixed-Size Determinantal Point Processes (Alex Kulesza , Ben Taskar)\n-\tOn adding a list of numbers (and other one-dependent determinantal processes) (Alexei Borodin , Persi Diaconis , Jason Fulman)\n-\tDeterminantal point processes (Alexei Borodin)\n\n<!--more-->\n\n# \n\n## \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180914/6k9chBkjFc.png?imageslim)\n-\t52(7+9)%10=696\n-\t0912478[0,9]n\n\t-\tn\n\t-\t\n-\t\n\t-\tdescent\n\t-\t\n\t-\tdescent pattern\n\n## \n-\t$B={0,1,2,....,b-1}$$B_1,B_2,...,B_n$$B_i > B_{i+1}$i$X_i$10$D=\\{i:X_i=1\\}$\n-\tfact 1\n$$\n\\forall i \\in [n-1] \\\\\nP(X_i=1) = \\frac 12 - \\frac{1}{2b} \\\\\n= \\frac {C_b^2}{b^2} \\\\\nVar(X_i)=\\frac 14 - \\frac{1}{4b^2} \\\\\n$$\n-\tfact 2\n$$\n\\forall i,j \\ with \\ 1 \\leq i < i+j \\leq n \\\\\nP(X_i=X_{i+1}=...=X_{i+j-1}=1) = \\frac {C_b^{j+1}}{b^{j+1}} \\\\ \nCov(X_i,X_{i+1})=-\\frac {1}{12}(1-\\frac{1}{b^2}) \\\\\n$$\n-\tfact 3${X_i}$\n\t-\t$X_i$$X_{i+j}$\n\t-\t1${X_i}$\n-\t\n-\tfact 4k[n-1]k$P(X_i=1)$$X_1,...,X_{n-1}$kk,$\\rho (A)$:\n$$\n\\rho (A) = \\prod _1 ^k [\\frac{C_b^{a_{i+1}}}{b^{a_{i+1}}}] \n$$\n-\tfact 5$X_i$k$X_i$1k+1k+1k1$s_1,...,s_k$$s_0=0,s_{k+1}=n$ij\n$$\nC_{s_{j+1}-s_i+b-1}^{b-1}\n$$\n-\t$\\frac{1}{b^n}$\n$$\np(X) = \\frac{1}{b^n} det(C_{s_{j+1}-s_i+b-1}^{b-1})\n$$\n-\t280.03516\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180915/IGF2j3CjAj.JPG)\n\n## \n-\tXXX$2^{|X|}$P$X={1,2,...,n-1}$nbP$\\rho$\n$$\n\\rho (A) = P\\{S:A \\in S\\}\n$$\n-\t$K(x,y)$\n$$\n\\rho (A) = det(K(x,y))_{x,y \\in A}\n$$\n-\t$|A|x|A|$\n## -\n## \n## \n## ","source":"_posts/dpp.md","raw":"---\ntitle: \ndate: 2018-09-14 20:17:29\ncategories: \ntags:\n  - dpp\n  - math\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180914/hJk7lgJGJb.JPG\nhtml: true\n---\ndiversity\nE\nDPPBen Taskar2012Determinantal point processes for machine learningvideoslectures.net120pdf250tutorial20132017youtubeWray Buntine\n\n-\tDeterminantal point processes for machine learning ppt&pdf (Alex Kulesza , Ben Taskar)\n-\tDeterminantal point processes (Laurent Decreusefond , Ian Flint , Nicolas Privault)\n-\tDeterminantal Point Process and its Time-varying model (A/Prof Richard Yi Da Xu)\n-\tk-DPPs: Fixed-Size Determinantal Point Processes (Alex Kulesza , Ben Taskar)\n-\tOn adding a list of numbers (and other one-dependent determinantal processes) (Alexei Borodin , Persi Diaconis , Jason Fulman)\n-\tDeterminantal point processes (Alexei Borodin)\n\n<!--more-->\n\n# \n\n## \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180914/6k9chBkjFc.png?imageslim)\n-\t52(7+9)%10=696\n-\t0912478[0,9]n\n\t-\tn\n\t-\t\n-\t\n\t-\tdescent\n\t-\t\n\t-\tdescent pattern\n\n## \n-\t$B={0,1,2,....,b-1}$$B_1,B_2,...,B_n$$B_i > B_{i+1}$i$X_i$10$D=\\{i:X_i=1\\}$\n-\tfact 1\n$$\n\\forall i \\in [n-1] \\\\\nP(X_i=1) = \\frac 12 - \\frac{1}{2b} \\\\\n= \\frac {C_b^2}{b^2} \\\\\nVar(X_i)=\\frac 14 - \\frac{1}{4b^2} \\\\\n$$\n-\tfact 2\n$$\n\\forall i,j \\ with \\ 1 \\leq i < i+j \\leq n \\\\\nP(X_i=X_{i+1}=...=X_{i+j-1}=1) = \\frac {C_b^{j+1}}{b^{j+1}} \\\\ \nCov(X_i,X_{i+1})=-\\frac {1}{12}(1-\\frac{1}{b^2}) \\\\\n$$\n-\tfact 3${X_i}$\n\t-\t$X_i$$X_{i+j}$\n\t-\t1${X_i}$\n-\t\n-\tfact 4k[n-1]k$P(X_i=1)$$X_1,...,X_{n-1}$kk,$\\rho (A)$:\n$$\n\\rho (A) = \\prod _1 ^k [\\frac{C_b^{a_{i+1}}}{b^{a_{i+1}}}] \n$$\n-\tfact 5$X_i$k$X_i$1k+1k+1k1$s_1,...,s_k$$s_0=0,s_{k+1}=n$ij\n$$\nC_{s_{j+1}-s_i+b-1}^{b-1}\n$$\n-\t$\\frac{1}{b^n}$\n$$\np(X) = \\frac{1}{b^n} det(C_{s_{j+1}-s_i+b-1}^{b-1})\n$$\n-\t280.03516\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180915/IGF2j3CjAj.JPG)\n\n## \n-\tXXX$2^{|X|}$P$X={1,2,...,n-1}$nbP$\\rho$\n$$\n\\rho (A) = P\\{S:A \\in S\\}\n$$\n-\t$K(x,y)$\n$$\n\\rho (A) = det(K(x,y))_{x,y \\in A}\n$$\n-\t$|A|x|A|$\n## -\n## \n## \n## ","slug":"dpp","published":1,"updated":"2018-09-15T13:42:35.426Z","comments":1,"layout":"post","link":"","_id":"cjmd072d0001dqcw6c7l4tbo5","content":"<p>diversity<br>E<br>DPPBen Taskar2012Determinantal point processes for machine learningvideoslectures.net120pdf250tutorial20132017youtubeWray Buntine<br></p><ul><li>Determinantal point processes for machine learning ppt&amp;pdf (Alex Kulesza , Ben Taskar)</li><li>Determinantal point processes (Laurent Decreusefond , Ian Flint , Nicolas Privault)</li><li>Determinantal Point Process and its Time-varying model (A/Prof Richard Yi Da Xu)</li><li>k-DPPs: Fixed-Size Determinantal Point Processes (Alex Kulesza , Ben Taskar)</li><li>On adding a list of numbers (and other one-dependent determinantal processes) (Alexei Borodin , Persi Diaconis , Jason Fulman)</li><li>Determinantal point processes (Alexei Borodin)</li></ul><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180914/6k9chBkjFc.png?imageslim\" alt=\"mark\"></p><ul><li>52(7+9)%10=696</li><li>0912478[0,9]n<ul><li>n</li><li></li></ul></li><li><ul><li>descent</li><li></li><li>descent pattern</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$B={0,1,2,.,b-1}$$B_1,B_2,,B_n$$B_i &gt; B_{i+1}$i$X_i$10$D=\\{i:X_i=1\\}$</li><li>fact 1<br>$$<br>\\forall i \\in [n-1] \\\\<br>P(X_i=1) = \\frac 12 - \\frac{1}{2b} \\\\<br>= \\frac {C_b^2}{b^2} \\\\<br>Var(X_i)=\\frac 14 - \\frac{1}{4b^2} \\\\<br>$$</li><li>fact 2<br>$$<br>\\forall i,j \\ with \\ 1 \\leq i &lt; i+j \\leq n \\\\<br>P(X_i=X_{i+1}==X_{i+j-1}=1) = \\frac {C_b^{j+1}}{b^{j+1}} \\\\<br>Cov(X_i,X_{i+1})=-\\frac {1}{12}(1-\\frac{1}{b^2}) \\\\<br>$$</li><li>fact 3${X_i}$<ul><li>$X_i$$X_{i+j}$</li><li>1${X_i}$</li></ul></li><li></li><li>fact 4k[n-1]k$P(X_i=1)$$X_1,,X_{n-1}$kk,$\\rho (A)$:<br>$$<br>\\rho (A) = \\prod _1 ^k [\\frac{C_b^{a_{i+1}}}{b^{a_{i+1}}}]<br>$$</li><li>fact 5$X_i$k$X_i$1k+1k+1k1$s_1,,s_k$$s_0=0,s_{k+1}=n$ij<br>$$<br>C_{s_{j+1}-s_i+b-1}^{b-1}<br>$$</li><li>$\\frac{1}{b^n}$<br>$$<br>p(X) = \\frac{1}{b^n} det(C_{s_{j+1}-s_i+b-1}^{b-1})<br>$$</li><li>280.03516<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180915/IGF2j3CjAj.JPG\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>XXX$2^{|X|}$P$X={1,2,,n-1}$nbP$\\rho$<br>$$<br>\\rho (A) = P\\{S:A \\in S\\}<br>$$</li><li>$K(x,y)$<br>$$<br>\\rho (A) = det(K(x,y))_{x,y \\in A}<br>$$</li><li>$|A|x|A|$<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li></ul>","site":{"data":{}},"excerpt":"<p>diversity<br>E<br>DPPBen Taskar2012Determinantal point processes for machine learningvideoslectures.net120pdf250tutorial20132017youtubeWray Buntine<br></p><ul><li>Determinantal point processes for machine learning ppt&amp;pdf (Alex Kulesza , Ben Taskar)</li><li>Determinantal point processes (Laurent Decreusefond , Ian Flint , Nicolas Privault)</li><li>Determinantal Point Process and its Time-varying model (A/Prof Richard Yi Da Xu)</li><li>k-DPPs: Fixed-Size Determinantal Point Processes (Alex Kulesza , Ben Taskar)</li><li>On adding a list of numbers (and other one-dependent determinantal processes) (Alexei Borodin , Persi Diaconis , Jason Fulman)</li><li>Determinantal point processes (Alexei Borodin)</li></ul>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180914/6k9chBkjFc.png?imageslim\" alt=\"mark\"></p><ul><li>52(7+9)%10=696</li><li>0912478[0,9]n<ul><li>n</li><li></li></ul></li><li><ul><li>descent</li><li></li><li>descent pattern</li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$B={0,1,2,.,b-1}$$B_1,B_2,,B_n$$B_i &gt; B_{i+1}$i$X_i$10$D=\\{i:X_i=1\\}$</li><li>fact 1<br>$$<br>\\forall i \\in [n-1] \\\\<br>P(X_i=1) = \\frac 12 - \\frac{1}{2b} \\\\<br>= \\frac {C_b^2}{b^2} \\\\<br>Var(X_i)=\\frac 14 - \\frac{1}{4b^2} \\\\<br>$$</li><li>fact 2<br>$$<br>\\forall i,j \\ with \\ 1 \\leq i &lt; i+j \\leq n \\\\<br>P(X_i=X_{i+1}==X_{i+j-1}=1) = \\frac {C_b^{j+1}}{b^{j+1}} \\\\<br>Cov(X_i,X_{i+1})=-\\frac {1}{12}(1-\\frac{1}{b^2}) \\\\<br>$$</li><li>fact 3${X_i}$<ul><li>$X_i$$X_{i+j}$</li><li>1${X_i}$</li></ul></li><li></li><li>fact 4k[n-1]k$P(X_i=1)$$X_1,,X_{n-1}$kk,$\\rho (A)$:<br>$$<br>\\rho (A) = \\prod _1 ^k [\\frac{C_b^{a_{i+1}}}{b^{a_{i+1}}}]<br>$$</li><li>fact 5$X_i$k$X_i$1k+1k+1k1$s_1,,s_k$$s_0=0,s_{k+1}=n$ij<br>$$<br>C_{s_{j+1}-s_i+b-1}^{b-1}<br>$$</li><li>$\\frac{1}{b^n}$<br>$$<br>p(X) = \\frac{1}{b^n} det(C_{s_{j+1}-s_i+b-1}^{b-1})<br>$$</li><li>280.03516<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180915/IGF2j3CjAj.JPG\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>XXX$2^{|X|}$P$X={1,2,,n-1}$nbP$\\rho$<br>$$<br>\\rho (A) = P\\{S:A \\in S\\}<br>$$</li><li>$K(x,y)$<br>$$<br>\\rho (A) = det(K(x,y))_{x,y \\in A}<br>$$</li><li>$|A|x|A|$<h2 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"-\"></a>-</h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sat Sep 15 2018 21:42:35 GMT+0800 ()","title":"","path":"2018/09/14/dpp/","eyeCatchImage":null,"excerpt":"<p>diversity<br>E<br>DPPBen Taskar2012Determinantal point processes for machine learningvideoslectures.net120pdf250tutorial20132017youtubeWray Buntine<br></p><ul><li>Determinantal point processes for machine learning ppt&amp;pdf (Alex Kulesza , Ben Taskar)</li><li>Determinantal point processes (Laurent Decreusefond , Ian Flint , Nicolas Privault)</li><li>Determinantal Point Process and its Time-varying model (A/Prof Richard Yi Da Xu)</li><li>k-DPPs: Fixed-Size Determinantal Point Processes (Alex Kulesza , Ben Taskar)</li><li>On adding a list of numbers (and other one-dependent determinantal processes) (Alexei Borodin , Persi Diaconis , Jason Fulman)</li><li>Determinantal point processes (Alexei Borodin)</li></ul>","date":"2018-09-14T12:17:29.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","dpp"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"HLDA","date":"2018-09-03T09:26:25.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180903/J0jk0eb7Gh.PNG"],"html":true,"_content":"***\nHierarchical Latent Dirichlet Allocation \n\n\n<!--more-->\n\n# Dirichlet Process\n\n# Stick-breaking process and GEM Distribution\n\n# Chinese Restaurant Process\n\n# Nested Chinese Restaurant Process\n\n# Hierarchical Latent Dirichlet Allocation\n\n# Hyper Parameters","source":"_posts/hlda.md","raw":"---\ntitle: HLDA\ndate: 2018-09-03 17:26:25\ncategories: \ntags:\n  - lda\n  - math\n  -\tmcmc\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180903/J0jk0eb7Gh.PNG\nhtml: true\n---\n***\nHierarchical Latent Dirichlet Allocation \n\n\n<!--more-->\n\n# Dirichlet Process\n\n# Stick-breaking process and GEM Distribution\n\n# Chinese Restaurant Process\n\n# Nested Chinese Restaurant Process\n\n# Hierarchical Latent Dirichlet Allocation\n\n# Hyper Parameters","slug":"hlda","published":1,"updated":"2018-09-03T09:39:39.248Z","comments":1,"layout":"post","link":"","_id":"cjmd072d1001hqcw6sweam9cm","content":"<hr><p>Hierarchical Latent Dirichlet Allocation <br></p><a id=\"more\"></a><h1 id=\"Dirichlet-Process\"><a href=\"#Dirichlet-Process\" class=\"headerlink\" title=\"Dirichlet Process\"></a>Dirichlet Process</h1><h1 id=\"Stick-breaking-process-and-GEM-Distribution\"><a href=\"#Stick-breaking-process-and-GEM-Distribution\" class=\"headerlink\" title=\"Stick-breaking process and GEM Distribution\"></a>Stick-breaking process and GEM Distribution</h1><h1 id=\"Chinese-Restaurant-Process\"><a href=\"#Chinese-Restaurant-Process\" class=\"headerlink\" title=\"Chinese Restaurant Process\"></a>Chinese Restaurant Process</h1><h1 id=\"Nested-Chinese-Restaurant-Process\"><a href=\"#Nested-Chinese-Restaurant-Process\" class=\"headerlink\" title=\"Nested Chinese Restaurant Process\"></a>Nested Chinese Restaurant Process</h1><h1 id=\"Hierarchical-Latent-Dirichlet-Allocation\"><a href=\"#Hierarchical-Latent-Dirichlet-Allocation\" class=\"headerlink\" title=\"Hierarchical Latent Dirichlet Allocation\"></a>Hierarchical Latent Dirichlet Allocation</h1><h1 id=\"Hyper-Parameters\"><a href=\"#Hyper-Parameters\" class=\"headerlink\" title=\"Hyper Parameters\"></a>Hyper Parameters</h1>","site":{"data":{}},"excerpt":"<hr><p>Hierarchical Latent Dirichlet Allocation <br></p>","more":"<h1 id=\"Dirichlet-Process\"><a href=\"#Dirichlet-Process\" class=\"headerlink\" title=\"Dirichlet Process\"></a>Dirichlet Process</h1><h1 id=\"Stick-breaking-process-and-GEM-Distribution\"><a href=\"#Stick-breaking-process-and-GEM-Distribution\" class=\"headerlink\" title=\"Stick-breaking process and GEM Distribution\"></a>Stick-breaking process and GEM Distribution</h1><h1 id=\"Chinese-Restaurant-Process\"><a href=\"#Chinese-Restaurant-Process\" class=\"headerlink\" title=\"Chinese Restaurant Process\"></a>Chinese Restaurant Process</h1><h1 id=\"Nested-Chinese-Restaurant-Process\"><a href=\"#Nested-Chinese-Restaurant-Process\" class=\"headerlink\" title=\"Nested Chinese Restaurant Process\"></a>Nested Chinese Restaurant Process</h1><h1 id=\"Hierarchical-Latent-Dirichlet-Allocation\"><a href=\"#Hierarchical-Latent-Dirichlet-Allocation\" class=\"headerlink\" title=\"Hierarchical Latent Dirichlet Allocation\"></a>Hierarchical Latent Dirichlet Allocation</h1><h1 id=\"Hyper-Parameters\"><a href=\"#Hyper-Parameters\" class=\"headerlink\" title=\"Hyper Parameters\"></a>Hyper Parameters</h1>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Sep 03 2018 17:39:39 GMT+0800 ()","title":"HLDA","path":"2018/09/03/hlda/","eyeCatchImage":null,"excerpt":"<hr><p>Hierarchical Latent Dirichlet Allocation <br></p>","date":"2018-09-03T09:26:25.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","lda","mcmc"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-09-22T02:26:48.000Z","mathjax":true,"html":true,"_content":"\nDeep-Bayes 2018 Summer Camp\n\n<!--more-->\n\n# Deep<span style=\"color:green\">|</span>Bayes summer school. Practical session on EM algorithm\n\nOne of the school organisers decided to prank us and hid all games for our Thursday Game Night somewhere.\n\nLet's find the prankster!\n\nWhen you recognize [him or her](http://deepbayes.ru/#speakers), send:\n* name\n* reconstructed photo\n* this notebook with your code (doesn't matter how awful it is :)\n\n__privately__ to [Nadia Chirkova](https://www.facebook.com/nadiinchi) at Facebook or to info@deepbayes.ru. The first three participants will receive a present. Do not make spoilers to other participants!\n\nPlease, note that you have only __one attempt__ to send a message!\n\n\n```python\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline\n```\n\n\n```python\nDATA_FILE = \"data_em\"\nw = 73 # face_width\n```\n\n### Data\n\nWe are given a set of $K$ images with shape $H \\times W$.\n\nIt is represented by a numpy-array with shape $H \\times W \\times K$:\n\n\n```python\nX = np.load(DATA_FILE)\n```\n\n\n```python\nX.shape # H, W, K\n```\n\n\n\n\n    (100, 200, 1000)\n\n\n\nExample of noisy image:\n\n\n```python\nplt.imshow(X[:, :, 0], cmap=\"Greys_r\")\nplt.axis(\"off\")\nprint(X[1,:,0])\n```\n\n    [255. 255.  41. 255.   0.  51. 255.  15. 255.  59.   0.   0.   0. 255.\n       0. 255. 255.   0. 175.  74. 184.   0.   0. 150. 255. 255.   0.   0.\n     148.   0. 255. 181. 255. 255. 255.   0. 255. 255.  30.   0.   0. 255.\n       0. 255. 255. 206. 234. 255.   0. 255. 255. 255.   0. 255.   0. 255.\n       0. 255. 255. 175.  30. 255.   0.   0. 255.   0. 255.  48.   0.   0.\n       0. 232. 162. 255.  26.   0.   0. 255.   0. 255. 173. 255. 255.   0.\n       0. 255. 255. 119.   0.   0.   0.   0.   0.   0. 255. 255. 255. 255.\n       0.   0. 248.   5. 149. 255.   0. 255. 255. 255.   0. 108.   0.   0.\n     255.   0. 255. 255. 255.   0.   0. 193.  79.   0. 255.   0.   0.   0.\n     233. 255.   0.  65. 255. 255. 255.   0. 255.   0.   0.   0. 255.  58.\n     226. 255.   0. 242. 255. 255.   0. 255.   4. 255. 255.  97. 255.   0.\n       0. 255.   0. 255.   0.   0.   0. 255.   0.  43. 219.   0. 255. 255.\n     255. 166. 255.   0. 255.  42. 255.  44. 255. 255. 255. 255. 255. 255.\n     255. 255.  28.   0.  52. 255.  81. 104. 255. 255.  48. 255. 255. 255.\n     102.  25.  30.  73.]\n    \n\n\n![png](task_em_files/task_em_9_1.png)\n\n\n### Goal and plan\n\nOur goal is to find face $F$ ($H \\times w$).\n\nAlso, we will find:\n* $B$: background  ($H \\times W$)\n* $s$: noise standard deviation (float)\n* $a$: discrete prior over face positions ($W-w+1$)\n* $q(d)$: discrete posterior over face positions for each image  (($W-w+1$) x $K$)\n\nImplementation plan:\n1. calculating $log\\, p(X  \\mid d,\\,F,\\,B,\\,s)$\n1. calculating objective\n1. E-step: finding $q(d)$\n1. M-step: estimating $F,\\, B, \\,s, \\,a$\n1. composing EM-algorithm from E- and M-step\n\n\n### Implementation\n\n\n```python\n### Variables to test implementation\ntH, tW, tw, tK = 2, 3, 1, 2\ntX = np.arange(tH*tW*tK).reshape(tH, tW, tK)\ntF = np.arange(tH*tw).reshape(tH, tw)\ntB = np.arange(tH*tW).reshape(tH, tW)\nts = 0.1\nta = np.arange(1, (tW-tw+1)+1)\nta = ta / ta.sum()\ntq = np.arange(1, (tW-tw+1)*tK+1).reshape(tW-tw+1, tK)\ntq = tq / tq.sum(axis=0)[np.newaxis, :]\n```\n\n#### 1. Implement calculate_log_probability\nFor $k$-th image $X_k$ and some face position $d_k$:\n$$p(X_k  \\mid d_k,\\,F,\\,B,\\,s) = \\prod_{ij}\n    \\begin{cases} \n    \t\\mathcal{N}(X_k[i,j]\\mid F[i,\\,j-d_k],\\,s^2), \n    \t& \\text{if}\\, (i,j)\\in faceArea(d_k)\\\\\n    \t\\mathcal{N}(X_k[i,j]\\mid B[i,j],\\,s^2), & \\text{else}\n    \\end{cases}$$\n\nImportant notes:\n* Do not forget about logarithm!\n* This implementation should use no more than 1 cycle!\n\n\n```python\ndef calculate_log_probability(X, F, B, s):\n    \"\"\"\n    Calculates log p(X_k|d_k, F, B, s) for all images X_k in X and\n    all possible face position d_k.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n\n    Returns\n    -------\n    ll : array, shape(W-w+1, K)\n        ll[dw, k] - log-likelihood of observing image X_k given\n        that the prankster's face F is located at position dw\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = np.array([[-3541.69812064, -5541.69812064],\n       [-4541.69812064, -6741.69812064],\n       [-6141.69812064, -8541.69812064]])\nactual = calculate_log_probability(tX, tF, tB, ts)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-8-7e147f60fb2e> in <module>()\n          4        [-6141.69812064, -8541.69812064]])\n          5 actual = calculate_log_probability(tX, tF, tB, ts)\n    ----> 6 assert np.allclose(actual, expected)\n          7 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 2. Implement calculate_lower_bound\n$$\\mathcal{L}(q, \\,F, \\,B,\\, s,\\, a) = \\sum_k \\biggl (\\mathbb{E} _ {q( d_k)}\\bigl ( \\log p(  X_{k}  \\mid {d}_{k} , \\,F,\\,B,\\,s) + \n    \\log p( d_k  \\mid a)\\bigr) - \\mathbb{E} _ {q( d_k)} \\log q( d_k)\\biggr) $$\n    \nImportant notes:\n* Use already implemented calculate_log_probability! \n* Note that distributions $q( d_k)$ and $p( d_k  \\mid a)$ are discrete. For example, $P(d_k=i \\mid a) = a[i]$.\n* This implementation should not use cycles!\n\n\n```python\ndef calculate_lower_bound(X, F, B, s, a, q):\n    \"\"\"\n    Calculates the lower bound L(q, F, B, s, a) for \n    the marginal log likelihood.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1)\n        Estimate of prior on position of face in any image.\n    q : array\n        q[dw, k] - estimate of posterior \n                   of position dw\n                   of prankster's face given image Xk\n\n    Returns\n    -------\n    L : float\n        The lower bound L(q, F, B, s, a) \n        for the marginal log likelihood.\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = -12761.1875\nactual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-10-eb49d6900e27> in <module>()\n          2 expected = -12761.1875\n          3 actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\n    ----> 4 assert np.allclose(actual, expected)\n          5 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 3. Implement E-step\n$$q(d_k) = p(d_k \\mid X_k, \\,F, \\,B, \\,s,\\, a) = \n\\frac {p(  X_{k}  \\mid {d}_{k} , \\,F,\\,B,\\,s)\\, p(d_k \\mid a)}\n{\\sum_{d'_k} p(  X_{k}  \\mid d'_k , \\,F,\\,B,\\,s) \\,p(d'_k \\mid a)}$$\n\nImportant notes:\n* Use already implemented calculate_log_probability!\n* For computational stability, perform all computations with logarithmic values and apply exp only before return. Also, we recommend using this trick:\n$$\\beta_i = \\log{p_i(\\dots)} \\quad\\rightarrow \\quad\n\t\\frac{e^{\\beta_i}}{\\sum_k e^{\\beta_k}} = \n\t\\frac{e^{(\\beta_i - \\max_j \\beta_j)}}{\\sum_k e^{(\\beta_k- \\max_j \\beta_j)}}$$\n* This implementation should not use cycles!\n\n\n```python\ndef run_e_step(X, F, B, s, a):\n    \"\"\"\n    Given the current esitmate of the parameters, for each image Xk\n    esitmates the probability p(d_k|X_k, F, B, s, a).\n\n    Parameters\n    ----------\n    X : array, shape(H, W, K)\n        K images of size H x W.\n    F  : array_like, shape(H, w)\n        Estimate of prankster's face.\n    B : array shape(H, W)\n        Estimate of background.\n    s : float\n        Eestimate of standard deviation of Gaussian noise.\n    a : array, shape(W-w+1)\n        Estimate of prior on face position in any image.\n\n    Returns\n    -------\n    q : array\n        shape (W-w+1, K)\n        q[dw, k] - estimate of posterior of position dw\n        of prankster's face given image Xk\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = np.array([[ 1.,  1.],\n                   [ 0.,  0.],\n                   [ 0.,  0.]])\nactual = run_e_step(tX, tF, tB, ts, ta)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-12-98d2b4c2edac> in <module>()\n          4                    [ 0.,  0.]])\n          5 actual = run_e_step(tX, tF, tB, ts, ta)\n    ----> 6 assert np.allclose(actual, expected)\n          7 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 4. Implement M-step\n$$a[j] = \\frac{\\sum_k q( d_k = j )}{\\sum_{j'}  \\sum_{k'} q( d_{k'} = j')}$$\n$$F[i, m] = \\frac 1 K  \\sum_k \\sum_{d_k} q(d_k)\\, X^k[i,\\, m+d_k]$$\n$$B[i, j] = \\frac {\\sum_k \\sum_{ d_k:\\, (i, \\,j) \\,\\not\\in faceArea(d_k)} q(d_k)\\, X^k[i, j]} \n\t  \t{\\sum_k \\sum_{d_k: \\,(i, \\,j)\\, \\not\\in faceArea(d_k)} q(d_k)}$$\n$$s^2 = \\frac 1 {HWK}   \\sum_k \\sum_{d_k} q(d_k)\n\t  \t\\sum_{i,\\, j}  (X^k[i, \\,j] - Model^{d_k}[i, \\,j])^2$$\n\nwhere $Model^{d_k}[i, j]$ is an image composed from background and face located at $d_k$.\n\nImportant notes:\n* Update parameters in the following order: $a$, $F$, $B$, $s$.\n* When the parameter is updated, its __new__ value is used to update other parameters.\n* This implementation should use no more than 3 cycles and no embedded cycles!\n\n\n```python\ndef run_m_step(X, q, w):\n    \"\"\"\n    Estimates F, B, s, a given esitmate of posteriors defined by q.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    q  :\n        q[dw, k] - estimate of posterior of position dw\n                   of prankster's face given image Xk\n    w : int\n        Face mask width.\n\n    Returns\n    -------\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1)\n        Estimate of prior on position of face in any image.\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = [np.array([[ 3.27777778],\n                      [ 9.27777778]]),\n np.array([[  0.48387097,   2.5       ,   4.52941176],\n           [  6.48387097,   8.5       ,  10.52941176]]),\n  0.94868,\n np.array([ 0.13888889,  0.33333333,  0.52777778])]\nactual = run_m_step(tX, tq, tw)\nfor a, e in zip(actual, expected):\n    assert np.allclose(a, e)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-14-e44e2bfe2fd1> in <module>()\n          7  np.array([ 0.13888889,  0.33333333,  0.52777778])]\n          8 actual = run_m_step(tX, tq, tw)\n    ----> 9 for a, e in zip(actual, expected):\n         10     assert np.allclose(a, e)\n         11 print(\"OK\")\n    \n\n    TypeError: zip argument #1 must support iteration\n\n\n#### 5. Implement EM_algorithm\nInitialize parameters, if they are not passed, and then repeat E- and M-steps till convergence.\n\nPlease note that $\\mathcal{L}(q, \\,F, \\,B, \\,s, \\,a)$ must increase after each iteration.\n\n\n```python\ndef run_EM(X, w, F=None, B=None, s=None, a=None, tolerance=0.001,\n           max_iter=50):\n    \"\"\"\n    Runs EM loop until the likelihood of observing X given current\n    estimate of parameters is idempotent as defined by a fixed\n    tolerance.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    w : int\n        Face mask width.\n    F : array, shape (H, w), optional\n        Initial estimate of prankster's face.\n    B : array, shape (H, W), optional\n        Initial estimate of background.\n    s : float, optional\n        Initial estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1), optional\n        Initial estimate of prior on position of face in any image.\n    tolerance : float, optional\n        Parameter for stopping criterion.\n    max_iter  : int, optional\n        Maximum number of iterations.\n\n    Returns\n    -------\n    F, B, s, a : trained parameters.\n    LL : array, shape(number_of_iters + 2,)\n        L(q, F, B, s, a) at initial guess, \n        after each EM iteration and after\n        final estimate of posteriors;\n        number_of_iters is actual number of iterations that was done.\n    \"\"\"\n    H, W, N = X.shape\n    if F is None:\n        F = np.random.randint(0, 255, (H, w))\n    if B is None:\n        B = np.random.randint(0, 255, (H, W))\n    if a is None:\n        a = np.ones(W - w + 1)\n        a /= np.sum(a)\n    if s is None:\n        s = np.random.rand()*pow(64,2)\n    # your code here\n    \n```\n\n\n```python\n# run this cell to test your implementation\nres = run_EM(tX, tw, max_iter=3)\nLL = res[-1]\nassert np.alltrue(LL[1:] - LL[:-1] > 0)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-16-6b1860dc5143> in <module>()\n          1 # run this cell to test your implementation\n          2 res = run_EM(tX, tw, max_iter=3)\n    ----> 3 LL = res[-1]\n          4 assert np.alltrue(LL[1:] - LL[:-1] > 0)\n          5 print(\"OK\")\n    \n\n    TypeError: 'NoneType' object is not subscriptable\n\n\n### Who is the prankster?\n\nTo speed up the computation, we will perform 5 iterations over small subset of images and then gradually increase the subset.\n\nIf everything is implemented correctly, you will recognize the prankster (remember he is the one from [DeepBayes team](http://deepbayes.ru/#speakers)).\n\nRun EM-algorithm:\n\n\n```python\ndef show(F, i=1, n=1):\n    \"\"\"\n    shows face F at subplot i out of n\n    \"\"\"\n    plt.subplot(1, n, i)\n    plt.imshow(F, cmap=\"Greys_r\")\n    plt.axis(\"off\")\n```\n\n\n```python\nF, B, s, a = [None] * 4\nLL = []\nlens = [50, 100, 300, 500, 1000]\niters = [5, 1, 1, 1, 1]\nplt.figure(figsize=(20, 5))\nfor i, (l, it) in enumerate(zip(lens, iters)):\n    F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n    show(F, i+1, 5)\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-18-5c3ec9450804> in <module>()\n          5 plt.figure(figsize=(20, 5))\n          6 for i, (l, it) in enumerate(zip(lens, iters)):\n    ----> 7     F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n          8     show(F, i+1, 5)\n    \n\n    TypeError: 'NoneType' object is not iterable\n\n\n\n    <Figure size 1440x360 with 0 Axes>\n\n\nAnd this is the background:\n\n\n```python\nshow(B)\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-19-ba7381968102> in <module>()\n    ----> 1 show(B)\n    \n\n    <ipython-input-17-1c6656dd6e56> in show(F, i, n)\n          4     \"\"\"\n          5     plt.subplot(1, n, i)\n    ----> 6     plt.imshow(F, cmap=\"Greys_r\")\n          7     plt.axis(\"off\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\pyplot.py in imshow(X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, hold, data, **kwargs)\n       3203                         filternorm=filternorm, filterrad=filterrad,\n       3204                         imlim=imlim, resample=resample, url=url, data=data,\n    -> 3205                         **kwargs)\n       3206     finally:\n       3207         ax._hold = washold\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\__init__.py in inner(ax, *args, **kwargs)\n       1853                         \"the Matplotlib list!)\" % (label_namer, func.__name__),\n       1854                         RuntimeWarning, stacklevel=2)\n    -> 1855             return func(ax, *args, **kwargs)\n       1856 \n       1857         inner.__doc__ = _add_data_doc(inner.__doc__,\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\axes\\_axes.py in imshow(self, X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, **kwargs)\n       5485                               resample=resample, **kwargs)\n       5486 \n    -> 5487         im.set_data(X)\n       5488         im.set_alpha(alpha)\n       5489         if im.get_clip_path() is None:\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\image.py in set_data(self, A)\n        647         if (self._A.dtype != np.uint8 and\n        648                 not np.can_cast(self._A.dtype, float, \"same_kind\")):\n    --> 649             raise TypeError(\"Image data cannot be converted to float\")\n        650 \n        651         if not (self._A.ndim == 2\n    \n\n    TypeError: Image data cannot be converted to float\n\n\n\n![png](task_em_files/task_em_35_1.png)\n\n\n### Optional part: hard-EM\n\nIf you have some time left, you can implement simplified version of EM-algorithm called hard-EM. In hard-EM, instead of finding posterior distribution $p(d_k|X_k, F, B, s, A)$ at E-step, we just remember its argmax $\\tilde d_k$ for each image $k$. Thus, the distribution q is replaced with a singular distribution:\n$$q(d_k) = \\begin{cases} 1, \\, if d_k = \\tilde d_k \\\\ 0, \\, otherwise\\end{cases}$$\nThis modification simplifies formulas for $\\mathcal{L}$ and M-step and speeds their computation up. However, the convergence of hard-EM is usually slow.\n\nIf you implement hard-EM, add binary flag hard_EM to the parameters of the following functions:\n* calculate_lower_bound\n* run_e_step\n* run_m_step\n* run_EM\n\nAfter implementation, compare overall computation time for EM and hard-EM till recognizable F.\n","source":"_posts/deepbayes2018.md","raw":"---\ntitle: \ndate: 2018-09-22 10:26:48\ntags: [bayes,math,machinelearning]\ncategories: \nmathjax: true\nhtml: true\n---\n\nDeep-Bayes 2018 Summer Camp\n\n<!--more-->\n\n# Deep<span style=\"color:green\">|</span>Bayes summer school. Practical session on EM algorithm\n\nOne of the school organisers decided to prank us and hid all games for our Thursday Game Night somewhere.\n\nLet's find the prankster!\n\nWhen you recognize [him or her](http://deepbayes.ru/#speakers), send:\n* name\n* reconstructed photo\n* this notebook with your code (doesn't matter how awful it is :)\n\n__privately__ to [Nadia Chirkova](https://www.facebook.com/nadiinchi) at Facebook or to info@deepbayes.ru. The first three participants will receive a present. Do not make spoilers to other participants!\n\nPlease, note that you have only __one attempt__ to send a message!\n\n\n```python\nimport numpy as np\nfrom matplotlib import pyplot as plt\n%matplotlib inline\n```\n\n\n```python\nDATA_FILE = \"data_em\"\nw = 73 # face_width\n```\n\n### Data\n\nWe are given a set of $K$ images with shape $H \\times W$.\n\nIt is represented by a numpy-array with shape $H \\times W \\times K$:\n\n\n```python\nX = np.load(DATA_FILE)\n```\n\n\n```python\nX.shape # H, W, K\n```\n\n\n\n\n    (100, 200, 1000)\n\n\n\nExample of noisy image:\n\n\n```python\nplt.imshow(X[:, :, 0], cmap=\"Greys_r\")\nplt.axis(\"off\")\nprint(X[1,:,0])\n```\n\n    [255. 255.  41. 255.   0.  51. 255.  15. 255.  59.   0.   0.   0. 255.\n       0. 255. 255.   0. 175.  74. 184.   0.   0. 150. 255. 255.   0.   0.\n     148.   0. 255. 181. 255. 255. 255.   0. 255. 255.  30.   0.   0. 255.\n       0. 255. 255. 206. 234. 255.   0. 255. 255. 255.   0. 255.   0. 255.\n       0. 255. 255. 175.  30. 255.   0.   0. 255.   0. 255.  48.   0.   0.\n       0. 232. 162. 255.  26.   0.   0. 255.   0. 255. 173. 255. 255.   0.\n       0. 255. 255. 119.   0.   0.   0.   0.   0.   0. 255. 255. 255. 255.\n       0.   0. 248.   5. 149. 255.   0. 255. 255. 255.   0. 108.   0.   0.\n     255.   0. 255. 255. 255.   0.   0. 193.  79.   0. 255.   0.   0.   0.\n     233. 255.   0.  65. 255. 255. 255.   0. 255.   0.   0.   0. 255.  58.\n     226. 255.   0. 242. 255. 255.   0. 255.   4. 255. 255.  97. 255.   0.\n       0. 255.   0. 255.   0.   0.   0. 255.   0.  43. 219.   0. 255. 255.\n     255. 166. 255.   0. 255.  42. 255.  44. 255. 255. 255. 255. 255. 255.\n     255. 255.  28.   0.  52. 255.  81. 104. 255. 255.  48. 255. 255. 255.\n     102.  25.  30.  73.]\n    \n\n\n![png](task_em_files/task_em_9_1.png)\n\n\n### Goal and plan\n\nOur goal is to find face $F$ ($H \\times w$).\n\nAlso, we will find:\n* $B$: background  ($H \\times W$)\n* $s$: noise standard deviation (float)\n* $a$: discrete prior over face positions ($W-w+1$)\n* $q(d)$: discrete posterior over face positions for each image  (($W-w+1$) x $K$)\n\nImplementation plan:\n1. calculating $log\\, p(X  \\mid d,\\,F,\\,B,\\,s)$\n1. calculating objective\n1. E-step: finding $q(d)$\n1. M-step: estimating $F,\\, B, \\,s, \\,a$\n1. composing EM-algorithm from E- and M-step\n\n\n### Implementation\n\n\n```python\n### Variables to test implementation\ntH, tW, tw, tK = 2, 3, 1, 2\ntX = np.arange(tH*tW*tK).reshape(tH, tW, tK)\ntF = np.arange(tH*tw).reshape(tH, tw)\ntB = np.arange(tH*tW).reshape(tH, tW)\nts = 0.1\nta = np.arange(1, (tW-tw+1)+1)\nta = ta / ta.sum()\ntq = np.arange(1, (tW-tw+1)*tK+1).reshape(tW-tw+1, tK)\ntq = tq / tq.sum(axis=0)[np.newaxis, :]\n```\n\n#### 1. Implement calculate_log_probability\nFor $k$-th image $X_k$ and some face position $d_k$:\n$$p(X_k  \\mid d_k,\\,F,\\,B,\\,s) = \\prod_{ij}\n    \\begin{cases} \n    \t\\mathcal{N}(X_k[i,j]\\mid F[i,\\,j-d_k],\\,s^2), \n    \t& \\text{if}\\, (i,j)\\in faceArea(d_k)\\\\\n    \t\\mathcal{N}(X_k[i,j]\\mid B[i,j],\\,s^2), & \\text{else}\n    \\end{cases}$$\n\nImportant notes:\n* Do not forget about logarithm!\n* This implementation should use no more than 1 cycle!\n\n\n```python\ndef calculate_log_probability(X, F, B, s):\n    \"\"\"\n    Calculates log p(X_k|d_k, F, B, s) for all images X_k in X and\n    all possible face position d_k.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n\n    Returns\n    -------\n    ll : array, shape(W-w+1, K)\n        ll[dw, k] - log-likelihood of observing image X_k given\n        that the prankster's face F is located at position dw\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = np.array([[-3541.69812064, -5541.69812064],\n       [-4541.69812064, -6741.69812064],\n       [-6141.69812064, -8541.69812064]])\nactual = calculate_log_probability(tX, tF, tB, ts)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-8-7e147f60fb2e> in <module>()\n          4        [-6141.69812064, -8541.69812064]])\n          5 actual = calculate_log_probability(tX, tF, tB, ts)\n    ----> 6 assert np.allclose(actual, expected)\n          7 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 2. Implement calculate_lower_bound\n$$\\mathcal{L}(q, \\,F, \\,B,\\, s,\\, a) = \\sum_k \\biggl (\\mathbb{E} _ {q( d_k)}\\bigl ( \\log p(  X_{k}  \\mid {d}_{k} , \\,F,\\,B,\\,s) + \n    \\log p( d_k  \\mid a)\\bigr) - \\mathbb{E} _ {q( d_k)} \\log q( d_k)\\biggr) $$\n    \nImportant notes:\n* Use already implemented calculate_log_probability! \n* Note that distributions $q( d_k)$ and $p( d_k  \\mid a)$ are discrete. For example, $P(d_k=i \\mid a) = a[i]$.\n* This implementation should not use cycles!\n\n\n```python\ndef calculate_lower_bound(X, F, B, s, a, q):\n    \"\"\"\n    Calculates the lower bound L(q, F, B, s, a) for \n    the marginal log likelihood.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1)\n        Estimate of prior on position of face in any image.\n    q : array\n        q[dw, k] - estimate of posterior \n                   of position dw\n                   of prankster's face given image Xk\n\n    Returns\n    -------\n    L : float\n        The lower bound L(q, F, B, s, a) \n        for the marginal log likelihood.\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = -12761.1875\nactual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-10-eb49d6900e27> in <module>()\n          2 expected = -12761.1875\n          3 actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\n    ----> 4 assert np.allclose(actual, expected)\n          5 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 3. Implement E-step\n$$q(d_k) = p(d_k \\mid X_k, \\,F, \\,B, \\,s,\\, a) = \n\\frac {p(  X_{k}  \\mid {d}_{k} , \\,F,\\,B,\\,s)\\, p(d_k \\mid a)}\n{\\sum_{d'_k} p(  X_{k}  \\mid d'_k , \\,F,\\,B,\\,s) \\,p(d'_k \\mid a)}$$\n\nImportant notes:\n* Use already implemented calculate_log_probability!\n* For computational stability, perform all computations with logarithmic values and apply exp only before return. Also, we recommend using this trick:\n$$\\beta_i = \\log{p_i(\\dots)} \\quad\\rightarrow \\quad\n\t\\frac{e^{\\beta_i}}{\\sum_k e^{\\beta_k}} = \n\t\\frac{e^{(\\beta_i - \\max_j \\beta_j)}}{\\sum_k e^{(\\beta_k- \\max_j \\beta_j)}}$$\n* This implementation should not use cycles!\n\n\n```python\ndef run_e_step(X, F, B, s, a):\n    \"\"\"\n    Given the current esitmate of the parameters, for each image Xk\n    esitmates the probability p(d_k|X_k, F, B, s, a).\n\n    Parameters\n    ----------\n    X : array, shape(H, W, K)\n        K images of size H x W.\n    F  : array_like, shape(H, w)\n        Estimate of prankster's face.\n    B : array shape(H, W)\n        Estimate of background.\n    s : float\n        Eestimate of standard deviation of Gaussian noise.\n    a : array, shape(W-w+1)\n        Estimate of prior on face position in any image.\n\n    Returns\n    -------\n    q : array\n        shape (W-w+1, K)\n        q[dw, k] - estimate of posterior of position dw\n        of prankster's face given image Xk\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = np.array([[ 1.,  1.],\n                   [ 0.,  0.],\n                   [ 0.,  0.]])\nactual = run_e_step(tX, tF, tB, ts, ta)\nassert np.allclose(actual, expected)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-12-98d2b4c2edac> in <module>()\n          4                    [ 0.,  0.]])\n          5 actual = run_e_step(tX, tF, tB, ts, ta)\n    ----> 6 assert np.allclose(actual, expected)\n          7 print(\"OK\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n       2254 \n       2255     \"\"\"\n    -> 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n       2257     return bool(res)\n       2258 \n    \n\n    ~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n       2330     y = array(y, dtype=dt, copy=False, subok=True)\n       2331 \n    -> 2332     xfin = isfinite(x)\n       2333     yfin = isfinite(y)\n       2334     if all(xfin) and all(yfin):\n    \n\n    TypeError: ufunc 'isfinite' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule ''safe''\n\n\n#### 4. Implement M-step\n$$a[j] = \\frac{\\sum_k q( d_k = j )}{\\sum_{j'}  \\sum_{k'} q( d_{k'} = j')}$$\n$$F[i, m] = \\frac 1 K  \\sum_k \\sum_{d_k} q(d_k)\\, X^k[i,\\, m+d_k]$$\n$$B[i, j] = \\frac {\\sum_k \\sum_{ d_k:\\, (i, \\,j) \\,\\not\\in faceArea(d_k)} q(d_k)\\, X^k[i, j]} \n\t  \t{\\sum_k \\sum_{d_k: \\,(i, \\,j)\\, \\not\\in faceArea(d_k)} q(d_k)}$$\n$$s^2 = \\frac 1 {HWK}   \\sum_k \\sum_{d_k} q(d_k)\n\t  \t\\sum_{i,\\, j}  (X^k[i, \\,j] - Model^{d_k}[i, \\,j])^2$$\n\nwhere $Model^{d_k}[i, j]$ is an image composed from background and face located at $d_k$.\n\nImportant notes:\n* Update parameters in the following order: $a$, $F$, $B$, $s$.\n* When the parameter is updated, its __new__ value is used to update other parameters.\n* This implementation should use no more than 3 cycles and no embedded cycles!\n\n\n```python\ndef run_m_step(X, q, w):\n    \"\"\"\n    Estimates F, B, s, a given esitmate of posteriors defined by q.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    q  :\n        q[dw, k] - estimate of posterior of position dw\n                   of prankster's face given image Xk\n    w : int\n        Face mask width.\n\n    Returns\n    -------\n    F : array, shape (H, w)\n        Estimate of prankster's face.\n    B : array, shape (H, W)\n        Estimate of background.\n    s : float\n        Estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1)\n        Estimate of prior on position of face in any image.\n    \"\"\"\n    # your code here\n```\n\n\n```python\n# run this cell to test your implementation\nexpected = [np.array([[ 3.27777778],\n                      [ 9.27777778]]),\n np.array([[  0.48387097,   2.5       ,   4.52941176],\n           [  6.48387097,   8.5       ,  10.52941176]]),\n  0.94868,\n np.array([ 0.13888889,  0.33333333,  0.52777778])]\nactual = run_m_step(tX, tq, tw)\nfor a, e in zip(actual, expected):\n    assert np.allclose(a, e)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-14-e44e2bfe2fd1> in <module>()\n          7  np.array([ 0.13888889,  0.33333333,  0.52777778])]\n          8 actual = run_m_step(tX, tq, tw)\n    ----> 9 for a, e in zip(actual, expected):\n         10     assert np.allclose(a, e)\n         11 print(\"OK\")\n    \n\n    TypeError: zip argument #1 must support iteration\n\n\n#### 5. Implement EM_algorithm\nInitialize parameters, if they are not passed, and then repeat E- and M-steps till convergence.\n\nPlease note that $\\mathcal{L}(q, \\,F, \\,B, \\,s, \\,a)$ must increase after each iteration.\n\n\n```python\ndef run_EM(X, w, F=None, B=None, s=None, a=None, tolerance=0.001,\n           max_iter=50):\n    \"\"\"\n    Runs EM loop until the likelihood of observing X given current\n    estimate of parameters is idempotent as defined by a fixed\n    tolerance.\n\n    Parameters\n    ----------\n    X : array, shape (H, W, K)\n        K images of size H x W.\n    w : int\n        Face mask width.\n    F : array, shape (H, w), optional\n        Initial estimate of prankster's face.\n    B : array, shape (H, W), optional\n        Initial estimate of background.\n    s : float, optional\n        Initial estimate of standard deviation of Gaussian noise.\n    a : array, shape (W-w+1), optional\n        Initial estimate of prior on position of face in any image.\n    tolerance : float, optional\n        Parameter for stopping criterion.\n    max_iter  : int, optional\n        Maximum number of iterations.\n\n    Returns\n    -------\n    F, B, s, a : trained parameters.\n    LL : array, shape(number_of_iters + 2,)\n        L(q, F, B, s, a) at initial guess, \n        after each EM iteration and after\n        final estimate of posteriors;\n        number_of_iters is actual number of iterations that was done.\n    \"\"\"\n    H, W, N = X.shape\n    if F is None:\n        F = np.random.randint(0, 255, (H, w))\n    if B is None:\n        B = np.random.randint(0, 255, (H, W))\n    if a is None:\n        a = np.ones(W - w + 1)\n        a /= np.sum(a)\n    if s is None:\n        s = np.random.rand()*pow(64,2)\n    # your code here\n    \n```\n\n\n```python\n# run this cell to test your implementation\nres = run_EM(tX, tw, max_iter=3)\nLL = res[-1]\nassert np.alltrue(LL[1:] - LL[:-1] > 0)\nprint(\"OK\")\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-16-6b1860dc5143> in <module>()\n          1 # run this cell to test your implementation\n          2 res = run_EM(tX, tw, max_iter=3)\n    ----> 3 LL = res[-1]\n          4 assert np.alltrue(LL[1:] - LL[:-1] > 0)\n          5 print(\"OK\")\n    \n\n    TypeError: 'NoneType' object is not subscriptable\n\n\n### Who is the prankster?\n\nTo speed up the computation, we will perform 5 iterations over small subset of images and then gradually increase the subset.\n\nIf everything is implemented correctly, you will recognize the prankster (remember he is the one from [DeepBayes team](http://deepbayes.ru/#speakers)).\n\nRun EM-algorithm:\n\n\n```python\ndef show(F, i=1, n=1):\n    \"\"\"\n    shows face F at subplot i out of n\n    \"\"\"\n    plt.subplot(1, n, i)\n    plt.imshow(F, cmap=\"Greys_r\")\n    plt.axis(\"off\")\n```\n\n\n```python\nF, B, s, a = [None] * 4\nLL = []\nlens = [50, 100, 300, 500, 1000]\niters = [5, 1, 1, 1, 1]\nplt.figure(figsize=(20, 5))\nfor i, (l, it) in enumerate(zip(lens, iters)):\n    F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n    show(F, i+1, 5)\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-18-5c3ec9450804> in <module>()\n          5 plt.figure(figsize=(20, 5))\n          6 for i, (l, it) in enumerate(zip(lens, iters)):\n    ----> 7     F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n          8     show(F, i+1, 5)\n    \n\n    TypeError: 'NoneType' object is not iterable\n\n\n\n    <Figure size 1440x360 with 0 Axes>\n\n\nAnd this is the background:\n\n\n```python\nshow(B)\n```\n\n\n    ---------------------------------------------------------------------------\n\n    TypeError                                 Traceback (most recent call last)\n\n    <ipython-input-19-ba7381968102> in <module>()\n    ----> 1 show(B)\n    \n\n    <ipython-input-17-1c6656dd6e56> in show(F, i, n)\n          4     \"\"\"\n          5     plt.subplot(1, n, i)\n    ----> 6     plt.imshow(F, cmap=\"Greys_r\")\n          7     plt.axis(\"off\")\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\pyplot.py in imshow(X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, hold, data, **kwargs)\n       3203                         filternorm=filternorm, filterrad=filterrad,\n       3204                         imlim=imlim, resample=resample, url=url, data=data,\n    -> 3205                         **kwargs)\n       3206     finally:\n       3207         ax._hold = washold\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\__init__.py in inner(ax, *args, **kwargs)\n       1853                         \"the Matplotlib list!)\" % (label_namer, func.__name__),\n       1854                         RuntimeWarning, stacklevel=2)\n    -> 1855             return func(ax, *args, **kwargs)\n       1856 \n       1857         inner.__doc__ = _add_data_doc(inner.__doc__,\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\axes\\_axes.py in imshow(self, X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, **kwargs)\n       5485                               resample=resample, **kwargs)\n       5486 \n    -> 5487         im.set_data(X)\n       5488         im.set_alpha(alpha)\n       5489         if im.get_clip_path() is None:\n    \n\n    ~\\Anaconda3\\lib\\site-packages\\matplotlib\\image.py in set_data(self, A)\n        647         if (self._A.dtype != np.uint8 and\n        648                 not np.can_cast(self._A.dtype, float, \"same_kind\")):\n    --> 649             raise TypeError(\"Image data cannot be converted to float\")\n        650 \n        651         if not (self._A.ndim == 2\n    \n\n    TypeError: Image data cannot be converted to float\n\n\n\n![png](task_em_files/task_em_35_1.png)\n\n\n### Optional part: hard-EM\n\nIf you have some time left, you can implement simplified version of EM-algorithm called hard-EM. In hard-EM, instead of finding posterior distribution $p(d_k|X_k, F, B, s, A)$ at E-step, we just remember its argmax $\\tilde d_k$ for each image $k$. Thus, the distribution q is replaced with a singular distribution:\n$$q(d_k) = \\begin{cases} 1, \\, if d_k = \\tilde d_k \\\\ 0, \\, otherwise\\end{cases}$$\nThis modification simplifies formulas for $\\mathcal{L}$ and M-step and speeds their computation up. However, the convergence of hard-EM is usually slow.\n\nIf you implement hard-EM, add binary flag hard_EM to the parameters of the following functions:\n* calculate_lower_bound\n* run_e_step\n* run_m_step\n* run_EM\n\nAfter implementation, compare overall computation time for EM and hard-EM till recognizable F.\n","slug":"deepbayes2018","published":1,"updated":"2018-09-22T05:41:51.054Z","_id":"cjmd072d2001lqcw6y1vijoci","comments":1,"layout":"post","photos":[],"link":"","content":"<p>Deep-Bayes 2018 Summer Camp<br><br><a id=\"more\"></a></p><h1 id=\"Deep-Bayes-summer-school-Practical-session-on-EM-algorithm\"><a href=\"#Deep-Bayes-summer-school-Practical-session-on-EM-algorithm\" class=\"headerlink\" title=\"Deep|Bayes summer school. Practical session on EM algorithm\"></a>Deep<span style=\"color:green\">|</span>Bayes summer school. Practical session on EM algorithm</h1><p>One of the school organisers decided to prank us and hid all games for our Thursday Game Night somewhere.</p><p>Lets find the prankster!</p><p>When you recognize <a href=\"http://deepbayes.ru/#speakers\" target=\"_blank\" rel=\"noopener\">him or her</a>, send:</p><ul><li>name</li><li>reconstructed photo</li><li>this notebook with your code (doesnt matter how awful it is :)</li></ul><p><strong>privately</strong> to <a href=\"https://www.facebook.com/nadiinchi\" target=\"_blank\" rel=\"noopener\">Nadia Chirkova</a> at Facebook or to <a href=\"mailto:info@deepbayes.ru\" target=\"_blank\" rel=\"noopener\">info@deepbayes.ru</a>. The first three participants will receive a present. Do not make spoilers to other participants!</p><p>Please, note that you have only <strong>one attempt</strong> to send a message!</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\">%matplotlib inline</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DATA_FILE = <span class=\"string\">\"data_em\"</span></span><br><span class=\"line\">w = <span class=\"number\">73</span> <span class=\"comment\"># face_width</span></span><br></pre></td></tr></table></figure><h3 id=\"Data\"><a href=\"#Data\" class=\"headerlink\" title=\"Data\"></a>Data</h3><p>We are given a set of $K$ images with shape $H \\times W$.</p><p>It is represented by a numpy-array with shape $H \\times W \\times K$:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X = np.load(DATA_FILE)</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X.shape <span class=\"comment\"># H, W, K</span></span><br></pre></td></tr></table></figure><pre><code>(100, 200, 1000)\n</code></pre><p>Example of noisy image:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plt.imshow(X[:, :, <span class=\"number\">0</span>], cmap=<span class=\"string\">\"Greys_r\"</span>)</span><br><span class=\"line\">plt.axis(<span class=\"string\">\"off\"</span>)</span><br><span class=\"line\">print(X[<span class=\"number\">1</span>,:,<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure><pre><code>[255. 255.  41. 255.   0.  51. 255.  15. 255.  59.   0.   0.   0. 255.\n   0. 255. 255.   0. 175.  74. 184.   0.   0. 150. 255. 255.   0.   0.\n 148.   0. 255. 181. 255. 255. 255.   0. 255. 255.  30.   0.   0. 255.\n   0. 255. 255. 206. 234. 255.   0. 255. 255. 255.   0. 255.   0. 255.\n   0. 255. 255. 175.  30. 255.   0.   0. 255.   0. 255.  48.   0.   0.\n   0. 232. 162. 255.  26.   0.   0. 255.   0. 255. 173. 255. 255.   0.\n   0. 255. 255. 119.   0.   0.   0.   0.   0.   0. 255. 255. 255. 255.\n   0.   0. 248.   5. 149. 255.   0. 255. 255. 255.   0. 108.   0.   0.\n 255.   0. 255. 255. 255.   0.   0. 193.  79.   0. 255.   0.   0.   0.\n 233. 255.   0.  65. 255. 255. 255.   0. 255.   0.   0.   0. 255.  58.\n 226. 255.   0. 242. 255. 255.   0. 255.   4. 255. 255.  97. 255.   0.\n   0. 255.   0. 255.   0.   0.   0. 255.   0.  43. 219.   0. 255. 255.\n 255. 166. 255.   0. 255.  42. 255.  44. 255. 255. 255. 255. 255. 255.\n 255. 255.  28.   0.  52. 255.  81. 104. 255. 255.  48. 255. 255. 255.\n 102.  25.  30.  73.]\n</code></pre><p><img src=\"task_em_files/task_em_9_1.png\" alt=\"png\"></p><h3 id=\"Goal-and-plan\"><a href=\"#Goal-and-plan\" class=\"headerlink\" title=\"Goal and plan\"></a>Goal and plan</h3><p>Our goal is to find face $F$ ($H \\times w$).</p><p>Also, we will find:</p><ul><li>$B$: background ($H \\times W$)</li><li>$s$: noise standard deviation (float)</li><li>$a$: discrete prior over face positions ($W-w+1$)</li><li>$q(d)$: discrete posterior over face positions for each image (($W-w+1$) x $K$)</li></ul><p>Implementation plan:</p><ol><li>calculating $log\\, p(X \\mid d,\\,F,\\,B,\\,s)$</li><li>calculating objective</li><li>E-step: finding $q(d)$</li><li>M-step: estimating $F,\\, B, \\,s, \\,a$</li><li>composing EM-algorithm from E- and M-step</li></ol><h3 id=\"Implementation\"><a href=\"#Implementation\" class=\"headerlink\" title=\"Implementation\"></a>Implementation</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### Variables to test implementation</span></span><br><span class=\"line\">tH, tW, tw, tK = <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span></span><br><span class=\"line\">tX = np.arange(tH*tW*tK).reshape(tH, tW, tK)</span><br><span class=\"line\">tF = np.arange(tH*tw).reshape(tH, tw)</span><br><span class=\"line\">tB = np.arange(tH*tW).reshape(tH, tW)</span><br><span class=\"line\">ts = <span class=\"number\">0.1</span></span><br><span class=\"line\">ta = np.arange(<span class=\"number\">1</span>, (tW-tw+<span class=\"number\">1</span>)+<span class=\"number\">1</span>)</span><br><span class=\"line\">ta = ta / ta.sum()</span><br><span class=\"line\">tq = np.arange(<span class=\"number\">1</span>, (tW-tw+<span class=\"number\">1</span>)*tK+<span class=\"number\">1</span>).reshape(tW-tw+<span class=\"number\">1</span>, tK)</span><br><span class=\"line\">tq = tq / tq.sum(axis=<span class=\"number\">0</span>)[np.newaxis, :]</span><br></pre></td></tr></table></figure><h4 id=\"1-Implement-calculate-log-probability\"><a href=\"#1-Implement-calculate-log-probability\" class=\"headerlink\" title=\"1. Implement calculate_log_probability\"></a>1. Implement calculate_log_probability</h4><p>For $k$-th image $X_k$ and some face position $d_k$:<br>$$p(X_k \\mid d_k,\\,F,\\,B,\\,s) = \\prod_{ij}<br>\\begin{cases}<br>\\mathcal{N}(X_k[i,j]\\mid F[i,\\,j-d_k],\\,s^2),<br>&amp; \\text{if}\\, (i,j)\\in faceArea(d_k)\\\\<br>\\mathcal{N}(X_k[i,j]\\mid B[i,j],\\,s^2), &amp; \\text{else}<br>\\end{cases}$$</p><p>Important notes:</p><ul><li>Do not forget about logarithm!</li><li>This implementation should use no more than 1 cycle!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_log_probability</span><span class=\"params\">(X, F, B, s)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Calculates log p(X_k|d_k, F, B, s) for all images X_k in X and</span></span><br><span class=\"line\"><span class=\"string\">    all possible face position d_k.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    ll : array, shape(W-w+1, K)</span></span><br><span class=\"line\"><span class=\"string\">        ll[dw, k] - log-likelihood of observing image X_k given</span></span><br><span class=\"line\"><span class=\"string\">        that the prankster's face F is located at position dw</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = np.array([[<span class=\"number\">-3541.69812064</span>, <span class=\"number\">-5541.69812064</span>],</span><br><span class=\"line\">       [<span class=\"number\">-4541.69812064</span>, <span class=\"number\">-6741.69812064</span>],</span><br><span class=\"line\">       [<span class=\"number\">-6141.69812064</span>, <span class=\"number\">-8541.69812064</span>]])</span><br><span class=\"line\">actual = calculate_log_probability(tX, tF, tB, ts)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-8-7e147f60fb2e&gt; in &lt;module&gt;()\n      4        [-6141.69812064, -8541.69812064]])\n      5 actual = calculate_log_probability(tX, tF, tB, ts)\n----&gt; 6 assert np.allclose(actual, expected)\n      7 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"2-Implement-calculate-lower-bound\"><a href=\"#2-Implement-calculate-lower-bound\" class=\"headerlink\" title=\"2. Implement calculate_lower_bound\"></a>2. Implement calculate_lower_bound</h4><p>$$\\mathcal{L}(q, \\,F, \\,B,\\, s,\\, a) = \\sum_k \\biggl (\\mathbb{E} _ {q( d_k)}\\bigl ( \\log p( X_{k} \\mid {d}_{k} , \\,F,\\,B,\\,s) +<br>\\log p( d_k \\mid a)\\bigr) - \\mathbb{E} _ {q( d_k)} \\log q( d_k)\\biggr) $$</p><p>Important notes:</p><ul><li>Use already implemented calculate_log_probability!</li><li>Note that distributions $q( d_k)$ and $p( d_k \\mid a)$ are discrete. For example, $P(d_k=i \\mid a) = a[i]$.</li><li>This implementation should not use cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_lower_bound</span><span class=\"params\">(X, F, B, s, a, q)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Calculates the lower bound L(q, F, B, s, a) for </span></span><br><span class=\"line\"><span class=\"string\">    the marginal log likelihood.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    q : array</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior </span></span><br><span class=\"line\"><span class=\"string\">                   of position dw</span></span><br><span class=\"line\"><span class=\"string\">                   of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    L : float</span></span><br><span class=\"line\"><span class=\"string\">        The lower bound L(q, F, B, s, a) </span></span><br><span class=\"line\"><span class=\"string\">        for the marginal log likelihood.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = <span class=\"number\">-12761.1875</span></span><br><span class=\"line\">actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-10-eb49d6900e27&gt; in &lt;module&gt;()\n      2 expected = -12761.1875\n      3 actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\n----&gt; 4 assert np.allclose(actual, expected)\n      5 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"3-Implement-E-step\"><a href=\"#3-Implement-E-step\" class=\"headerlink\" title=\"3. Implement E-step\"></a>3. Implement E-step</h4><p>$$q(d_k) = p(d_k \\mid X_k, \\,F, \\,B, \\,s,\\, a) =<br>\\frac {p( X_{k} \\mid {d}_{k} , \\,F,\\,B,\\,s)\\, p(d_k \\mid a)}<br>{\\sum_{d_k} p( X_{k} \\mid d_k , \\,F,\\,B,\\,s) \\,p(d_k \\mid a)}$$</p><p>Important notes:</p><ul><li>Use already implemented calculate_log_probability!</li><li>For computational stability, perform all computations with logarithmic values and apply exp only before return. Also, we recommend using this trick:<br>$$\\beta_i = \\log{p_i(\\dots)} \\quad\\rightarrow \\quad<br>\\frac{e^{\\beta_i}}{\\sum_k e^{\\beta_k}} =<br>\\frac{e^{(\\beta_i - \\max_j \\beta_j)}}{\\sum_k e^{(\\beta_k- \\max_j \\beta_j)}}$$</li><li>This implementation should not use cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_e_step</span><span class=\"params\">(X, F, B, s, a)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Given the current esitmate of the parameters, for each image Xk</span></span><br><span class=\"line\"><span class=\"string\">    esitmates the probability p(d_k|X_k, F, B, s, a).</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape(H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F  : array_like, shape(H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array shape(H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Eestimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape(W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on face position in any image.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    q : array</span></span><br><span class=\"line\"><span class=\"string\">        shape (W-w+1, K)</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior of position dw</span></span><br><span class=\"line\"><span class=\"string\">        of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = np.array([[ <span class=\"number\">1.</span>,  <span class=\"number\">1.</span>],</span><br><span class=\"line\">                   [ <span class=\"number\">0.</span>,  <span class=\"number\">0.</span>],</span><br><span class=\"line\">                   [ <span class=\"number\">0.</span>,  <span class=\"number\">0.</span>]])</span><br><span class=\"line\">actual = run_e_step(tX, tF, tB, ts, ta)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-12-98d2b4c2edac&gt; in &lt;module&gt;()\n      4                    [ 0.,  0.]])\n      5 actual = run_e_step(tX, tF, tB, ts, ta)\n----&gt; 6 assert np.allclose(actual, expected)\n      7 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"4-Implement-M-step\"><a href=\"#4-Implement-M-step\" class=\"headerlink\" title=\"4. Implement M-step\"></a>4. Implement M-step</h4><p>$$a[j] = \\frac{\\sum_k q( d_k = j )}{\\sum_{j} \\sum_{k} q( d_{k} = j)}$$<br>$$F[i, m] = \\frac 1 K \\sum_k \\sum_{d_k} q(d_k)\\, X^k[i,\\, m+d_k]$$<br>$$B[i, j] = \\frac {\\sum_k \\sum_{ d_k:\\, (i, \\,j) \\,\\not\\in faceArea(d_k)} q(d_k)\\, X^k[i, j]}<br>{\\sum_k \\sum_{d_k: \\,(i, \\,j)\\, \\not\\in faceArea(d_k)} q(d_k)}$$<br>$$s^2 = \\frac 1 {HWK} \\sum_k \\sum_{d_k} q(d_k)<br>\\sum_{i,\\, j} (X^k[i, \\,j] - Model^{d_k}[i, \\,j])^2$$</p><p>where $Model^{d_k}[i, j]$ is an image composed from background and face located at $d_k$.</p><p>Important notes:</p><ul><li>Update parameters in the following order: $a$, $F$, $B$, $s$.</li><li>When the parameter is updated, its <strong>new</strong> value is used to update other parameters.</li><li>This implementation should use no more than 3 cycles and no embedded cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_m_step</span><span class=\"params\">(X, q, w)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Estimates F, B, s, a given esitmate of posteriors defined by q.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    q  :</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior of position dw</span></span><br><span class=\"line\"><span class=\"string\">                   of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\">    w : int</span></span><br><span class=\"line\"><span class=\"string\">        Face mask width.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = [np.array([[ <span class=\"number\">3.27777778</span>],</span><br><span class=\"line\">                      [ <span class=\"number\">9.27777778</span>]]),</span><br><span class=\"line\"> np.array([[  <span class=\"number\">0.48387097</span>,   <span class=\"number\">2.5</span>       ,   <span class=\"number\">4.52941176</span>],</span><br><span class=\"line\">           [  <span class=\"number\">6.48387097</span>,   <span class=\"number\">8.5</span>       ,  <span class=\"number\">10.52941176</span>]]),</span><br><span class=\"line\">  <span class=\"number\">0.94868</span>,</span><br><span class=\"line\"> np.array([ <span class=\"number\">0.13888889</span>,  <span class=\"number\">0.33333333</span>,  <span class=\"number\">0.52777778</span>])]</span><br><span class=\"line\">actual = run_m_step(tX, tq, tw)</span><br><span class=\"line\"><span class=\"keyword\">for</span> a, e <span class=\"keyword\">in</span> zip(actual, expected):</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> np.allclose(a, e)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-14-e44e2bfe2fd1&gt; in &lt;module&gt;()\n      7  np.array([ 0.13888889,  0.33333333,  0.52777778])]\n      8 actual = run_m_step(tX, tq, tw)\n----&gt; 9 for a, e in zip(actual, expected):\n     10     assert np.allclose(a, e)\n     11 print(&quot;OK&quot;)\n\n\nTypeError: zip argument #1 must support iteration\n</code></pre><h4 id=\"5-Implement-EM-algorithm\"><a href=\"#5-Implement-EM-algorithm\" class=\"headerlink\" title=\"5. Implement EM_algorithm\"></a>5. Implement EM_algorithm</h4><p>Initialize parameters, if they are not passed, and then repeat E- and M-steps till convergence.</p><p>Please note that $\\mathcal{L}(q, \\,F, \\,B, \\,s, \\,a)$ must increase after each iteration.</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_EM</span><span class=\"params\">(X, w, F=None, B=None, s=None, a=None, tolerance=<span class=\"number\">0.001</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">           max_iter=<span class=\"number\">50</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Runs EM loop until the likelihood of observing X given current</span></span><br><span class=\"line\"><span class=\"string\">    estimate of parameters is idempotent as defined by a fixed</span></span><br><span class=\"line\"><span class=\"string\">    tolerance.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    w : int</span></span><br><span class=\"line\"><span class=\"string\">        Face mask width.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float, optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    tolerance : float, optional</span></span><br><span class=\"line\"><span class=\"string\">        Parameter for stopping criterion.</span></span><br><span class=\"line\"><span class=\"string\">    max_iter  : int, optional</span></span><br><span class=\"line\"><span class=\"string\">        Maximum number of iterations.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    F, B, s, a : trained parameters.</span></span><br><span class=\"line\"><span class=\"string\">    LL : array, shape(number_of_iters + 2,)</span></span><br><span class=\"line\"><span class=\"string\">        L(q, F, B, s, a) at initial guess, </span></span><br><span class=\"line\"><span class=\"string\">        after each EM iteration and after</span></span><br><span class=\"line\"><span class=\"string\">        final estimate of posteriors;</span></span><br><span class=\"line\"><span class=\"string\">        number_of_iters is actual number of iterations that was done.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    H, W, N = X.shape</span><br><span class=\"line\">    <span class=\"keyword\">if</span> F <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        F = np.random.randint(<span class=\"number\">0</span>, <span class=\"number\">255</span>, (H, w))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> B <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        B = np.random.randint(<span class=\"number\">0</span>, <span class=\"number\">255</span>, (H, W))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> a <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        a = np.ones(W - w + <span class=\"number\">1</span>)</span><br><span class=\"line\">        a /= np.sum(a)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> s <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        s = np.random.rand()*pow(<span class=\"number\">64</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">res = run_EM(tX, tw, max_iter=<span class=\"number\">3</span>)</span><br><span class=\"line\">LL = res[<span class=\"number\">-1</span>]</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.alltrue(LL[<span class=\"number\">1</span>:] - LL[:<span class=\"number\">-1</span>] &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-16-6b1860dc5143&gt; in &lt;module&gt;()\n      1 # run this cell to test your implementation\n      2 res = run_EM(tX, tw, max_iter=3)\n----&gt; 3 LL = res[-1]\n      4 assert np.alltrue(LL[1:] - LL[:-1] &gt; 0)\n      5 print(&quot;OK&quot;)\n\n\nTypeError: &apos;NoneType&apos; object is not subscriptable\n</code></pre><h3 id=\"Who-is-the-prankster\"><a href=\"#Who-is-the-prankster\" class=\"headerlink\" title=\"Who is the prankster?\"></a>Who is the prankster?</h3><p>To speed up the computation, we will perform 5 iterations over small subset of images and then gradually increase the subset.</p><p>If everything is implemented correctly, you will recognize the prankster (remember he is the one from <a href=\"http://deepbayes.ru/#speakers\" target=\"_blank\" rel=\"noopener\">DeepBayes team</a>).</p><p>Run EM-algorithm:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span><span class=\"params\">(F, i=<span class=\"number\">1</span>, n=<span class=\"number\">1</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    shows face F at subplot i out of n</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, n, i)</span><br><span class=\"line\">    plt.imshow(F, cmap=<span class=\"string\">\"Greys_r\"</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">\"off\"</span>)</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F, B, s, a = [<span class=\"keyword\">None</span>] * <span class=\"number\">4</span></span><br><span class=\"line\">LL = []</span><br><span class=\"line\">lens = [<span class=\"number\">50</span>, <span class=\"number\">100</span>, <span class=\"number\">300</span>, <span class=\"number\">500</span>, <span class=\"number\">1000</span>]</span><br><span class=\"line\">iters = [<span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">20</span>, <span class=\"number\">5</span>))</span><br><span class=\"line\"><span class=\"keyword\">for</span> i, (l, it) <span class=\"keyword\">in</span> enumerate(zip(lens, iters)):</span><br><span class=\"line\">    F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)</span><br><span class=\"line\">    show(F, i+<span class=\"number\">1</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-18-5c3ec9450804&gt; in &lt;module&gt;()\n      5 plt.figure(figsize=(20, 5))\n      6 for i, (l, it) in enumerate(zip(lens, iters)):\n----&gt; 7     F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n      8     show(F, i+1, 5)\n\n\nTypeError: &apos;NoneType&apos; object is not iterable\n\n\n\n&lt;Figure size 1440x360 with 0 Axes&gt;\n</code></pre><p>And this is the background:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show(B)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-19-ba7381968102&gt; in &lt;module&gt;()\n----&gt; 1 show(B)\n\n\n&lt;ipython-input-17-1c6656dd6e56&gt; in show(F, i, n)\n      4     &quot;&quot;&quot;\n      5     plt.subplot(1, n, i)\n----&gt; 6     plt.imshow(F, cmap=&quot;Greys_r&quot;)\n      7     plt.axis(&quot;off&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\pyplot.py in imshow(X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, hold, data, **kwargs)\n   3203                         filternorm=filternorm, filterrad=filterrad,\n   3204                         imlim=imlim, resample=resample, url=url, data=data,\n-&gt; 3205                         **kwargs)\n   3206     finally:\n   3207         ax._hold = washold\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\__init__.py in inner(ax, *args, **kwargs)\n   1853                         &quot;the Matplotlib list!)&quot; % (label_namer, func.__name__),\n   1854                         RuntimeWarning, stacklevel=2)\n-&gt; 1855             return func(ax, *args, **kwargs)\n   1856 \n   1857         inner.__doc__ = _add_data_doc(inner.__doc__,\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\axes\\_axes.py in imshow(self, X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, **kwargs)\n   5485                               resample=resample, **kwargs)\n   5486 \n-&gt; 5487         im.set_data(X)\n   5488         im.set_alpha(alpha)\n   5489         if im.get_clip_path() is None:\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\image.py in set_data(self, A)\n    647         if (self._A.dtype != np.uint8 and\n    648                 not np.can_cast(self._A.dtype, float, &quot;same_kind&quot;)):\n--&gt; 649             raise TypeError(&quot;Image data cannot be converted to float&quot;)\n    650 \n    651         if not (self._A.ndim == 2\n\n\nTypeError: Image data cannot be converted to float\n</code></pre><p><img src=\"task_em_files/task_em_35_1.png\" alt=\"png\"></p><h3 id=\"Optional-part-hard-EM\"><a href=\"#Optional-part-hard-EM\" class=\"headerlink\" title=\"Optional part: hard-EM\"></a>Optional part: hard-EM</h3><p>If you have some time left, you can implement simplified version of EM-algorithm called hard-EM. In hard-EM, instead of finding posterior distribution $p(d_k|X_k, F, B, s, A)$ at E-step, we just remember its argmax $\\tilde d_k$ for each image $k$. Thus, the distribution q is replaced with a singular distribution:<br>$$q(d_k) = \\begin{cases} 1, \\, if d_k = \\tilde d_k \\\\ 0, \\, otherwise\\end{cases}$$<br>This modification simplifies formulas for $\\mathcal{L}$ and M-step and speeds their computation up. However, the convergence of hard-EM is usually slow.</p><p>If you implement hard-EM, add binary flag hard_EM to the parameters of the following functions:</p><ul><li>calculate_lower_bound</li><li>run_e_step</li><li>run_m_step</li><li>run_EM</li></ul><p>After implementation, compare overall computation time for EM and hard-EM till recognizable F.</p>","site":{"data":{}},"excerpt":"<p>Deep-Bayes 2018 Summer Camp<br><br>","more":"</p><h1 id=\"Deep-Bayes-summer-school-Practical-session-on-EM-algorithm\"><a href=\"#Deep-Bayes-summer-school-Practical-session-on-EM-algorithm\" class=\"headerlink\" title=\"Deep|Bayes summer school. Practical session on EM algorithm\"></a>Deep<span style=\"color:green\">|</span>Bayes summer school. Practical session on EM algorithm</h1><p>One of the school organisers decided to prank us and hid all games for our Thursday Game Night somewhere.</p><p>Lets find the prankster!</p><p>When you recognize <a href=\"http://deepbayes.ru/#speakers\" target=\"_blank\" rel=\"noopener\">him or her</a>, send:</p><ul><li>name</li><li>reconstructed photo</li><li>this notebook with your code (doesnt matter how awful it is :)</li></ul><p><strong>privately</strong> to <a href=\"https://www.facebook.com/nadiinchi\" target=\"_blank\" rel=\"noopener\">Nadia Chirkova</a> at Facebook or to <a href=\"mailto:info@deepbayes.ru\" target=\"_blank\" rel=\"noopener\">info@deepbayes.ru</a>. The first three participants will receive a present. Do not make spoilers to other participants!</p><p>Please, note that you have only <strong>one attempt</strong> to send a message!</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\">%matplotlib inline</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DATA_FILE = <span class=\"string\">\"data_em\"</span></span><br><span class=\"line\">w = <span class=\"number\">73</span> <span class=\"comment\"># face_width</span></span><br></pre></td></tr></table></figure><h3 id=\"Data\"><a href=\"#Data\" class=\"headerlink\" title=\"Data\"></a>Data</h3><p>We are given a set of $K$ images with shape $H \\times W$.</p><p>It is represented by a numpy-array with shape $H \\times W \\times K$:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X = np.load(DATA_FILE)</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">X.shape <span class=\"comment\"># H, W, K</span></span><br></pre></td></tr></table></figure><pre><code>(100, 200, 1000)\n</code></pre><p>Example of noisy image:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">plt.imshow(X[:, :, <span class=\"number\">0</span>], cmap=<span class=\"string\">\"Greys_r\"</span>)</span><br><span class=\"line\">plt.axis(<span class=\"string\">\"off\"</span>)</span><br><span class=\"line\">print(X[<span class=\"number\">1</span>,:,<span class=\"number\">0</span>])</span><br></pre></td></tr></table></figure><pre><code>[255. 255.  41. 255.   0.  51. 255.  15. 255.  59.   0.   0.   0. 255.\n   0. 255. 255.   0. 175.  74. 184.   0.   0. 150. 255. 255.   0.   0.\n 148.   0. 255. 181. 255. 255. 255.   0. 255. 255.  30.   0.   0. 255.\n   0. 255. 255. 206. 234. 255.   0. 255. 255. 255.   0. 255.   0. 255.\n   0. 255. 255. 175.  30. 255.   0.   0. 255.   0. 255.  48.   0.   0.\n   0. 232. 162. 255.  26.   0.   0. 255.   0. 255. 173. 255. 255.   0.\n   0. 255. 255. 119.   0.   0.   0.   0.   0.   0. 255. 255. 255. 255.\n   0.   0. 248.   5. 149. 255.   0. 255. 255. 255.   0. 108.   0.   0.\n 255.   0. 255. 255. 255.   0.   0. 193.  79.   0. 255.   0.   0.   0.\n 233. 255.   0.  65. 255. 255. 255.   0. 255.   0.   0.   0. 255.  58.\n 226. 255.   0. 242. 255. 255.   0. 255.   4. 255. 255.  97. 255.   0.\n   0. 255.   0. 255.   0.   0.   0. 255.   0.  43. 219.   0. 255. 255.\n 255. 166. 255.   0. 255.  42. 255.  44. 255. 255. 255. 255. 255. 255.\n 255. 255.  28.   0.  52. 255.  81. 104. 255. 255.  48. 255. 255. 255.\n 102.  25.  30.  73.]\n</code></pre><p><img src=\"task_em_files/task_em_9_1.png\" alt=\"png\"></p><h3 id=\"Goal-and-plan\"><a href=\"#Goal-and-plan\" class=\"headerlink\" title=\"Goal and plan\"></a>Goal and plan</h3><p>Our goal is to find face $F$ ($H \\times w$).</p><p>Also, we will find:</p><ul><li>$B$: background ($H \\times W$)</li><li>$s$: noise standard deviation (float)</li><li>$a$: discrete prior over face positions ($W-w+1$)</li><li>$q(d)$: discrete posterior over face positions for each image (($W-w+1$) x $K$)</li></ul><p>Implementation plan:</p><ol><li>calculating $log\\, p(X \\mid d,\\,F,\\,B,\\,s)$</li><li>calculating objective</li><li>E-step: finding $q(d)$</li><li>M-step: estimating $F,\\, B, \\,s, \\,a$</li><li>composing EM-algorithm from E- and M-step</li></ol><h3 id=\"Implementation\"><a href=\"#Implementation\" class=\"headerlink\" title=\"Implementation\"></a>Implementation</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">### Variables to test implementation</span></span><br><span class=\"line\">tH, tW, tw, tK = <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span></span><br><span class=\"line\">tX = np.arange(tH*tW*tK).reshape(tH, tW, tK)</span><br><span class=\"line\">tF = np.arange(tH*tw).reshape(tH, tw)</span><br><span class=\"line\">tB = np.arange(tH*tW).reshape(tH, tW)</span><br><span class=\"line\">ts = <span class=\"number\">0.1</span></span><br><span class=\"line\">ta = np.arange(<span class=\"number\">1</span>, (tW-tw+<span class=\"number\">1</span>)+<span class=\"number\">1</span>)</span><br><span class=\"line\">ta = ta / ta.sum()</span><br><span class=\"line\">tq = np.arange(<span class=\"number\">1</span>, (tW-tw+<span class=\"number\">1</span>)*tK+<span class=\"number\">1</span>).reshape(tW-tw+<span class=\"number\">1</span>, tK)</span><br><span class=\"line\">tq = tq / tq.sum(axis=<span class=\"number\">0</span>)[np.newaxis, :]</span><br></pre></td></tr></table></figure><h4 id=\"1-Implement-calculate-log-probability\"><a href=\"#1-Implement-calculate-log-probability\" class=\"headerlink\" title=\"1. Implement calculate_log_probability\"></a>1. Implement calculate_log_probability</h4><p>For $k$-th image $X_k$ and some face position $d_k$:<br>$$p(X_k \\mid d_k,\\,F,\\,B,\\,s) = \\prod_{ij}<br>\\begin{cases}<br>\\mathcal{N}(X_k[i,j]\\mid F[i,\\,j-d_k],\\,s^2),<br>&amp; \\text{if}\\, (i,j)\\in faceArea(d_k)\\\\<br>\\mathcal{N}(X_k[i,j]\\mid B[i,j],\\,s^2), &amp; \\text{else}<br>\\end{cases}$$</p><p>Important notes:</p><ul><li>Do not forget about logarithm!</li><li>This implementation should use no more than 1 cycle!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_log_probability</span><span class=\"params\">(X, F, B, s)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Calculates log p(X_k|d_k, F, B, s) for all images X_k in X and</span></span><br><span class=\"line\"><span class=\"string\">    all possible face position d_k.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    ll : array, shape(W-w+1, K)</span></span><br><span class=\"line\"><span class=\"string\">        ll[dw, k] - log-likelihood of observing image X_k given</span></span><br><span class=\"line\"><span class=\"string\">        that the prankster's face F is located at position dw</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = np.array([[<span class=\"number\">-3541.69812064</span>, <span class=\"number\">-5541.69812064</span>],</span><br><span class=\"line\">       [<span class=\"number\">-4541.69812064</span>, <span class=\"number\">-6741.69812064</span>],</span><br><span class=\"line\">       [<span class=\"number\">-6141.69812064</span>, <span class=\"number\">-8541.69812064</span>]])</span><br><span class=\"line\">actual = calculate_log_probability(tX, tF, tB, ts)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-8-7e147f60fb2e&gt; in &lt;module&gt;()\n      4        [-6141.69812064, -8541.69812064]])\n      5 actual = calculate_log_probability(tX, tF, tB, ts)\n----&gt; 6 assert np.allclose(actual, expected)\n      7 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"2-Implement-calculate-lower-bound\"><a href=\"#2-Implement-calculate-lower-bound\" class=\"headerlink\" title=\"2. Implement calculate_lower_bound\"></a>2. Implement calculate_lower_bound</h4><p>$$\\mathcal{L}(q, \\,F, \\,B,\\, s,\\, a) = \\sum_k \\biggl (\\mathbb{E} _ {q( d_k)}\\bigl ( \\log p( X_{k} \\mid {d}_{k} , \\,F,\\,B,\\,s) +<br>\\log p( d_k \\mid a)\\bigr) - \\mathbb{E} _ {q( d_k)} \\log q( d_k)\\biggr) $$</p><p>Important notes:</p><ul><li>Use already implemented calculate_log_probability!</li><li>Note that distributions $q( d_k)$ and $p( d_k \\mid a)$ are discrete. For example, $P(d_k=i \\mid a) = a[i]$.</li><li>This implementation should not use cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">calculate_lower_bound</span><span class=\"params\">(X, F, B, s, a, q)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Calculates the lower bound L(q, F, B, s, a) for </span></span><br><span class=\"line\"><span class=\"string\">    the marginal log likelihood.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    q : array</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior </span></span><br><span class=\"line\"><span class=\"string\">                   of position dw</span></span><br><span class=\"line\"><span class=\"string\">                   of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    L : float</span></span><br><span class=\"line\"><span class=\"string\">        The lower bound L(q, F, B, s, a) </span></span><br><span class=\"line\"><span class=\"string\">        for the marginal log likelihood.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = <span class=\"number\">-12761.1875</span></span><br><span class=\"line\">actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-10-eb49d6900e27&gt; in &lt;module&gt;()\n      2 expected = -12761.1875\n      3 actual = calculate_lower_bound(tX, tF, tB, ts, ta, tq)\n----&gt; 4 assert np.allclose(actual, expected)\n      5 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"3-Implement-E-step\"><a href=\"#3-Implement-E-step\" class=\"headerlink\" title=\"3. Implement E-step\"></a>3. Implement E-step</h4><p>$$q(d_k) = p(d_k \\mid X_k, \\,F, \\,B, \\,s,\\, a) =<br>\\frac {p( X_{k} \\mid {d}_{k} , \\,F,\\,B,\\,s)\\, p(d_k \\mid a)}<br>{\\sum_{d_k} p( X_{k} \\mid d_k , \\,F,\\,B,\\,s) \\,p(d_k \\mid a)}$$</p><p>Important notes:</p><ul><li>Use already implemented calculate_log_probability!</li><li>For computational stability, perform all computations with logarithmic values and apply exp only before return. Also, we recommend using this trick:<br>$$\\beta_i = \\log{p_i(\\dots)} \\quad\\rightarrow \\quad<br>\\frac{e^{\\beta_i}}{\\sum_k e^{\\beta_k}} =<br>\\frac{e^{(\\beta_i - \\max_j \\beta_j)}}{\\sum_k e^{(\\beta_k- \\max_j \\beta_j)}}$$</li><li>This implementation should not use cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_e_step</span><span class=\"params\">(X, F, B, s, a)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Given the current esitmate of the parameters, for each image Xk</span></span><br><span class=\"line\"><span class=\"string\">    esitmates the probability p(d_k|X_k, F, B, s, a).</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape(H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    F  : array_like, shape(H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array shape(H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Eestimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape(W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on face position in any image.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    q : array</span></span><br><span class=\"line\"><span class=\"string\">        shape (W-w+1, K)</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior of position dw</span></span><br><span class=\"line\"><span class=\"string\">        of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = np.array([[ <span class=\"number\">1.</span>,  <span class=\"number\">1.</span>],</span><br><span class=\"line\">                   [ <span class=\"number\">0.</span>,  <span class=\"number\">0.</span>],</span><br><span class=\"line\">                   [ <span class=\"number\">0.</span>,  <span class=\"number\">0.</span>]])</span><br><span class=\"line\">actual = run_e_step(tX, tF, tB, ts, ta)</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.allclose(actual, expected)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-12-98d2b4c2edac&gt; in &lt;module&gt;()\n      4                    [ 0.,  0.]])\n      5 actual = run_e_step(tX, tF, tB, ts, ta)\n----&gt; 6 assert np.allclose(actual, expected)\n      7 print(&quot;OK&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in allclose(a, b, rtol, atol, equal_nan)\n   2254 \n   2255     &quot;&quot;&quot;\n-&gt; 2256     res = all(isclose(a, b, rtol=rtol, atol=atol, equal_nan=equal_nan))\n   2257     return bool(res)\n   2258 \n\n\n~\\Anaconda3\\lib\\site-packages\\numpy\\core\\numeric.py in isclose(a, b, rtol, atol, equal_nan)\n   2330     y = array(y, dtype=dt, copy=False, subok=True)\n   2331 \n-&gt; 2332     xfin = isfinite(x)\n   2333     yfin = isfinite(y)\n   2334     if all(xfin) and all(yfin):\n\n\nTypeError: ufunc &apos;isfinite&apos; not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule &apos;&apos;safe&apos;&apos;\n</code></pre><h4 id=\"4-Implement-M-step\"><a href=\"#4-Implement-M-step\" class=\"headerlink\" title=\"4. Implement M-step\"></a>4. Implement M-step</h4><p>$$a[j] = \\frac{\\sum_k q( d_k = j )}{\\sum_{j} \\sum_{k} q( d_{k} = j)}$$<br>$$F[i, m] = \\frac 1 K \\sum_k \\sum_{d_k} q(d_k)\\, X^k[i,\\, m+d_k]$$<br>$$B[i, j] = \\frac {\\sum_k \\sum_{ d_k:\\, (i, \\,j) \\,\\not\\in faceArea(d_k)} q(d_k)\\, X^k[i, j]}<br>{\\sum_k \\sum_{d_k: \\,(i, \\,j)\\, \\not\\in faceArea(d_k)} q(d_k)}$$<br>$$s^2 = \\frac 1 {HWK} \\sum_k \\sum_{d_k} q(d_k)<br>\\sum_{i,\\, j} (X^k[i, \\,j] - Model^{d_k}[i, \\,j])^2$$</p><p>where $Model^{d_k}[i, j]$ is an image composed from background and face located at $d_k$.</p><p>Important notes:</p><ul><li>Update parameters in the following order: $a$, $F$, $B$, $s$.</li><li>When the parameter is updated, its <strong>new</strong> value is used to update other parameters.</li><li>This implementation should use no more than 3 cycles and no embedded cycles!</li></ul><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_m_step</span><span class=\"params\">(X, q, w)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Estimates F, B, s, a given esitmate of posteriors defined by q.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    q  :</span></span><br><span class=\"line\"><span class=\"string\">        q[dw, k] - estimate of posterior of position dw</span></span><br><span class=\"line\"><span class=\"string\">                   of prankster's face given image Xk</span></span><br><span class=\"line\"><span class=\"string\">    w : int</span></span><br><span class=\"line\"><span class=\"string\">        Face mask width.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1)</span></span><br><span class=\"line\"><span class=\"string\">        Estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">expected = [np.array([[ <span class=\"number\">3.27777778</span>],</span><br><span class=\"line\">                      [ <span class=\"number\">9.27777778</span>]]),</span><br><span class=\"line\"> np.array([[  <span class=\"number\">0.48387097</span>,   <span class=\"number\">2.5</span>       ,   <span class=\"number\">4.52941176</span>],</span><br><span class=\"line\">           [  <span class=\"number\">6.48387097</span>,   <span class=\"number\">8.5</span>       ,  <span class=\"number\">10.52941176</span>]]),</span><br><span class=\"line\">  <span class=\"number\">0.94868</span>,</span><br><span class=\"line\"> np.array([ <span class=\"number\">0.13888889</span>,  <span class=\"number\">0.33333333</span>,  <span class=\"number\">0.52777778</span>])]</span><br><span class=\"line\">actual = run_m_step(tX, tq, tw)</span><br><span class=\"line\"><span class=\"keyword\">for</span> a, e <span class=\"keyword\">in</span> zip(actual, expected):</span><br><span class=\"line\">    <span class=\"keyword\">assert</span> np.allclose(a, e)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-14-e44e2bfe2fd1&gt; in &lt;module&gt;()\n      7  np.array([ 0.13888889,  0.33333333,  0.52777778])]\n      8 actual = run_m_step(tX, tq, tw)\n----&gt; 9 for a, e in zip(actual, expected):\n     10     assert np.allclose(a, e)\n     11 print(&quot;OK&quot;)\n\n\nTypeError: zip argument #1 must support iteration\n</code></pre><h4 id=\"5-Implement-EM-algorithm\"><a href=\"#5-Implement-EM-algorithm\" class=\"headerlink\" title=\"5. Implement EM_algorithm\"></a>5. Implement EM_algorithm</h4><p>Initialize parameters, if they are not passed, and then repeat E- and M-steps till convergence.</p><p>Please note that $\\mathcal{L}(q, \\,F, \\,B, \\,s, \\,a)$ must increase after each iteration.</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">run_EM</span><span class=\"params\">(X, w, F=None, B=None, s=None, a=None, tolerance=<span class=\"number\">0.001</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">           max_iter=<span class=\"number\">50</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    Runs EM loop until the likelihood of observing X given current</span></span><br><span class=\"line\"><span class=\"string\">    estimate of parameters is idempotent as defined by a fixed</span></span><br><span class=\"line\"><span class=\"string\">    tolerance.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Parameters</span></span><br><span class=\"line\"><span class=\"string\">    ----------</span></span><br><span class=\"line\"><span class=\"string\">    X : array, shape (H, W, K)</span></span><br><span class=\"line\"><span class=\"string\">        K images of size H x W.</span></span><br><span class=\"line\"><span class=\"string\">    w : int</span></span><br><span class=\"line\"><span class=\"string\">        Face mask width.</span></span><br><span class=\"line\"><span class=\"string\">    F : array, shape (H, w), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of prankster's face.</span></span><br><span class=\"line\"><span class=\"string\">    B : array, shape (H, W), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of background.</span></span><br><span class=\"line\"><span class=\"string\">    s : float, optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of standard deviation of Gaussian noise.</span></span><br><span class=\"line\"><span class=\"string\">    a : array, shape (W-w+1), optional</span></span><br><span class=\"line\"><span class=\"string\">        Initial estimate of prior on position of face in any image.</span></span><br><span class=\"line\"><span class=\"string\">    tolerance : float, optional</span></span><br><span class=\"line\"><span class=\"string\">        Parameter for stopping criterion.</span></span><br><span class=\"line\"><span class=\"string\">    max_iter  : int, optional</span></span><br><span class=\"line\"><span class=\"string\">        Maximum number of iterations.</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">    Returns</span></span><br><span class=\"line\"><span class=\"string\">    -------</span></span><br><span class=\"line\"><span class=\"string\">    F, B, s, a : trained parameters.</span></span><br><span class=\"line\"><span class=\"string\">    LL : array, shape(number_of_iters + 2,)</span></span><br><span class=\"line\"><span class=\"string\">        L(q, F, B, s, a) at initial guess, </span></span><br><span class=\"line\"><span class=\"string\">        after each EM iteration and after</span></span><br><span class=\"line\"><span class=\"string\">        final estimate of posteriors;</span></span><br><span class=\"line\"><span class=\"string\">        number_of_iters is actual number of iterations that was done.</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    H, W, N = X.shape</span><br><span class=\"line\">    <span class=\"keyword\">if</span> F <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        F = np.random.randint(<span class=\"number\">0</span>, <span class=\"number\">255</span>, (H, w))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> B <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        B = np.random.randint(<span class=\"number\">0</span>, <span class=\"number\">255</span>, (H, W))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> a <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        a = np.ones(W - w + <span class=\"number\">1</span>)</span><br><span class=\"line\">        a /= np.sum(a)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> s <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">        s = np.random.rand()*pow(<span class=\"number\">64</span>,<span class=\"number\">2</span>)</span><br><span class=\"line\">    <span class=\"comment\"># your code here</span></span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># run this cell to test your implementation</span></span><br><span class=\"line\">res = run_EM(tX, tw, max_iter=<span class=\"number\">3</span>)</span><br><span class=\"line\">LL = res[<span class=\"number\">-1</span>]</span><br><span class=\"line\"><span class=\"keyword\">assert</span> np.alltrue(LL[<span class=\"number\">1</span>:] - LL[:<span class=\"number\">-1</span>] &gt; <span class=\"number\">0</span>)</span><br><span class=\"line\">print(<span class=\"string\">\"OK\"</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-16-6b1860dc5143&gt; in &lt;module&gt;()\n      1 # run this cell to test your implementation\n      2 res = run_EM(tX, tw, max_iter=3)\n----&gt; 3 LL = res[-1]\n      4 assert np.alltrue(LL[1:] - LL[:-1] &gt; 0)\n      5 print(&quot;OK&quot;)\n\n\nTypeError: &apos;NoneType&apos; object is not subscriptable\n</code></pre><h3 id=\"Who-is-the-prankster\"><a href=\"#Who-is-the-prankster\" class=\"headerlink\" title=\"Who is the prankster?\"></a>Who is the prankster?</h3><p>To speed up the computation, we will perform 5 iterations over small subset of images and then gradually increase the subset.</p><p>If everything is implemented correctly, you will recognize the prankster (remember he is the one from <a href=\"http://deepbayes.ru/#speakers\" target=\"_blank\" rel=\"noopener\">DeepBayes team</a>).</p><p>Run EM-algorithm:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">show</span><span class=\"params\">(F, i=<span class=\"number\">1</span>, n=<span class=\"number\">1</span>)</span>:</span></span><br><span class=\"line\">    <span class=\"string\">\"\"\"</span></span><br><span class=\"line\"><span class=\"string\">    shows face F at subplot i out of n</span></span><br><span class=\"line\"><span class=\"string\">    \"\"\"</span></span><br><span class=\"line\">    plt.subplot(<span class=\"number\">1</span>, n, i)</span><br><span class=\"line\">    plt.imshow(F, cmap=<span class=\"string\">\"Greys_r\"</span>)</span><br><span class=\"line\">    plt.axis(<span class=\"string\">\"off\"</span>)</span><br></pre></td></tr></table></figure><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">F, B, s, a = [<span class=\"keyword\">None</span>] * <span class=\"number\">4</span></span><br><span class=\"line\">LL = []</span><br><span class=\"line\">lens = [<span class=\"number\">50</span>, <span class=\"number\">100</span>, <span class=\"number\">300</span>, <span class=\"number\">500</span>, <span class=\"number\">1000</span>]</span><br><span class=\"line\">iters = [<span class=\"number\">5</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>]</span><br><span class=\"line\">plt.figure(figsize=(<span class=\"number\">20</span>, <span class=\"number\">5</span>))</span><br><span class=\"line\"><span class=\"keyword\">for</span> i, (l, it) <span class=\"keyword\">in</span> enumerate(zip(lens, iters)):</span><br><span class=\"line\">    F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)</span><br><span class=\"line\">    show(F, i+<span class=\"number\">1</span>, <span class=\"number\">5</span>)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-18-5c3ec9450804&gt; in &lt;module&gt;()\n      5 plt.figure(figsize=(20, 5))\n      6 for i, (l, it) in enumerate(zip(lens, iters)):\n----&gt; 7     F, B, s, a, _ = run_EM(X[:, :, :l], w, F, B, s, a, max_iter=it)\n      8     show(F, i+1, 5)\n\n\nTypeError: &apos;NoneType&apos; object is not iterable\n\n\n\n&lt;Figure size 1440x360 with 0 Axes&gt;\n</code></pre><p>And this is the background:</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show(B)</span><br></pre></td></tr></table></figure><pre><code>---------------------------------------------------------------------------\n\nTypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-19-ba7381968102&gt; in &lt;module&gt;()\n----&gt; 1 show(B)\n\n\n&lt;ipython-input-17-1c6656dd6e56&gt; in show(F, i, n)\n      4     &quot;&quot;&quot;\n      5     plt.subplot(1, n, i)\n----&gt; 6     plt.imshow(F, cmap=&quot;Greys_r&quot;)\n      7     plt.axis(&quot;off&quot;)\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\pyplot.py in imshow(X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, hold, data, **kwargs)\n   3203                         filternorm=filternorm, filterrad=filterrad,\n   3204                         imlim=imlim, resample=resample, url=url, data=data,\n-&gt; 3205                         **kwargs)\n   3206     finally:\n   3207         ax._hold = washold\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\__init__.py in inner(ax, *args, **kwargs)\n   1853                         &quot;the Matplotlib list!)&quot; % (label_namer, func.__name__),\n   1854                         RuntimeWarning, stacklevel=2)\n-&gt; 1855             return func(ax, *args, **kwargs)\n   1856 \n   1857         inner.__doc__ = _add_data_doc(inner.__doc__,\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\axes\\_axes.py in imshow(self, X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filterrad, imlim, resample, url, **kwargs)\n   5485                               resample=resample, **kwargs)\n   5486 \n-&gt; 5487         im.set_data(X)\n   5488         im.set_alpha(alpha)\n   5489         if im.get_clip_path() is None:\n\n\n~\\Anaconda3\\lib\\site-packages\\matplotlib\\image.py in set_data(self, A)\n    647         if (self._A.dtype != np.uint8 and\n    648                 not np.can_cast(self._A.dtype, float, &quot;same_kind&quot;)):\n--&gt; 649             raise TypeError(&quot;Image data cannot be converted to float&quot;)\n    650 \n    651         if not (self._A.ndim == 2\n\n\nTypeError: Image data cannot be converted to float\n</code></pre><p><img src=\"task_em_files/task_em_35_1.png\" alt=\"png\"></p><h3 id=\"Optional-part-hard-EM\"><a href=\"#Optional-part-hard-EM\" class=\"headerlink\" title=\"Optional part: hard-EM\"></a>Optional part: hard-EM</h3><p>If you have some time left, you can implement simplified version of EM-algorithm called hard-EM. In hard-EM, instead of finding posterior distribution $p(d_k|X_k, F, B, s, A)$ at E-step, we just remember its argmax $\\tilde d_k$ for each image $k$. Thus, the distribution q is replaced with a singular distribution:<br>$$q(d_k) = \\begin{cases} 1, \\, if d_k = \\tilde d_k \\\\ 0, \\, otherwise\\end{cases}$$<br>This modification simplifies formulas for $\\mathcal{L}$ and M-step and speeds their computation up. However, the convergence of hard-EM is usually slow.</p><p>If you implement hard-EM, add binary flag hard_EM to the parameters of the following functions:</p><ul><li>calculate_lower_bound</li><li>run_e_step</li><li>run_m_step</li><li>run_EM</li></ul><p>After implementation, compare overall computation time for EM and hard-EM till recognizable F.</p>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sat Sep 22 2018 13:41:51 GMT+0800 ()","title":"","path":"2018/09/22/deepbayes2018/","eyeCatchImage":null,"excerpt":"<p>Deep-Bayes 2018 Summer Camp<br><br>","date":"2018-09-22T02:26:48.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","machinelearning","bayes"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":":K-MeansKNN","date":"2017-03-16T07:51:11.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170306/215446798.jpg"],"html":true,"_content":"-\tIrisK-means++sklearnKNN\n-   K-Means&KNN&&sitemap......\n***\n\n<!--more-->\n# \n-   K-Meansn(X)k(C)kk\n-   KNNKNNKKKK\n\n# K-means++\n-\tk-means++k-meanskkk\n-\tX\n\t-\t$c_i$$k_1,k_2...$$c_i$$c_i$\n\t-\t$c_1,c_2,c_3......$\n\t-\t1\n\t-\t(0,1)C\n-\t\n\n# K-Means\n\n## \n-\tIris15034\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143719952.JPG)\n\n\n\n## \n-\t\n```Python\n    def init():\n        iris = load_iris()\n        X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.25, random_state=33)\n        ss = StandardScaler()\n        X_train = ss.fit_transform(X_train)\n        X_test = ss.fit_transform(X_test)\n        return X_train, X_test, y_train, y_test, iris\n    \n```\n\n## k-means++k\n-\tD2()\n-\tprobs\n-\tcumprobs\n```Python\n    def initk(X_train, k):\n        C = [X_train[0]]\n        for i in range(1, k):\n            D2 = scipy.array([min([scipy.inner(c - x, c - x) for c in C]) for x in X_train])\n            probs = D2 / D2.sum()\n            cumprobs = probs.cumsum()\n            r = scipy.rand()\n            for j, p in enumerate(cumprobs):\n                if r < p:\n                    i = j\n                    break\n            C.append(X_train[i])\n        return C\n    \n```\n\n## \n-\t\n```Python\n    def evaluate(C, X_train, y_predict):\n        sum = 0\n        for i in range(len(X_train)):\n            c = C[y_predict[i]]\n            sum += scipy.inner(c - X_train[i], c - X_train[i])\n        return sum\n```\n\n## \n-\tk\n-\t\n```Python\n    def cluster(C, X_train, y_predict, k):\n        sum = [0, 0, 0, 0] * k\n        count = [0] * k\n        newC = []\n        for i in range(len(X_train)):\n            min = 32768\n            minj = -1\n            for j in range(k):\n                if scipy.inner(C[j] - X_train[i], C[j] - X_train[i]) < min:\n                    min = scipy.inner(C[j] - X_train[i], C[j] - X_train[i])\n                    minj = j\n            y_predict[i] = (minj + 1) % k\n        for i in range(len(X_train)):\n            sum[y_predict[i]] += X_train[i]\n            count[y_predict[i]] += 1\n        for i in range(k):\n            newC.append(sum[i] / count[i])\n        return y_predict, newC\n```\n\n## \n-\tk()\n-\t10%\n-\t\n-\t\n```Python\n    def main():\n        X_train, X_test, y_train, y_test, iris = init()\n        k = 3\n        total = len(y_train)\n        y_predict = [0] * total\n        C = initk(X_train, k)\n        oldeval = evaluate(C, X_train, y_predict)\n        while (1):\n            y_predict, C = cluster(C, X_train, y_predict, k)\n            neweval = evaluate(C, X_train, y_predict)\n            ratio = (oldeval - neweval) / oldeval * 100\n            print(oldeval, \" -> \", neweval, \"%f %%\" % ratio)\n            oldeval = neweval\n            if ratio < 0.1:\n                break\n    \n        print(y_train)\n        print(y_predict)\n        n = 0\n        m = 0\n        for i in range(len(y_train)):\n            m += 1\n            if y_train[i] == y_predict[i]:\n                n += 1\n        print(n / m)\n        print(classification_report(y_train, y_predict, target_names=iris.target_names))\n    \n```\n\n# KNN\n-\tsklearnKNeighborsClassifier\n```Python\n    from sklearn.datasets import load_iris\n    from sklearn.preprocessing import StandardScaler\n    from sklearn.neighbors import KNeighborsClassifier\n    from sklearn.model_selection import train_test_split\n    from sklearn.metrics import classification_report\n    \n    \n    def init():\n        iris = load_iris()\n        X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.25, random_state=33)\n        ss = StandardScaler()\n        X_train = ss.fit_transform(X_train)\n        X_test = ss.fit_transform(X_test)\n        return X_train, X_test, y_train, y_test, iris\n    \n    \n    def KNN(X_train, X_test, y_train, y_test, iris):\n        knc = KNeighborsClassifier()\n        knc.fit(X_train, y_train)\n        y_predict = knc.predict(X_test)\n        print(knc.score(X_test, y_test))\n        print(classification_report(y_test, y_predict, target_names=iris.target_names))\n    \n    \n    def main():\n        X_train, X_test, y_train, y_test, iris = init()\n        KNN(X_train, X_test, y_train, y_test, iris)\n    \n    if __name__ == \"__main__\":\n        main()\n```\n\n# \n-\t\n\t:TP;FNFPTN\n\t$$\n\t:P=\\frac{TP}{TP+FP} \\\\\n\t:R=\\frac{TP}{TP+FN} \\\\\n\t1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\\n\t$$\n-\tK-Means\n\t:88.39%\n\t:89%\n\t:0.88\n\tF1:0.88\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143801503.JPG)\n\n-\tKNN\n\t:71.05%\n\t:86%\n\t:0.71\n\tF1:0.70\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143752944.JPG)\n\n-\t\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203100875.gif)\n\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203121208.gif)\n\n\n\n# \n## k\n-\t3k-meansk?\n-\tcanopy\n-\t\n\n## \n-\t\n\n## \n-\t\n\n## ANN\n","source":"_posts/kmeans.md","raw":"---\ntitle: :K-MeansKNN\ndate: 2017-03-016 15:51:11\ncategories: \ntags:\n  - code\n  - machinelearning\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/20170306/215446798.jpg\nhtml: true\n---\n-\tIrisK-means++sklearnKNN\n-   K-Means&KNN&&sitemap......\n***\n\n<!--more-->\n# \n-   K-Meansn(X)k(C)kk\n-   KNNKNNKKKK\n\n# K-means++\n-\tk-means++k-meanskkk\n-\tX\n\t-\t$c_i$$k_1,k_2...$$c_i$$c_i$\n\t-\t$c_1,c_2,c_3......$\n\t-\t1\n\t-\t(0,1)C\n-\t\n\n# K-Means\n\n## \n-\tIris15034\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143719952.JPG)\n\n\n\n## \n-\t\n```Python\n    def init():\n        iris = load_iris()\n        X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.25, random_state=33)\n        ss = StandardScaler()\n        X_train = ss.fit_transform(X_train)\n        X_test = ss.fit_transform(X_test)\n        return X_train, X_test, y_train, y_test, iris\n    \n```\n\n## k-means++k\n-\tD2()\n-\tprobs\n-\tcumprobs\n```Python\n    def initk(X_train, k):\n        C = [X_train[0]]\n        for i in range(1, k):\n            D2 = scipy.array([min([scipy.inner(c - x, c - x) for c in C]) for x in X_train])\n            probs = D2 / D2.sum()\n            cumprobs = probs.cumsum()\n            r = scipy.rand()\n            for j, p in enumerate(cumprobs):\n                if r < p:\n                    i = j\n                    break\n            C.append(X_train[i])\n        return C\n    \n```\n\n## \n-\t\n```Python\n    def evaluate(C, X_train, y_predict):\n        sum = 0\n        for i in range(len(X_train)):\n            c = C[y_predict[i]]\n            sum += scipy.inner(c - X_train[i], c - X_train[i])\n        return sum\n```\n\n## \n-\tk\n-\t\n```Python\n    def cluster(C, X_train, y_predict, k):\n        sum = [0, 0, 0, 0] * k\n        count = [0] * k\n        newC = []\n        for i in range(len(X_train)):\n            min = 32768\n            minj = -1\n            for j in range(k):\n                if scipy.inner(C[j] - X_train[i], C[j] - X_train[i]) < min:\n                    min = scipy.inner(C[j] - X_train[i], C[j] - X_train[i])\n                    minj = j\n            y_predict[i] = (minj + 1) % k\n        for i in range(len(X_train)):\n            sum[y_predict[i]] += X_train[i]\n            count[y_predict[i]] += 1\n        for i in range(k):\n            newC.append(sum[i] / count[i])\n        return y_predict, newC\n```\n\n## \n-\tk()\n-\t10%\n-\t\n-\t\n```Python\n    def main():\n        X_train, X_test, y_train, y_test, iris = init()\n        k = 3\n        total = len(y_train)\n        y_predict = [0] * total\n        C = initk(X_train, k)\n        oldeval = evaluate(C, X_train, y_predict)\n        while (1):\n            y_predict, C = cluster(C, X_train, y_predict, k)\n            neweval = evaluate(C, X_train, y_predict)\n            ratio = (oldeval - neweval) / oldeval * 100\n            print(oldeval, \" -> \", neweval, \"%f %%\" % ratio)\n            oldeval = neweval\n            if ratio < 0.1:\n                break\n    \n        print(y_train)\n        print(y_predict)\n        n = 0\n        m = 0\n        for i in range(len(y_train)):\n            m += 1\n            if y_train[i] == y_predict[i]:\n                n += 1\n        print(n / m)\n        print(classification_report(y_train, y_predict, target_names=iris.target_names))\n    \n```\n\n# KNN\n-\tsklearnKNeighborsClassifier\n```Python\n    from sklearn.datasets import load_iris\n    from sklearn.preprocessing import StandardScaler\n    from sklearn.neighbors import KNeighborsClassifier\n    from sklearn.model_selection import train_test_split\n    from sklearn.metrics import classification_report\n    \n    \n    def init():\n        iris = load_iris()\n        X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=0.25, random_state=33)\n        ss = StandardScaler()\n        X_train = ss.fit_transform(X_train)\n        X_test = ss.fit_transform(X_test)\n        return X_train, X_test, y_train, y_test, iris\n    \n    \n    def KNN(X_train, X_test, y_train, y_test, iris):\n        knc = KNeighborsClassifier()\n        knc.fit(X_train, y_train)\n        y_predict = knc.predict(X_test)\n        print(knc.score(X_test, y_test))\n        print(classification_report(y_test, y_predict, target_names=iris.target_names))\n    \n    \n    def main():\n        X_train, X_test, y_train, y_test, iris = init()\n        KNN(X_train, X_test, y_train, y_test, iris)\n    \n    if __name__ == \"__main__\":\n        main()\n```\n\n# \n-\t\n\t:TP;FNFPTN\n\t$$\n\t:P=\\frac{TP}{TP+FP} \\\\\n\t:R=\\frac{TP}{TP+FN} \\\\\n\t1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\\n\t$$\n-\tK-Means\n\t:88.39%\n\t:89%\n\t:0.88\n\tF1:0.88\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143801503.JPG)\n\n-\tKNN\n\t:71.05%\n\t:86%\n\t:0.71\n\tF1:0.70\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143752944.JPG)\n\n-\t\n\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203100875.gif)\n\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203121208.gif)\n\n\n\n# \n## k\n-\t3k-meansk?\n-\tcanopy\n-\t\n\n## \n-\t\n\n## \n-\t\n\n## ANN\n","slug":"kmeans","published":1,"updated":"2018-09-02T09:16:00.160Z","comments":1,"layout":"post","link":"","_id":"cjmd072d4001pqcw6vvk1cc8m","content":"<ul><li>IrisK-means++sklearnKNN</li><li>K-Means&amp;KNN&amp;&amp;sitemap</li></ul><hr><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>K-Meansn(X)k(C)kk</li><li>KNNKNNKKKK</li></ul><h1 id=\"K-means\"><a href=\"#K-means\" class=\"headerlink\" title=\"K-means++\"></a>K-means++</h1><ul><li>k-means++k-meanskkk</li><li>X<ul><li>$c_i$$k_1,k_2$$c_i$$c_i$</li><li>$c_1,c_2,c_3$</li><li>1</li><li>(0,1)C</li></ul></li><li></li></ul><h1 id=\"K-Means\"><a href=\"#K-Means\" class=\"headerlink\" title=\"K-Means\"></a>K-Means</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Iris15034<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143719952.JPG\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    iris = load_iris()</span><br><span class=\"line\">    X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=<span class=\"number\">0.25</span>, random_state=<span class=\"number\">33</span>)</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    X_train = ss.fit_transform(X_train)</span><br><span class=\"line\">    X_test = ss.fit_transform(X_test)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_train, X_test, y_train, y_test, iris</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"k-means-k\"><a href=\"#k-means-k\" class=\"headerlink\" title=\"k-means++k\"></a>k-means++k</h2><ul><li>D2()</li><li>probs</li><li>cumprobs<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initk</span><span class=\"params\">(X_train, k)</span>:</span></span><br><span class=\"line\">    C = [X_train[<span class=\"number\">0</span>]]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, k):</span><br><span class=\"line\">        D2 = scipy.array([min([scipy.inner(c - x, c - x) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> C]) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> X_train])</span><br><span class=\"line\">        probs = D2 / D2.sum()</span><br><span class=\"line\">        cumprobs = probs.cumsum()</span><br><span class=\"line\">        r = scipy.rand()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j, p <span class=\"keyword\">in</span> enumerate(cumprobs):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r &lt; p:</span><br><span class=\"line\">                i = j</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        C.append(X_train[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">evaluate</span><span class=\"params\">(C, X_train, y_predict)</span>:</span></span><br><span class=\"line\">    sum = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        c = C[y_predict[i]]</span><br><span class=\"line\">        sum += scipy.inner(c - X_train[i], c - X_train[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>k</li><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cluster</span><span class=\"params\">(C, X_train, y_predict, k)</span>:</span></span><br><span class=\"line\">    sum = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>] * k</span><br><span class=\"line\">    count = [<span class=\"number\">0</span>] * k</span><br><span class=\"line\">    newC = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        min = <span class=\"number\">32768</span></span><br><span class=\"line\">        minj = <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(k):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> scipy.inner(C[j] - X_train[i], C[j] - X_train[i]) &lt; min:</span><br><span class=\"line\">                min = scipy.inner(C[j] - X_train[i], C[j] - X_train[i])</span><br><span class=\"line\">                minj = j</span><br><span class=\"line\">        y_predict[i] = (minj + <span class=\"number\">1</span>) % k</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        sum[y_predict[i]] += X_train[i]</span><br><span class=\"line\">        count[y_predict[i]] += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(k):</span><br><span class=\"line\">        newC.append(sum[i] / count[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> y_predict, newC</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>k()</li><li>10%</li><li></li><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    X_train, X_test, y_train, y_test, iris = init()</span><br><span class=\"line\">    k = <span class=\"number\">3</span></span><br><span class=\"line\">    total = len(y_train)</span><br><span class=\"line\">    y_predict = [<span class=\"number\">0</span>] * total</span><br><span class=\"line\">    C = initk(X_train, k)</span><br><span class=\"line\">    oldeval = evaluate(C, X_train, y_predict)</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>):</span><br><span class=\"line\">        y_predict, C = cluster(C, X_train, y_predict, k)</span><br><span class=\"line\">        neweval = evaluate(C, X_train, y_predict)</span><br><span class=\"line\">        ratio = (oldeval - neweval) / oldeval * <span class=\"number\">100</span></span><br><span class=\"line\">        print(oldeval, <span class=\"string\">\" -&gt; \"</span>, neweval, <span class=\"string\">\"%f %%\"</span> % ratio)</span><br><span class=\"line\">        oldeval = neweval</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ratio &lt; <span class=\"number\">0.1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(y_train)</span><br><span class=\"line\">    print(y_predict)</span><br><span class=\"line\">    n = <span class=\"number\">0</span></span><br><span class=\"line\">    m = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(y_train)):</span><br><span class=\"line\">        m += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> y_train[i] == y_predict[i]:</span><br><span class=\"line\">            n += <span class=\"number\">1</span></span><br><span class=\"line\">    print(n / m)</span><br><span class=\"line\">    print(classification_report(y_train, y_predict, target_names=iris.target_names))</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"KNN\"><a href=\"#KNN\" class=\"headerlink\" title=\"KNN\"></a>KNN</h1><ul><li>sklearnKNeighborsClassifier<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.datasets <span class=\"keyword\">import</span> load_iris</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> StandardScaler</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.neighbors <span class=\"keyword\">import</span> KNeighborsClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    iris = load_iris()</span><br><span class=\"line\">    X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=<span class=\"number\">0.25</span>, random_state=<span class=\"number\">33</span>)</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    X_train = ss.fit_transform(X_train)</span><br><span class=\"line\">    X_test = ss.fit_transform(X_test)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_train, X_test, y_train, y_test, iris</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">KNN</span><span class=\"params\">(X_train, X_test, y_train, y_test, iris)</span>:</span></span><br><span class=\"line\">    knc = KNeighborsClassifier()</span><br><span class=\"line\">    knc.fit(X_train, y_train)</span><br><span class=\"line\">    y_predict = knc.predict(X_test)</span><br><span class=\"line\">    print(knc.score(X_test, y_test))</span><br><span class=\"line\">    print(classification_report(y_test, y_predict, target_names=iris.target_names))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    X_train, X_test, y_train, y_test, iris = init()</span><br><span class=\"line\">    KNN(X_train, X_test, y_train, y_test, iris)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br>:TP;FNFPTN<br>$$<br>:P=\\frac{TP}{TP+FP} \\\\<br>:R=\\frac{TP}{TP+FN} \\\\<br>1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\<br>$$</li><li><p>K-Means<br>:88.39%<br>:89%<br>:0.88<br>F1:0.88<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143801503.JPG\" alt=\"mark\"></p></li><li><p>KNN<br>:71.05%<br>:86%<br>:0.71<br>F1:0.70<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143752944.JPG\" alt=\"mark\"></p></li><li><p><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203100875.gif\" alt=\"mark\"></p></li><li><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203121208.gif\" alt=\"mark\"></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h2><ul><li>3k-meansk?</li><li>canopy</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"ANN\"><a href=\"#ANN\" class=\"headerlink\" title=\"ANN\"></a>ANN</h2>","site":{"data":{}},"excerpt":"<ul><li>IrisK-means++sklearnKNN</li><li>K-Means&amp;KNN&amp;&amp;sitemap</li></ul><hr>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>K-Meansn(X)k(C)kk</li><li>KNNKNNKKKK</li></ul><h1 id=\"K-means\"><a href=\"#K-means\" class=\"headerlink\" title=\"K-means++\"></a>K-means++</h1><ul><li>k-means++k-meanskkk</li><li>X<ul><li>$c_i$$k_1,k_2$$c_i$$c_i$</li><li>$c_1,c_2,c_3$</li><li>1</li><li>(0,1)C</li></ul></li><li></li></ul><h1 id=\"K-Means\"><a href=\"#K-Means\" class=\"headerlink\" title=\"K-Means\"></a>K-Means</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Iris15034<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143719952.JPG\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    iris = load_iris()</span><br><span class=\"line\">    X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=<span class=\"number\">0.25</span>, random_state=<span class=\"number\">33</span>)</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    X_train = ss.fit_transform(X_train)</span><br><span class=\"line\">    X_test = ss.fit_transform(X_test)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_train, X_test, y_train, y_test, iris</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"k-means-k\"><a href=\"#k-means-k\" class=\"headerlink\" title=\"k-means++k\"></a>k-means++k</h2><ul><li>D2()</li><li>probs</li><li>cumprobs<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">initk</span><span class=\"params\">(X_train, k)</span>:</span></span><br><span class=\"line\">    C = [X_train[<span class=\"number\">0</span>]]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(<span class=\"number\">1</span>, k):</span><br><span class=\"line\">        D2 = scipy.array([min([scipy.inner(c - x, c - x) <span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> C]) <span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> X_train])</span><br><span class=\"line\">        probs = D2 / D2.sum()</span><br><span class=\"line\">        cumprobs = probs.cumsum()</span><br><span class=\"line\">        r = scipy.rand()</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j, p <span class=\"keyword\">in</span> enumerate(cumprobs):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> r &lt; p:</span><br><span class=\"line\">                i = j</span><br><span class=\"line\">                <span class=\"keyword\">break</span></span><br><span class=\"line\">        C.append(X_train[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">evaluate</span><span class=\"params\">(C, X_train, y_predict)</span>:</span></span><br><span class=\"line\">    sum = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        c = C[y_predict[i]]</span><br><span class=\"line\">        sum += scipy.inner(c - X_train[i], c - X_train[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sum</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>k</li><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">cluster</span><span class=\"params\">(C, X_train, y_predict, k)</span>:</span></span><br><span class=\"line\">    sum = [<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>] * k</span><br><span class=\"line\">    count = [<span class=\"number\">0</span>] * k</span><br><span class=\"line\">    newC = []</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        min = <span class=\"number\">32768</span></span><br><span class=\"line\">        minj = <span class=\"number\">-1</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> range(k):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> scipy.inner(C[j] - X_train[i], C[j] - X_train[i]) &lt; min:</span><br><span class=\"line\">                min = scipy.inner(C[j] - X_train[i], C[j] - X_train[i])</span><br><span class=\"line\">                minj = j</span><br><span class=\"line\">        y_predict[i] = (minj + <span class=\"number\">1</span>) % k</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(X_train)):</span><br><span class=\"line\">        sum[y_predict[i]] += X_train[i]</span><br><span class=\"line\">        count[y_predict[i]] += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(k):</span><br><span class=\"line\">        newC.append(sum[i] / count[i])</span><br><span class=\"line\">    <span class=\"keyword\">return</span> y_predict, newC</span><br></pre></td></tr></table></figure></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>k()</li><li>10%</li><li></li><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    X_train, X_test, y_train, y_test, iris = init()</span><br><span class=\"line\">    k = <span class=\"number\">3</span></span><br><span class=\"line\">    total = len(y_train)</span><br><span class=\"line\">    y_predict = [<span class=\"number\">0</span>] * total</span><br><span class=\"line\">    C = initk(X_train, k)</span><br><span class=\"line\">    oldeval = evaluate(C, X_train, y_predict)</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"number\">1</span>):</span><br><span class=\"line\">        y_predict, C = cluster(C, X_train, y_predict, k)</span><br><span class=\"line\">        neweval = evaluate(C, X_train, y_predict)</span><br><span class=\"line\">        ratio = (oldeval - neweval) / oldeval * <span class=\"number\">100</span></span><br><span class=\"line\">        print(oldeval, <span class=\"string\">\" -&gt; \"</span>, neweval, <span class=\"string\">\"%f %%\"</span> % ratio)</span><br><span class=\"line\">        oldeval = neweval</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ratio &lt; <span class=\"number\">0.1</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span></span><br><span class=\"line\"></span><br><span class=\"line\">    print(y_train)</span><br><span class=\"line\">    print(y_predict)</span><br><span class=\"line\">    n = <span class=\"number\">0</span></span><br><span class=\"line\">    m = <span class=\"number\">0</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(len(y_train)):</span><br><span class=\"line\">        m += <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> y_train[i] == y_predict[i]:</span><br><span class=\"line\">            n += <span class=\"number\">1</span></span><br><span class=\"line\">    print(n / m)</span><br><span class=\"line\">    print(classification_report(y_train, y_predict, target_names=iris.target_names))</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"KNN\"><a href=\"#KNN\" class=\"headerlink\" title=\"KNN\"></a>KNN</h1><ul><li>sklearnKNeighborsClassifier<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> sklearn.datasets <span class=\"keyword\">import</span> load_iris</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> StandardScaler</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.neighbors <span class=\"keyword\">import</span> KNeighborsClassifier</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.model_selection <span class=\"keyword\">import</span> train_test_split</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    iris = load_iris()</span><br><span class=\"line\">    X_train, X_test, y_train, y_test = train_test_split(iris.data, iris.target, test_size=<span class=\"number\">0.25</span>, random_state=<span class=\"number\">33</span>)</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    X_train = ss.fit_transform(X_train)</span><br><span class=\"line\">    X_test = ss.fit_transform(X_test)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> X_train, X_test, y_train, y_test, iris</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">KNN</span><span class=\"params\">(X_train, X_test, y_train, y_test, iris)</span>:</span></span><br><span class=\"line\">    knc = KNeighborsClassifier()</span><br><span class=\"line\">    knc.fit(X_train, y_train)</span><br><span class=\"line\">    y_predict = knc.predict(X_test)</span><br><span class=\"line\">    print(knc.score(X_test, y_test))</span><br><span class=\"line\">    print(classification_report(y_test, y_predict, target_names=iris.target_names))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    X_train, X_test, y_train, y_test, iris = init()</span><br><span class=\"line\">    KNN(X_train, X_test, y_train, y_test, iris)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br>:TP;FNFPTN<br>$$<br>:P=\\frac{TP}{TP+FP} \\\\<br>:R=\\frac{TP}{TP+FN} \\\\<br>1F:\\frac {2}{F_1}=\\frac1P+\\frac1R \\\\<br>$$</li><li><p>K-Means<br>:88.39%<br>:89%<br>:0.88<br>F1:0.88<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143801503.JPG\" alt=\"mark\"></p></li><li><p>KNN<br>:71.05%<br>:86%<br>:0.71<br>F1:0.70<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/143752944.JPG\" alt=\"mark\"></p></li><li><p><br><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203100875.gif\" alt=\"mark\"></p></li><li><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170307/203121208.gif\" alt=\"mark\"></p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h2><ul><li>3k-meansk?</li><li>canopy</li><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><h2 id=\"ANN\"><a href=\"#ANN\" class=\"headerlink\" title=\"ANN\"></a>ANN</h2>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Sun Sep 02 2018 17:16:00 GMT+0800 ()","title":":K-MeansKNN","path":"2017/03/16/kmeans/","eyeCatchImage":null,"excerpt":"<ul><li>IrisK-means++sklearnKNN</li><li>K-Means&amp;KNN&amp;&amp;sitemap</li></ul><hr>","date":"2017-03-16T07:51:11.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":":Mnist(SVM,PCA)","mathjax":true,"date":"2017-03-16T02:35:04.000Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170308/184051988.JPG"],"_content":"mnistSVM\n\n\n<!--more-->\n\n# Mnist\n-\tMnist600008*864SVMPCA\n\n# SVM\n\n# PCA\n\n# \n```Python\n    from tools.data_util import DataUtils\n    from sklearn.preprocessing import StandardScaler\n    from sklearn.svm import LinearSVC\n    from sklearn.metrics import classification_report\n    from sklearn.decomposition import PCA\n    from matplotlib import pyplot as plt\n    import numpy as np\n    \n    \n    def init():\n        trainfile_X = r'E:\\Machine Learning\\MLData\\mnist\\train-images.idx3-ubyte'\n        trainfile_y = r'E:\\Machine Learning\\MLData\\mnist\\train-labels.idx1-ubyte'\n        testfile_X = r'E:\\Machine Learning\\MLData\\mnist\\t10k-images.idx3-ubyte'\n        testfile_y = r'E:\\Machine Learning\\MLData\\mnist\\t10k-labels.idx1-ubyte'\n        train_X = DataUtils(filename=trainfile_X).getImage()\n        train_y = DataUtils(filename=trainfile_y).getLabel()\n        test_X = DataUtils(testfile_X).getImage()\n        test_y = DataUtils(testfile_y).getLabel()\n        ss = StandardScaler()\n        train_X = ss.fit_transform(train_X)\n        test_X = ss.transform(test_X)\n        return train_X, train_y, test_X, test_y\n    \n    \n    def LSVC(train_X, train_y, test_X, test_y):\n        lsvc = LinearSVC()\n        lsvc.fit(train_X, train_y)\n        predict_y = lsvc.predict(test_X)\n    \n        print(lsvc.score(test_X, test_y))\n        print(classification_report(test_y, predict_y))\n    \n    \n    def PrincipalComponentAnalysis(train_X, train_y, test_X, test_y):\n        estimator = PCA(n_components=20)\n    \n        train_X_pca = estimator.fit_transform(train_X)\n        test_X_pca = estimator.transform(test_X)\n        lsvc = LinearSVC()\n        lsvc.fit(train_X_pca, train_y)\n        predict_y = lsvc.predict(test_X_pca)\n    \n        print(lsvc.score(test_X_pca, test_y))\n        print(classification_report(test_y, predict_y))\n    \n    \n    def main():\n        train_X, train_y, test_X, test_y = init()\n        print(train_X.shape[0])\n        # LSVC(train_X, train_y, test_X, test_y)\n        # PrincipalComponentAnalysis(train_X, train_y, test_X, test_y)\n    \n    \n    if __name__ == \"__main__\":\n        main()\n```\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155543898.JPG)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155614953.JPG)\n-\t64202034%\n\t\n","source":"_posts/mnist.md","raw":"---\ntitle: :Mnist(SVM,PCA)\ncategories: \ntags:\n  - code\n  - machinelearning\nmathjax: true\ndate: 2017-03-16 10:35:04\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/20170308/184051988.JPG\t\n---\nmnistSVM\n\n\n<!--more-->\n\n# Mnist\n-\tMnist600008*864SVMPCA\n\n# SVM\n\n# PCA\n\n# \n```Python\n    from tools.data_util import DataUtils\n    from sklearn.preprocessing import StandardScaler\n    from sklearn.svm import LinearSVC\n    from sklearn.metrics import classification_report\n    from sklearn.decomposition import PCA\n    from matplotlib import pyplot as plt\n    import numpy as np\n    \n    \n    def init():\n        trainfile_X = r'E:\\Machine Learning\\MLData\\mnist\\train-images.idx3-ubyte'\n        trainfile_y = r'E:\\Machine Learning\\MLData\\mnist\\train-labels.idx1-ubyte'\n        testfile_X = r'E:\\Machine Learning\\MLData\\mnist\\t10k-images.idx3-ubyte'\n        testfile_y = r'E:\\Machine Learning\\MLData\\mnist\\t10k-labels.idx1-ubyte'\n        train_X = DataUtils(filename=trainfile_X).getImage()\n        train_y = DataUtils(filename=trainfile_y).getLabel()\n        test_X = DataUtils(testfile_X).getImage()\n        test_y = DataUtils(testfile_y).getLabel()\n        ss = StandardScaler()\n        train_X = ss.fit_transform(train_X)\n        test_X = ss.transform(test_X)\n        return train_X, train_y, test_X, test_y\n    \n    \n    def LSVC(train_X, train_y, test_X, test_y):\n        lsvc = LinearSVC()\n        lsvc.fit(train_X, train_y)\n        predict_y = lsvc.predict(test_X)\n    \n        print(lsvc.score(test_X, test_y))\n        print(classification_report(test_y, predict_y))\n    \n    \n    def PrincipalComponentAnalysis(train_X, train_y, test_X, test_y):\n        estimator = PCA(n_components=20)\n    \n        train_X_pca = estimator.fit_transform(train_X)\n        test_X_pca = estimator.transform(test_X)\n        lsvc = LinearSVC()\n        lsvc.fit(train_X_pca, train_y)\n        predict_y = lsvc.predict(test_X_pca)\n    \n        print(lsvc.score(test_X_pca, test_y))\n        print(classification_report(test_y, predict_y))\n    \n    \n    def main():\n        train_X, train_y, test_X, test_y = init()\n        print(train_X.shape[0])\n        # LSVC(train_X, train_y, test_X, test_y)\n        # PrincipalComponentAnalysis(train_X, train_y, test_X, test_y)\n    \n    \n    if __name__ == \"__main__\":\n        main()\n```\n\n# \n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155543898.JPG)\n-\t\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155614953.JPG)\n-\t64202034%\n\t\n","slug":"mnist","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","link":"","_id":"cjmd072d5001rqcw6f90w9tcn","content":"<p>mnistSVM<br></p><a id=\"more\"></a><h1 id=\"Mnist\"><a href=\"#Mnist\" class=\"headerlink\" title=\"Mnist\"></a>Mnist</h1><ul><li>Mnist600008*864SVMPCA</li></ul><h1 id=\"SVM\"><a href=\"#SVM\" class=\"headerlink\" title=\"SVM\"></a>SVM</h1><h1 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a>PCA</h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> tools.data_util <span class=\"keyword\">import</span> DataUtils</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> StandardScaler</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.svm <span class=\"keyword\">import</span> LinearSVC</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.decomposition <span class=\"keyword\">import</span> PCA</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    trainfile_X = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\train-images.idx3-ubyte'</span></span><br><span class=\"line\">    trainfile_y = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\train-labels.idx1-ubyte'</span></span><br><span class=\"line\">    testfile_X = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\t10k-images.idx3-ubyte'</span></span><br><span class=\"line\">    testfile_y = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\t10k-labels.idx1-ubyte'</span></span><br><span class=\"line\">    train_X = DataUtils(filename=trainfile_X).getImage()</span><br><span class=\"line\">    train_y = DataUtils(filename=trainfile_y).getLabel()</span><br><span class=\"line\">    test_X = DataUtils(testfile_X).getImage()</span><br><span class=\"line\">    test_y = DataUtils(testfile_y).getLabel()</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    train_X = ss.fit_transform(train_X)</span><br><span class=\"line\">    test_X = ss.transform(test_X)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> train_X, train_y, test_X, test_y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">LSVC</span><span class=\"params\">(train_X, train_y, test_X, test_y)</span>:</span></span><br><span class=\"line\">    lsvc = LinearSVC()</span><br><span class=\"line\">    lsvc.fit(train_X, train_y)</span><br><span class=\"line\">    predict_y = lsvc.predict(test_X)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(lsvc.score(test_X, test_y))</span><br><span class=\"line\">    print(classification_report(test_y, predict_y))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">PrincipalComponentAnalysis</span><span class=\"params\">(train_X, train_y, test_X, test_y)</span>:</span></span><br><span class=\"line\">    estimator = PCA(n_components=<span class=\"number\">20</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    train_X_pca = estimator.fit_transform(train_X)</span><br><span class=\"line\">    test_X_pca = estimator.transform(test_X)</span><br><span class=\"line\">    lsvc = LinearSVC()</span><br><span class=\"line\">    lsvc.fit(train_X_pca, train_y)</span><br><span class=\"line\">    predict_y = lsvc.predict(test_X_pca)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(lsvc.score(test_X_pca, test_y))</span><br><span class=\"line\">    print(classification_report(test_y, predict_y))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    train_X, train_y, test_X, test_y = init()</span><br><span class=\"line\">    print(train_X.shape[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\"># LSVC(train_X, train_y, test_X, test_y)</span></span><br><span class=\"line\">    <span class=\"comment\"># PrincipalComponentAnalysis(train_X, train_y, test_X, test_y)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155543898.JPG\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155614953.JPG\" alt=\"mark\"></li><li>64202034%</li></ul>","site":{"data":{}},"excerpt":"<p>mnistSVM<br></p>","more":"<h1 id=\"Mnist\"><a href=\"#Mnist\" class=\"headerlink\" title=\"Mnist\"></a>Mnist</h1><ul><li>Mnist600008*864SVMPCA</li></ul><h1 id=\"SVM\"><a href=\"#SVM\" class=\"headerlink\" title=\"SVM\"></a>SVM</h1><h1 id=\"PCA\"><a href=\"#PCA\" class=\"headerlink\" title=\"PCA\"></a>PCA</h1><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> tools.data_util <span class=\"keyword\">import</span> DataUtils</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.preprocessing <span class=\"keyword\">import</span> StandardScaler</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.svm <span class=\"keyword\">import</span> LinearSVC</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.metrics <span class=\"keyword\">import</span> classification_report</span><br><span class=\"line\"><span class=\"keyword\">from</span> sklearn.decomposition <span class=\"keyword\">import</span> PCA</span><br><span class=\"line\"><span class=\"keyword\">from</span> matplotlib <span class=\"keyword\">import</span> pyplot <span class=\"keyword\">as</span> plt</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">init</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    trainfile_X = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\train-images.idx3-ubyte'</span></span><br><span class=\"line\">    trainfile_y = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\train-labels.idx1-ubyte'</span></span><br><span class=\"line\">    testfile_X = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\t10k-images.idx3-ubyte'</span></span><br><span class=\"line\">    testfile_y = <span class=\"string\">r'E:\\Machine Learning\\MLData\\mnist\\t10k-labels.idx1-ubyte'</span></span><br><span class=\"line\">    train_X = DataUtils(filename=trainfile_X).getImage()</span><br><span class=\"line\">    train_y = DataUtils(filename=trainfile_y).getLabel()</span><br><span class=\"line\">    test_X = DataUtils(testfile_X).getImage()</span><br><span class=\"line\">    test_y = DataUtils(testfile_y).getLabel()</span><br><span class=\"line\">    ss = StandardScaler()</span><br><span class=\"line\">    train_X = ss.fit_transform(train_X)</span><br><span class=\"line\">    test_X = ss.transform(test_X)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> train_X, train_y, test_X, test_y</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">LSVC</span><span class=\"params\">(train_X, train_y, test_X, test_y)</span>:</span></span><br><span class=\"line\">    lsvc = LinearSVC()</span><br><span class=\"line\">    lsvc.fit(train_X, train_y)</span><br><span class=\"line\">    predict_y = lsvc.predict(test_X)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(lsvc.score(test_X, test_y))</span><br><span class=\"line\">    print(classification_report(test_y, predict_y))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">PrincipalComponentAnalysis</span><span class=\"params\">(train_X, train_y, test_X, test_y)</span>:</span></span><br><span class=\"line\">    estimator = PCA(n_components=<span class=\"number\">20</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    train_X_pca = estimator.fit_transform(train_X)</span><br><span class=\"line\">    test_X_pca = estimator.transform(test_X)</span><br><span class=\"line\">    lsvc = LinearSVC()</span><br><span class=\"line\">    lsvc.fit(train_X_pca, train_y)</span><br><span class=\"line\">    predict_y = lsvc.predict(test_X_pca)</span><br><span class=\"line\"></span><br><span class=\"line\">    print(lsvc.score(test_X_pca, test_y))</span><br><span class=\"line\">    print(classification_report(test_y, predict_y))</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">main</span><span class=\"params\">()</span>:</span></span><br><span class=\"line\">    train_X, train_y, test_X, test_y = init()</span><br><span class=\"line\">    print(train_X.shape[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\"># LSVC(train_X, train_y, test_X, test_y)</span></span><br><span class=\"line\">    <span class=\"comment\"># PrincipalComponentAnalysis(train_X, train_y, test_X, test_y)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">\"__main__\"</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155543898.JPG\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170316/155614953.JPG\" alt=\"mark\"></li><li>64202034%</li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":":Mnist(SVM,PCA)","path":"2017/03/16/mnist/","eyeCatchImage":null,"excerpt":"<p>mnistSVM<br></p>","date":"2017-03-16T02:35:04.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Numpy Cookbook","date":"2017-01-23T12:12:40.000Z","_content":"Cookbook[Numpy Cookbook](https://docs.scipy.org/doc/numpy-dev/user/quickstart.html)\nNumpy\n\n\n<!--more-->\n\n- shape()\nshapenumpy\nshape(array) mn(m,n)\narray.shape[0] m1n\n\n- tile()\ntilenumpy:\ntile(A,(m,n))  Amn\n\n- sum()\nsum()numpy\narray.sum(axis=1)axis=0\n\n- argsort()\nargsort()numpy \nA=array.argsort()  A[0] \n\n- dict.get(key,x)\nPythonget(key,x)keyvaluekey0\n\n- sorted()\n\n- numpymin()max()\narray.min(0)  \narray.min(1)  \n\n-\tlistdir('str')\nstrlist=listdir('str')  str\n\n-\tsplit()\npython\nstring.split('str')strlist\n\n-\tzeros\na=np.zeros((m,n), dtype=np.int) #intm*n","source":"_posts/numpycookbook.md","raw":"---\ntitle: Numpy Cookbook\ndate: 2017-01-23 20:12:40\ntags: [math,machinelearning,python,code]\ncategories: Python\n---\nCookbook[Numpy Cookbook](https://docs.scipy.org/doc/numpy-dev/user/quickstart.html)\nNumpy\n\n\n<!--more-->\n\n- shape()\nshapenumpy\nshape(array) mn(m,n)\narray.shape[0] m1n\n\n- tile()\ntilenumpy:\ntile(A,(m,n))  Amn\n\n- sum()\nsum()numpy\narray.sum(axis=1)axis=0\n\n- argsort()\nargsort()numpy \nA=array.argsort()  A[0] \n\n- dict.get(key,x)\nPythonget(key,x)keyvaluekey0\n\n- sorted()\n\n- numpymin()max()\narray.min(0)  \narray.min(1)  \n\n-\tlistdir('str')\nstrlist=listdir('str')  str\n\n-\tsplit()\npython\nstring.split('str')strlist\n\n-\tzeros\na=np.zeros((m,n), dtype=np.int) #intm*n","slug":"numpycookbook","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072d7001wqcw6iml78k1e","content":"<p>Cookbook<a href=\"https://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" target=\"_blank\" rel=\"noopener\">Numpy Cookbook</a><br>Numpy<br></p><a id=\"more\"></a><ul><li><p>shape()<br>shapenumpy<br>shape(array) mn(m,n)<br>array.shape[0] m1n</p></li><li><p>tile()<br>tilenumpy:<br>tile(A,(m,n)) Amn</p></li><li><p>sum()<br>sum()numpy<br>array.sum(axis=1)axis=0</p></li><li><p>argsort()<br>argsort()numpy<br>A=array.argsort() A[0] </p></li><li><p>dict.get(key,x)<br>Pythonget(key,x)keyvaluekey0</p></li><li><p>sorted()</p></li><li><p>numpymin()max()<br>array.min(0) <br>array.min(1) </p></li><li><p>listdir(str)<br>strlist=listdir(str) str</p></li><li><p>split()<br>python<br>string.split(str)strlist</p></li><li><p>zeros<br>a=np.zeros((m,n), dtype=np.int) #intm*n</p></li></ul>","site":{"data":{}},"excerpt":"<p>Cookbook<a href=\"https://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" target=\"_blank\" rel=\"noopener\">Numpy Cookbook</a><br>Numpy<br></p>","more":"<ul><li><p>shape()<br>shapenumpy<br>shape(array) mn(m,n)<br>array.shape[0] m1n</p></li><li><p>tile()<br>tilenumpy:<br>tile(A,(m,n)) Amn</p></li><li><p>sum()<br>sum()numpy<br>array.sum(axis=1)axis=0</p></li><li><p>argsort()<br>argsort()numpy<br>A=array.argsort() A[0] </p></li><li><p>dict.get(key,x)<br>Pythonget(key,x)keyvaluekey0</p></li><li><p>sorted()</p></li><li><p>numpymin()max()<br>array.min(0) <br>array.min(1) </p></li><li><p>listdir(str)<br>strlist=listdir(str) str</p></li><li><p>split()<br>python<br>string.split(str)strlist</p></li><li><p>zeros<br>a=np.zeros((m,n), dtype=np.int) #intm*n</p></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Numpy Cookbook","path":"2017/01/23/numpycookbook/","eyeCatchImage":null,"excerpt":"<p>Cookbook<a href=\"https://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" target=\"_blank\" rel=\"noopener\">Numpy Cookbook</a><br>Numpy<br></p>","date":"2017-01-23T12:12:40.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["math","machinelearning","code","python"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"LDA","date":"2018-07-23T01:56:41.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim"],"html":true,"_content":"***\nLatent Dirichlet Allocation \nLDALDA\n\n<!--more-->\n\n# \n## Gamma\n-\t\n$$\n\\Gamma (x) = \\int _0 ^{\\infty} t^{x-1} e^{-t} dt\n$$\n-\t$\\Gamma(x+1)=x\\Gamma(x)$1/2\n-\tBohr-Mullerup$f:(0,\\infty) \\rightarrow (0,\\infty)$\n\t-\t$f(1)=1$\n\t-\t$f(x+1)=xf(x)$\n\t-\t$log f(x)$\n\t$f(x)=\\Gamma(x)$\n-\tDigamma\n$$\n\\psi (x)=\\frac{d log \\Gamma(x)}{dx}\n$$\n\t\n$$\n\\psi (x+1)=\\psi (x)+\\frac 1x\n$$\n-\tLDAdigamma\n\n## Gamma\n-\t\n$$\n\\int _0 ^{\\infty} \\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}dx = 1\n$$\n\tGamma\n$$\nGamma(x|\\alpha)=\\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}\n$$\n-\t$\\chi ^2$Gamma\n-\tGamma1GammaGammaPoisson\n$$\nPoisson(X=k|\\lambda)=\\frac{\\lambda ^k e^{-\\lambda}}{k!}\n$$\n-\t$np=\\lambda$npnp$\\lambda$$p=\\frac{\\lambda}{n}$kGammaGamma\n\n## Beta\n-\t\n\t-\tn[0,1]nk$p=x_k$\n\t-\t$P(x) \\leq X_{k} \\leq x+\\Delta x$\n\t-\tkk-1n-k,\n$$\n\\begin{aligned}\nP(E)&=x^{k-1}(1-x-\\Delta x)^{n-k}\\Delta x \\\\\n    &=x^{k-1}(1-x)^{n-k}\\Delta x+\\omicron (\\Delta x) \\\\\n\\end{aligned}\n$$\n\t-\t$\\omicron (\\Delta x)$k$\\Delta x$0k\n$$\nf(x)=\\frac{n!}{(k-1)!(n-k)!}x^{k-1}(1-x)^{n-k} \\quad x \\in [0,1]\n$$\n\tGamma$\\alpha =k,\\beta = n-k+1$:\n$$\n\\begin{aligned}\nf(x)&=\\frac{\\Gamma(\\alpha+\\beta)}{\\Gamma(\\alpha)\\Gamma(\\beta)}x^{\\alpha-1}(1-x)^{\\beta-1} \\\\\n    &=Beta(p|k,n-k+1) \\\\\n    &=Beta(\\alpha,\\beta) \\\\\n\\end{aligned}\n$$\n\tBetak\n-\tBetakkpn[0,1]nk[0,1]$\\alpha$$\\beta$$\\alpha$$\\beta$nkp[0,1]npkp$\\frac kn$\n-\tBeta$\\alpha$$\\beta$pBetappBeta\n\n## Beta-Binomial\n-\tkBetam[0,1]kk\n-\t$p=X_k$$m_1$$p$$m_2$$p$$p$$Beta(p|k+m_1,n-k+1+m_2)$\n-\tmm[0,1]m$p$$p=X_k$$m_1$$B(m,p)$\n\n|       |   |   |\n| :-------: | :-------:| :--: |\n| Beta  |  |   Beta   |\n-\tBeta-Binomial\n$$\nBeta(p|\\alpha,\\beta)+BinomCount(m_1,m_2)=Beta(p|\\alpha+m_1,\\beta+m_2)\n$$\n\tBetaBeta$\\alpha,\\beta$\n-\tBeta1m$m_1$$Beta(p|m_1+1,m_2+1)$\n-\t\n$$\nP(C \\leq k) = \\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\quad C \\sim B(n,p)\n$$\n\t\n\t-\t$Beta(t|k+1,n-k)$\n\t-\tn[0,1]$B(n,p)$$p$n$p$C$B(n,p)$\n\t-\t$P(C \\leq k)=P(X_{k+1}>p)$n$p$$k$\n\t-\tkBeta\n$$\n\\begin{aligned}\nP(C \\leq k) &=P(X_{k+1} > p) \\\\\n\t\t\t&=\\int _p ^1 Beta(t|k+1,n-k)dt \\\\\n\t\t\t&=\\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\\\\n\\end{aligned}\n$$\n\t\n-\tnGamma\n-\tkpppppp100p100pppBetaDirichlet\n\n## Dirichlet-Multinomial\n-\t$x_{k_1},x_{k_1+k_2}$\n-\t$\\Delta x$$x_1,x_2,x_3$\n$$\nf(x_1,x_2,x_3)=\\frac{\\Gamma(n+1)}{\\Gamma(k_1)\\Gamma(k_2)\\Gamma(n-k_1-k_2+1)}x_1^{k_1-1}x_2^{k_2-1}x_3^{n-k_1-k_2}\n$$\n-\t\n$$\nf(x_1,x_2,x_3)=\\frac{\\Gamma(\\alpha _1+\\alpha _2+\\alpha _3)}{\\Gamma(\\alpha _1)\\Gamma(\\alpha _2)\\Gamma(\\alpha _3)}x_1^{\\alpha _1-1}x_2^{\\alpha _2-1}x_3^{\\alpha _3-1}\n$$\n\t3Dirichlet$x_1,x_2,x_3$$f$\n-\tDirichletDirichlet\n$$\nDir(p|\\alpha)+MultCount(m)=Dir(p|\\alpha+m)\n$$\n\t\n-\tBetaDirichletBeta$E(p)=\\frac{\\alpha}{\\alpha+\\beta}$Dirichlet\n\n## \n-\tAABBAABBA BetaDirichlet\n-\tLDA--DirichletDirichlet-MultinomialGammaGammaBetaGammaBetaBeta-BinomialDirichlet-Multinomial\n-\tDirichletDirichlet[0,1]dirichlet$p_1,p_2,p_3$\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180828/B5IBgB1kbK.PNG)\n\n-\t$\\alpha$mean shapesparsity\n-\tDirichlet$\\alpha _1,\\alpha _2,\\alpha _3$$\\alpha$Dirichlet$p_1,p_2,p_3$p\n-\t$\\alpha$$\\alpha$ppconcentration\n-\t$\\alpha$$\\alpha$Dirichletpp1p\n-\t$\\alpha$$p$concentration$\\alpha$$\\alpha$pp\n-\t$\\alpha$1Dirichelt$alpha$1\n-\tDirichlet$\\alpha$\n{% blockquote Dirichlet_distribution https://en.wikipedia.org/wiki/Dirichlet_distribution#Intuitive_interpretations_of_the_parameters Intuitive interpretations of the parameters %}\nThe concentration parameter\nDirichlet distributions are very often used as prior distributions in Bayesian inference. The simplest and perhaps most common type of Dirichlet prior is the symmetric Dirichlet distribution, where all parameters are equal. This corresponds to the case where you have no prior information to favor one component over any other. As described above, the single value  to which all parameters are set is called the concentration parameter. If the sample space of the Dirichlet distribution is interpreted as a discrete probability distribution, then intuitively the concentration parameter can be thought of as determining how \"concentrated\" the probability mass of a sample from a Dirichlet distribution is likely to be. With a value much less than 1, the mass will be highly concentrated in a few components, and all the rest will have almost no mass. With a value much greater than 1, the mass will be dispersed almost equally among all the components. See the article on the concentration parameter for further discussion.\n{% endblockquote %}\n-\t$\\alpha$1Dirichlet0$\\alpha$1\n-\tDirichlet Process$\\alpha$DirichletBase Measure$\\alpha$\n-\tLDA\n\n# \n## \n-\t\n-\t\n-\tMCMC1MCMC\n\n## \n-\t\n-\tnn\n-\t\n-\t\n\t-\tP$lim_{n \\rightarrow \\infty}P_{ij}^n$$i$$\\pi(j)$\n\t-\t$\\pi (j)=\\sum _{i=0}^{\\infty} \\pi (i) P_{ij}$\n\t-\t$\\pi$$\\pi P = \\pi $\n\t-\t$\\pi$\n\n## Markov Chain Monte Carlo\n-\t\n-\t$\\pi(i)P_{ij}=\\pi(j)P_{ij} \\quad for \\quad all \\quad i,j$$\\pi(x)$iijji\n-\tij$q(i,j)$$p(i)q(i,j)=p(j)q(j,i)$$p(x)$$p(x)$$q$$\\alpha$\n$$\np(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha (j,i)\n$$\n\t$\\alpha$\n-\t$\\alpha (i,j)=p(j)q(j,i)$\n-\t\n-\tMCMCqqp$p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha(j,i)$11MCMCMetropolis-Hastings\n\n## Gibbs Sampling\n-\tMCMC1Q1\n-\t$p(x,y)$\n$$\n\\begin{aligned}\np(x_1,y_1)p(y_2|x_1) & =p(x_1)p(y_1|x_1)p(y_2|x_1) \\\\\n& =p(x_1)p(y_2|x_1)p(y_1|x_1) \\\\\n& =p(x_1,y_2)p(y_1|x_1) \\\\\n\\end{aligned}\n$$\n-\t$x=x_1$$p(y|x_1)$$x=x_1$yy\n\t-\t$x=x_1$$Q=p(y|x_1)$\n\t-\t$y=y_1$$Q=p(x|y_1)$\n\t-\t$Q=0$\n\tQ$p(x,y)$\n-\t\n-\t$x$$Q=p(x| x)$\n\n## \n-\tMCMC\n-\tLDA$p(z_i=k|\\mathop{w}^{\\rightarrow})$$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$gibbsLDA\n-\tgibbs$p(x_1^{t+1})=p(x_1|x_2^t,x_3^t)$$p(x_2^{t+1})=p(x_2|x_1^{t+1},x_3^t)$$x_1^{t+1}$LDA\n-\tgibbs11gibbs-gibbs\n-\tgibbsLDAgibbsgibbs\n-\t\n\n# \n-\t\n\t-\t\n\t-\t\n\n## Unigram\n-\tunigram(BoW)\n-\tUnigram$\\mathop{p}^{\\rightarrow}$$p(\\mathop{p}^{\\rightarrow})$\n$$\np(W)=\\int p(W|\\mathop{p}^{\\rightarrow})p(\\mathop{p}^{\\rightarrow})d\\mathop{p}^{\\rightarrow}\n$$\n-\t$p(\\mathop{p}^{\\rightarrow})$$\\mathop{n}^{\\rightarrow}$\n$$\n\\begin{aligned}\np(\\mathop{n}^{\\rightarrow}) &= Mult(\\mathop{n}^{\\rightarrow}|\\mathop{p}^{\\rightarrow},N) \\\\\n&= C_N ^{\\mathop{n}^{\\rightarrow}} \\prod_{k=1}^V p_k^{n_k} \\\\\n\\end{aligned}\n$$\n-\tDirichlet-Multinomial$p(\\mathop{p}^{\\rightarrow})$Dirichlet\n$$\nDir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})=\\frac{1}{\\int \\prod_{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}} \\prod_{k=1}^V p_k^{\\alpha _k -1}\n$$\n\t$V$Dirichlet$\\alpha$$p(\\mathop{p}^{\\rightarrow})$\n$$\n\\begin{aligned}\np(\\mathop{p}^{\\rightarrow}|W,\\mathop{\\alpha}^{\\rightarrow}) &= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})+MultCount(\\mathop{n}^{\\rightarrow}) \\\\\n&= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow}) \\\\\n\\end{aligned}\n$$\n-\t$\\mathop{p}^{\\rightarrow}$DirichletDirichlet\n$$\n\\mathop{p_i}^{~}=\\frac{n_i+\\alpha _i}{\\sum _{i=1}^{V} (n_i+\\alpha _i)}\n$$\n\t$\\alpha _i$$n_i$\n-\t$\\mathop{p}^{\\rightarrow}$\n$$\np(W|\\mathop{p}^{\\rightarrow})=\\prod _{k=1}^V p_k^{n_k}\n$$\n\t\n$$\np(W|\\mathop{\\alpha}^{\\rightarrow})=\\frac{\\Delta(\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})}\n$$\n\t$\\Delta$\n$$\n\\Delta(\\mathop{\\alpha}^{\\rightarrow})=\\int \\prod _{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}\n$$\n\n## PLSA\n-\tPLSA\n-\tUnigram\n-\tPLSAEM\n\n## \n-\tUnigram\n\t-\t\n\t-\t\n-\tPLSA\n\t-\t\n\t-\t\n-\tUnigram\n-\tPLSA\n\n# LDA\n## \n-\tLDAUnigramPLSADirichlet\n\t-\tA\n\t-\tB\n\t-\tC\n\t-\tD\n-\tLDALDAK)\n\t-\tBKA\n\t-\tDC\n\t\t-\tCz\n\t\t-\tKAzA\n-\t$m$$n$$k$$D+C$$m$Dirichlet-Multinomial$B+A$$k$Dirichlet-Multinomialdirichlet1k($\\alpha$)1n($\\beta$)LDA$m+k$Dirichlet-Multinomial\n\n-\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180725/lb2HJm3i59.PNG)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim)\n\n## \n-\t$m+k$Dirichlet-MultinomialLDAUnigram\n$$\n\\begin{aligned}\np(\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\\\\np(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})} \\\\\n\\end{aligned}\n$$\n-\t:\n$$\np(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}\n$$\n\n\n## \n-\t$p(z_i=k|\\mathop{w}^{\\rightarrow})$$z_i$iimnw\n-\tmktkmk\n\t-\t\n\t-\t\n-\tLDAParameter estimation for text analysis \n-\t\n-\t\n$$\np(z_i=k|\\mathop{w}^{\\rightarrow})\n$$\n-\t\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\n$$\n-\t\n$$\np(z_i=k,w_i=t|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})\n$$\n-\t\n$$\n\\int p(z_i=k,w_i=t,\\mathop{\\vartheta _m}^{\\rightarrow},\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\t\n$$\n\\int p(z_i=k,\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})p(w_i=t,\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\t\n$$\n\\int p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} \\cdot \\int p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\titik\n$$\np(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})=\\mathop{\\vartheta _{mk}} \\\\\np(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})=\\mathop{\\varphi _{kt}} \\\\\n$$\n-\t\n$$\np(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{n_{m, i}}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow}) \\\\\np(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{n_{k, i}}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow}) \\\\\n$$\n-\t$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$DirichletDirichletDirichlet\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\\frac{n_{m, i}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m, i}^{(t)}+\\alpha _k)} \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\tkk\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\t\n-\t\n$$\np(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}\n$$\n-\t\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})=\\frac{p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow})}{p(\\mathop{w}^{\\rightarrow},\\mathop{z_{ i}}^{\\rightarrow})} \\\\\n=\\frac{p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow})} {p(\\mathop{w_{ i}}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow})p(w_i)} \\cdot \\frac{p(\\mathop{z}^{\\rightarrow})} {\\mathop{z_{ i}}^{\\rightarrow}} \\\\\n$$\n-\t$p(w_i)$$\\Delta$\n$$\n \\frac{\\Delta(\\mathop{n_{z}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}}{\\Delta(\\mathop{n_{z, i}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}} \\cdot \\frac{\\Delta(\\mathop{n_{m}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}{\\Delta(\\mathop{n_{m, i}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}\n$$\n-\t$\\Delta$\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\tParameter estimation for text analysis\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180829/31jGjg0idC.png?imageslim)\n\n-\tnn78$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$8182$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$n$ i$\n$$\n\\mathop{\\vartheta _{mk}} = \\frac{n_{m}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m}^{(t)}+\\alpha _k)} \\\\\n\\mathop{\\varphi _{kt}} = \\frac{n_{k}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k}^{(t)}+\\beta _t)}\n$$\n## \n-\tGibbsLDALDADir\n\t-\t\n\t-\tGibbs\n\t-\tDirichlet-MultinomialGibbs\n\t-\tGibbs(\n-\t\n-\tLDAMCMCMCMCMCMCGibbsMCMC\n\n# LDA in Gensim\n-\tGensimLDA$\\alpha$\n{% blockquote Gensim https://radimrehurek.com/gensim/models/ldamodel.html models.ldamodel  Latent Dirichlet Allocation %}\nalpha ({numpy.ndarray, str}, optional) \nCan be set to an 1D array of length equal to the number of expected topics that expresses our a-priori belief for the each topics probability. Alternatively default prior selecting strategies can be employed by supplying a string:\nasymmetric: Uses a fixed normalized asymmetric prior of 1.0 / topicno.\ndefault: Learns an asymmetric prior from the corpus.\n{% endblockquote %}\n-\t","source":"_posts/lda.md","raw":"---\ntitle: LDA\ndate: 2018-07-23 09:56:41\ncategories: \ntags:\n  - lda\n  - math\n  -\tmcmc\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim\nhtml: true\n---\n***\nLatent Dirichlet Allocation \nLDALDA\n\n<!--more-->\n\n# \n## Gamma\n-\t\n$$\n\\Gamma (x) = \\int _0 ^{\\infty} t^{x-1} e^{-t} dt\n$$\n-\t$\\Gamma(x+1)=x\\Gamma(x)$1/2\n-\tBohr-Mullerup$f:(0,\\infty) \\rightarrow (0,\\infty)$\n\t-\t$f(1)=1$\n\t-\t$f(x+1)=xf(x)$\n\t-\t$log f(x)$\n\t$f(x)=\\Gamma(x)$\n-\tDigamma\n$$\n\\psi (x)=\\frac{d log \\Gamma(x)}{dx}\n$$\n\t\n$$\n\\psi (x+1)=\\psi (x)+\\frac 1x\n$$\n-\tLDAdigamma\n\n## Gamma\n-\t\n$$\n\\int _0 ^{\\infty} \\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}dx = 1\n$$\n\tGamma\n$$\nGamma(x|\\alpha)=\\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}\n$$\n-\t$\\chi ^2$Gamma\n-\tGamma1GammaGammaPoisson\n$$\nPoisson(X=k|\\lambda)=\\frac{\\lambda ^k e^{-\\lambda}}{k!}\n$$\n-\t$np=\\lambda$npnp$\\lambda$$p=\\frac{\\lambda}{n}$kGammaGamma\n\n## Beta\n-\t\n\t-\tn[0,1]nk$p=x_k$\n\t-\t$P(x) \\leq X_{k} \\leq x+\\Delta x$\n\t-\tkk-1n-k,\n$$\n\\begin{aligned}\nP(E)&=x^{k-1}(1-x-\\Delta x)^{n-k}\\Delta x \\\\\n    &=x^{k-1}(1-x)^{n-k}\\Delta x+\\omicron (\\Delta x) \\\\\n\\end{aligned}\n$$\n\t-\t$\\omicron (\\Delta x)$k$\\Delta x$0k\n$$\nf(x)=\\frac{n!}{(k-1)!(n-k)!}x^{k-1}(1-x)^{n-k} \\quad x \\in [0,1]\n$$\n\tGamma$\\alpha =k,\\beta = n-k+1$:\n$$\n\\begin{aligned}\nf(x)&=\\frac{\\Gamma(\\alpha+\\beta)}{\\Gamma(\\alpha)\\Gamma(\\beta)}x^{\\alpha-1}(1-x)^{\\beta-1} \\\\\n    &=Beta(p|k,n-k+1) \\\\\n    &=Beta(\\alpha,\\beta) \\\\\n\\end{aligned}\n$$\n\tBetak\n-\tBetakkpn[0,1]nk[0,1]$\\alpha$$\\beta$$\\alpha$$\\beta$nkp[0,1]npkp$\\frac kn$\n-\tBeta$\\alpha$$\\beta$pBetappBeta\n\n## Beta-Binomial\n-\tkBetam[0,1]kk\n-\t$p=X_k$$m_1$$p$$m_2$$p$$p$$Beta(p|k+m_1,n-k+1+m_2)$\n-\tmm[0,1]m$p$$p=X_k$$m_1$$B(m,p)$\n\n|       |   |   |\n| :-------: | :-------:| :--: |\n| Beta  |  |   Beta   |\n-\tBeta-Binomial\n$$\nBeta(p|\\alpha,\\beta)+BinomCount(m_1,m_2)=Beta(p|\\alpha+m_1,\\beta+m_2)\n$$\n\tBetaBeta$\\alpha,\\beta$\n-\tBeta1m$m_1$$Beta(p|m_1+1,m_2+1)$\n-\t\n$$\nP(C \\leq k) = \\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\quad C \\sim B(n,p)\n$$\n\t\n\t-\t$Beta(t|k+1,n-k)$\n\t-\tn[0,1]$B(n,p)$$p$n$p$C$B(n,p)$\n\t-\t$P(C \\leq k)=P(X_{k+1}>p)$n$p$$k$\n\t-\tkBeta\n$$\n\\begin{aligned}\nP(C \\leq k) &=P(X_{k+1} > p) \\\\\n\t\t\t&=\\int _p ^1 Beta(t|k+1,n-k)dt \\\\\n\t\t\t&=\\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\\\\n\\end{aligned}\n$$\n\t\n-\tnGamma\n-\tkpppppp100p100pppBetaDirichlet\n\n## Dirichlet-Multinomial\n-\t$x_{k_1},x_{k_1+k_2}$\n-\t$\\Delta x$$x_1,x_2,x_3$\n$$\nf(x_1,x_2,x_3)=\\frac{\\Gamma(n+1)}{\\Gamma(k_1)\\Gamma(k_2)\\Gamma(n-k_1-k_2+1)}x_1^{k_1-1}x_2^{k_2-1}x_3^{n-k_1-k_2}\n$$\n-\t\n$$\nf(x_1,x_2,x_3)=\\frac{\\Gamma(\\alpha _1+\\alpha _2+\\alpha _3)}{\\Gamma(\\alpha _1)\\Gamma(\\alpha _2)\\Gamma(\\alpha _3)}x_1^{\\alpha _1-1}x_2^{\\alpha _2-1}x_3^{\\alpha _3-1}\n$$\n\t3Dirichlet$x_1,x_2,x_3$$f$\n-\tDirichletDirichlet\n$$\nDir(p|\\alpha)+MultCount(m)=Dir(p|\\alpha+m)\n$$\n\t\n-\tBetaDirichletBeta$E(p)=\\frac{\\alpha}{\\alpha+\\beta}$Dirichlet\n\n## \n-\tAABBAABBA BetaDirichlet\n-\tLDA--DirichletDirichlet-MultinomialGammaGammaBetaGammaBetaBeta-BinomialDirichlet-Multinomial\n-\tDirichletDirichlet[0,1]dirichlet$p_1,p_2,p_3$\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180828/B5IBgB1kbK.PNG)\n\n-\t$\\alpha$mean shapesparsity\n-\tDirichlet$\\alpha _1,\\alpha _2,\\alpha _3$$\\alpha$Dirichlet$p_1,p_2,p_3$p\n-\t$\\alpha$$\\alpha$ppconcentration\n-\t$\\alpha$$\\alpha$Dirichletpp1p\n-\t$\\alpha$$p$concentration$\\alpha$$\\alpha$pp\n-\t$\\alpha$1Dirichelt$alpha$1\n-\tDirichlet$\\alpha$\n{% blockquote Dirichlet_distribution https://en.wikipedia.org/wiki/Dirichlet_distribution#Intuitive_interpretations_of_the_parameters Intuitive interpretations of the parameters %}\nThe concentration parameter\nDirichlet distributions are very often used as prior distributions in Bayesian inference. The simplest and perhaps most common type of Dirichlet prior is the symmetric Dirichlet distribution, where all parameters are equal. This corresponds to the case where you have no prior information to favor one component over any other. As described above, the single value  to which all parameters are set is called the concentration parameter. If the sample space of the Dirichlet distribution is interpreted as a discrete probability distribution, then intuitively the concentration parameter can be thought of as determining how \"concentrated\" the probability mass of a sample from a Dirichlet distribution is likely to be. With a value much less than 1, the mass will be highly concentrated in a few components, and all the rest will have almost no mass. With a value much greater than 1, the mass will be dispersed almost equally among all the components. See the article on the concentration parameter for further discussion.\n{% endblockquote %}\n-\t$\\alpha$1Dirichlet0$\\alpha$1\n-\tDirichlet Process$\\alpha$DirichletBase Measure$\\alpha$\n-\tLDA\n\n# \n## \n-\t\n-\t\n-\tMCMC1MCMC\n\n## \n-\t\n-\tnn\n-\t\n-\t\n\t-\tP$lim_{n \\rightarrow \\infty}P_{ij}^n$$i$$\\pi(j)$\n\t-\t$\\pi (j)=\\sum _{i=0}^{\\infty} \\pi (i) P_{ij}$\n\t-\t$\\pi$$\\pi P = \\pi $\n\t-\t$\\pi$\n\n## Markov Chain Monte Carlo\n-\t\n-\t$\\pi(i)P_{ij}=\\pi(j)P_{ij} \\quad for \\quad all \\quad i,j$$\\pi(x)$iijji\n-\tij$q(i,j)$$p(i)q(i,j)=p(j)q(j,i)$$p(x)$$p(x)$$q$$\\alpha$\n$$\np(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha (j,i)\n$$\n\t$\\alpha$\n-\t$\\alpha (i,j)=p(j)q(j,i)$\n-\t\n-\tMCMCqqp$p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha(j,i)$11MCMCMetropolis-Hastings\n\n## Gibbs Sampling\n-\tMCMC1Q1\n-\t$p(x,y)$\n$$\n\\begin{aligned}\np(x_1,y_1)p(y_2|x_1) & =p(x_1)p(y_1|x_1)p(y_2|x_1) \\\\\n& =p(x_1)p(y_2|x_1)p(y_1|x_1) \\\\\n& =p(x_1,y_2)p(y_1|x_1) \\\\\n\\end{aligned}\n$$\n-\t$x=x_1$$p(y|x_1)$$x=x_1$yy\n\t-\t$x=x_1$$Q=p(y|x_1)$\n\t-\t$y=y_1$$Q=p(x|y_1)$\n\t-\t$Q=0$\n\tQ$p(x,y)$\n-\t\n-\t$x$$Q=p(x| x)$\n\n## \n-\tMCMC\n-\tLDA$p(z_i=k|\\mathop{w}^{\\rightarrow})$$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$gibbsLDA\n-\tgibbs$p(x_1^{t+1})=p(x_1|x_2^t,x_3^t)$$p(x_2^{t+1})=p(x_2|x_1^{t+1},x_3^t)$$x_1^{t+1}$LDA\n-\tgibbs11gibbs-gibbs\n-\tgibbsLDAgibbsgibbs\n-\t\n\n# \n-\t\n\t-\t\n\t-\t\n\n## Unigram\n-\tunigram(BoW)\n-\tUnigram$\\mathop{p}^{\\rightarrow}$$p(\\mathop{p}^{\\rightarrow})$\n$$\np(W)=\\int p(W|\\mathop{p}^{\\rightarrow})p(\\mathop{p}^{\\rightarrow})d\\mathop{p}^{\\rightarrow}\n$$\n-\t$p(\\mathop{p}^{\\rightarrow})$$\\mathop{n}^{\\rightarrow}$\n$$\n\\begin{aligned}\np(\\mathop{n}^{\\rightarrow}) &= Mult(\\mathop{n}^{\\rightarrow}|\\mathop{p}^{\\rightarrow},N) \\\\\n&= C_N ^{\\mathop{n}^{\\rightarrow}} \\prod_{k=1}^V p_k^{n_k} \\\\\n\\end{aligned}\n$$\n-\tDirichlet-Multinomial$p(\\mathop{p}^{\\rightarrow})$Dirichlet\n$$\nDir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})=\\frac{1}{\\int \\prod_{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}} \\prod_{k=1}^V p_k^{\\alpha _k -1}\n$$\n\t$V$Dirichlet$\\alpha$$p(\\mathop{p}^{\\rightarrow})$\n$$\n\\begin{aligned}\np(\\mathop{p}^{\\rightarrow}|W,\\mathop{\\alpha}^{\\rightarrow}) &= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})+MultCount(\\mathop{n}^{\\rightarrow}) \\\\\n&= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow}) \\\\\n\\end{aligned}\n$$\n-\t$\\mathop{p}^{\\rightarrow}$DirichletDirichlet\n$$\n\\mathop{p_i}^{~}=\\frac{n_i+\\alpha _i}{\\sum _{i=1}^{V} (n_i+\\alpha _i)}\n$$\n\t$\\alpha _i$$n_i$\n-\t$\\mathop{p}^{\\rightarrow}$\n$$\np(W|\\mathop{p}^{\\rightarrow})=\\prod _{k=1}^V p_k^{n_k}\n$$\n\t\n$$\np(W|\\mathop{\\alpha}^{\\rightarrow})=\\frac{\\Delta(\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})}\n$$\n\t$\\Delta$\n$$\n\\Delta(\\mathop{\\alpha}^{\\rightarrow})=\\int \\prod _{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}\n$$\n\n## PLSA\n-\tPLSA\n-\tUnigram\n-\tPLSAEM\n\n## \n-\tUnigram\n\t-\t\n\t-\t\n-\tPLSA\n\t-\t\n\t-\t\n-\tUnigram\n-\tPLSA\n\n# LDA\n## \n-\tLDAUnigramPLSADirichlet\n\t-\tA\n\t-\tB\n\t-\tC\n\t-\tD\n-\tLDALDAK)\n\t-\tBKA\n\t-\tDC\n\t\t-\tCz\n\t\t-\tKAzA\n-\t$m$$n$$k$$D+C$$m$Dirichlet-Multinomial$B+A$$k$Dirichlet-Multinomialdirichlet1k($\\alpha$)1n($\\beta$)LDA$m+k$Dirichlet-Multinomial\n\n-\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180725/lb2HJm3i59.PNG)\n\t![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim)\n\n## \n-\t$m+k$Dirichlet-MultinomialLDAUnigram\n$$\n\\begin{aligned}\np(\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\\\\np(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})} \\\\\n\\end{aligned}\n$$\n-\t:\n$$\np(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}\n$$\n\n\n## \n-\t$p(z_i=k|\\mathop{w}^{\\rightarrow})$$z_i$iimnw\n-\tmktkmk\n\t-\t\n\t-\t\n-\tLDAParameter estimation for text analysis \n-\t\n-\t\n$$\np(z_i=k|\\mathop{w}^{\\rightarrow})\n$$\n-\t\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\n$$\n-\t\n$$\np(z_i=k,w_i=t|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})\n$$\n-\t\n$$\n\\int p(z_i=k,w_i=t,\\mathop{\\vartheta _m}^{\\rightarrow},\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\t\n$$\n\\int p(z_i=k,\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})p(w_i=t,\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\t\n$$\n\\int p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} \\cdot \\int p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\varphi _k}^{\\rightarrow}\n$$\n-\titik\n$$\np(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})=\\mathop{\\vartheta _{mk}} \\\\\np(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})=\\mathop{\\varphi _{kt}} \\\\\n$$\n-\t\n$$\np(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{n_{m, i}}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow}) \\\\\np(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{n_{k, i}}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow}) \\\\\n$$\n-\t$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$DirichletDirichletDirichlet\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\\frac{n_{m, i}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m, i}^{(t)}+\\alpha _k)} \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\tkk\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\t\n-\t\n$$\np(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}\n$$\n-\t\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})=\\frac{p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow})}{p(\\mathop{w}^{\\rightarrow},\\mathop{z_{ i}}^{\\rightarrow})} \\\\\n=\\frac{p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow})} {p(\\mathop{w_{ i}}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow})p(w_i)} \\cdot \\frac{p(\\mathop{z}^{\\rightarrow})} {\\mathop{z_{ i}}^{\\rightarrow}} \\\\\n$$\n-\t$p(w_i)$$\\Delta$\n$$\n \\frac{\\Delta(\\mathop{n_{z}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}}{\\Delta(\\mathop{n_{z, i}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}} \\cdot \\frac{\\Delta(\\mathop{n_{m}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}{\\Delta(\\mathop{n_{m, i}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}\n$$\n-\t$\\Delta$\n$$\np(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}\n$$\n-\tParameter estimation for text analysis\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180829/31jGjg0idC.png?imageslim)\n\n-\tnn78$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$8182$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$n$ i$\n$$\n\\mathop{\\vartheta _{mk}} = \\frac{n_{m}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m}^{(t)}+\\alpha _k)} \\\\\n\\mathop{\\varphi _{kt}} = \\frac{n_{k}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k}^{(t)}+\\beta _t)}\n$$\n## \n-\tGibbsLDALDADir\n\t-\t\n\t-\tGibbs\n\t-\tDirichlet-MultinomialGibbs\n\t-\tGibbs(\n-\t\n-\tLDAMCMCMCMCMCMCGibbsMCMC\n\n# LDA in Gensim\n-\tGensimLDA$\\alpha$\n{% blockquote Gensim https://radimrehurek.com/gensim/models/ldamodel.html models.ldamodel  Latent Dirichlet Allocation %}\nalpha ({numpy.ndarray, str}, optional) \nCan be set to an 1D array of length equal to the number of expected topics that expresses our a-priori belief for the each topics probability. Alternatively default prior selecting strategies can be employed by supplying a string:\nasymmetric: Uses a fixed normalized asymmetric prior of 1.0 / topicno.\ndefault: Learns an asymmetric prior from the corpus.\n{% endblockquote %}\n-\t","slug":"lda","published":1,"updated":"2018-09-03T02:31:22.157Z","comments":1,"layout":"post","link":"","_id":"cjmd072d8001zqcw67w7br38j","content":"<hr><p>Latent Dirichlet Allocation <br>LDALDA</p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"Gamma\"><a href=\"#Gamma\" class=\"headerlink\" title=\"Gamma\"></a>Gamma</h2><ul><li><br>$$<br>\\Gamma (x) = \\int _0 ^{\\infty} t^{x-1} e^{-t} dt<br>$$</li><li>$\\Gamma(x+1)=x\\Gamma(x)$1/2</li><li>Bohr-Mullerup$f:(0,\\infty) \\rightarrow (0,\\infty)$<ul><li>$f(1)=1$</li><li>$f(x+1)=xf(x)$</li><li>$log f(x)$<br>$f(x)=\\Gamma(x)$</li></ul></li><li>Digamma<br>$$<br>\\psi (x)=\\frac{d log \\Gamma(x)}{dx}<br>$$<br><br>$$<br>\\psi (x+1)=\\psi (x)+\\frac 1x<br>$$</li><li>LDAdigamma</li></ul><h2 id=\"Gamma\"><a href=\"#Gamma\" class=\"headerlink\" title=\"Gamma\"></a>Gamma</h2><ul><li><br>$$<br>\\int _0 ^{\\infty} \\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}dx = 1<br>$$<br>Gamma<br>$$<br>Gamma(x|\\alpha)=\\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}<br>$$</li><li>$\\chi ^2$Gamma</li><li>Gamma1GammaGammaPoisson<br>$$<br>Poisson(X=k|\\lambda)=\\frac{\\lambda ^k e^{-\\lambda}}{k!}<br>$$</li><li>$np=\\lambda$npnp$\\lambda$$p=\\frac{\\lambda}{n}$kGammaGamma</li></ul><h2 id=\"Beta\"><a href=\"#Beta\" class=\"headerlink\" title=\"Beta\"></a>Beta</h2><ul><li><ul><li>n[0,1]nk$p=x_k$</li><li>$P(x) \\leq X_{k} \\leq x+\\Delta x$</li><li>kk-1n-k,<br>$$<br>\\begin{aligned}<br>P(E)&amp;=x^{k-1}(1-x-\\Delta x)^{n-k}\\Delta x \\\\<br>&amp;=x^{k-1}(1-x)^{n-k}\\Delta x+\\omicron (\\Delta x) \\\\<br>\\end{aligned}<br>$$</li><li>$\\omicron (\\Delta x)$k$\\Delta x$0k<br>$$<br>f(x)=\\frac{n!}{(k-1)!(n-k)!}x^{k-1}(1-x)^{n-k} \\quad x \\in [0,1]<br>$$<br>Gamma$\\alpha =k,\\beta = n-k+1$:<br>$$<br>\\begin{aligned}<br>f(x)&amp;=\\frac{\\Gamma(\\alpha+\\beta)}{\\Gamma(\\alpha)\\Gamma(\\beta)}x^{\\alpha-1}(1-x)^{\\beta-1} \\\\<br>&amp;=Beta(p|k,n-k+1) \\\\<br>&amp;=Beta(\\alpha,\\beta) \\\\<br>\\end{aligned}<br>$$<br>Betak</li></ul></li><li>Betakkpn[0,1]nk[0,1]$\\alpha$$\\beta$$\\alpha$$\\beta$nkp[0,1]npkp$\\frac kn$</li><li>Beta$\\alpha$$\\beta$pBetappBeta</li></ul><h2 id=\"Beta-Binomial\"><a href=\"#Beta-Binomial\" class=\"headerlink\" title=\"Beta-Binomial\"></a>Beta-Binomial</h2><ul><li>kBetam[0,1]kk</li><li>$p=X_k$$m_1$$p$$m_2$$p$$p$$Beta(p|k+m_1,n-k+1+m_2)$</li><li>mm[0,1]m$p$$p=X_k$$m_1$$B(m,p)$</li></ul><table><thead><tr><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th></tr></thead><tbody><tr><td style=\"text-align:center\">Beta</td><td style=\"text-align:center\"></td><td style=\"text-align:center\">Beta</td></tr></tbody></table><ul><li>Beta-Binomial<br>$$<br>Beta(p|\\alpha,\\beta)+BinomCount(m_1,m_2)=Beta(p|\\alpha+m_1,\\beta+m_2)<br>$$<br>BetaBeta$\\alpha,\\beta$</li><li>Beta1m$m_1$$Beta(p|m_1+1,m_2+1)$</li><li><br>$$<br>P(C \\leq k) = \\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\quad C \\sim B(n,p)<br>$$<br><ul><li>$Beta(t|k+1,n-k)$</li><li>n[0,1]$B(n,p)$$p$n$p$C$B(n,p)$</li><li>$P(C \\leq k)=P(X_{k+1}&gt;p)$n$p$$k$</li><li>kBeta<br>$$<br>\\begin{aligned}<br>P(C \\leq k) &amp;=P(X_{k+1} &gt; p) \\\\<br>&amp;=\\int _p ^1 Beta(t|k+1,n-k)dt \\\\<br>&amp;=\\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\\\<br>\\end{aligned}<br>$$<br></li></ul></li><li>nGamma</li><li>kpppppp100p100pppBetaDirichlet</li></ul><h2 id=\"Dirichlet-Multinomial\"><a href=\"#Dirichlet-Multinomial\" class=\"headerlink\" title=\"Dirichlet-Multinomial\"></a>Dirichlet-Multinomial</h2><ul><li>$x_{k_1},x_{k_1+k_2}$</li><li>$\\Delta x$$x_1,x_2,x_3$<br>$$<br>f(x_1,x_2,x_3)=\\frac{\\Gamma(n+1)}{\\Gamma(k_1)\\Gamma(k_2)\\Gamma(n-k_1-k_2+1)}x_1^{k_1-1}x_2^{k_2-1}x_3^{n-k_1-k_2}<br>$$</li><li><br>$$<br>f(x_1,x_2,x_3)=\\frac{\\Gamma(\\alpha _1+\\alpha _2+\\alpha _3)}{\\Gamma(\\alpha _1)\\Gamma(\\alpha _2)\\Gamma(\\alpha _3)}x_1^{\\alpha _1-1}x_2^{\\alpha _2-1}x_3^{\\alpha _3-1}<br>$$<br>3Dirichlet$x_1,x_2,x_3$$f$</li><li>DirichletDirichlet<br>$$<br>Dir(p|\\alpha)+MultCount(m)=Dir(p|\\alpha+m)<br>$$<br></li><li>BetaDirichletBeta$E(p)=\\frac{\\alpha}{\\alpha+\\beta}$Dirichlet</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AABBAABBA BetaDirichlet</li><li>LDA--DirichletDirichlet-MultinomialGammaGammaBetaGammaBetaBeta-BinomialDirichlet-Multinomial</li><li>DirichletDirichlet[0,1]dirichlet$p_1,p_2,p_3$</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180828/B5IBgB1kbK.PNG\" alt=\"mark\"></p><ul><li>$\\alpha$mean shapesparsity</li><li>Dirichlet$\\alpha _1,\\alpha _2,\\alpha _3$$\\alpha$Dirichlet$p_1,p_2,p_3$p</li><li>$\\alpha$$\\alpha$ppconcentration</li><li>$\\alpha$$\\alpha$Dirichletpp1p</li><li>$\\alpha$$p$concentration$\\alpha$$\\alpha$pp</li><li>$\\alpha$1Dirichelt$alpha$1</li><li>Dirichlet$\\alpha$<blockquote><p>The concentration parameter<br>Dirichlet distributions are very often used as prior distributions in Bayesian inference. The simplest and perhaps most common type of Dirichlet prior is the symmetric Dirichlet distribution, where all parameters are equal. This corresponds to the case where you have no prior information to favor one component over any other. As described above, the single value  to which all parameters are set is called the concentration parameter. If the sample space of the Dirichlet distribution is interpreted as a discrete probability distribution, then intuitively the concentration parameter can be thought of as determining how concentrated the probability mass of a sample from a Dirichlet distribution is likely to be. With a value much less than 1, the mass will be highly concentrated in a few components, and all the rest will have almost no mass. With a value much greater than 1, the mass will be dispersed almost equally among all the components. See the article on the concentration parameter for further discussion.</p><footer><strong>Dirichlet_distribution</strong><cite><a href=\"https://en.wikipedia.org/wiki/Dirichlet_distribution#Intuitive_interpretations_of_the_parameters\" target=\"_blank\" rel=\"noopener\">Intuitive interpretations of the parameters</a></cite></footer></blockquote></li><li>$\\alpha$1Dirichlet0$\\alpha$1</li><li>Dirichlet Process$\\alpha$DirichletBase Measure$\\alpha$</li><li>LDA</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>MCMC1MCMC</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>nn</li><li></li><li><ul><li>P$lim_{n \\rightarrow \\infty}P_{ij}^n$$i$$\\pi(j)$</li><li>$\\pi (j)=\\sum _{i=0}^{\\infty} \\pi (i) P_{ij}$</li><li>$\\pi$$\\pi P = \\pi $</li><li>$\\pi$</li></ul></li></ul><h2 id=\"Markov-Chain-Monte-Carlo\"><a href=\"#Markov-Chain-Monte-Carlo\" class=\"headerlink\" title=\"Markov Chain Monte Carlo\"></a>Markov Chain Monte Carlo</h2><ul><li></li><li>$\\pi(i)P_{ij}=\\pi(j)P_{ij} \\quad for \\quad all \\quad i,j$$\\pi(x)$iijji</li><li>ij$q(i,j)$$p(i)q(i,j)=p(j)q(j,i)$$p(x)$$p(x)$$q$$\\alpha$<br>$$<br>p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha (j,i)<br>$$<br>$\\alpha$</li><li>$\\alpha (i,j)=p(j)q(j,i)$</li><li></li><li>MCMCqqp$p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha(j,i)$11MCMCMetropolis-Hastings</li></ul><h2 id=\"Gibbs-Sampling\"><a href=\"#Gibbs-Sampling\" class=\"headerlink\" title=\"Gibbs Sampling\"></a>Gibbs Sampling</h2><ul><li>MCMC1Q1</li><li>$p(x,y)$<br>$$<br>\\begin{aligned}<br>p(x_1,y_1)p(y_2|x_1) &amp; =p(x_1)p(y_1|x_1)p(y_2|x_1) \\\\<br>&amp; =p(x_1)p(y_2|x_1)p(y_1|x_1) \\\\<br>&amp; =p(x_1,y_2)p(y_1|x_1) \\\\<br>\\end{aligned}<br>$$</li><li>$x=x_1$$p(y|x_1)$$x=x_1$yy<ul><li>$x=x_1$$Q=p(y|x_1)$</li><li>$y=y_1$$Q=p(x|y_1)$</li><li>$Q=0$<br>Q$p(x,y)$</li></ul></li><li></li><li>$x$$Q=p(x| x)$</li></ul><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>MCMC</li><li>LDA$p(z_i=k|\\mathop{w}^{\\rightarrow})$$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$gibbsLDA</li><li>gibbs$p(x_1^{t+1})=p(x_1|x_2^t,x_3^t)$$p(x_2^{t+1})=p(x_2|x_1^{t+1},x_3^t)$$x_1^{t+1}$LDA</li><li>gibbs11gibbs-gibbs</li><li>gibbsLDAgibbsgibbs</li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><ul><li></li><li></li></ul></li></ul><h2 id=\"Unigram\"><a href=\"#Unigram\" class=\"headerlink\" title=\"Unigram\"></a>Unigram</h2><ul><li>unigram(BoW)</li><li>Unigram$\\mathop{p}^{\\rightarrow}$$p(\\mathop{p}^{\\rightarrow})$<br>$$<br>p(W)=\\int p(W|\\mathop{p}^{\\rightarrow})p(\\mathop{p}^{\\rightarrow})d\\mathop{p}^{\\rightarrow}<br>$$</li><li>$p(\\mathop{p}^{\\rightarrow})$$\\mathop{n}^{\\rightarrow}$<br>$$<br>\\begin{aligned}<br>p(\\mathop{n}^{\\rightarrow}) &amp;= Mult(\\mathop{n}^{\\rightarrow}|\\mathop{p}^{\\rightarrow},N) \\\\<br>&amp;= C_N ^{\\mathop{n}^{\\rightarrow}} \\prod_{k=1}^V p_k^{n_k} \\\\<br>\\end{aligned}<br>$$</li><li>Dirichlet-Multinomial$p(\\mathop{p}^{\\rightarrow})$Dirichlet<br>$$<br>Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})=\\frac{1}{\\int \\prod_{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}} \\prod_{k=1}^V p_k^{\\alpha _k -1}<br>$$<br>$V$Dirichlet$\\alpha$$p(\\mathop{p}^{\\rightarrow})$<br>$$<br>\\begin{aligned}<br>p(\\mathop{p}^{\\rightarrow}|W,\\mathop{\\alpha}^{\\rightarrow}) &amp;= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})+MultCount(\\mathop{n}^{\\rightarrow}) \\\\<br>&amp;= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow}) \\\\<br>\\end{aligned}<br>$$</li><li>$\\mathop{p}^{\\rightarrow}$DirichletDirichlet<br>$$<br>\\mathop{p_i}^{~}=\\frac{n_i+\\alpha _i}{\\sum _{i=1}^{V} (n_i+\\alpha _i)}<br>$$<br>$\\alpha _i$$n_i$</li><li>$\\mathop{p}^{\\rightarrow}$<br>$$<br>p(W|\\mathop{p}^{\\rightarrow})=\\prod _{k=1}^V p_k^{n_k}<br>$$<br><br>$$<br>p(W|\\mathop{\\alpha}^{\\rightarrow})=\\frac{\\Delta(\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})}<br>$$<br>$\\Delta$<br>$$<br>\\Delta(\\mathop{\\alpha}^{\\rightarrow})=\\int \\prod _{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}<br>$$</li></ul><h2 id=\"PLSA\"><a href=\"#PLSA\" class=\"headerlink\" title=\"PLSA\"></a>PLSA</h2><ul><li>PLSA</li><li>Unigram</li><li>PLSAEM</li></ul><h2 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Unigram<ul><li></li><li></li></ul></li><li>PLSA<ul><li></li><li></li></ul></li><li>Unigram</li><li>PLSA</li></ul><h1 id=\"LDA\"><a href=\"#LDA\" class=\"headerlink\" title=\"LDA\"></a>LDA</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>LDAUnigramPLSADirichlet<ul><li>A</li><li>B</li><li>C</li><li>D</li></ul></li><li>LDALDAK)<ul><li>BKA</li><li>DC<ul><li>Cz</li><li>KAzA</li></ul></li></ul></li><li><p>$m$$n$$k$$D+C$$m$Dirichlet-Multinomial$B+A$$k$Dirichlet-Multinomialdirichlet1k($\\alpha$)1n($\\beta$)LDA$m+k$Dirichlet-Multinomial</p></li><li><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180725/lb2HJm3i59.PNG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$m+k$Dirichlet-MultinomialLDAUnigram<br>$$<br>\\begin{aligned}<br>p(\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\\\<br>p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})} \\\\<br>\\end{aligned}<br>$$</li><li>:<br>$$<br>p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$p(z_i=k|\\mathop{w}^{\\rightarrow})$$z_i$iimnw</li><li>mktkmk<ul><li></li><li></li></ul></li><li>LDAParameter estimation for text analysis </li><li></li><li><br>$$<br>p(z_i=k|\\mathop{w}^{\\rightarrow})<br>$$</li><li><br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})<br>$$</li><li><br>$$<br>p(z_i=k,w_i=t|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})<br>$$</li><li><br>$$<br>\\int p(z_i=k,w_i=t,\\mathop{\\vartheta _m}^{\\rightarrow},\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li><br>$$<br>\\int p(z_i=k,\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})p(w_i=t,\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li><br>$$<br>\\int p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} \\cdot \\int p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li>itik<br>$$<br>p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})=\\mathop{\\vartheta _{mk}} \\\\<br>p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})=\\mathop{\\varphi _{kt}} \\\\<br>$$</li><li><br>$$<br>p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{n_{m, i}}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow}) \\\\<br>p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{n_{k, i}}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow}) \\\\<br>$$</li><li>$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$DirichletDirichletDirichlet<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\\frac{n_{m, i}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m, i}^{(t)}+\\alpha _k)} \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li>kk<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li></li><li><br>$$<br>p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}<br>$$</li><li><br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})=\\frac{p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow})}{p(\\mathop{w}^{\\rightarrow},\\mathop{z_{ i}}^{\\rightarrow})} \\\\<br>=\\frac{p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow})} {p(\\mathop{w_{ i}}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow})p(w_i)} \\cdot \\frac{p(\\mathop{z}^{\\rightarrow})} {\\mathop{z_{ i}}^{\\rightarrow}} \\\\<br>$$</li><li>$p(w_i)$$\\Delta$<br>$$<br> \\frac{\\Delta(\\mathop{n_{z}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}}{\\Delta(\\mathop{n_{z, i}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}} \\cdot \\frac{\\Delta(\\mathop{n_{m}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}{\\Delta(\\mathop{n_{m, i}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}<br>$$</li><li>$\\Delta$<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li>Parameter estimation for text analysis</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180829/31jGjg0idC.png?imageslim\" alt=\"mark\"></p><ul><li>nn78$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$8182$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$n$ i$<br>$$<br>\\mathop{\\vartheta _{mk}} = \\frac{n_{m}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m}^{(t)}+\\alpha _k)} \\\\<br>\\mathop{\\varphi _{kt}} = \\frac{n_{k}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k}^{(t)}+\\beta _t)}<br>$$<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li><li>GibbsLDALDADir<ul><li></li><li>Gibbs</li><li>Dirichlet-MultinomialGibbs</li><li>Gibbs(</li></ul></li><li></li><li>LDAMCMCMCMCMCMCGibbsMCMC</li></ul><h1 id=\"LDA-in-Gensim\"><a href=\"#LDA-in-Gensim\" class=\"headerlink\" title=\"LDA in Gensim\"></a>LDA in Gensim</h1><ul><li>GensimLDA$\\alpha$<blockquote><p>alpha ({numpy.ndarray, str}, optional) <br>Can be set to an 1D array of length equal to the number of expected topics that expresses our a-priori belief for the each topics probability. Alternatively default prior selecting strategies can be employed by supplying a string:<br>asymmetric: Uses a fixed normalized asymmetric prior of 1.0 / topicno.<br>default: Learns an asymmetric prior from the corpus.</p><footer><strong>Gensim</strong><cite><a href=\"https://radimrehurek.com/gensim/models/ldamodel.html\" target=\"_blank\" rel=\"noopener\">models.ldamodel  Latent Dirichlet Allocation</a></cite></footer></blockquote></li><li></li></ul>","site":{"data":{}},"excerpt":"<hr><p>Latent Dirichlet Allocation <br>LDALDA</p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"Gamma\"><a href=\"#Gamma\" class=\"headerlink\" title=\"Gamma\"></a>Gamma</h2><ul><li><br>$$<br>\\Gamma (x) = \\int _0 ^{\\infty} t^{x-1} e^{-t} dt<br>$$</li><li>$\\Gamma(x+1)=x\\Gamma(x)$1/2</li><li>Bohr-Mullerup$f:(0,\\infty) \\rightarrow (0,\\infty)$<ul><li>$f(1)=1$</li><li>$f(x+1)=xf(x)$</li><li>$log f(x)$<br>$f(x)=\\Gamma(x)$</li></ul></li><li>Digamma<br>$$<br>\\psi (x)=\\frac{d log \\Gamma(x)}{dx}<br>$$<br><br>$$<br>\\psi (x+1)=\\psi (x)+\\frac 1x<br>$$</li><li>LDAdigamma</li></ul><h2 id=\"Gamma\"><a href=\"#Gamma\" class=\"headerlink\" title=\"Gamma\"></a>Gamma</h2><ul><li><br>$$<br>\\int _0 ^{\\infty} \\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}dx = 1<br>$$<br>Gamma<br>$$<br>Gamma(x|\\alpha)=\\frac{x^{\\alpha -1}e^{-x}}{\\Gamma(\\alpha)}<br>$$</li><li>$\\chi ^2$Gamma</li><li>Gamma1GammaGammaPoisson<br>$$<br>Poisson(X=k|\\lambda)=\\frac{\\lambda ^k e^{-\\lambda}}{k!}<br>$$</li><li>$np=\\lambda$npnp$\\lambda$$p=\\frac{\\lambda}{n}$kGammaGamma</li></ul><h2 id=\"Beta\"><a href=\"#Beta\" class=\"headerlink\" title=\"Beta\"></a>Beta</h2><ul><li><ul><li>n[0,1]nk$p=x_k$</li><li>$P(x) \\leq X_{k} \\leq x+\\Delta x$</li><li>kk-1n-k,<br>$$<br>\\begin{aligned}<br>P(E)&amp;=x^{k-1}(1-x-\\Delta x)^{n-k}\\Delta x \\\\<br>&amp;=x^{k-1}(1-x)^{n-k}\\Delta x+\\omicron (\\Delta x) \\\\<br>\\end{aligned}<br>$$</li><li>$\\omicron (\\Delta x)$k$\\Delta x$0k<br>$$<br>f(x)=\\frac{n!}{(k-1)!(n-k)!}x^{k-1}(1-x)^{n-k} \\quad x \\in [0,1]<br>$$<br>Gamma$\\alpha =k,\\beta = n-k+1$:<br>$$<br>\\begin{aligned}<br>f(x)&amp;=\\frac{\\Gamma(\\alpha+\\beta)}{\\Gamma(\\alpha)\\Gamma(\\beta)}x^{\\alpha-1}(1-x)^{\\beta-1} \\\\<br>&amp;=Beta(p|k,n-k+1) \\\\<br>&amp;=Beta(\\alpha,\\beta) \\\\<br>\\end{aligned}<br>$$<br>Betak</li></ul></li><li>Betakkpn[0,1]nk[0,1]$\\alpha$$\\beta$$\\alpha$$\\beta$nkp[0,1]npkp$\\frac kn$</li><li>Beta$\\alpha$$\\beta$pBetappBeta</li></ul><h2 id=\"Beta-Binomial\"><a href=\"#Beta-Binomial\" class=\"headerlink\" title=\"Beta-Binomial\"></a>Beta-Binomial</h2><ul><li>kBetam[0,1]kk</li><li>$p=X_k$$m_1$$p$$m_2$$p$$p$$Beta(p|k+m_1,n-k+1+m_2)$</li><li>mm[0,1]m$p$$p=X_k$$m_1$$B(m,p)$</li></ul><table><thead><tr><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th></tr></thead><tbody><tr><td style=\"text-align:center\">Beta</td><td style=\"text-align:center\"></td><td style=\"text-align:center\">Beta</td></tr></tbody></table><ul><li>Beta-Binomial<br>$$<br>Beta(p|\\alpha,\\beta)+BinomCount(m_1,m_2)=Beta(p|\\alpha+m_1,\\beta+m_2)<br>$$<br>BetaBeta$\\alpha,\\beta$</li><li>Beta1m$m_1$$Beta(p|m_1+1,m_2+1)$</li><li><br>$$<br>P(C \\leq k) = \\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\quad C \\sim B(n,p)<br>$$<br><ul><li>$Beta(t|k+1,n-k)$</li><li>n[0,1]$B(n,p)$$p$n$p$C$B(n,p)$</li><li>$P(C \\leq k)=P(X_{k+1}&gt;p)$n$p$$k$</li><li>kBeta<br>$$<br>\\begin{aligned}<br>P(C \\leq k) &amp;=P(X_{k+1} &gt; p) \\\\<br>&amp;=\\int _p ^1 Beta(t|k+1,n-k)dt \\\\<br>&amp;=\\frac{n!}{k!(n-k-1)!}\\int _p ^1 t^k(1-t)^{n-k-1}dt \\\\<br>\\end{aligned}<br>$$<br></li></ul></li><li>nGamma</li><li>kpppppp100p100pppBetaDirichlet</li></ul><h2 id=\"Dirichlet-Multinomial\"><a href=\"#Dirichlet-Multinomial\" class=\"headerlink\" title=\"Dirichlet-Multinomial\"></a>Dirichlet-Multinomial</h2><ul><li>$x_{k_1},x_{k_1+k_2}$</li><li>$\\Delta x$$x_1,x_2,x_3$<br>$$<br>f(x_1,x_2,x_3)=\\frac{\\Gamma(n+1)}{\\Gamma(k_1)\\Gamma(k_2)\\Gamma(n-k_1-k_2+1)}x_1^{k_1-1}x_2^{k_2-1}x_3^{n-k_1-k_2}<br>$$</li><li><br>$$<br>f(x_1,x_2,x_3)=\\frac{\\Gamma(\\alpha _1+\\alpha _2+\\alpha _3)}{\\Gamma(\\alpha _1)\\Gamma(\\alpha _2)\\Gamma(\\alpha _3)}x_1^{\\alpha _1-1}x_2^{\\alpha _2-1}x_3^{\\alpha _3-1}<br>$$<br>3Dirichlet$x_1,x_2,x_3$$f$</li><li>DirichletDirichlet<br>$$<br>Dir(p|\\alpha)+MultCount(m)=Dir(p|\\alpha+m)<br>$$<br></li><li>BetaDirichletBeta$E(p)=\\frac{\\alpha}{\\alpha+\\beta}$Dirichlet</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>AABBAABBA BetaDirichlet</li><li>LDA--DirichletDirichlet-MultinomialGammaGammaBetaGammaBetaBeta-BinomialDirichlet-Multinomial</li><li>DirichletDirichlet[0,1]dirichlet$p_1,p_2,p_3$</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180828/B5IBgB1kbK.PNG\" alt=\"mark\"></p><ul><li>$\\alpha$mean shapesparsity</li><li>Dirichlet$\\alpha _1,\\alpha _2,\\alpha _3$$\\alpha$Dirichlet$p_1,p_2,p_3$p</li><li>$\\alpha$$\\alpha$ppconcentration</li><li>$\\alpha$$\\alpha$Dirichletpp1p</li><li>$\\alpha$$p$concentration$\\alpha$$\\alpha$pp</li><li>$\\alpha$1Dirichelt$alpha$1</li><li>Dirichlet$\\alpha$<blockquote><p>The concentration parameter<br>Dirichlet distributions are very often used as prior distributions in Bayesian inference. The simplest and perhaps most common type of Dirichlet prior is the symmetric Dirichlet distribution, where all parameters are equal. This corresponds to the case where you have no prior information to favor one component over any other. As described above, the single value  to which all parameters are set is called the concentration parameter. If the sample space of the Dirichlet distribution is interpreted as a discrete probability distribution, then intuitively the concentration parameter can be thought of as determining how concentrated the probability mass of a sample from a Dirichlet distribution is likely to be. With a value much less than 1, the mass will be highly concentrated in a few components, and all the rest will have almost no mass. With a value much greater than 1, the mass will be dispersed almost equally among all the components. See the article on the concentration parameter for further discussion.</p><footer><strong>Dirichlet_distribution</strong><cite><a href=\"https://en.wikipedia.org/wiki/Dirichlet_distribution#Intuitive_interpretations_of_the_parameters\" target=\"_blank\" rel=\"noopener\">Intuitive interpretations of the parameters</a></cite></footer></blockquote></li><li>$\\alpha$1Dirichlet0$\\alpha$1</li><li>Dirichlet Process$\\alpha$DirichletBase Measure$\\alpha$</li><li>LDA</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li></li><li>MCMC1MCMC</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li><li>nn</li><li></li><li><ul><li>P$lim_{n \\rightarrow \\infty}P_{ij}^n$$i$$\\pi(j)$</li><li>$\\pi (j)=\\sum _{i=0}^{\\infty} \\pi (i) P_{ij}$</li><li>$\\pi$$\\pi P = \\pi $</li><li>$\\pi$</li></ul></li></ul><h2 id=\"Markov-Chain-Monte-Carlo\"><a href=\"#Markov-Chain-Monte-Carlo\" class=\"headerlink\" title=\"Markov Chain Monte Carlo\"></a>Markov Chain Monte Carlo</h2><ul><li></li><li>$\\pi(i)P_{ij}=\\pi(j)P_{ij} \\quad for \\quad all \\quad i,j$$\\pi(x)$iijji</li><li>ij$q(i,j)$$p(i)q(i,j)=p(j)q(j,i)$$p(x)$$p(x)$$q$$\\alpha$<br>$$<br>p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha (j,i)<br>$$<br>$\\alpha$</li><li>$\\alpha (i,j)=p(j)q(j,i)$</li><li></li><li>MCMCqqp$p(i)q(i,j)\\alpha (i,j)=p(j)q(j,i)\\alpha(j,i)$11MCMCMetropolis-Hastings</li></ul><h2 id=\"Gibbs-Sampling\"><a href=\"#Gibbs-Sampling\" class=\"headerlink\" title=\"Gibbs Sampling\"></a>Gibbs Sampling</h2><ul><li>MCMC1Q1</li><li>$p(x,y)$<br>$$<br>\\begin{aligned}<br>p(x_1,y_1)p(y_2|x_1) &amp; =p(x_1)p(y_1|x_1)p(y_2|x_1) \\\\<br>&amp; =p(x_1)p(y_2|x_1)p(y_1|x_1) \\\\<br>&amp; =p(x_1,y_2)p(y_1|x_1) \\\\<br>\\end{aligned}<br>$$</li><li>$x=x_1$$p(y|x_1)$$x=x_1$yy<ul><li>$x=x_1$$Q=p(y|x_1)$</li><li>$y=y_1$$Q=p(x|y_1)$</li><li>$Q=0$<br>Q$p(x,y)$</li></ul></li><li></li><li>$x$$Q=p(x| x)$</li></ul><h2 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h2><ul><li>MCMC</li><li>LDA$p(z_i=k|\\mathop{w}^{\\rightarrow})$$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$gibbsLDA</li><li>gibbs$p(x_1^{t+1})=p(x_1|x_2^t,x_3^t)$$p(x_2^{t+1})=p(x_2|x_1^{t+1},x_3^t)$$x_1^{t+1}$LDA</li><li>gibbs11gibbs-gibbs</li><li>gibbsLDAgibbsgibbs</li><li></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><ul><li></li><li></li></ul></li></ul><h2 id=\"Unigram\"><a href=\"#Unigram\" class=\"headerlink\" title=\"Unigram\"></a>Unigram</h2><ul><li>unigram(BoW)</li><li>Unigram$\\mathop{p}^{\\rightarrow}$$p(\\mathop{p}^{\\rightarrow})$<br>$$<br>p(W)=\\int p(W|\\mathop{p}^{\\rightarrow})p(\\mathop{p}^{\\rightarrow})d\\mathop{p}^{\\rightarrow}<br>$$</li><li>$p(\\mathop{p}^{\\rightarrow})$$\\mathop{n}^{\\rightarrow}$<br>$$<br>\\begin{aligned}<br>p(\\mathop{n}^{\\rightarrow}) &amp;= Mult(\\mathop{n}^{\\rightarrow}|\\mathop{p}^{\\rightarrow},N) \\\\<br>&amp;= C_N ^{\\mathop{n}^{\\rightarrow}} \\prod_{k=1}^V p_k^{n_k} \\\\<br>\\end{aligned}<br>$$</li><li>Dirichlet-Multinomial$p(\\mathop{p}^{\\rightarrow})$Dirichlet<br>$$<br>Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})=\\frac{1}{\\int \\prod_{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}} \\prod_{k=1}^V p_k^{\\alpha _k -1}<br>$$<br>$V$Dirichlet$\\alpha$$p(\\mathop{p}^{\\rightarrow})$<br>$$<br>\\begin{aligned}<br>p(\\mathop{p}^{\\rightarrow}|W,\\mathop{\\alpha}^{\\rightarrow}) &amp;= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow})+MultCount(\\mathop{n}^{\\rightarrow}) \\\\<br>&amp;= Dir(\\mathop{p}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow}) \\\\<br>\\end{aligned}<br>$$</li><li>$\\mathop{p}^{\\rightarrow}$DirichletDirichlet<br>$$<br>\\mathop{p_i}^{~}=\\frac{n_i+\\alpha _i}{\\sum _{i=1}^{V} (n_i+\\alpha _i)}<br>$$<br>$\\alpha _i$$n_i$</li><li>$\\mathop{p}^{\\rightarrow}$<br>$$<br>p(W|\\mathop{p}^{\\rightarrow})=\\prod _{k=1}^V p_k^{n_k}<br>$$<br><br>$$<br>p(W|\\mathop{\\alpha}^{\\rightarrow})=\\frac{\\Delta(\\mathop{\\alpha}^{\\rightarrow}+\\mathop{n}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})}<br>$$<br>$\\Delta$<br>$$<br>\\Delta(\\mathop{\\alpha}^{\\rightarrow})=\\int \\prod _{k=1}^V p_k^{\\alpha _k -1}d\\mathop{p}^{\\rightarrow}<br>$$</li></ul><h2 id=\"PLSA\"><a href=\"#PLSA\" class=\"headerlink\" title=\"PLSA\"></a>PLSA</h2><ul><li>PLSA</li><li>Unigram</li><li>PLSAEM</li></ul><h2 id=\"-2\"><a href=\"#-2\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Unigram<ul><li></li><li></li></ul></li><li>PLSA<ul><li></li><li></li></ul></li><li>Unigram</li><li>PLSA</li></ul><h1 id=\"LDA\"><a href=\"#LDA\" class=\"headerlink\" title=\"LDA\"></a>LDA</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>LDAUnigramPLSADirichlet<ul><li>A</li><li>B</li><li>C</li><li>D</li></ul></li><li>LDALDAK)<ul><li>BKA</li><li>DC<ul><li>Cz</li><li>KAzA</li></ul></li></ul></li><li><p>$m$$n$$k$$D+C$$m$Dirichlet-Multinomial$B+A$$k$Dirichlet-Multinomialdirichlet1k($\\alpha$)1n($\\beta$)LDA$m+k$Dirichlet-Multinomial</p></li><li><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180725/lb2HJm3i59.PNG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180723/6740GFbJ1a.png?imageslim\" alt=\"mark\"></p></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$m+k$Dirichlet-MultinomialLDAUnigram<br>$$<br>\\begin{aligned}<br>p(\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\\\<br>p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})} \\\\<br>\\end{aligned}<br>$$</li><li>:<br>$$<br>p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}<br>$$</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>$p(z_i=k|\\mathop{w}^{\\rightarrow})$$z_i$iimnw</li><li>mktkmk<ul><li></li><li></li></ul></li><li>LDAParameter estimation for text analysis </li><li></li><li><br>$$<br>p(z_i=k|\\mathop{w}^{\\rightarrow})<br>$$</li><li><br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})<br>$$</li><li><br>$$<br>p(z_i=k,w_i=t|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})<br>$$</li><li><br>$$<br>\\int p(z_i=k,w_i=t,\\mathop{\\vartheta _m}^{\\rightarrow},\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li><br>$$<br>\\int p(z_i=k,\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})p(w_i=t,\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li><br>$$<br>\\int p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\vartheta _m}^{\\rightarrow} \\cdot \\int p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})d\\mathop{\\varphi _k}^{\\rightarrow}<br>$$</li><li>itik<br>$$<br>p(z_i=k|\\mathop{\\vartheta _m}^{\\rightarrow})=\\mathop{\\vartheta _{mk}} \\\\<br>p(w_i=t|\\mathop{\\varphi _k}^{\\rightarrow})=\\mathop{\\varphi _{kt}} \\\\<br>$$</li><li><br>$$<br>p(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\vartheta _m}^{\\rightarrow}|\\mathop{n_{m, i}}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow}) \\\\<br>p(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w_{ i}}^{\\rightarrow})=Dir(\\mathop{\\varphi _k}^{\\rightarrow}|\\mathop{n_{k, i}}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow}) \\\\<br>$$</li><li>$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$DirichletDirichletDirichlet<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})\\frac{n_{m, i}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m, i}^{(t)}+\\alpha _k)} \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li>kk<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li></li><li><br>$$<br>p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow}|\\mathop{\\alpha}^{\\rightarrow},\\mathop{\\beta}^{\\rightarrow}) = \\prod _{m=1}^M \\frac{\\Delta(\\mathop{n_m}^{\\rightarrow}+\\mathop{\\alpha}^{\\rightarrow})}{\\Delta(\\mathop{\\alpha}^{\\rightarrow})} \\prod _{k=1}^K \\frac{\\Delta(\\mathop{n_k}^{\\rightarrow}+\\mathop{\\beta}^{\\rightarrow})}{\\Delta(\\mathop{\\beta}^{\\rightarrow})}<br>$$</li><li><br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})=\\frac{p(\\mathop{w}^{\\rightarrow},\\mathop{z}^{\\rightarrow})}{p(\\mathop{w}^{\\rightarrow},\\mathop{z_{ i}}^{\\rightarrow})} \\\\<br>=\\frac{p(\\mathop{w}^{\\rightarrow}|\\mathop{z}^{\\rightarrow})} {p(\\mathop{w_{ i}}^{\\rightarrow}|\\mathop{z_{ i}}^{\\rightarrow})p(w_i)} \\cdot \\frac{p(\\mathop{z}^{\\rightarrow})} {\\mathop{z_{ i}}^{\\rightarrow}} \\\\<br>$$</li><li>$p(w_i)$$\\Delta$<br>$$<br> \\frac{\\Delta(\\mathop{n_{z}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}}{\\Delta(\\mathop{n_{z, i}}^{\\rightarrow})+\\mathop{\\beta}^{\\rightarrow}} \\cdot \\frac{\\Delta(\\mathop{n_{m}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}{\\Delta(\\mathop{n_{m, i}}^{\\rightarrow})+\\mathop{\\alpha}^{\\rightarrow}}<br>$$</li><li>$\\Delta$<br>$$<br>p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow}) (n_{m, i}^{(k)}+\\alpha _k) \\cdot \\frac{n_{k, i}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k, i}^{(t)}+\\beta _t)}<br>$$</li><li>Parameter estimation for text analysis</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180829/31jGjg0idC.png?imageslim\" alt=\"mark\"></p><ul><li>nn78$p(z_i=k|\\mathop{z_{ i}}^{\\rightarrow},\\mathop{w}^{\\rightarrow})$8182$\\mathop{\\vartheta _{mk}},\\mathop{\\varphi _{kt}}$n$ i$<br>$$<br>\\mathop{\\vartheta _{mk}} = \\frac{n_{m}^{(k)}+\\alpha _k}{\\sum _{k=1}^K (n_{m}^{(t)}+\\alpha _k)} \\\\<br>\\mathop{\\varphi _{kt}} = \\frac{n_{k}^{(t)}+\\beta _t}{\\sum _{t=1}^V (n_{k}^{(t)}+\\beta _t)}<br>$$<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li><li>GibbsLDALDADir<ul><li></li><li>Gibbs</li><li>Dirichlet-MultinomialGibbs</li><li>Gibbs(</li></ul></li><li></li><li>LDAMCMCMCMCMCMCGibbsMCMC</li></ul><h1 id=\"LDA-in-Gensim\"><a href=\"#LDA-in-Gensim\" class=\"headerlink\" title=\"LDA in Gensim\"></a>LDA in Gensim</h1><ul><li>GensimLDA$\\alpha$<blockquote><p>alpha ({numpy.ndarray, str}, optional) <br>Can be set to an 1D array of length equal to the number of expected topics that expresses our a-priori belief for the each topics probability. Alternatively default prior selecting strategies can be employed by supplying a string:<br>asymmetric: Uses a fixed normalized asymmetric prior of 1.0 / topicno.<br>default: Learns an asymmetric prior from the corpus.</p><footer><strong>Gensim</strong><cite><a href=\"https://radimrehurek.com/gensim/models/ldamodel.html\" target=\"_blank\" rel=\"noopener\">models.ldamodel  Latent Dirichlet Allocation</a></cite></footer></blockquote></li><li></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Sep 03 2018 10:31:22 GMT+0800 ()","title":"LDA","path":"2018/07/23/lda/","eyeCatchImage":null,"excerpt":"<hr><p>Latent Dirichlet Allocation <br>LDALDA</p>","date":"2018-07-23T01:56:41.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","lda","mcmc"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-08-28T01:55:10.000Z","mathjax":true,"photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180828/BA94mibfCf.png?imageslim"],"_content":"\nVariational InferenceExpectation MaximizationMarkov Chain Monte Carlo\nb\n[roboticcam/machine-learning-notes](https://github.com/roboticcam/machine-learning-notes)\ntutorial\n\n<!--more-->\n\n# Bayesian Inference\n-\t\n-\t\n-\t$p(x|\\theta)$$\\theta$$p(\\theta)$\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\n# Markov Chain Monte Carlo\n-\tMCMCMCMC\n-\tEMMCMC\n-\t\n-\t\n\n## Sample\n-\t\n-\t\n-\t[0,1]cdfcdf\n$$\nu = U(0,1) \\\\\nx= cdf ^{-1} (u) \\\\\n$$\n\n## rejection sampling\n-\trejection sampling\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/ildAC764ke.JPG)\n-\t[0,1]\n-\t1M\n```\ni=0\nwhile i!= N\n\tx(i)~q(x) and u~U(0,1)\n\tif u< p(x(i))/Mq(x(i)) then\n\t\taccept x(i)\n\t\ti=i+1\n\telse\n\t\treject x(i)\n\tend\nend\n```\n-\trejection sampling\n\n## adaptive rejection sampling\n-\tlog-concave\n-\tkk\n-\tlog-concavek\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/2gcFgBDJLa.JPG)\n\n## Importance Sampling\n-\t\n-\timportance sampling\n-\t\n$$\nE_{p(x)}(f(x)) = \\int _x f(x)p(x)dx \\\\\nE_{p(x)}(f(x)) = \\int _x f(x) \\frac{p(x)}{q(x)} q(x) dx \\\\\nE_{p(x)}(f(x)) = \\int _x g(x)q(x)dx \\\\\n$$\n-\tp(x)q(x)$\\frac{p(x)}{q(x)}$importance weight\n-\t\n\n## MCMC&MH\n-\tmcmcmcmc\n-\tmcmc\n-\t$\\pi$$k(x^{'} | x)$$x$$x^{'}$\n-\tChapman-Kologronvo\n$$\n\\pi _t (x^{'}) = \\int _x \\pi _{t-1}(x) k(x^{'} | x) dx\n$$\n-\t\n$$\n\\pi _t (x) = \\pi _{t-1} (x)\n$$\n-\tthe detailed balance\n$$\n\\pi (x) k(x^{'} | x) = \\pi (x^{'}) k(x | x^{'})\n$$\n-\tdetailed balanceChapman-Kologronvo\n-\t\n-\tLDAmhgibbsMetropolis-Hastingmcmc1\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/6C57aKcD1d.JPG)\n-\t11mcmc\n-\tgibbs1gibbsmhmhgibbs\n\n## Hybrid Metropolis-Hasting\n-\t\n\n## Gibbs Sampling\n-\t\n-\tcoordinate descent\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/CLgH680c1a.JPG)\n-\tcollapsed gibbs samplingcollapse\n```\nu~p(u|x,y,z)\nx,y,z~p(x,y,z|u)\n=p(x|u)p(y|u)p(z|u)\n```\n-\tx,y,z\n-\tgibbsmh1mh\n$$\n\\alpha = min(1,\\frac{\\pi (x^{'}),q(x| x^{'})}{\\pi (x) q(x^{'} | x)})\n$$\n-\tgibbs\n$$\nq(x|x^{'})=\\pi (x_i | x_{i}^{'}) \\\\\nq(x^{'}|x)=\\pi (x_i ^{'} | x_{i}) \\\\\n$$\n-\t$x_{i}$$x_{i}^{'}$ii\n$$\nx_{i}^{'}=x_{i}\n$$\n-\tgibbs\n$$\n\\alpha _{gibbs} =  min(1,\\frac{\\pi (x^{'}) \\pi (x_i | x_{i}^{'})}{\\pi (x) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'}) \\pi (x_i | x_{i})}{\\pi (x) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'} |  x_{i}^{'}) \\pi( x_{i}^{'}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'} |  x_{i}) \\pi( x_{i}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{'} | x_{i})}) \\\\\n= min(1,1) \\\\\n= 1 \\\\\n$$\n\n\n# Expectation Maximization\n## \n-\tdeep|bayes2018EMMEword2vec\n\n## \n-\t\n\n$$\n\\theta=\\mathop{argmax}_{\\theta} L(\\theta | X) \\\\\n=\\mathop{argmax}_{\\theta} \\log \\prod p(x_i | \\theta) \\\\\n=\\mathop{argmax}_{\\theta} \\sum \\log p(x_i | \\theta) \\\\\n$$\n\n-\t\n-\tEMEM$\\theta$$\\theta$\n-\tEM\n\t-\t$\\log p(x,z|\\theta)$$p(z|x,\\theta ^{(t)})$$\\theta ^{(t)}$t\n\t-\t$\\theta$\n-\tEM\n$$\n\\theta ^{(t+1)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t)}) dz\n$$\n## \n-\t\n-\t\n$$\n\\log p(x|\\theta ^{(t+1)}) \\geq \\log p(x|\\theta ^{(t)})\n$$\n-\t\n$$\n\\log p(x|\\theta) = \\log p(x,z|\\theta) - \\log p(z|x,\\theta) \\\\\n$$\n-\t$p(z|x,\\theta ^{(t)})$z\n$$\n\\log p(x|\\theta) = \\int _z \\log p(x,z|\\theta) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\\n=Q(\\theta,\\theta ^{(t)})-H(\\theta,\\theta ^{(t)}) \\\\\n$$\n-\tQEME$\\theta$$\\theta ^{(t)}$\n-\tEMMQQ$\\theta$HH\n-\tH$\\theta$$\\theta ^{(t)}$$H(\\theta ^{(t)},\\theta ^{(t)})$\n$$\nH(\\theta ^{(t)},\\theta ^{(t)})-H(\\theta,\\theta ^{(t)})= \\\\\n\\int _z \\log p(z|x,\\theta ^{(t)}) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\\n= \\int _z \\log (\\frac {p(z|x,\\theta ^{(t)})} {p(z|x,\\theta)} ) p(z|x,\\theta ^{(t)}) dz \\\\\n= - \\int _z \\log (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\\n\\geq - \\log \\int _z  (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\\n= - \\log 1 \\\\\n= 0 \\\\\n$$\n-\tJensen$\\theta ^{(t)}$$\\theta$HH!argmax Q$\\theta ^{(t+1)}$\tH,HEM\n\n## ELBO\n-\tELBOEvidence Lower BoundEM\n-\t$p(x,z|\\theta)$$p(z|x,\\theta)$$q(z)$$q(z)$KLKL\n$$\nKL(q(z)||p(z|x,\\theta)) = \\int q(z) [\\log q(z) - \\log p(z|x,\\theta)] dz \\\\\n= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta) + \\log p(x|\\theta)] dz \\\\\n= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta)] dz + \\log p(x|\\theta) \\\\\n= \\int q(z) [\\log q(z) - \\log p(x,z|\\theta)] dz + \\log p(x|\\theta) \\\\\n= KL(q(z)||p(x,z|\\theta)) + \\log p(x|\\theta) \\\\\n$$\n-\t\n$$\n\\log p(x|\\theta) = - KL(q(z)||p(x,z|\\theta)) + KL(q(z)||p(z|x,\\theta))\n$$\n-\t$- KL(q(z)||p(x,z|\\theta))$ELBO$ KL(q(z)||p(z|x,\\theta)) \\geq 0 $ELBO\n-\tELBO$q$$\\theta$$\\theta ^{(t-1)}$ELBO$q^{(t)}$EME$q^{(t)}$ELBO$\\theta ^{(t)}$EMM\n-\t$\\theta = \\theta ^{(t-1)}$ELBO\n$$\nELBO=\\log p(x|\\theta ^{(t-1)}) - KL(q(z)||p(z|x,\\theta ^{(t-1)}))\n$$\n-\tqELBOKL0ELBO$q(z)=p(z|x,\\theta ^{(t-1)})$$q$ELBO$\\theta$ELBO\n$$\nELBO = - KL(q(z)||p(x,z|\\theta)) \\\\\n= \\int q^{(t)}(z) [ \\log p(x,z|\\theta) - \\log q^{(t)}(z)] dz \\\\\n= - \\int q^{(t)}(z) \\log p(x,z|\\theta) - q^{(t)}(z) \\log q^{(t)}(z) dz \\\\\n$$\n-\t$\\theta$\n$$\n\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int q^{(t)}(z) \\log p(x,z|\\theta) dz \\\\\n$$\n-\t$q(z)=p(z|x,\\theta ^{(t-1)})$\n$$\n\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t-1)}) dz\n$$\n-\tEM\n-\tChristopher M. BishopPattern Recognition and Machine LearningEMEELBO$\\theta$MELBOqpKL0ELBOEMELBOEELBOMELBOMELBOMELBO\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180830/dCj203m7jB.PNG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180830/6k4kbJH3bc.PNG)\n-\tzqz\n\n## \n-\tChuong B Do & Serafim Batzogloututorial:What is the expectation maximization algorithm?\n-\tEM\n-\tEMEMEM\n-\tEExpectation\n-\tEM\n\n## EMK-means\n-\tK-meansHard-EMHard10\n\n## EM\n\n## Wake-Sleep\n\n## EM\n\n# Variational Inference\n## ELBO\n-\tEM\n-\tELBO\n$$\n\\log p(x) = \\log p(x,z) - \\log p(z|x) \\\\\n= \\log \\frac{p(x,z)}{q(z)} - \\log \\frac{p(z|x)}{q(z)} \\\\\n= \\log p(x,z) - \\log q(z) - \\log \\frac{p(z|x)}{q(z)} \\\\\n$$\n-\t$q(z)$\n$$\n\\log p(x) = \\\\\n[ \\int _z q(z) \\log p(x,z)dz - \\int _z q(z) \\log q(z)dz ] + [- \\int _z \\log \\frac{p(z|x)}{q(z)} q(z) dz ]\\\\\n= ELBO+KL(q||p(z|x)) \\\\\n$$\n-\t$z$$p(z|x)$$q(z)$$q(z)$$p(z|x)$KLELBOKL\n-\tELBO\n\n## \n-\tj\n-\t$q(z)$$M$\n$$\nq(z)=\\prod _{i=1}^M q_i(z_i)\n$$\n-\tELBO\n$$\nELBO=\\int \\prod q_i(z_i) \\log p(x,z) dz - \\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\\n=part1-part2 \\\\\n$$\n-\tpart1j\n$$\npart1=\\int \\prod q_i(z_i) \\log p(x,z) dz \\\\\n= \\int _{z_1} \\int _{z_2} ... \\int _{z_M} \\prod _{i=1}^M q_i(z_i) \\log p(x,z) d z_1 , d z_2 , ... ,d z_M \\\\\n= \\int _{z_j} q_j(z_j) ( \\int _{z_{i \\neq j}} \\log (p(x,z)) \\prod _{z_{i \\neq j}} q_i(z_i) d z_i) d z_j \\\\\n= \\int _{z_j}  q_j(z_j) [E_{i \\neq j} [\\log (p(x,z))]] d z_j \\\\\n$$\n-\t\n$$\np_j(z_j) = \\int _{i \\neq j} p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\np_j^{'}(z_j) = exp \\int _{i \\neq j} \\log p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\n\\log p_j^{'}(z_j)  = \\int _{i \\neq j} \\log p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\n$$\n-\tpart1\n$$\npart1= \\int _{z_j} q_j(z_j) \\log p_j^{'}(x,z_j) \\\\\n$$\n-\tpart2j\n$$\npart2=\\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\\n= \\sum ( \\int q_i(z_i) \\log (q_i(z_i)) d z_i ) \\\\\n= \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\\n$$\n-\tpart1part2ELBOj\n$$\nELBO = \\int _{z_j} \\log \\log p_j^{'}(x,z_j) -  \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\\n= \\int _{z_j} q_j(z_j) \\log \\frac{p_j^{'}(x,z_j)}{q_j(z_j)} + const \\\\\n= - KL(p_j^{'}(x,z_j) || q_j(z_j)) + const\\\\\n$$\n-\tELBOKLELBOKL\n-\tKL\n$$\nq_j(z_j) = p_j^{'}(x,z_j) \\\\\n\\log q_j(z_j) = E_{i \\neq j} [\\log (p(x,z))] \\\\\n$$\n-\tj$\\log (p(x,z))$$q_i(z_i)$j\n\n## \n-\t\n$$\np(x | \\theta)=h(x) exp(\\eta (\\theta) \\cdot T(x)-A(\\theta)) \\\\\n$$\n-\t\n\t-\t$T(x)$:sufficient statistics\n\t-\t$\\theta$:parameter of the family\n\t-\t$\\eta$:natural parameter\n\t-\t$h(x)$:underlying measure\n\t-\t$A(\\theta)$:log normalizer / partition function\n-\tparameter of the familynatural parameter$\\eta _i (\\theta) = \\theta _i$\n$$\np(x | \\eta)=h(x) exp(\\eta (T(x) ^T \\eta - A(\\eta))\n$$\n-\t\n$$\n\\eta = \\mathop{argmax} _ {\\eta} [\\log p(X | \\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} [\\log \\prod p(x_i | \\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} [\\log [\\prod h(x_i) exp [(\\sum T(x_i))^T \\eta - n A(\\eta)]]] \\\\\n= \\mathop{argmax} _ {\\eta} (\\sum T(x_i))^T \\eta - n A(\\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} L(\\eta) \\\\\n$$\n-\tlog normalizersufficient statistics\n$$\n\\frac{\\partial L (\\eta)}{\\partial \\eta} = \\sum T(x_i) - n A^{'}(\\eta) =0 \\\\\nA^{'}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\\n$$\n-\t\n$$\np(x) = exp[- \\frac{1}{2 \\sigma ^2}x^2 + \\frac{\\mu}{\\sigma ^2}x - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2)] \\\\\n=exp ( [x \\ x^2] [\\frac{\\mu}{\\sigma ^2} \\ \\frac{-1}{2 \\sigma ^2}] ^T - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2) )\n$$\n-\t\n$$\np(x) = exp( [x \\ x^2] [ \\eta _1 \\ \\eta _2] ^T + \\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 ) - \\frac 12 \\log (2 \\pi))\n$$\n-\t\n\t-\t$T(x)$:$[x \\ x^2]$\n\t-\t$\\eta$:$[ \\eta _1 \\ \\eta _2] ^T$\n\t-\t$-A(\\eta)$:$\\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 )$\n-\t\n$$\nA^{'}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\\n[\\frac{\\partial A}{\\eta _1} \\ \\frac{\\partial A}{\\eta _2}] = [\\frac{- \\eta _1}{2 \\eta _2} \\ \\frac{\\eta _1 ^2 }{2 \\eta _2}-\\frac{1}{2 \\eta _2}] \\\\\n= [\\frac{\\sum x_i}{n} \\ \\frac{\\sum x_i^2}{n}] \\\\\n= [\\mu \\ \\mu ^2 + \\sigma ^2] \\\\\n$$\n-\t$A(\\eta)$log normalizer\n$$\n\\int _x \\frac{h(x)exp(T(x)^T \\eta)}{exp(A(\\eta))} = 1 \\\\\nA(\\eta) = \\log \\int _x h(x)exp(T(x)^T \\eta) \\\\\n$$\n-\t\n$$\np(\\beta | x)  p(x | \\beta) p(\\beta) \\\\\n h(x) exp(T(x) \\beta ^T - A_l (\\beta)) h(\\beta) exp(T(\\beta) \\alpha ^T - A(\\alpha)) \\\\\n$$\n-\t\n$$\nT(\\beta) = [\\beta \\ -g(\\beta)] \\\\\n\\alpha = [\\alpha _1 \\ \\alpha _2] \\\\\n$$\n- $\\beta$$h(x)$$A(\\alpha)$\n$$\n h(\\beta) exp(T(x) \\beta - A_l(\\beta) + \\alpha _1 \\beta - \\alpha _2 g(\\beta)) \\\\\n$$\n-\t$-g(\\beta)=-A_l (\\beta)$\n$$\n h(\\beta) exp((T(x)+\\alpha _1)\\beta - (1+\\alpha _2) A_l (\\beta)) \\\\\n h(\\beta) exp(\\alpha _1 ^{'} \\beta - \\alpha _2 ^{'} A_l (\\beta)) \\\\\n$$\n-\t\n-\t\n$$\np(\\beta | x, \\alpha)  p(x | \\beta) p(\\beta | \\alpha) \\\\\n h(x)exp[T(x)^T\\beta - A_l(\\beta)] h(\\beta) exp[T(\\beta)^T\\alpha - A_l(\\alpha)] \\\\\n$$\n-\tlog normalizerlog normalizersufficient statistics\n$$\n\\frac{\\partial A_l(\\beta)}{\\partial \\beta}=\\int _x T(x) p(x | \\beta)dx \\\\\n= E_{p(x|\\beta)} [T(x)] \\\\\n$$\n-\t1$\\beta$0\n\n## \n-\tELBO\n-\txz$\\lambda$$\\phi$$\\eta(z,x)$$\\eta(\\beta ,x)$ELBO$q(\\lambda , \\phi)$$\\lambda$$\\phi$\n-\tELBO\n-\tELBO$q(z,\\beta)=q(z)q(\\beta)$\n$$\nELBO=E_{q(z,\\beta)}[\\log p(x,z,\\beta)] - E_{q(z,\\beta)}[\\log p(z,\\beta)] \\\\\n= E_{q(z,\\beta)}[\\log p(\\beta | x,z) + \\log p(z | x) + \\log p(x)] - E_{q(z,\\beta)}[\\log q(\\beta)] - E_{q(z,\\beta)}[\\log q(z)] \\\\\n$$\n-\tq$\\lambda$$\\phi$\n$$\np(\\beta | x,z) = h(\\beta) exp [ T(\\beta) ^T \\eta (z,x) - A_g (\\eta(z,x))] \\\\\n\\approx q(\\beta | \\lambda) \\\\\n= h(\\beta) exp [ T(\\beta) ^T \\eta (\\lambda - A_g (\\eta(\\lambda))] \\\\\np(z | x,\\beta) = h(z) exp [ T(z) ^T \\eta (\\beta,x) - A_l (\\eta(\\beta,x))] \\\\\n\\approx q(\\beta | \\phi) \\\\\n= h(z) exp [ T(z) ^T \\eta (\\phi - A_l (\\eta(\\phi))] \\\\\n$$\n-\t$\\phi$$\\lambda$ELBO\n$$\nELBO_{\\lambda} = E_{q(z,\\beta)}[\\log p(\\beta | x,z)] - E_{q(z,\\beta)}[\\log q(\\beta)] \\\\\n$$\n-\t$- E_{q(z)}[A_g(\\eta(x,z))]$\n$$\nELBO_{\\lambda} = E_{q(\\beta)}[T(\\beta)^T] E_{q(z)}[\\eta(z,x)]  -E_{q(\\beta)} [T(\\beta)^T \\lambda] + A_g(\\lambda) \n$$\n-\tlog normalizer:\n$$\nELBO_{\\lambda} = A_g^{'}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - \\lambda A_g^{'}(\\lambda) ^T + A_g (\\lambda)\n$$\n-\t0\n$$\nA_g^{''}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - A_g^{'}(\\lambda)-\\lambda A_g^{''}(\\lambda) ^T + A_g^{} (\\lambda) = 0 \\\\\n\\lambda = E_{q(z)}[\\eta(z,x)] \\\\\n$$\n-\t$\\lambda$\n$$\n\\phi = E_{q(\\beta)}[\\eta(\\beta,x)] \\\\\n$$\n-\t\n$$\n\\lambda = E_{q(z | \\phi)}[\\eta(z,x)] \\\\\n\\phi = E_{q(\\beta | \\lambda)}[\\eta(\\beta,x)] \\\\\n$$\n-\t:\n$$\n\\lambda \\rightarrow q(\\beta | \\lambda) \\rightarrow \\phi \\rightarrow q(z | \\phi) \\rightarrow \\lambda\n$$","source":"_posts/inference-algorithm.md","raw":"---\ntitle: \ndate: 2018-08-28 09:55:10\ncategories: \ntags:\n  - inference\n  - math\n  -\tmcmc\n  - variational inference\n  - em\nmathjax: true\nphotos: http://ojtdnrpmt.bkt.clouddn.com/blog/180828/BA94mibfCf.png?imageslim\n---\n\nVariational InferenceExpectation MaximizationMarkov Chain Monte Carlo\nb\n[roboticcam/machine-learning-notes](https://github.com/roboticcam/machine-learning-notes)\ntutorial\n\n<!--more-->\n\n# Bayesian Inference\n-\t\n-\t\n-\t$p(x|\\theta)$$\\theta$$p(\\theta)$\n-\t\n-\t\n-\t\n-\t\n-\t\n-\t\n\n# Markov Chain Monte Carlo\n-\tMCMCMCMC\n-\tEMMCMC\n-\t\n-\t\n\n## Sample\n-\t\n-\t\n-\t[0,1]cdfcdf\n$$\nu = U(0,1) \\\\\nx= cdf ^{-1} (u) \\\\\n$$\n\n## rejection sampling\n-\trejection sampling\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/ildAC764ke.JPG)\n-\t[0,1]\n-\t1M\n```\ni=0\nwhile i!= N\n\tx(i)~q(x) and u~U(0,1)\n\tif u< p(x(i))/Mq(x(i)) then\n\t\taccept x(i)\n\t\ti=i+1\n\telse\n\t\treject x(i)\n\tend\nend\n```\n-\trejection sampling\n\n## adaptive rejection sampling\n-\tlog-concave\n-\tkk\n-\tlog-concavek\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/2gcFgBDJLa.JPG)\n\n## Importance Sampling\n-\t\n-\timportance sampling\n-\t\n$$\nE_{p(x)}(f(x)) = \\int _x f(x)p(x)dx \\\\\nE_{p(x)}(f(x)) = \\int _x f(x) \\frac{p(x)}{q(x)} q(x) dx \\\\\nE_{p(x)}(f(x)) = \\int _x g(x)q(x)dx \\\\\n$$\n-\tp(x)q(x)$\\frac{p(x)}{q(x)}$importance weight\n-\t\n\n## MCMC&MH\n-\tmcmcmcmc\n-\tmcmc\n-\t$\\pi$$k(x^{'} | x)$$x$$x^{'}$\n-\tChapman-Kologronvo\n$$\n\\pi _t (x^{'}) = \\int _x \\pi _{t-1}(x) k(x^{'} | x) dx\n$$\n-\t\n$$\n\\pi _t (x) = \\pi _{t-1} (x)\n$$\n-\tthe detailed balance\n$$\n\\pi (x) k(x^{'} | x) = \\pi (x^{'}) k(x | x^{'})\n$$\n-\tdetailed balanceChapman-Kologronvo\n-\t\n-\tLDAmhgibbsMetropolis-Hastingmcmc1\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/6C57aKcD1d.JPG)\n-\t11mcmc\n-\tgibbs1gibbsmhmhgibbs\n\n## Hybrid Metropolis-Hasting\n-\t\n\n## Gibbs Sampling\n-\t\n-\tcoordinate descent\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180913/CLgH680c1a.JPG)\n-\tcollapsed gibbs samplingcollapse\n```\nu~p(u|x,y,z)\nx,y,z~p(x,y,z|u)\n=p(x|u)p(y|u)p(z|u)\n```\n-\tx,y,z\n-\tgibbsmh1mh\n$$\n\\alpha = min(1,\\frac{\\pi (x^{'}),q(x| x^{'})}{\\pi (x) q(x^{'} | x)})\n$$\n-\tgibbs\n$$\nq(x|x^{'})=\\pi (x_i | x_{i}^{'}) \\\\\nq(x^{'}|x)=\\pi (x_i ^{'} | x_{i}) \\\\\n$$\n-\t$x_{i}$$x_{i}^{'}$ii\n$$\nx_{i}^{'}=x_{i}\n$$\n-\tgibbs\n$$\n\\alpha _{gibbs} =  min(1,\\frac{\\pi (x^{'}) \\pi (x_i | x_{i}^{'})}{\\pi (x) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'}) \\pi (x_i | x_{i})}{\\pi (x) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'} |  x_{i}^{'}) \\pi( x_{i}^{'}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{'} | x_{i})}) \\\\\n= min(1,\\frac{\\pi (x^{'} |  x_{i}) \\pi( x_{i}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{'} | x_{i})}) \\\\\n= min(1,1) \\\\\n= 1 \\\\\n$$\n\n\n# Expectation Maximization\n## \n-\tdeep|bayes2018EMMEword2vec\n\n## \n-\t\n\n$$\n\\theta=\\mathop{argmax}_{\\theta} L(\\theta | X) \\\\\n=\\mathop{argmax}_{\\theta} \\log \\prod p(x_i | \\theta) \\\\\n=\\mathop{argmax}_{\\theta} \\sum \\log p(x_i | \\theta) \\\\\n$$\n\n-\t\n-\tEMEM$\\theta$$\\theta$\n-\tEM\n\t-\t$\\log p(x,z|\\theta)$$p(z|x,\\theta ^{(t)})$$\\theta ^{(t)}$t\n\t-\t$\\theta$\n-\tEM\n$$\n\\theta ^{(t+1)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t)}) dz\n$$\n## \n-\t\n-\t\n$$\n\\log p(x|\\theta ^{(t+1)}) \\geq \\log p(x|\\theta ^{(t)})\n$$\n-\t\n$$\n\\log p(x|\\theta) = \\log p(x,z|\\theta) - \\log p(z|x,\\theta) \\\\\n$$\n-\t$p(z|x,\\theta ^{(t)})$z\n$$\n\\log p(x|\\theta) = \\int _z \\log p(x,z|\\theta) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\\n=Q(\\theta,\\theta ^{(t)})-H(\\theta,\\theta ^{(t)}) \\\\\n$$\n-\tQEME$\\theta$$\\theta ^{(t)}$\n-\tEMMQQ$\\theta$HH\n-\tH$\\theta$$\\theta ^{(t)}$$H(\\theta ^{(t)},\\theta ^{(t)})$\n$$\nH(\\theta ^{(t)},\\theta ^{(t)})-H(\\theta,\\theta ^{(t)})= \\\\\n\\int _z \\log p(z|x,\\theta ^{(t)}) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\\n= \\int _z \\log (\\frac {p(z|x,\\theta ^{(t)})} {p(z|x,\\theta)} ) p(z|x,\\theta ^{(t)}) dz \\\\\n= - \\int _z \\log (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\\n\\geq - \\log \\int _z  (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\\n= - \\log 1 \\\\\n= 0 \\\\\n$$\n-\tJensen$\\theta ^{(t)}$$\\theta$HH!argmax Q$\\theta ^{(t+1)}$\tH,HEM\n\n## ELBO\n-\tELBOEvidence Lower BoundEM\n-\t$p(x,z|\\theta)$$p(z|x,\\theta)$$q(z)$$q(z)$KLKL\n$$\nKL(q(z)||p(z|x,\\theta)) = \\int q(z) [\\log q(z) - \\log p(z|x,\\theta)] dz \\\\\n= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta) + \\log p(x|\\theta)] dz \\\\\n= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta)] dz + \\log p(x|\\theta) \\\\\n= \\int q(z) [\\log q(z) - \\log p(x,z|\\theta)] dz + \\log p(x|\\theta) \\\\\n= KL(q(z)||p(x,z|\\theta)) + \\log p(x|\\theta) \\\\\n$$\n-\t\n$$\n\\log p(x|\\theta) = - KL(q(z)||p(x,z|\\theta)) + KL(q(z)||p(z|x,\\theta))\n$$\n-\t$- KL(q(z)||p(x,z|\\theta))$ELBO$ KL(q(z)||p(z|x,\\theta)) \\geq 0 $ELBO\n-\tELBO$q$$\\theta$$\\theta ^{(t-1)}$ELBO$q^{(t)}$EME$q^{(t)}$ELBO$\\theta ^{(t)}$EMM\n-\t$\\theta = \\theta ^{(t-1)}$ELBO\n$$\nELBO=\\log p(x|\\theta ^{(t-1)}) - KL(q(z)||p(z|x,\\theta ^{(t-1)}))\n$$\n-\tqELBOKL0ELBO$q(z)=p(z|x,\\theta ^{(t-1)})$$q$ELBO$\\theta$ELBO\n$$\nELBO = - KL(q(z)||p(x,z|\\theta)) \\\\\n= \\int q^{(t)}(z) [ \\log p(x,z|\\theta) - \\log q^{(t)}(z)] dz \\\\\n= - \\int q^{(t)}(z) \\log p(x,z|\\theta) - q^{(t)}(z) \\log q^{(t)}(z) dz \\\\\n$$\n-\t$\\theta$\n$$\n\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int q^{(t)}(z) \\log p(x,z|\\theta) dz \\\\\n$$\n-\t$q(z)=p(z|x,\\theta ^{(t-1)})$\n$$\n\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t-1)}) dz\n$$\n-\tEM\n-\tChristopher M. BishopPattern Recognition and Machine LearningEMEELBO$\\theta$MELBOqpKL0ELBOEMELBOEELBOMELBOMELBOMELBO\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180830/dCj203m7jB.PNG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180830/6k4kbJH3bc.PNG)\n-\tzqz\n\n## \n-\tChuong B Do & Serafim Batzogloututorial:What is the expectation maximization algorithm?\n-\tEM\n-\tEMEMEM\n-\tEExpectation\n-\tEM\n\n## EMK-means\n-\tK-meansHard-EMHard10\n\n## EM\n\n## Wake-Sleep\n\n## EM\n\n# Variational Inference\n## ELBO\n-\tEM\n-\tELBO\n$$\n\\log p(x) = \\log p(x,z) - \\log p(z|x) \\\\\n= \\log \\frac{p(x,z)}{q(z)} - \\log \\frac{p(z|x)}{q(z)} \\\\\n= \\log p(x,z) - \\log q(z) - \\log \\frac{p(z|x)}{q(z)} \\\\\n$$\n-\t$q(z)$\n$$\n\\log p(x) = \\\\\n[ \\int _z q(z) \\log p(x,z)dz - \\int _z q(z) \\log q(z)dz ] + [- \\int _z \\log \\frac{p(z|x)}{q(z)} q(z) dz ]\\\\\n= ELBO+KL(q||p(z|x)) \\\\\n$$\n-\t$z$$p(z|x)$$q(z)$$q(z)$$p(z|x)$KLELBOKL\n-\tELBO\n\n## \n-\tj\n-\t$q(z)$$M$\n$$\nq(z)=\\prod _{i=1}^M q_i(z_i)\n$$\n-\tELBO\n$$\nELBO=\\int \\prod q_i(z_i) \\log p(x,z) dz - \\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\\n=part1-part2 \\\\\n$$\n-\tpart1j\n$$\npart1=\\int \\prod q_i(z_i) \\log p(x,z) dz \\\\\n= \\int _{z_1} \\int _{z_2} ... \\int _{z_M} \\prod _{i=1}^M q_i(z_i) \\log p(x,z) d z_1 , d z_2 , ... ,d z_M \\\\\n= \\int _{z_j} q_j(z_j) ( \\int _{z_{i \\neq j}} \\log (p(x,z)) \\prod _{z_{i \\neq j}} q_i(z_i) d z_i) d z_j \\\\\n= \\int _{z_j}  q_j(z_j) [E_{i \\neq j} [\\log (p(x,z))]] d z_j \\\\\n$$\n-\t\n$$\np_j(z_j) = \\int _{i \\neq j} p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\np_j^{'}(z_j) = exp \\int _{i \\neq j} \\log p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\n\\log p_j^{'}(z_j)  = \\int _{i \\neq j} \\log p(z_1,...,z_i) d z_1 , d z_2 ,..., d z_i \\\\\n$$\n-\tpart1\n$$\npart1= \\int _{z_j} q_j(z_j) \\log p_j^{'}(x,z_j) \\\\\n$$\n-\tpart2j\n$$\npart2=\\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\\n= \\sum ( \\int q_i(z_i) \\log (q_i(z_i)) d z_i ) \\\\\n= \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\\n$$\n-\tpart1part2ELBOj\n$$\nELBO = \\int _{z_j} \\log \\log p_j^{'}(x,z_j) -  \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\\n= \\int _{z_j} q_j(z_j) \\log \\frac{p_j^{'}(x,z_j)}{q_j(z_j)} + const \\\\\n= - KL(p_j^{'}(x,z_j) || q_j(z_j)) + const\\\\\n$$\n-\tELBOKLELBOKL\n-\tKL\n$$\nq_j(z_j) = p_j^{'}(x,z_j) \\\\\n\\log q_j(z_j) = E_{i \\neq j} [\\log (p(x,z))] \\\\\n$$\n-\tj$\\log (p(x,z))$$q_i(z_i)$j\n\n## \n-\t\n$$\np(x | \\theta)=h(x) exp(\\eta (\\theta) \\cdot T(x)-A(\\theta)) \\\\\n$$\n-\t\n\t-\t$T(x)$:sufficient statistics\n\t-\t$\\theta$:parameter of the family\n\t-\t$\\eta$:natural parameter\n\t-\t$h(x)$:underlying measure\n\t-\t$A(\\theta)$:log normalizer / partition function\n-\tparameter of the familynatural parameter$\\eta _i (\\theta) = \\theta _i$\n$$\np(x | \\eta)=h(x) exp(\\eta (T(x) ^T \\eta - A(\\eta))\n$$\n-\t\n$$\n\\eta = \\mathop{argmax} _ {\\eta} [\\log p(X | \\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} [\\log \\prod p(x_i | \\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} [\\log [\\prod h(x_i) exp [(\\sum T(x_i))^T \\eta - n A(\\eta)]]] \\\\\n= \\mathop{argmax} _ {\\eta} (\\sum T(x_i))^T \\eta - n A(\\eta)] \\\\\n= \\mathop{argmax} _ {\\eta} L(\\eta) \\\\\n$$\n-\tlog normalizersufficient statistics\n$$\n\\frac{\\partial L (\\eta)}{\\partial \\eta} = \\sum T(x_i) - n A^{'}(\\eta) =0 \\\\\nA^{'}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\\n$$\n-\t\n$$\np(x) = exp[- \\frac{1}{2 \\sigma ^2}x^2 + \\frac{\\mu}{\\sigma ^2}x - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2)] \\\\\n=exp ( [x \\ x^2] [\\frac{\\mu}{\\sigma ^2} \\ \\frac{-1}{2 \\sigma ^2}] ^T - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2) )\n$$\n-\t\n$$\np(x) = exp( [x \\ x^2] [ \\eta _1 \\ \\eta _2] ^T + \\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 ) - \\frac 12 \\log (2 \\pi))\n$$\n-\t\n\t-\t$T(x)$:$[x \\ x^2]$\n\t-\t$\\eta$:$[ \\eta _1 \\ \\eta _2] ^T$\n\t-\t$-A(\\eta)$:$\\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 )$\n-\t\n$$\nA^{'}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\\n[\\frac{\\partial A}{\\eta _1} \\ \\frac{\\partial A}{\\eta _2}] = [\\frac{- \\eta _1}{2 \\eta _2} \\ \\frac{\\eta _1 ^2 }{2 \\eta _2}-\\frac{1}{2 \\eta _2}] \\\\\n= [\\frac{\\sum x_i}{n} \\ \\frac{\\sum x_i^2}{n}] \\\\\n= [\\mu \\ \\mu ^2 + \\sigma ^2] \\\\\n$$\n-\t$A(\\eta)$log normalizer\n$$\n\\int _x \\frac{h(x)exp(T(x)^T \\eta)}{exp(A(\\eta))} = 1 \\\\\nA(\\eta) = \\log \\int _x h(x)exp(T(x)^T \\eta) \\\\\n$$\n-\t\n$$\np(\\beta | x)  p(x | \\beta) p(\\beta) \\\\\n h(x) exp(T(x) \\beta ^T - A_l (\\beta)) h(\\beta) exp(T(\\beta) \\alpha ^T - A(\\alpha)) \\\\\n$$\n-\t\n$$\nT(\\beta) = [\\beta \\ -g(\\beta)] \\\\\n\\alpha = [\\alpha _1 \\ \\alpha _2] \\\\\n$$\n- $\\beta$$h(x)$$A(\\alpha)$\n$$\n h(\\beta) exp(T(x) \\beta - A_l(\\beta) + \\alpha _1 \\beta - \\alpha _2 g(\\beta)) \\\\\n$$\n-\t$-g(\\beta)=-A_l (\\beta)$\n$$\n h(\\beta) exp((T(x)+\\alpha _1)\\beta - (1+\\alpha _2) A_l (\\beta)) \\\\\n h(\\beta) exp(\\alpha _1 ^{'} \\beta - \\alpha _2 ^{'} A_l (\\beta)) \\\\\n$$\n-\t\n-\t\n$$\np(\\beta | x, \\alpha)  p(x | \\beta) p(\\beta | \\alpha) \\\\\n h(x)exp[T(x)^T\\beta - A_l(\\beta)] h(\\beta) exp[T(\\beta)^T\\alpha - A_l(\\alpha)] \\\\\n$$\n-\tlog normalizerlog normalizersufficient statistics\n$$\n\\frac{\\partial A_l(\\beta)}{\\partial \\beta}=\\int _x T(x) p(x | \\beta)dx \\\\\n= E_{p(x|\\beta)} [T(x)] \\\\\n$$\n-\t1$\\beta$0\n\n## \n-\tELBO\n-\txz$\\lambda$$\\phi$$\\eta(z,x)$$\\eta(\\beta ,x)$ELBO$q(\\lambda , \\phi)$$\\lambda$$\\phi$\n-\tELBO\n-\tELBO$q(z,\\beta)=q(z)q(\\beta)$\n$$\nELBO=E_{q(z,\\beta)}[\\log p(x,z,\\beta)] - E_{q(z,\\beta)}[\\log p(z,\\beta)] \\\\\n= E_{q(z,\\beta)}[\\log p(\\beta | x,z) + \\log p(z | x) + \\log p(x)] - E_{q(z,\\beta)}[\\log q(\\beta)] - E_{q(z,\\beta)}[\\log q(z)] \\\\\n$$\n-\tq$\\lambda$$\\phi$\n$$\np(\\beta | x,z) = h(\\beta) exp [ T(\\beta) ^T \\eta (z,x) - A_g (\\eta(z,x))] \\\\\n\\approx q(\\beta | \\lambda) \\\\\n= h(\\beta) exp [ T(\\beta) ^T \\eta (\\lambda - A_g (\\eta(\\lambda))] \\\\\np(z | x,\\beta) = h(z) exp [ T(z) ^T \\eta (\\beta,x) - A_l (\\eta(\\beta,x))] \\\\\n\\approx q(\\beta | \\phi) \\\\\n= h(z) exp [ T(z) ^T \\eta (\\phi - A_l (\\eta(\\phi))] \\\\\n$$\n-\t$\\phi$$\\lambda$ELBO\n$$\nELBO_{\\lambda} = E_{q(z,\\beta)}[\\log p(\\beta | x,z)] - E_{q(z,\\beta)}[\\log q(\\beta)] \\\\\n$$\n-\t$- E_{q(z)}[A_g(\\eta(x,z))]$\n$$\nELBO_{\\lambda} = E_{q(\\beta)}[T(\\beta)^T] E_{q(z)}[\\eta(z,x)]  -E_{q(\\beta)} [T(\\beta)^T \\lambda] + A_g(\\lambda) \n$$\n-\tlog normalizer:\n$$\nELBO_{\\lambda} = A_g^{'}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - \\lambda A_g^{'}(\\lambda) ^T + A_g (\\lambda)\n$$\n-\t0\n$$\nA_g^{''}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - A_g^{'}(\\lambda)-\\lambda A_g^{''}(\\lambda) ^T + A_g^{} (\\lambda) = 0 \\\\\n\\lambda = E_{q(z)}[\\eta(z,x)] \\\\\n$$\n-\t$\\lambda$\n$$\n\\phi = E_{q(\\beta)}[\\eta(\\beta,x)] \\\\\n$$\n-\t\n$$\n\\lambda = E_{q(z | \\phi)}[\\eta(z,x)] \\\\\n\\phi = E_{q(\\beta | \\lambda)}[\\eta(\\beta,x)] \\\\\n$$\n-\t:\n$$\n\\lambda \\rightarrow q(\\beta | \\lambda) \\rightarrow \\phi \\rightarrow q(z | \\phi) \\rightarrow \\lambda\n$$","slug":"inference-algorithm","published":1,"updated":"2018-09-21T07:45:23.962Z","comments":1,"layout":"post","link":"","_id":"cjmd072da0024qcw6k88en422","content":"<p>Variational InferenceExpectation MaximizationMarkov Chain Monte Carlo<br>b<br><a href=\"https://github.com/roboticcam/machine-learning-notes\" target=\"_blank\" rel=\"noopener\">roboticcam/machine-learning-notes</a><br>tutorial</p><a id=\"more\"></a><h1 id=\"Bayesian-Inference\"><a href=\"#Bayesian-Inference\" class=\"headerlink\" title=\"Bayesian Inference\"></a>Bayesian Inference</h1><ul><li></li><li></li><li>$p(x|\\theta)$$\\theta$$p(\\theta)$</li><li></li><li></li><li></li><li></li><li></li><li></li></ul><h1 id=\"Markov-Chain-Monte-Carlo\"><a href=\"#Markov-Chain-Monte-Carlo\" class=\"headerlink\" title=\"Markov Chain Monte Carlo\"></a>Markov Chain Monte Carlo</h1><ul><li>MCMCMCMC</li><li>EMMCMC</li><li></li><li></li></ul><h2 id=\"Sample\"><a href=\"#Sample\" class=\"headerlink\" title=\"Sample\"></a>Sample</h2><ul><li></li><li></li><li>[0,1]cdfcdf<br>$$<br>u = U(0,1) \\\\<br>x= cdf ^{-1} (u) \\\\<br>$$</li></ul><h2 id=\"rejection-sampling\"><a href=\"#rejection-sampling\" class=\"headerlink\" title=\"rejection sampling\"></a>rejection sampling</h2><ul><li>rejection sampling</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/ildAC764ke.JPG\" alt=\"mark\"></li><li>[0,1]</li><li><p>1M</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i=0</span><br><span class=\"line\">while i!= N</span><br><span class=\"line\">\tx(i)~q(x) and u~U(0,1)</span><br><span class=\"line\">\tif u&lt; p(x(i))/Mq(x(i)) then</span><br><span class=\"line\">\t\taccept x(i)</span><br><span class=\"line\">\t\ti=i+1</span><br><span class=\"line\">\telse</span><br><span class=\"line\">\t\treject x(i)</span><br><span class=\"line\">\tend</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure></li><li><p>rejection sampling</p></li></ul><h2 id=\"adaptive-rejection-sampling\"><a href=\"#adaptive-rejection-sampling\" class=\"headerlink\" title=\"adaptive rejection sampling\"></a>adaptive rejection sampling</h2><ul><li>log-concave</li><li>kk</li><li>log-concavek<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/2gcFgBDJLa.JPG\" alt=\"mark\"></li></ul><h2 id=\"Importance-Sampling\"><a href=\"#Importance-Sampling\" class=\"headerlink\" title=\"Importance Sampling\"></a>Importance Sampling</h2><ul><li></li><li>importance sampling</li><li><br>$$<br>E_{p(x)}(f(x)) = \\int _x f(x)p(x)dx \\\\<br>E_{p(x)}(f(x)) = \\int _x f(x) \\frac{p(x)}{q(x)} q(x) dx \\\\<br>E_{p(x)}(f(x)) = \\int _x g(x)q(x)dx \\\\<br>$$</li><li>p(x)q(x)$\\frac{p(x)}{q(x)}$importance weight</li><li></li></ul><h2 id=\"MCMC-amp-MH\"><a href=\"#MCMC-amp-MH\" class=\"headerlink\" title=\"MCMC&amp;MH\"></a>MCMC&amp;MH</h2><ul><li>mcmcmcmc</li><li>mcmc</li><li>$\\pi$$k(x^{} | x)$$x$$x^{}$</li><li>Chapman-Kologronvo<br>$$<br>\\pi _t (x^{}) = \\int _x \\pi _{t-1}(x) k(x^{} | x) dx<br>$$</li><li><br>$$<br>\\pi _t (x) = \\pi _{t-1} (x)<br>$$</li><li>the detailed balance<br>$$<br>\\pi (x) k(x^{} | x) = \\pi (x^{}) k(x | x^{})<br>$$</li><li>detailed balanceChapman-Kologronvo</li><li></li><li>LDAmhgibbsMetropolis-Hastingmcmc1<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/6C57aKcD1d.JPG\" alt=\"mark\"></li><li>11mcmc</li><li>gibbs1gibbsmhmhgibbs</li></ul><h2 id=\"Hybrid-Metropolis-Hasting\"><a href=\"#Hybrid-Metropolis-Hasting\" class=\"headerlink\" title=\"Hybrid Metropolis-Hasting\"></a>Hybrid Metropolis-Hasting</h2><ul><li></li></ul><h2 id=\"Gibbs-Sampling\"><a href=\"#Gibbs-Sampling\" class=\"headerlink\" title=\"Gibbs Sampling\"></a>Gibbs Sampling</h2><ul><li></li><li>coordinate descent<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/CLgH680c1a.JPG\" alt=\"mark\"></li><li><p>collapsed gibbs samplingcollapse</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">u~p(u|x,y,z)</span><br><span class=\"line\">x,y,z~p(x,y,z|u)</span><br><span class=\"line\">=p(x|u)p(y|u)p(z|u)</span><br></pre></td></tr></table></figure></li><li><p>x,y,z</p></li><li>gibbsmh1mh<br>$$<br>\\alpha = min(1,\\frac{\\pi (x^{}),q(x| x^{})}{\\pi (x) q(x^{} | x)})<br>$$</li><li>gibbs<br>$$<br>q(x|x^{})=\\pi (x_i | x_{i}^{}) \\\\<br>q(x^{}|x)=\\pi (x_i ^{} | x_{i}) \\\\<br>$$</li><li>$x_{i}$$x_{i}^{}$ii<br>$$<br>x_{i}^{}=x_{i}<br>$$</li><li>gibbs<br>$$<br>\\alpha _{gibbs} = min(1,\\frac{\\pi (x^{}) \\pi (x_i | x_{i}^{})}{\\pi (x) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{}) \\pi (x_i | x_{i})}{\\pi (x) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{} | x_{i}^{}) \\pi( x_{i}^{}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{} | x_{i}) \\pi( x_{i}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{} | x_{i})}) \\\\<br>= min(1,1) \\\\<br>= 1 \\\\<br>$$</li></ul><h1 id=\"Expectation-Maximization\"><a href=\"#Expectation-Maximization\" class=\"headerlink\" title=\"Expectation Maximization\"></a>Expectation Maximization</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>deep|bayes2018EMMEword2vec</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><p>$$<br>\\theta=\\mathop{argmax}_{\\theta} L(\\theta | X) \\\\<br>=\\mathop{argmax}_{\\theta} \\log \\prod p(x_i | \\theta) \\\\<br>=\\mathop{argmax}_{\\theta} \\sum \\log p(x_i | \\theta) \\\\<br>$$</p><ul><li></li><li>EMEM$\\theta$$\\theta$</li><li>EM<ul><li>$\\log p(x,z|\\theta)$$p(z|x,\\theta ^{(t)})$$\\theta ^{(t)}$t</li><li>$\\theta$</li></ul></li><li>EM<br>$$<br>\\theta ^{(t+1)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t)}) dz<br>$$<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li><li></li><li><br>$$<br>\\log p(x|\\theta ^{(t+1)}) \\geq \\log p(x|\\theta ^{(t)})<br>$$</li><li><br>$$<br>\\log p(x|\\theta) = \\log p(x,z|\\theta) - \\log p(z|x,\\theta) \\\\<br>$$</li><li>$p(z|x,\\theta ^{(t)})$z<br>$$<br>\\log p(x|\\theta) = \\int _z \\log p(x,z|\\theta) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\<br>=Q(\\theta,\\theta ^{(t)})-H(\\theta,\\theta ^{(t)}) \\\\<br>$$</li><li>QEME$\\theta$$\\theta ^{(t)}$</li><li>EMMQQ$\\theta$HH</li><li>H$\\theta$$\\theta ^{(t)}$$H(\\theta ^{(t)},\\theta ^{(t)})$<br>$$<br>H(\\theta ^{(t)},\\theta ^{(t)})-H(\\theta,\\theta ^{(t)})= \\\\<br>\\int _z \\log p(z|x,\\theta ^{(t)}) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\<br>= \\int _z \\log (\\frac {p(z|x,\\theta ^{(t)})} {p(z|x,\\theta)} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>= - \\int _z \\log (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>\\geq - \\log \\int _z (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>= - \\log 1 \\\\<br>= 0 \\\\<br>$$</li><li>Jensen$\\theta ^{(t)}$$\\theta$HH!argmax Q$\\theta ^{(t+1)}$ H,HEM</li></ul><h2 id=\"ELBO\"><a href=\"#ELBO\" class=\"headerlink\" title=\"ELBO\"></a>ELBO</h2><ul><li>ELBOEvidence Lower BoundEM</li><li>$p(x,z|\\theta)$$p(z|x,\\theta)$$q(z)$$q(z)$KLKL<br>$$<br>KL(q(z)||p(z|x,\\theta)) = \\int q(z) [\\log q(z) - \\log p(z|x,\\theta)] dz \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta) + \\log p(x|\\theta)] dz \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta)] dz + \\log p(x|\\theta) \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x,z|\\theta)] dz + \\log p(x|\\theta) \\\\<br>= KL(q(z)||p(x,z|\\theta)) + \\log p(x|\\theta) \\\\<br>$$</li><li><br>$$<br>\\log p(x|\\theta) = - KL(q(z)||p(x,z|\\theta)) + KL(q(z)||p(z|x,\\theta))<br>$$</li><li>$- KL(q(z)||p(x,z|\\theta))$ELBO$ KL(q(z)||p(z|x,\\theta)) \\geq 0 $ELBO</li><li>ELBO$q$$\\theta$$\\theta ^{(t-1)}$ELBO$q^{(t)}$EME$q^{(t)}$ELBO$\\theta ^{(t)}$EMM</li><li>$\\theta = \\theta ^{(t-1)}$ELBO<br>$$<br>ELBO=\\log p(x|\\theta ^{(t-1)}) - KL(q(z)||p(z|x,\\theta ^{(t-1)}))<br>$$</li><li>qELBOKL0ELBO$q(z)=p(z|x,\\theta ^{(t-1)})$$q$ELBO$\\theta$ELBO<br>$$<br>ELBO = - KL(q(z)||p(x,z|\\theta)) \\\\<br>= \\int q^{(t)}(z) [ \\log p(x,z|\\theta) - \\log q^{(t)}(z)] dz \\\\<br>= - \\int q^{(t)}(z) \\log p(x,z|\\theta) - q^{(t)}(z) \\log q^{(t)}(z) dz \\\\<br>$$</li><li>$\\theta$<br>$$<br>\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int q^{(t)}(z) \\log p(x,z|\\theta) dz \\\\<br>$$</li><li>$q(z)=p(z|x,\\theta ^{(t-1)})$<br>$$<br>\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t-1)}) dz<br>$$</li><li>EM</li><li>Christopher M. BishopPattern Recognition and Machine LearningEMEELBO$\\theta$MELBOqpKL0ELBOEMELBOEELBOMELBOMELBOMELBO<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180830/dCj203m7jB.PNG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180830/6k4kbJH3bc.PNG\" alt=\"mark\"></li><li>zqz</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Chuong B Do &amp; Serafim Batzogloututorial:What is the expectation maximization algorithm?</li><li>EM</li><li>EMEMEM</li><li>EExpectation</li><li>EM</li></ul><h2 id=\"EMK-means\"><a href=\"#EMK-means\" class=\"headerlink\" title=\"EMK-means\"></a>EMK-means</h2><ul><li>K-meansHard-EMHard10</li></ul><h2 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h2><h2 id=\"Wake-Sleep\"><a href=\"#Wake-Sleep\" class=\"headerlink\" title=\"Wake-Sleep\"></a>Wake-Sleep</h2><h2 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h2><h1 id=\"Variational-Inference\"><a href=\"#Variational-Inference\" class=\"headerlink\" title=\"Variational Inference\"></a>Variational Inference</h1><h2 id=\"ELBO\"><a href=\"#ELBO\" class=\"headerlink\" title=\"ELBO\"></a>ELBO</h2><ul><li>EM</li><li>ELBO<br>$$<br>\\log p(x) = \\log p(x,z) - \\log p(z|x) \\\\<br>= \\log \\frac{p(x,z)}{q(z)} - \\log \\frac{p(z|x)}{q(z)} \\\\<br>= \\log p(x,z) - \\log q(z) - \\log \\frac{p(z|x)}{q(z)} \\\\<br>$$</li><li>$q(z)$<br>$$<br>\\log p(x) = \\\\<br>[ \\int _z q(z) \\log p(x,z)dz - \\int _z q(z) \\log q(z)dz ] + [- \\int _z \\log \\frac{p(z|x)}{q(z)} q(z) dz ]\\\\<br>= ELBO+KL(q||p(z|x)) \\\\<br>$$</li><li>$z$$p(z|x)$$q(z)$$q(z)$$p(z|x)$KLELBOKL</li><li>ELBO</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>j</li><li>$q(z)$$M$<br>$$<br>q(z)=\\prod _{i=1}^M q_i(z_i)<br>$$</li><li>ELBO<br>$$<br>ELBO=\\int \\prod q_i(z_i) \\log p(x,z) dz - \\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\<br>=part1-part2 \\\\<br>$$</li><li>part1j<br>$$<br>part1=\\int \\prod q_i(z_i) \\log p(x,z) dz \\\\<br>= \\int _{z_1} \\int _{z_2}  \\int _{z_M} \\prod _{i=1}^M q_i(z_i) \\log p(x,z) d z_1 , d z_2 ,  ,d z_M \\\\<br>= \\int _{z_j} q_j(z_j) ( \\int _{z_{i \\neq j}} \\log (p(x,z)) \\prod _{z_{i \\neq j}} q_i(z_i) d z_i) d z_j \\\\<br>= \\int _{z_j} q_j(z_j) [E_{i \\neq j} [\\log (p(x,z))]] d z_j \\\\<br>$$</li><li><br>$$<br>p_j(z_j) = \\int _{i \\neq j} p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>p_j^{}(z_j) = exp \\int _{i \\neq j} \\log p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>\\log p_j^{}(z_j) = \\int _{i \\neq j} \\log p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>$$</li><li>part1<br>$$<br>part1= \\int _{z_j} q_j(z_j) \\log p_j^{}(x,z_j) \\\\<br>$$</li><li>part2j<br>$$<br>part2=\\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\<br>= \\sum ( \\int q_i(z_i) \\log (q_i(z_i)) d z_i ) \\\\<br>= \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\<br>$$</li><li>part1part2ELBOj<br>$$<br>ELBO = \\int _{z_j} \\log \\log p_j^{}(x,z_j) - \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\<br>= \\int _{z_j} q_j(z_j) \\log \\frac{p_j^{}(x,z_j)}{q_j(z_j)} + const \\\\<br>= - KL(p_j^{}(x,z_j) || q_j(z_j)) + const\\\\<br>$$</li><li>ELBOKLELBOKL</li><li>KL<br>$$<br>q_j(z_j) = p_j^{}(x,z_j) \\\\<br>\\log q_j(z_j) = E_{i \\neq j} [\\log (p(x,z))] \\\\<br>$$</li><li>j$\\log (p(x,z))$$q_i(z_i)$j</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>p(x | \\theta)=h(x) exp(\\eta (\\theta) \\cdot T(x)-A(\\theta)) \\\\<br>$$</li><li><ul><li>$T(x)$:sufficient statistics</li><li>$\\theta$:parameter of the family</li><li>$\\eta$:natural parameter</li><li>$h(x)$:underlying measure</li><li>$A(\\theta)$:log normalizer / partition function</li></ul></li><li>parameter of the familynatural parameter$\\eta _i (\\theta) = \\theta _i$<br>$$<br>p(x | \\eta)=h(x) exp(\\eta (T(x) ^T \\eta - A(\\eta))<br>$$</li><li><br>$$<br>\\eta = \\mathop{argmax} _ {\\eta} [\\log p(X | \\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} [\\log \\prod p(x_i | \\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} [\\log [\\prod h(x_i) exp [(\\sum T(x_i))^T \\eta - n A(\\eta)]]] \\\\<br>= \\mathop{argmax} _ {\\eta} (\\sum T(x_i))^T \\eta - n A(\\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} L(\\eta) \\\\<br>$$</li><li>log normalizersufficient statistics<br>$$<br>\\frac{\\partial L (\\eta)}{\\partial \\eta} = \\sum T(x_i) - n A^{}(\\eta) =0 \\\\<br>A^{}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\<br>$$</li><li><br>$$<br>p(x) = exp[- \\frac{1}{2 \\sigma ^2}x^2 + \\frac{\\mu}{\\sigma ^2}x - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2)] \\\\<br>=exp ( [x \\ x^2] [\\frac{\\mu}{\\sigma ^2} \\ \\frac{-1}{2 \\sigma ^2}] ^T - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2) )<br>$$</li><li><br>$$<br>p(x) = exp( [x \\ x^2] [ \\eta _1 \\ \\eta _2] ^T + \\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 ) - \\frac 12 \\log (2 \\pi))<br>$$</li><li><ul><li>$T(x)$:$[x \\ x^2]$</li><li>$\\eta$:$[ \\eta _1 \\ \\eta _2] ^T$</li><li>$-A(\\eta)$:$\\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 )$</li></ul></li><li><br>$$<br>A^{}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\<br>[\\frac{\\partial A}{\\eta _1} \\ \\frac{\\partial A}{\\eta _2}] = [\\frac{- \\eta _1}{2 \\eta _2} \\ \\frac{\\eta _1 ^2 }{2 \\eta _2}-\\frac{1}{2 \\eta _2}] \\\\<br>= [\\frac{\\sum x_i}{n} \\ \\frac{\\sum x_i^2}{n}] \\\\<br>= [\\mu \\ \\mu ^2 + \\sigma ^2] \\\\<br>$$</li><li>$A(\\eta)$log normalizer<br>$$<br>\\int _x \\frac{h(x)exp(T(x)^T \\eta)}{exp(A(\\eta))} = 1 \\\\<br>A(\\eta) = \\log \\int _x h(x)exp(T(x)^T \\eta) \\\\<br>$$</li><li><br>$$<br>p(\\beta | x)  p(x | \\beta) p(\\beta) \\\\<br> h(x) exp(T(x) \\beta ^T - A_l (\\beta)) h(\\beta) exp(T(\\beta) \\alpha ^T - A(\\alpha)) \\\\<br>$$</li><li><br>$$<br>T(\\beta) = [\\beta \\ -g(\\beta)] \\\\<br>\\alpha = [\\alpha _1 \\ \\alpha _2] \\\\<br>$$</li><li>$\\beta$$h(x)$$A(\\alpha)$<br>$$<br> h(\\beta) exp(T(x) \\beta - A_l(\\beta) + \\alpha _1 \\beta - \\alpha _2 g(\\beta)) \\\\<br>$$</li><li>$-g(\\beta)=-A_l (\\beta)$<br>$$<br> h(\\beta) exp((T(x)+\\alpha _1)\\beta - (1+\\alpha _2) A_l (\\beta)) \\\\<br> h(\\beta) exp(\\alpha _1 ^{} \\beta - \\alpha _2 ^{} A_l (\\beta)) \\\\<br>$$</li><li></li><li><br>$$<br>p(\\beta | x, \\alpha)  p(x | \\beta) p(\\beta | \\alpha) \\\\<br> h(x)exp[T(x)^T\\beta - A_l(\\beta)] h(\\beta) exp[T(\\beta)^T\\alpha - A_l(\\alpha)] \\\\<br>$$</li><li>log normalizerlog normalizersufficient statistics<br>$$<br>\\frac{\\partial A_l(\\beta)}{\\partial \\beta}=\\int _x T(x) p(x | \\beta)dx \\\\<br>= E_{p(x|\\beta)} [T(x)] \\\\<br>$$</li><li>1$\\beta$0</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>ELBO</li><li>xz$\\lambda$$\\phi$$\\eta(z,x)$$\\eta(\\beta ,x)$ELBO$q(\\lambda , \\phi)$$\\lambda$$\\phi$</li><li>ELBO</li><li>ELBO$q(z,\\beta)=q(z)q(\\beta)$<br>$$<br>ELBO=E_{q(z,\\beta)}[\\log p(x,z,\\beta)] - E_{q(z,\\beta)}[\\log p(z,\\beta)] \\\\<br>= E_{q(z,\\beta)}[\\log p(\\beta | x,z) + \\log p(z | x) + \\log p(x)] - E_{q(z,\\beta)}[\\log q(\\beta)] - E_{q(z,\\beta)}[\\log q(z)] \\\\<br>$$</li><li>q$\\lambda$$\\phi$<br>$$<br>p(\\beta | x,z) = h(\\beta) exp [ T(\\beta) ^T \\eta (z,x) - A_g (\\eta(z,x))] \\\\<br>\\approx q(\\beta | \\lambda) \\\\<br>= h(\\beta) exp [ T(\\beta) ^T \\eta (\\lambda - A_g (\\eta(\\lambda))] \\\\<br>p(z | x,\\beta) = h(z) exp [ T(z) ^T \\eta (\\beta,x) - A_l (\\eta(\\beta,x))] \\\\<br>\\approx q(\\beta | \\phi) \\\\<br>= h(z) exp [ T(z) ^T \\eta (\\phi - A_l (\\eta(\\phi))] \\\\<br>$$</li><li>$\\phi$$\\lambda$ELBO<br>$$<br>ELBO_{\\lambda} = E_{q(z,\\beta)}[\\log p(\\beta | x,z)] - E_{q(z,\\beta)}[\\log q(\\beta)] \\\\<br>$$</li><li>$- E_{q(z)}[A_g(\\eta(x,z))]$<br>$$<br>ELBO_{\\lambda} = E_{q(\\beta)}[T(\\beta)^T] E_{q(z)}[\\eta(z,x)] -E_{q(\\beta)} [T(\\beta)^T \\lambda] + A_g(\\lambda)<br>$$</li><li>log normalizer:<br>$$<br>ELBO_{\\lambda} = A_g^{}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - \\lambda A_g^{}(\\lambda) ^T + A_g (\\lambda)<br>$$</li><li>0<br>$$<br>A_g^{}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - A_g^{}(\\lambda)-\\lambda A_g^{}(\\lambda) ^T + A_g^{} (\\lambda) = 0 \\\\<br>\\lambda = E_{q(z)}[\\eta(z,x)] \\\\<br>$$</li><li>$\\lambda$<br>$$<br>\\phi = E_{q(\\beta)}[\\eta(\\beta,x)] \\\\<br>$$</li><li><br>$$<br>\\lambda = E_{q(z | \\phi)}[\\eta(z,x)] \\\\<br>\\phi = E_{q(\\beta | \\lambda)}[\\eta(\\beta,x)] \\\\<br>$$</li><li>:<br>$$<br>\\lambda \\rightarrow q(\\beta | \\lambda) \\rightarrow \\phi \\rightarrow q(z | \\phi) \\rightarrow \\lambda<br>$$</li></ul>","site":{"data":{}},"excerpt":"<p>Variational InferenceExpectation MaximizationMarkov Chain Monte Carlo<br>b<br><a href=\"https://github.com/roboticcam/machine-learning-notes\" target=\"_blank\" rel=\"noopener\">roboticcam/machine-learning-notes</a><br>tutorial</p>","more":"<h1 id=\"Bayesian-Inference\"><a href=\"#Bayesian-Inference\" class=\"headerlink\" title=\"Bayesian Inference\"></a>Bayesian Inference</h1><ul><li></li><li></li><li>$p(x|\\theta)$$\\theta$$p(\\theta)$</li><li></li><li></li><li></li><li></li><li></li><li></li></ul><h1 id=\"Markov-Chain-Monte-Carlo\"><a href=\"#Markov-Chain-Monte-Carlo\" class=\"headerlink\" title=\"Markov Chain Monte Carlo\"></a>Markov Chain Monte Carlo</h1><ul><li>MCMCMCMC</li><li>EMMCMC</li><li></li><li></li></ul><h2 id=\"Sample\"><a href=\"#Sample\" class=\"headerlink\" title=\"Sample\"></a>Sample</h2><ul><li></li><li></li><li>[0,1]cdfcdf<br>$$<br>u = U(0,1) \\\\<br>x= cdf ^{-1} (u) \\\\<br>$$</li></ul><h2 id=\"rejection-sampling\"><a href=\"#rejection-sampling\" class=\"headerlink\" title=\"rejection sampling\"></a>rejection sampling</h2><ul><li>rejection sampling</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/ildAC764ke.JPG\" alt=\"mark\"></li><li>[0,1]</li><li><p>1M</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">i=0</span><br><span class=\"line\">while i!= N</span><br><span class=\"line\">\tx(i)~q(x) and u~U(0,1)</span><br><span class=\"line\">\tif u&lt; p(x(i))/Mq(x(i)) then</span><br><span class=\"line\">\t\taccept x(i)</span><br><span class=\"line\">\t\ti=i+1</span><br><span class=\"line\">\telse</span><br><span class=\"line\">\t\treject x(i)</span><br><span class=\"line\">\tend</span><br><span class=\"line\">end</span><br></pre></td></tr></table></figure></li><li><p>rejection sampling</p></li></ul><h2 id=\"adaptive-rejection-sampling\"><a href=\"#adaptive-rejection-sampling\" class=\"headerlink\" title=\"adaptive rejection sampling\"></a>adaptive rejection sampling</h2><ul><li>log-concave</li><li>kk</li><li>log-concavek<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/2gcFgBDJLa.JPG\" alt=\"mark\"></li></ul><h2 id=\"Importance-Sampling\"><a href=\"#Importance-Sampling\" class=\"headerlink\" title=\"Importance Sampling\"></a>Importance Sampling</h2><ul><li></li><li>importance sampling</li><li><br>$$<br>E_{p(x)}(f(x)) = \\int _x f(x)p(x)dx \\\\<br>E_{p(x)}(f(x)) = \\int _x f(x) \\frac{p(x)}{q(x)} q(x) dx \\\\<br>E_{p(x)}(f(x)) = \\int _x g(x)q(x)dx \\\\<br>$$</li><li>p(x)q(x)$\\frac{p(x)}{q(x)}$importance weight</li><li></li></ul><h2 id=\"MCMC-amp-MH\"><a href=\"#MCMC-amp-MH\" class=\"headerlink\" title=\"MCMC&amp;MH\"></a>MCMC&amp;MH</h2><ul><li>mcmcmcmc</li><li>mcmc</li><li>$\\pi$$k(x^{} | x)$$x$$x^{}$</li><li>Chapman-Kologronvo<br>$$<br>\\pi _t (x^{}) = \\int _x \\pi _{t-1}(x) k(x^{} | x) dx<br>$$</li><li><br>$$<br>\\pi _t (x) = \\pi _{t-1} (x)<br>$$</li><li>the detailed balance<br>$$<br>\\pi (x) k(x^{} | x) = \\pi (x^{}) k(x | x^{})<br>$$</li><li>detailed balanceChapman-Kologronvo</li><li></li><li>LDAmhgibbsMetropolis-Hastingmcmc1<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/6C57aKcD1d.JPG\" alt=\"mark\"></li><li>11mcmc</li><li>gibbs1gibbsmhmhgibbs</li></ul><h2 id=\"Hybrid-Metropolis-Hasting\"><a href=\"#Hybrid-Metropolis-Hasting\" class=\"headerlink\" title=\"Hybrid Metropolis-Hasting\"></a>Hybrid Metropolis-Hasting</h2><ul><li></li></ul><h2 id=\"Gibbs-Sampling\"><a href=\"#Gibbs-Sampling\" class=\"headerlink\" title=\"Gibbs Sampling\"></a>Gibbs Sampling</h2><ul><li></li><li>coordinate descent<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180913/CLgH680c1a.JPG\" alt=\"mark\"></li><li><p>collapsed gibbs samplingcollapse</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">u~p(u|x,y,z)</span><br><span class=\"line\">x,y,z~p(x,y,z|u)</span><br><span class=\"line\">=p(x|u)p(y|u)p(z|u)</span><br></pre></td></tr></table></figure></li><li><p>x,y,z</p></li><li>gibbsmh1mh<br>$$<br>\\alpha = min(1,\\frac{\\pi (x^{}),q(x| x^{})}{\\pi (x) q(x^{} | x)})<br>$$</li><li>gibbs<br>$$<br>q(x|x^{})=\\pi (x_i | x_{i}^{}) \\\\<br>q(x^{}|x)=\\pi (x_i ^{} | x_{i}) \\\\<br>$$</li><li>$x_{i}$$x_{i}^{}$ii<br>$$<br>x_{i}^{}=x_{i}<br>$$</li><li>gibbs<br>$$<br>\\alpha _{gibbs} = min(1,\\frac{\\pi (x^{}) \\pi (x_i | x_{i}^{})}{\\pi (x) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{}) \\pi (x_i | x_{i})}{\\pi (x) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{} | x_{i}^{}) \\pi( x_{i}^{}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{} | x_{i})}) \\\\<br>= min(1,\\frac{\\pi (x^{} | x_{i}) \\pi( x_{i}) \\pi (x_i | x_{i})}{\\pi (x_i | x_{i}) \\pi( x_{i}) (x_i ^{} | x_{i})}) \\\\<br>= min(1,1) \\\\<br>= 1 \\\\<br>$$</li></ul><h1 id=\"Expectation-Maximization\"><a href=\"#Expectation-Maximization\" class=\"headerlink\" title=\"Expectation Maximization\"></a>Expectation Maximization</h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>deep|bayes2018EMMEword2vec</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li></li></ul><p>$$<br>\\theta=\\mathop{argmax}_{\\theta} L(\\theta | X) \\\\<br>=\\mathop{argmax}_{\\theta} \\log \\prod p(x_i | \\theta) \\\\<br>=\\mathop{argmax}_{\\theta} \\sum \\log p(x_i | \\theta) \\\\<br>$$</p><ul><li></li><li>EMEM$\\theta$$\\theta$</li><li>EM<ul><li>$\\log p(x,z|\\theta)$$p(z|x,\\theta ^{(t)})$$\\theta ^{(t)}$t</li><li>$\\theta$</li></ul></li><li>EM<br>$$<br>\\theta ^{(t+1)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t)}) dz<br>$$<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2></li><li></li><li><br>$$<br>\\log p(x|\\theta ^{(t+1)}) \\geq \\log p(x|\\theta ^{(t)})<br>$$</li><li><br>$$<br>\\log p(x|\\theta) = \\log p(x,z|\\theta) - \\log p(z|x,\\theta) \\\\<br>$$</li><li>$p(z|x,\\theta ^{(t)})$z<br>$$<br>\\log p(x|\\theta) = \\int _z \\log p(x,z|\\theta) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\<br>=Q(\\theta,\\theta ^{(t)})-H(\\theta,\\theta ^{(t)}) \\\\<br>$$</li><li>QEME$\\theta$$\\theta ^{(t)}$</li><li>EMMQQ$\\theta$HH</li><li>H$\\theta$$\\theta ^{(t)}$$H(\\theta ^{(t)},\\theta ^{(t)})$<br>$$<br>H(\\theta ^{(t)},\\theta ^{(t)})-H(\\theta,\\theta ^{(t)})= \\\\<br>\\int _z \\log p(z|x,\\theta ^{(t)}) p(z|x,\\theta ^{(t)}) dz - \\int _z \\log p(z|x,\\theta) p(z|x,\\theta ^{(t)}) dz \\\\<br>= \\int _z \\log (\\frac {p(z|x,\\theta ^{(t)})} {p(z|x,\\theta)} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>= - \\int _z \\log (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>\\geq - \\log \\int _z (\\frac {p(z|x,\\theta)} {p(z|x,\\theta ^{(t)})} ) p(z|x,\\theta ^{(t)}) dz \\\\<br>= - \\log 1 \\\\<br>= 0 \\\\<br>$$</li><li>Jensen$\\theta ^{(t)}$$\\theta$HH!argmax Q$\\theta ^{(t+1)}$ H,HEM</li></ul><h2 id=\"ELBO\"><a href=\"#ELBO\" class=\"headerlink\" title=\"ELBO\"></a>ELBO</h2><ul><li>ELBOEvidence Lower BoundEM</li><li>$p(x,z|\\theta)$$p(z|x,\\theta)$$q(z)$$q(z)$KLKL<br>$$<br>KL(q(z)||p(z|x,\\theta)) = \\int q(z) [\\log q(z) - \\log p(z|x,\\theta)] dz \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta) + \\log p(x|\\theta)] dz \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x|z,\\theta) - \\log (z|\\theta)] dz + \\log p(x|\\theta) \\\\<br>= \\int q(z) [\\log q(z) - \\log p(x,z|\\theta)] dz + \\log p(x|\\theta) \\\\<br>= KL(q(z)||p(x,z|\\theta)) + \\log p(x|\\theta) \\\\<br>$$</li><li><br>$$<br>\\log p(x|\\theta) = - KL(q(z)||p(x,z|\\theta)) + KL(q(z)||p(z|x,\\theta))<br>$$</li><li>$- KL(q(z)||p(x,z|\\theta))$ELBO$ KL(q(z)||p(z|x,\\theta)) \\geq 0 $ELBO</li><li>ELBO$q$$\\theta$$\\theta ^{(t-1)}$ELBO$q^{(t)}$EME$q^{(t)}$ELBO$\\theta ^{(t)}$EMM</li><li>$\\theta = \\theta ^{(t-1)}$ELBO<br>$$<br>ELBO=\\log p(x|\\theta ^{(t-1)}) - KL(q(z)||p(z|x,\\theta ^{(t-1)}))<br>$$</li><li>qELBOKL0ELBO$q(z)=p(z|x,\\theta ^{(t-1)})$$q$ELBO$\\theta$ELBO<br>$$<br>ELBO = - KL(q(z)||p(x,z|\\theta)) \\\\<br>= \\int q^{(t)}(z) [ \\log p(x,z|\\theta) - \\log q^{(t)}(z)] dz \\\\<br>= - \\int q^{(t)}(z) \\log p(x,z|\\theta) - q^{(t)}(z) \\log q^{(t)}(z) dz \\\\<br>$$</li><li>$\\theta$<br>$$<br>\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int q^{(t)}(z) \\log p(x,z|\\theta) dz \\\\<br>$$</li><li>$q(z)=p(z|x,\\theta ^{(t-1)})$<br>$$<br>\\theta ^{(t)} = \\mathop{argmax} _{\\theta} \\int \\log p(x,z|\\theta)p(z|x,\\theta ^{(t-1)}) dz<br>$$</li><li>EM</li><li>Christopher M. BishopPattern Recognition and Machine LearningEMEELBO$\\theta$MELBOqpKL0ELBOEMELBOEELBOMELBOMELBOMELBO<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180830/dCj203m7jB.PNG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180830/6k4kbJH3bc.PNG\" alt=\"mark\"></li><li>zqz</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Chuong B Do &amp; Serafim Batzogloututorial:What is the expectation maximization algorithm?</li><li>EM</li><li>EMEMEM</li><li>EExpectation</li><li>EM</li></ul><h2 id=\"EMK-means\"><a href=\"#EMK-means\" class=\"headerlink\" title=\"EMK-means\"></a>EMK-means</h2><ul><li>K-meansHard-EMHard10</li></ul><h2 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h2><h2 id=\"Wake-Sleep\"><a href=\"#Wake-Sleep\" class=\"headerlink\" title=\"Wake-Sleep\"></a>Wake-Sleep</h2><h2 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h2><h1 id=\"Variational-Inference\"><a href=\"#Variational-Inference\" class=\"headerlink\" title=\"Variational Inference\"></a>Variational Inference</h1><h2 id=\"ELBO\"><a href=\"#ELBO\" class=\"headerlink\" title=\"ELBO\"></a>ELBO</h2><ul><li>EM</li><li>ELBO<br>$$<br>\\log p(x) = \\log p(x,z) - \\log p(z|x) \\\\<br>= \\log \\frac{p(x,z)}{q(z)} - \\log \\frac{p(z|x)}{q(z)} \\\\<br>= \\log p(x,z) - \\log q(z) - \\log \\frac{p(z|x)}{q(z)} \\\\<br>$$</li><li>$q(z)$<br>$$<br>\\log p(x) = \\\\<br>[ \\int _z q(z) \\log p(x,z)dz - \\int _z q(z) \\log q(z)dz ] + [- \\int _z \\log \\frac{p(z|x)}{q(z)} q(z) dz ]\\\\<br>= ELBO+KL(q||p(z|x)) \\\\<br>$$</li><li>$z$$p(z|x)$$q(z)$$q(z)$$p(z|x)$KLELBOKL</li><li>ELBO</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>j</li><li>$q(z)$$M$<br>$$<br>q(z)=\\prod _{i=1}^M q_i(z_i)<br>$$</li><li>ELBO<br>$$<br>ELBO=\\int \\prod q_i(z_i) \\log p(x,z) dz - \\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\<br>=part1-part2 \\\\<br>$$</li><li>part1j<br>$$<br>part1=\\int \\prod q_i(z_i) \\log p(x,z) dz \\\\<br>= \\int _{z_1} \\int _{z_2}  \\int _{z_M} \\prod _{i=1}^M q_i(z_i) \\log p(x,z) d z_1 , d z_2 ,  ,d z_M \\\\<br>= \\int _{z_j} q_j(z_j) ( \\int _{z_{i \\neq j}} \\log (p(x,z)) \\prod _{z_{i \\neq j}} q_i(z_i) d z_i) d z_j \\\\<br>= \\int _{z_j} q_j(z_j) [E_{i \\neq j} [\\log (p(x,z))]] d z_j \\\\<br>$$</li><li><br>$$<br>p_j(z_j) = \\int _{i \\neq j} p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>p_j^{}(z_j) = exp \\int _{i \\neq j} \\log p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>\\log p_j^{}(z_j) = \\int _{i \\neq j} \\log p(z_1,,z_i) d z_1 , d z_2 ,, d z_i \\\\<br>$$</li><li>part1<br>$$<br>part1= \\int _{z_j} q_j(z_j) \\log p_j^{}(x,z_j) \\\\<br>$$</li><li>part2j<br>$$<br>part2=\\int \\prod q_j(z_j) \\sum \\log q_j(z_j) dz \\\\<br>= \\sum ( \\int q_i(z_i) \\log (q_i(z_i)) d z_i ) \\\\<br>= \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\<br>$$</li><li>part1part2ELBOj<br>$$<br>ELBO = \\int _{z_j} \\log \\log p_j^{}(x,z_j) - \\int q_j(z_j) \\log (q_j(z_j)) d z_j + const \\\\<br>= \\int _{z_j} q_j(z_j) \\log \\frac{p_j^{}(x,z_j)}{q_j(z_j)} + const \\\\<br>= - KL(p_j^{}(x,z_j) || q_j(z_j)) + const\\\\<br>$$</li><li>ELBOKLELBOKL</li><li>KL<br>$$<br>q_j(z_j) = p_j^{}(x,z_j) \\\\<br>\\log q_j(z_j) = E_{i \\neq j} [\\log (p(x,z))] \\\\<br>$$</li><li>j$\\log (p(x,z))$$q_i(z_i)$j</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li><br>$$<br>p(x | \\theta)=h(x) exp(\\eta (\\theta) \\cdot T(x)-A(\\theta)) \\\\<br>$$</li><li><ul><li>$T(x)$:sufficient statistics</li><li>$\\theta$:parameter of the family</li><li>$\\eta$:natural parameter</li><li>$h(x)$:underlying measure</li><li>$A(\\theta)$:log normalizer / partition function</li></ul></li><li>parameter of the familynatural parameter$\\eta _i (\\theta) = \\theta _i$<br>$$<br>p(x | \\eta)=h(x) exp(\\eta (T(x) ^T \\eta - A(\\eta))<br>$$</li><li><br>$$<br>\\eta = \\mathop{argmax} _ {\\eta} [\\log p(X | \\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} [\\log \\prod p(x_i | \\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} [\\log [\\prod h(x_i) exp [(\\sum T(x_i))^T \\eta - n A(\\eta)]]] \\\\<br>= \\mathop{argmax} _ {\\eta} (\\sum T(x_i))^T \\eta - n A(\\eta)] \\\\<br>= \\mathop{argmax} _ {\\eta} L(\\eta) \\\\<br>$$</li><li>log normalizersufficient statistics<br>$$<br>\\frac{\\partial L (\\eta)}{\\partial \\eta} = \\sum T(x_i) - n A^{}(\\eta) =0 \\\\<br>A^{}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\<br>$$</li><li><br>$$<br>p(x) = exp[- \\frac{1}{2 \\sigma ^2}x^2 + \\frac{\\mu}{\\sigma ^2}x - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2)] \\\\<br>=exp ( [x \\ x^2] [\\frac{\\mu}{\\sigma ^2} \\ \\frac{-1}{2 \\sigma ^2}] ^T - \\frac{\\mu ^2}{2 \\sigma ^2} - \\frac 12 \\log(2 \\pi \\sigma ^2) )<br>$$</li><li><br>$$<br>p(x) = exp( [x \\ x^2] [ \\eta _1 \\ \\eta _2] ^T + \\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 ) - \\frac 12 \\log (2 \\pi))<br>$$</li><li><ul><li>$T(x)$:$[x \\ x^2]$</li><li>$\\eta$:$[ \\eta _1 \\ \\eta _2] ^T$</li><li>$-A(\\eta)$:$\\frac{\\eta _1 ^2}{4 \\eta _2} + \\frac 12 \\log (-2 \\eta _2 )$</li></ul></li><li><br>$$<br>A^{}(\\eta) = \\sum \\frac{T(x_i)}{n} \\\\<br>[\\frac{\\partial A}{\\eta _1} \\ \\frac{\\partial A}{\\eta _2}] = [\\frac{- \\eta _1}{2 \\eta _2} \\ \\frac{\\eta _1 ^2 }{2 \\eta _2}-\\frac{1}{2 \\eta _2}] \\\\<br>= [\\frac{\\sum x_i}{n} \\ \\frac{\\sum x_i^2}{n}] \\\\<br>= [\\mu \\ \\mu ^2 + \\sigma ^2] \\\\<br>$$</li><li>$A(\\eta)$log normalizer<br>$$<br>\\int _x \\frac{h(x)exp(T(x)^T \\eta)}{exp(A(\\eta))} = 1 \\\\<br>A(\\eta) = \\log \\int _x h(x)exp(T(x)^T \\eta) \\\\<br>$$</li><li><br>$$<br>p(\\beta | x)  p(x | \\beta) p(\\beta) \\\\<br> h(x) exp(T(x) \\beta ^T - A_l (\\beta)) h(\\beta) exp(T(\\beta) \\alpha ^T - A(\\alpha)) \\\\<br>$$</li><li><br>$$<br>T(\\beta) = [\\beta \\ -g(\\beta)] \\\\<br>\\alpha = [\\alpha _1 \\ \\alpha _2] \\\\<br>$$</li><li>$\\beta$$h(x)$$A(\\alpha)$<br>$$<br> h(\\beta) exp(T(x) \\beta - A_l(\\beta) + \\alpha _1 \\beta - \\alpha _2 g(\\beta)) \\\\<br>$$</li><li>$-g(\\beta)=-A_l (\\beta)$<br>$$<br> h(\\beta) exp((T(x)+\\alpha _1)\\beta - (1+\\alpha _2) A_l (\\beta)) \\\\<br> h(\\beta) exp(\\alpha _1 ^{} \\beta - \\alpha _2 ^{} A_l (\\beta)) \\\\<br>$$</li><li></li><li><br>$$<br>p(\\beta | x, \\alpha)  p(x | \\beta) p(\\beta | \\alpha) \\\\<br> h(x)exp[T(x)^T\\beta - A_l(\\beta)] h(\\beta) exp[T(\\beta)^T\\alpha - A_l(\\alpha)] \\\\<br>$$</li><li>log normalizerlog normalizersufficient statistics<br>$$<br>\\frac{\\partial A_l(\\beta)}{\\partial \\beta}=\\int _x T(x) p(x | \\beta)dx \\\\<br>= E_{p(x|\\beta)} [T(x)] \\\\<br>$$</li><li>1$\\beta$0</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>ELBO</li><li>xz$\\lambda$$\\phi$$\\eta(z,x)$$\\eta(\\beta ,x)$ELBO$q(\\lambda , \\phi)$$\\lambda$$\\phi$</li><li>ELBO</li><li>ELBO$q(z,\\beta)=q(z)q(\\beta)$<br>$$<br>ELBO=E_{q(z,\\beta)}[\\log p(x,z,\\beta)] - E_{q(z,\\beta)}[\\log p(z,\\beta)] \\\\<br>= E_{q(z,\\beta)}[\\log p(\\beta | x,z) + \\log p(z | x) + \\log p(x)] - E_{q(z,\\beta)}[\\log q(\\beta)] - E_{q(z,\\beta)}[\\log q(z)] \\\\<br>$$</li><li>q$\\lambda$$\\phi$<br>$$<br>p(\\beta | x,z) = h(\\beta) exp [ T(\\beta) ^T \\eta (z,x) - A_g (\\eta(z,x))] \\\\<br>\\approx q(\\beta | \\lambda) \\\\<br>= h(\\beta) exp [ T(\\beta) ^T \\eta (\\lambda - A_g (\\eta(\\lambda))] \\\\<br>p(z | x,\\beta) = h(z) exp [ T(z) ^T \\eta (\\beta,x) - A_l (\\eta(\\beta,x))] \\\\<br>\\approx q(\\beta | \\phi) \\\\<br>= h(z) exp [ T(z) ^T \\eta (\\phi - A_l (\\eta(\\phi))] \\\\<br>$$</li><li>$\\phi$$\\lambda$ELBO<br>$$<br>ELBO_{\\lambda} = E_{q(z,\\beta)}[\\log p(\\beta | x,z)] - E_{q(z,\\beta)}[\\log q(\\beta)] \\\\<br>$$</li><li>$- E_{q(z)}[A_g(\\eta(x,z))]$<br>$$<br>ELBO_{\\lambda} = E_{q(\\beta)}[T(\\beta)^T] E_{q(z)}[\\eta(z,x)] -E_{q(\\beta)} [T(\\beta)^T \\lambda] + A_g(\\lambda)<br>$$</li><li>log normalizer:<br>$$<br>ELBO_{\\lambda} = A_g^{}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - \\lambda A_g^{}(\\lambda) ^T + A_g (\\lambda)<br>$$</li><li>0<br>$$<br>A_g^{}(\\lambda)^T[E_{q(z)}[\\eta(z,x)]] - A_g^{}(\\lambda)-\\lambda A_g^{}(\\lambda) ^T + A_g^{} (\\lambda) = 0 \\\\<br>\\lambda = E_{q(z)}[\\eta(z,x)] \\\\<br>$$</li><li>$\\lambda$<br>$$<br>\\phi = E_{q(\\beta)}[\\eta(\\beta,x)] \\\\<br>$$</li><li><br>$$<br>\\lambda = E_{q(z | \\phi)}[\\eta(z,x)] \\\\<br>\\phi = E_{q(\\beta | \\lambda)}[\\eta(\\beta,x)] \\\\<br>$$</li><li>:<br>$$<br>\\lambda \\rightarrow q(\\beta | \\lambda) \\rightarrow \\phi \\rightarrow q(z | \\phi) \\rightarrow \\lambda<br>$$</li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Fri Sep 21 2018 15:45:23 GMT+0800 ()","title":"","path":"2018/08/28/inference-algorithm/","eyeCatchImage":null,"excerpt":"<p>Variational InferenceExpectation MaximizationMarkov Chain Monte Carlo<br>b<br><a href=\"https://github.com/roboticcam/machine-learning-notes\" target=\"_blank\" rel=\"noopener\">roboticcam/machine-learning-notes</a><br>tutorial</p>","date":"2018-08-28T01:55:10.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","mcmc","inference","variational inference","em"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"pandas ","date":"2017-02-04T13:02:39.000Z","_content":"***\n\n\n# \n```python\nimport csv as csv \nimport pandas as pd\nimport numpy as np\n```\n# \n```python\ntrain = pd.read_csv(r\"\") \n```\n\n![](http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG)\n\n\n<!--more-->\n\n# \n-\tdescribe \n```python\nprint(train.describe())\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222443347.JPG)\n-\thead tail \n```python\nprint(train.head(5))\nprint(train.tail(3))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222504633.JPG)\n-\tindexcolumnsvalues\n```python\nprint(train.index)\nprint(train.columns)\nprint(train.values)\n```\n# \n-\tT\n```python\nprint(train.T)\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222544174.JPG)\n-\tsortaxis(),ascending,Nan\n```python\nprint(train.sort_index(axis=0,ascending=True))\nprint(train.sort_values(by=\"Age\",ascending=False))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222551913.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222617681.JPG)\n\n# \n-\t\n```python\nprint(train['Age'])\nprint(train[0:9])\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222634103.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222640068.JPG)\n-\tlocat\n```python\nprint(train.loc[train.index[4:6]])\nprint(train.loc[:,['Age','Fare']])\nprint(train.loc[3:5,['Age','Fare']])\nprint(train.loc[4,'Age'])\nprint(train.at[4,'Age'])\n```\n-\tiloc\n```python\nprint(train.iloc[5])\nprint(train.iloc[3:5,2:4])\nprint(train.iloc[[1,2,4],[2,5]])\nprint(train.iloc[3,3])\n```\n-\t\n```python\nprint( train[ (train['Age']>40) & (train['Age']<50) ] )\nprint(train[train['Parch'].isin([1,2])])\nprint(train[pd.isnull(train['Age'])==True])\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222658806.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222706679.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222715106.JPG)\n\n# \n-\treindexmean()\n```python\ntrain1=train.reindex(index=train.index[0:5],columns=['PassengerId']+['Age']+['Sex'])#5\nprint(train1)\nprint(train1.dropna(axis=0)) #nan\nprint(train1.dropna(subset=['Age','Sex'])) #nan\nprint(pd.isnull(train1)) #nantruefalse\nprint(train1.fillna(value=2333)) #2333\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222723080.JPG)\n# \n-\taxis\n```python\n#nan\ndef null_count(column):\n    column_null=pd.isnull(column)\n    null=column[column_null == True]\n    return len(null)\nprint(train.apply(null_count))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222730409.JPG)\n```python\n#\ndef judge(row):\n    if pd.isnull(row['Age']) ==True:\n        return 'unknown'\n    return 'youngth' if row['Age']<18 else 'adult'\nprint(train.apply(judge,axis=1))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222741327.JPG)\n# \n-\tpclasssexagefare\n```python\nprint(train.pivot_table(index=[\"Pclass\",\"Sex\"], values=[\"Age\", \"Fare\"], aggfunc=np.mean))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222751776.JPG)\n\n\n\n# \n\n- \n\n  ```Python\n  import pandas as pd\n  data1 = pd.DataFrame({'level':['a','b','c','d'],\n                   'numeber':[1,3,5,7]})\n   \n  data2=pd.DataFrame({'level':['a','b','c','e'],\n                   'numeber':[2,3,6,10]})\n\n  print(\"merge:\\n\",pd.merge(data1,data2),\"\\n\")\n\n  data3 = pd.DataFrame({'level1':['a','b','c','d'],\n                   'numeber1':[1,3,5,7]})\n  data4 = pd.DataFrame({'level2':['a','b','c','e'],\n                   'numeber2':[2,3,6,10]})\n  print(\"merge with left_on,right_on: \\n\",pd.merge(data3,data4,left_on='level1',right_on='level2'),\"\\n\")\n\n  print(\"concat: \\n\",pd.concat([data1,data2]),\"\\n\")\n\n  data3 = pd.DataFrame({'level':['a','b','c','d'],\n                   'numeber1':[1,3,5,np.nan]})\n  data4=pd.DataFrame({'level':['a','b','c','e'],\n                   'numeber2':[2,np.nan,6,10]})\n  print(\"combine: \\n\",data3.combine_first(data4),\"\\n\")\n  ```\n  ![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/214643504.JPG)\n","source":"_posts/pandas-skill.md","raw":"---\ntitle: pandas \ndate: 2017-02-04 21:02:39\ntags: [math,machinelearning,python,code]\ncategories: Python\n---\n***\n\n\n# \n```python\nimport csv as csv \nimport pandas as pd\nimport numpy as np\n```\n# \n```python\ntrain = pd.read_csv(r\"\") \n```\n\n![](http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG)\n\n\n<!--more-->\n\n# \n-\tdescribe \n```python\nprint(train.describe())\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222443347.JPG)\n-\thead tail \n```python\nprint(train.head(5))\nprint(train.tail(3))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222504633.JPG)\n-\tindexcolumnsvalues\n```python\nprint(train.index)\nprint(train.columns)\nprint(train.values)\n```\n# \n-\tT\n```python\nprint(train.T)\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222544174.JPG)\n-\tsortaxis(),ascending,Nan\n```python\nprint(train.sort_index(axis=0,ascending=True))\nprint(train.sort_values(by=\"Age\",ascending=False))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222551913.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222617681.JPG)\n\n# \n-\t\n```python\nprint(train['Age'])\nprint(train[0:9])\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222634103.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222640068.JPG)\n-\tlocat\n```python\nprint(train.loc[train.index[4:6]])\nprint(train.loc[:,['Age','Fare']])\nprint(train.loc[3:5,['Age','Fare']])\nprint(train.loc[4,'Age'])\nprint(train.at[4,'Age'])\n```\n-\tiloc\n```python\nprint(train.iloc[5])\nprint(train.iloc[3:5,2:4])\nprint(train.iloc[[1,2,4],[2,5]])\nprint(train.iloc[3,3])\n```\n-\t\n```python\nprint( train[ (train['Age']>40) & (train['Age']<50) ] )\nprint(train[train['Parch'].isin([1,2])])\nprint(train[pd.isnull(train['Age'])==True])\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222658806.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222706679.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222715106.JPG)\n\n# \n-\treindexmean()\n```python\ntrain1=train.reindex(index=train.index[0:5],columns=['PassengerId']+['Age']+['Sex'])#5\nprint(train1)\nprint(train1.dropna(axis=0)) #nan\nprint(train1.dropna(subset=['Age','Sex'])) #nan\nprint(pd.isnull(train1)) #nantruefalse\nprint(train1.fillna(value=2333)) #2333\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222723080.JPG)\n# \n-\taxis\n```python\n#nan\ndef null_count(column):\n    column_null=pd.isnull(column)\n    null=column[column_null == True]\n    return len(null)\nprint(train.apply(null_count))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222730409.JPG)\n```python\n#\ndef judge(row):\n    if pd.isnull(row['Age']) ==True:\n        return 'unknown'\n    return 'youngth' if row['Age']<18 else 'adult'\nprint(train.apply(judge,axis=1))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222741327.JPG)\n# \n-\tpclasssexagefare\n```python\nprint(train.pivot_table(index=[\"Pclass\",\"Sex\"], values=[\"Age\", \"Fare\"], aggfunc=np.mean))\n```\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222751776.JPG)\n\n\n\n# \n\n- \n\n  ```Python\n  import pandas as pd\n  data1 = pd.DataFrame({'level':['a','b','c','d'],\n                   'numeber':[1,3,5,7]})\n   \n  data2=pd.DataFrame({'level':['a','b','c','e'],\n                   'numeber':[2,3,6,10]})\n\n  print(\"merge:\\n\",pd.merge(data1,data2),\"\\n\")\n\n  data3 = pd.DataFrame({'level1':['a','b','c','d'],\n                   'numeber1':[1,3,5,7]})\n  data4 = pd.DataFrame({'level2':['a','b','c','e'],\n                   'numeber2':[2,3,6,10]})\n  print(\"merge with left_on,right_on: \\n\",pd.merge(data3,data4,left_on='level1',right_on='level2'),\"\\n\")\n\n  print(\"concat: \\n\",pd.concat([data1,data2]),\"\\n\")\n\n  data3 = pd.DataFrame({'level':['a','b','c','d'],\n                   'numeber1':[1,3,5,np.nan]})\n  data4=pd.DataFrame({'level':['a','b','c','e'],\n                   'numeber2':[2,np.nan,6,10]})\n  print(\"combine: \\n\",data3.combine_first(data4),\"\\n\")\n  ```\n  ![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/214643504.JPG)\n","slug":"pandas-skill","published":1,"updated":"2018-07-23T01:28:38.518Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072db0027qcw6aj6tcfif","content":"<hr><p><br></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> csv <span class=\"keyword\">as</span> csv </span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train = pd.read_csv(<span class=\"string\">r\"\"</span>)</span><br></pre></td></tr></table></figure><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG\" alt=\"\"></p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>describe <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.describe())</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222443347.JPG\" alt=\"mark\"></p><ul><li>head tail <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.head(<span class=\"number\">5</span>))</span><br><span class=\"line\">print(train.tail(<span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222504633.JPG\" alt=\"mark\"></p><ul><li>indexcolumnsvalues<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.index)</span><br><span class=\"line\">print(train.columns)</span><br><span class=\"line\">print(train.values)</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>T<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.T)</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222544174.JPG\" alt=\"mark\"></p><ul><li>sortaxis(),ascending,Nan<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.sort_index(axis=<span class=\"number\">0</span>,ascending=<span class=\"keyword\">True</span>))</span><br><span class=\"line\">print(train.sort_values(by=<span class=\"string\">\"Age\"</span>,ascending=<span class=\"keyword\">False</span>))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222551913.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222617681.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train[<span class=\"string\">'Age'</span>])</span><br><span class=\"line\">print(train[<span class=\"number\">0</span>:<span class=\"number\">9</span>])</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222634103.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222640068.JPG\" alt=\"mark\"></p><ul><li><p>locat</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.loc[train.index[<span class=\"number\">4</span>:<span class=\"number\">6</span>]])</span><br><span class=\"line\">print(train.loc[:,[<span class=\"string\">'Age'</span>,<span class=\"string\">'Fare'</span>]])</span><br><span class=\"line\">print(train.loc[<span class=\"number\">3</span>:<span class=\"number\">5</span>,[<span class=\"string\">'Age'</span>,<span class=\"string\">'Fare'</span>]])</span><br><span class=\"line\">print(train.loc[<span class=\"number\">4</span>,<span class=\"string\">'Age'</span>])</span><br><span class=\"line\">print(train.at[<span class=\"number\">4</span>,<span class=\"string\">'Age'</span>])</span><br></pre></td></tr></table></figure></li><li><p>iloc</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.iloc[<span class=\"number\">5</span>])</span><br><span class=\"line\">print(train.iloc[<span class=\"number\">3</span>:<span class=\"number\">5</span>,<span class=\"number\">2</span>:<span class=\"number\">4</span>])</span><br><span class=\"line\">print(train.iloc[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>],[<span class=\"number\">2</span>,<span class=\"number\">5</span>]])</span><br><span class=\"line\">print(train.iloc[<span class=\"number\">3</span>,<span class=\"number\">3</span>])</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print( train[ (train[<span class=\"string\">'Age'</span>]&gt;<span class=\"number\">40</span>) &amp; (train[<span class=\"string\">'Age'</span>]&lt;<span class=\"number\">50</span>) ] )</span><br><span class=\"line\">print(train[train[<span class=\"string\">'Parch'</span>].isin([<span class=\"number\">1</span>,<span class=\"number\">2</span>])])</span><br><span class=\"line\">print(train[pd.isnull(train[<span class=\"string\">'Age'</span>])==<span class=\"keyword\">True</span>])</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222658806.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222706679.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222715106.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>reindexmean()<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train1=train.reindex(index=train.index[<span class=\"number\">0</span>:<span class=\"number\">5</span>],columns=[<span class=\"string\">'PassengerId'</span>]+[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>])<span class=\"comment\">#5</span></span><br><span class=\"line\">print(train1)</span><br><span class=\"line\">print(train1.dropna(axis=<span class=\"number\">0</span>)) <span class=\"comment\">#nan</span></span><br><span class=\"line\">print(train1.dropna(subset=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>])) <span class=\"comment\">#nan</span></span><br><span class=\"line\">print(pd.isnull(train1)) <span class=\"comment\">#nantruefalse</span></span><br><span class=\"line\">print(train1.fillna(value=<span class=\"number\">2333</span>)) <span class=\"comment\">#2333</span></span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222723080.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>axis<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#nan</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">null_count</span><span class=\"params\">(column)</span>:</span></span><br><span class=\"line\">    column_null=pd.isnull(column)</span><br><span class=\"line\">    null=column[column_null == <span class=\"keyword\">True</span>]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> len(null)</span><br><span class=\"line\">print(train.apply(null_count))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222730409.JPG\" alt=\"mark\"><br></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">judge</span><span class=\"params\">(row)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> pd.isnull(row[<span class=\"string\">'Age'</span>]) ==<span class=\"keyword\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'unknown'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'youngth'</span> <span class=\"keyword\">if</span> row[<span class=\"string\">'Age'</span>]&lt;<span class=\"number\">18</span> <span class=\"keyword\">else</span> <span class=\"string\">'adult'</span></span><br><span class=\"line\">print(train.apply(judge,axis=<span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure><p></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222741327.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>pclasssexagefare<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.pivot_table(index=[<span class=\"string\">\"Pclass\"</span>,<span class=\"string\">\"Sex\"</span>], values=[<span class=\"string\">\"Age\"</span>, <span class=\"string\">\"Fare\"</span>], aggfunc=np.mean))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222751776.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\">data1 = pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>]&#125;)</span><br><span class=\"line\"> </span><br><span class=\"line\">data2=pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber'</span>:[<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"merge:\\n\"</span>,pd.merge(data1,data2),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">data3 = pd.DataFrame(&#123;<span class=\"string\">'level1'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber1'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>]&#125;)</span><br><span class=\"line\">data4 = pd.DataFrame(&#123;<span class=\"string\">'level2'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber2'</span>:[<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\">print(<span class=\"string\">\"merge with left_on,right_on: \\n\"</span>,pd.merge(data3,data4,left_on=<span class=\"string\">'level1'</span>,right_on=<span class=\"string\">'level2'</span>),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"concat: \\n\"</span>,pd.concat([data1,data2]),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">data3 = pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber1'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,np.nan]&#125;)</span><br><span class=\"line\">data4=pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber2'</span>:[<span class=\"number\">2</span>,np.nan,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\">print(<span class=\"string\">\"combine: \\n\"</span>,data3.combine_first(data4),<span class=\"string\">\"\\n\"</span>)</span><br></pre></td></tr></table></figure><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/214643504.JPG\" alt=\"mark\"></p></li></ul>","site":{"data":{}},"excerpt":"<hr><p><br></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> csv <span class=\"keyword\">as</span> csv </span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train = pd.read_csv(<span class=\"string\">r\"\"</span>)</span><br></pre></td></tr></table></figure><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG\" alt=\"\"></p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>describe <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.describe())</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222443347.JPG\" alt=\"mark\"></p><ul><li>head tail <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.head(<span class=\"number\">5</span>))</span><br><span class=\"line\">print(train.tail(<span class=\"number\">3</span>))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222504633.JPG\" alt=\"mark\"></p><ul><li>indexcolumnsvalues<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.index)</span><br><span class=\"line\">print(train.columns)</span><br><span class=\"line\">print(train.values)</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>T<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.T)</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222544174.JPG\" alt=\"mark\"></p><ul><li>sortaxis(),ascending,Nan<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.sort_index(axis=<span class=\"number\">0</span>,ascending=<span class=\"keyword\">True</span>))</span><br><span class=\"line\">print(train.sort_values(by=<span class=\"string\">\"Age\"</span>,ascending=<span class=\"keyword\">False</span>))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222551913.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222617681.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train[<span class=\"string\">'Age'</span>])</span><br><span class=\"line\">print(train[<span class=\"number\">0</span>:<span class=\"number\">9</span>])</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222634103.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222640068.JPG\" alt=\"mark\"></p><ul><li><p>locat</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.loc[train.index[<span class=\"number\">4</span>:<span class=\"number\">6</span>]])</span><br><span class=\"line\">print(train.loc[:,[<span class=\"string\">'Age'</span>,<span class=\"string\">'Fare'</span>]])</span><br><span class=\"line\">print(train.loc[<span class=\"number\">3</span>:<span class=\"number\">5</span>,[<span class=\"string\">'Age'</span>,<span class=\"string\">'Fare'</span>]])</span><br><span class=\"line\">print(train.loc[<span class=\"number\">4</span>,<span class=\"string\">'Age'</span>])</span><br><span class=\"line\">print(train.at[<span class=\"number\">4</span>,<span class=\"string\">'Age'</span>])</span><br></pre></td></tr></table></figure></li><li><p>iloc</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.iloc[<span class=\"number\">5</span>])</span><br><span class=\"line\">print(train.iloc[<span class=\"number\">3</span>:<span class=\"number\">5</span>,<span class=\"number\">2</span>:<span class=\"number\">4</span>])</span><br><span class=\"line\">print(train.iloc[[<span class=\"number\">1</span>,<span class=\"number\">2</span>,<span class=\"number\">4</span>],[<span class=\"number\">2</span>,<span class=\"number\">5</span>]])</span><br><span class=\"line\">print(train.iloc[<span class=\"number\">3</span>,<span class=\"number\">3</span>])</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print( train[ (train[<span class=\"string\">'Age'</span>]&gt;<span class=\"number\">40</span>) &amp; (train[<span class=\"string\">'Age'</span>]&lt;<span class=\"number\">50</span>) ] )</span><br><span class=\"line\">print(train[train[<span class=\"string\">'Parch'</span>].isin([<span class=\"number\">1</span>,<span class=\"number\">2</span>])])</span><br><span class=\"line\">print(train[pd.isnull(train[<span class=\"string\">'Age'</span>])==<span class=\"keyword\">True</span>])</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222658806.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222706679.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222715106.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>reindexmean()<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train1=train.reindex(index=train.index[<span class=\"number\">0</span>:<span class=\"number\">5</span>],columns=[<span class=\"string\">'PassengerId'</span>]+[<span class=\"string\">'Age'</span>]+[<span class=\"string\">'Sex'</span>])<span class=\"comment\">#5</span></span><br><span class=\"line\">print(train1)</span><br><span class=\"line\">print(train1.dropna(axis=<span class=\"number\">0</span>)) <span class=\"comment\">#nan</span></span><br><span class=\"line\">print(train1.dropna(subset=[<span class=\"string\">'Age'</span>,<span class=\"string\">'Sex'</span>])) <span class=\"comment\">#nan</span></span><br><span class=\"line\">print(pd.isnull(train1)) <span class=\"comment\">#nantruefalse</span></span><br><span class=\"line\">print(train1.fillna(value=<span class=\"number\">2333</span>)) <span class=\"comment\">#2333</span></span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222723080.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>axis<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#nan</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">null_count</span><span class=\"params\">(column)</span>:</span></span><br><span class=\"line\">    column_null=pd.isnull(column)</span><br><span class=\"line\">    null=column[column_null == <span class=\"keyword\">True</span>]</span><br><span class=\"line\">    <span class=\"keyword\">return</span> len(null)</span><br><span class=\"line\">print(train.apply(null_count))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222730409.JPG\" alt=\"mark\"><br></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">judge</span><span class=\"params\">(row)</span>:</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> pd.isnull(row[<span class=\"string\">'Age'</span>]) ==<span class=\"keyword\">True</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'unknown'</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'youngth'</span> <span class=\"keyword\">if</span> row[<span class=\"string\">'Age'</span>]&lt;<span class=\"number\">18</span> <span class=\"keyword\">else</span> <span class=\"string\">'adult'</span></span><br><span class=\"line\">print(train.apply(judge,axis=<span class=\"number\">1</span>))</span><br></pre></td></tr></table></figure><p></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222741327.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>pclasssexagefare<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">print(train.pivot_table(index=[<span class=\"string\">\"Pclass\"</span>,<span class=\"string\">\"Sex\"</span>], values=[<span class=\"string\">\"Age\"</span>, <span class=\"string\">\"Fare\"</span>], aggfunc=np.mean))</span><br></pre></td></tr></table></figure></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170204/222751776.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\">data1 = pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>]&#125;)</span><br><span class=\"line\"> </span><br><span class=\"line\">data2=pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber'</span>:[<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"merge:\\n\"</span>,pd.merge(data1,data2),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">data3 = pd.DataFrame(&#123;<span class=\"string\">'level1'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber1'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,<span class=\"number\">7</span>]&#125;)</span><br><span class=\"line\">data4 = pd.DataFrame(&#123;<span class=\"string\">'level2'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber2'</span>:[<span class=\"number\">2</span>,<span class=\"number\">3</span>,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\">print(<span class=\"string\">\"merge with left_on,right_on: \\n\"</span>,pd.merge(data3,data4,left_on=<span class=\"string\">'level1'</span>,right_on=<span class=\"string\">'level2'</span>),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">print(<span class=\"string\">\"concat: \\n\"</span>,pd.concat([data1,data2]),<span class=\"string\">\"\\n\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">data3 = pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'d'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber1'</span>:[<span class=\"number\">1</span>,<span class=\"number\">3</span>,<span class=\"number\">5</span>,np.nan]&#125;)</span><br><span class=\"line\">data4=pd.DataFrame(&#123;<span class=\"string\">'level'</span>:[<span class=\"string\">'a'</span>,<span class=\"string\">'b'</span>,<span class=\"string\">'c'</span>,<span class=\"string\">'e'</span>],</span><br><span class=\"line\">                 <span class=\"string\">'numeber2'</span>:[<span class=\"number\">2</span>,np.nan,<span class=\"number\">6</span>,<span class=\"number\">10</span>]&#125;)</span><br><span class=\"line\">print(<span class=\"string\">\"combine: \\n\"</span>,data3.combine_first(data4),<span class=\"string\">\"\\n\"</span>)</span><br></pre></td></tr></table></figure><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170212/214643504.JPG\" alt=\"mark\"></p></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"pandas ","path":"2017/02/04/pandas-skill/","eyeCatchImage":null,"excerpt":"<hr><p><br></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> csv <span class=\"keyword\">as</span> csv </span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"><span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br></pre></td></tr></table></figure><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">train = pd.read_csv(<span class=\"string\">r\"\"</span>)</span><br></pre></td></tr></table></figure><p><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170205/103436937.JPG\" alt=\"\"></p>","date":"2017-02-04T13:02:39.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["math","machinelearning","code","python"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Algorithm ","date":"2017-03-27T11:47:54.000Z","mathjax":true,"_content":"\n***\n\n<!--more-->\n\n\n# Leetcode\n-\t[Python](https://github.com/thinkwee/Algorithm_Python)\n-\t[Leetcode](https://leetcode.com/list/wqzcris/)\n\n## \n-\t75:012[0,0,...,0,1,...,1,2,...,2]Lomuto partition algorithm[0,i],[i,j],[j,k]012210nums[k]=2k++10nums[j]=1,j++0,nums[i]=0,i++\n-\t164O(n)max,min,(max-min)/(n-1)gapn[min,max](max-min)/(n-1)numsnumsint((max - min) / gap + 1)gap\n-\t179\n\n## \n-\t23:K1\n-\t150:pythonswitch\n-\t224:,-11\n-\t373:2k\n\n## \n-\t47:nkk+1Top Solution\n\n## \n-\t74:\n-\t78:\n-\t79:\n-\t89:10\n-\t140:\n-\t153:\n-\t154:153startend\n-\t240:74\n\n## \n-\t98:\n-\t101:(left.left,right.right)(left.right,right.left)\n-\t106:\n-\t107:dfsdfsbfs\n-\t108:\n-\t114:\n-\t144:\n-\t515:BFS\n\n## \n-\t130:top solutionpythonic\n\n## \n-\t4:O(log(m+n))m,n1i2j1$i+j=m-i+n-j$2$B[j-1] <= A[i] and A[i-1] <= B[j]$iji\n-\t57\n-\t122:\n-\t142:\n-\t166:10\n-\t172:n!005*2n5\n-\t202:\n-\t263:\n-\t264:\n-\t313:\n\n## \n-\t131:python[i::-1]\n-\t242:python\n-\t301:\n-\t451:python\n-\t541:python\n\n## \n-\t134:ii+1\n-\t402:k\n-\t452:\n\n## \n-\t70:dp\n-\t96:1nbstans(i)ibstans(i)ans(i-1)f(i,n)ibstnbstleftrightf(i,n)left\\*rightf(i,n)=ans(i-1)\\*ans(n-i)i$ans(n)=\\sum _{i=1}^n f(i,n)$ans(i)=ans(0) \\* ans(n-1) + ans(1) \\* ans(n-2) +  + ans(n-1) \\* ans(0)ans(0)=ans(1)=1 \n-\t139:f[i]==trueikf[i-k]f[i]dfsijs[i:j]0len(s)\n-\t174:0\n-\t312:dp()f[x,y]if[x,i-1]+num[i-1]\\*num[i]\\*num[i+1]+f[i+1,y]i,i\n-\t338:[1,num]1nn/21nn/211\n\t$$\n\tf(x)=\n\t\\begin{cases}\n\tf(n) & x=2n \\\\\n\tf(n)+1 & x=2n+1 \\\\\n\t\\end{cases}\n\t$$\n-\t397:21:\n\t$$\n\tf(x)=\n\t\\begin{cases}\n\tf(n)+1 & x=2n \\\\\n\tmin(f(2n+2)+1,f(2n)+1) & x=2n+1 \\\\\n\t\\end{cases}\n\t$$\n\t$min(f(2n)+1,f(n+1)+2)$1n\n\t\n\tIf n % 4 = 3 and n != 3, then f(n) = f(n + 1) + 1.\n\tIf n % 4 = 1 or n = 3, then f(n) = f(n - 1) + 1.\n\t[](https://discuss.leetcode.com/topic/59350/python-o-log-n-time-o-1-space-with-explanation-and-proof)\t\n-\t472:139139ii-1top solutiontrie[Python](http://thinkwee.top/2017/05/02/trie/#more)\n\t\n## \n-\t247:()ipythonmap\n\n# Poj\n-\t[C++](https://github.com/thinkwee/Poj_Test)\n-\t1062:Dijkstra\n-\t1068:\n-\t1094:\n-\t1328:\n-\t1753:\n-\t1789:Prim\n-\t1860:bellman-ford\n-\t2109:\n-\t2965:\n-\t3259:bellman-ford\n-\t3295:\n\n# \n-\t[2017pre](http://code.bupt.edu.cn/contest/650/)\n-\tA,0Leetcode\n-\tD,poj\n-\tF,\n-\tG,bfs\n-\tH,flyod-1\n-\tI,\t\n\n# hiho\n-\thiho[^1](offer)\n-\t1505(i, j, p, q)i, j, p, qi < j, p < q, Ai + Aj = Ap + Aq2sumsum[i]i \n-\t1506nmdp[i][j]ij:dp[i][j]=dp[i-1][j-1]a[i]+dp[i-1][j](1.0-a[i]);a[i]ij=0\n-\t15071.2.2dfsdfsnn2dfs2O(n)\n-\t1515ABq,yxx,ys,d[root of y]=d[x]-d[y]-s\n","source":"_posts/oj.md","raw":"---\ntitle: Algorithm \ndate: 2017-03-27 19:47:54\ntags:\n-\tcode\n-\tpython\n-\tc++\n-\talgorithm\ncategories:\n-\t\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/20170327/195153747.jpg\nmathjax: true\n---\n\n***\n\n<!--more-->\n\n\n# Leetcode\n-\t[Python](https://github.com/thinkwee/Algorithm_Python)\n-\t[Leetcode](https://leetcode.com/list/wqzcris/)\n\n## \n-\t75:012[0,0,...,0,1,...,1,2,...,2]Lomuto partition algorithm[0,i],[i,j],[j,k]012210nums[k]=2k++10nums[j]=1,j++0,nums[i]=0,i++\n-\t164O(n)max,min,(max-min)/(n-1)gapn[min,max](max-min)/(n-1)numsnumsint((max - min) / gap + 1)gap\n-\t179\n\n## \n-\t23:K1\n-\t150:pythonswitch\n-\t224:,-11\n-\t373:2k\n\n## \n-\t47:nkk+1Top Solution\n\n## \n-\t74:\n-\t78:\n-\t79:\n-\t89:10\n-\t140:\n-\t153:\n-\t154:153startend\n-\t240:74\n\n## \n-\t98:\n-\t101:(left.left,right.right)(left.right,right.left)\n-\t106:\n-\t107:dfsdfsbfs\n-\t108:\n-\t114:\n-\t144:\n-\t515:BFS\n\n## \n-\t130:top solutionpythonic\n\n## \n-\t4:O(log(m+n))m,n1i2j1$i+j=m-i+n-j$2$B[j-1] <= A[i] and A[i-1] <= B[j]$iji\n-\t57\n-\t122:\n-\t142:\n-\t166:10\n-\t172:n!005*2n5\n-\t202:\n-\t263:\n-\t264:\n-\t313:\n\n## \n-\t131:python[i::-1]\n-\t242:python\n-\t301:\n-\t451:python\n-\t541:python\n\n## \n-\t134:ii+1\n-\t402:k\n-\t452:\n\n## \n-\t70:dp\n-\t96:1nbstans(i)ibstans(i)ans(i-1)f(i,n)ibstnbstleftrightf(i,n)left\\*rightf(i,n)=ans(i-1)\\*ans(n-i)i$ans(n)=\\sum _{i=1}^n f(i,n)$ans(i)=ans(0) \\* ans(n-1) + ans(1) \\* ans(n-2) +  + ans(n-1) \\* ans(0)ans(0)=ans(1)=1 \n-\t139:f[i]==trueikf[i-k]f[i]dfsijs[i:j]0len(s)\n-\t174:0\n-\t312:dp()f[x,y]if[x,i-1]+num[i-1]\\*num[i]\\*num[i+1]+f[i+1,y]i,i\n-\t338:[1,num]1nn/21nn/211\n\t$$\n\tf(x)=\n\t\\begin{cases}\n\tf(n) & x=2n \\\\\n\tf(n)+1 & x=2n+1 \\\\\n\t\\end{cases}\n\t$$\n-\t397:21:\n\t$$\n\tf(x)=\n\t\\begin{cases}\n\tf(n)+1 & x=2n \\\\\n\tmin(f(2n+2)+1,f(2n)+1) & x=2n+1 \\\\\n\t\\end{cases}\n\t$$\n\t$min(f(2n)+1,f(n+1)+2)$1n\n\t\n\tIf n % 4 = 3 and n != 3, then f(n) = f(n + 1) + 1.\n\tIf n % 4 = 1 or n = 3, then f(n) = f(n - 1) + 1.\n\t[](https://discuss.leetcode.com/topic/59350/python-o-log-n-time-o-1-space-with-explanation-and-proof)\t\n-\t472:139139ii-1top solutiontrie[Python](http://thinkwee.top/2017/05/02/trie/#more)\n\t\n## \n-\t247:()ipythonmap\n\n# Poj\n-\t[C++](https://github.com/thinkwee/Poj_Test)\n-\t1062:Dijkstra\n-\t1068:\n-\t1094:\n-\t1328:\n-\t1753:\n-\t1789:Prim\n-\t1860:bellman-ford\n-\t2109:\n-\t2965:\n-\t3259:bellman-ford\n-\t3295:\n\n# \n-\t[2017pre](http://code.bupt.edu.cn/contest/650/)\n-\tA,0Leetcode\n-\tD,poj\n-\tF,\n-\tG,bfs\n-\tH,flyod-1\n-\tI,\t\n\n# hiho\n-\thiho[^1](offer)\n-\t1505(i, j, p, q)i, j, p, qi < j, p < q, Ai + Aj = Ap + Aq2sumsum[i]i \n-\t1506nmdp[i][j]ij:dp[i][j]=dp[i-1][j-1]a[i]+dp[i-1][j](1.0-a[i]);a[i]ij=0\n-\t15071.2.2dfsdfsnn2dfs2O(n)\n-\t1515ABq,yxx,ys,d[root of y]=d[x]-d[y]-s\n","slug":"oj","published":1,"updated":"2018-07-23T01:28:38.502Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170327/195153747.jpg"],"comments":1,"layout":"post","link":"","_id":"cjmd072dd002bqcw60d7j3mpd","content":"<hr><p><br><a id=\"more\"></a></p><h1 id=\"Leetcode\"><a href=\"#Leetcode\" class=\"headerlink\" title=\"Leetcode\"></a>Leetcode</h1><ul><li><a href=\"https://github.com/thinkwee/Algorithm_Python\" target=\"_blank\" rel=\"noopener\">Python</a></li><li><a href=\"https://leetcode.com/list/wqzcris/\" target=\"_blank\" rel=\"noopener\">Leetcode</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>75:012[0,0,,0,1,,1,2,,2]Lomuto partition algorithm[0,i],[i,j],[j,k]012210nums[k]=2k++10nums[j]=1,j++0,nums[i]=0,i++</li><li>164O(n)max,min,(max-min)/(n-1)gapn[min,max](max-min)/(n-1)numsnumsint((max - min) / gap + 1)gap</li><li>179</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>23:K1</li><li>150:pythonswitch</li><li>224:,-11</li><li>373:2k</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>47:nkk+1Top Solution</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>74:</li><li>78:</li><li>79:</li><li>89:10</li><li>140:</li><li>153:</li><li>154:153startend</li><li>240:74</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>98:</li><li>101:(left.left,right.right)(left.right,right.left)</li><li>106:</li><li>107:dfsdfsbfs</li><li>108:</li><li>114:</li><li>144:</li><li>515:BFS</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>130:top solutionpythonic</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>4:O(log(m+n))m,n1i2j1$i+j=m-i+n-j$2$B[j-1] &lt;= A[i] and A[i-1] &lt;= B[j]$iji</li><li>57</li><li>122:</li><li>142:</li><li>166:10</li><li>172:n!005*2n5</li><li>202:</li><li>263:</li><li>264:</li><li>313:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>131:python[i::-1]</li><li>242:python</li><li>301:</li><li>451:python</li><li>541:python</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>134:ii+1</li><li>402:k</li><li>452:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>70:dp</li><li>96:1nbstans(i)ibstans(i)ans(i-1)f(i,n)ibstnbstleftrightf(i,n)left*rightf(i,n)=ans(i-1)*ans(n-i)i$ans(n)=\\sum _{i=1}^n f(i,n)$ans(i)=ans(0) * ans(n-1) + ans(1) * ans(n-2) +  + ans(n-1) * ans(0)ans(0)=ans(1)=1</li><li>139:f[i]==trueikf[i-k]f[i]dfsijs[i:j]0len(s)</li><li>174:0</li><li>312:dp()f[x,y]if[x,i-1]+num[i-1]*num[i]*num[i+1]+f[i+1,y]i,i</li><li>338:[1,num]1nn/21nn/211<br>$$<br>f(x)=<br>\\begin{cases}<br>f(n) &amp; x=2n \\\\<br>f(n)+1 &amp; x=2n+1 \\\\<br>\\end{cases}<br>$$</li><li>397:21:<br>$$<br>f(x)=<br>\\begin{cases}<br>f(n)+1 &amp; x=2n \\\\<br>min(f(2n+2)+1,f(2n)+1) &amp; x=2n+1 \\\\<br>\\end{cases}<br>$$<br>$min(f(2n)+1,f(n+1)+2)$1n<br><br>If n % 4 = 3 and n != 3, then f(n) = f(n + 1) + 1.<br>If n % 4 = 1 or n = 3, then f(n) = f(n - 1) + 1.<br><a href=\"https://discuss.leetcode.com/topic/59350/python-o-log-n-time-o-1-space-with-explanation-and-proof\" target=\"_blank\" rel=\"noopener\"></a></li><li>472:139139ii-1top solutiontrie<a href=\"http://thinkwee.top/2017/05/02/trie/#more\">Python</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>247:()ipythonmap</li></ul><h1 id=\"Poj\"><a href=\"#Poj\" class=\"headerlink\" title=\"Poj\"></a>Poj</h1><ul><li><a href=\"https://github.com/thinkwee/Poj_Test\" target=\"_blank\" rel=\"noopener\">C++</a></li><li>1062:Dijkstra</li><li>1068:</li><li>1094:</li><li>1328:</li><li>1753:</li><li>1789:Prim</li><li>1860:bellman-ford</li><li>2109:</li><li>2965:</li><li>3259:bellman-ford</li><li>3295:</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"http://code.bupt.edu.cn/contest/650/\" target=\"_blank\" rel=\"noopener\">2017pre</a></li><li>A,0Leetcode</li><li>D,poj</li><li>F,</li><li>G,bfs</li><li>H,flyod-1</li><li>I,</li></ul><h1 id=\"hiho\"><a href=\"#hiho\" class=\"headerlink\" title=\"hiho\"></a>hiho</h1><ul><li>hiho<a href=\"offer\">^1</a></li><li>1505(i, j, p, q)i, j, p, qi &lt; j, p &lt; q, Ai + Aj = Ap + Aq2sumsum[i]i</li><li>1506nmdp[i][j]ij:dp[i][j]=dp[i-1][j-1]a[i]+dp[i-1]<a href=\"1.0-a[i]\">j</a>;a[i]ij=0</li><li>15071.2.2dfsdfsnn2dfs2O(n)</li><li>1515ABq,yxx,ys,d[root of y]=d[x]-d[y]-s</li></ul>","site":{"data":{}},"excerpt":"<hr><p><br>","more":"</p><h1 id=\"Leetcode\"><a href=\"#Leetcode\" class=\"headerlink\" title=\"Leetcode\"></a>Leetcode</h1><ul><li><a href=\"https://github.com/thinkwee/Algorithm_Python\" target=\"_blank\" rel=\"noopener\">Python</a></li><li><a href=\"https://leetcode.com/list/wqzcris/\" target=\"_blank\" rel=\"noopener\">Leetcode</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>75:012[0,0,,0,1,,1,2,,2]Lomuto partition algorithm[0,i],[i,j],[j,k]012210nums[k]=2k++10nums[j]=1,j++0,nums[i]=0,i++</li><li>164O(n)max,min,(max-min)/(n-1)gapn[min,max](max-min)/(n-1)numsnumsint((max - min) / gap + 1)gap</li><li>179</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>23:K1</li><li>150:pythonswitch</li><li>224:,-11</li><li>373:2k</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>47:nkk+1Top Solution</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>74:</li><li>78:</li><li>79:</li><li>89:10</li><li>140:</li><li>153:</li><li>154:153startend</li><li>240:74</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>98:</li><li>101:(left.left,right.right)(left.right,right.left)</li><li>106:</li><li>107:dfsdfsbfs</li><li>108:</li><li>114:</li><li>144:</li><li>515:BFS</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>130:top solutionpythonic</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>4:O(log(m+n))m,n1i2j1$i+j=m-i+n-j$2$B[j-1] &lt;= A[i] and A[i-1] &lt;= B[j]$iji</li><li>57</li><li>122:</li><li>142:</li><li>166:10</li><li>172:n!005*2n5</li><li>202:</li><li>263:</li><li>264:</li><li>313:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>131:python[i::-1]</li><li>242:python</li><li>301:</li><li>451:python</li><li>541:python</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>134:ii+1</li><li>402:k</li><li>452:</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>70:dp</li><li>96:1nbstans(i)ibstans(i)ans(i-1)f(i,n)ibstnbstleftrightf(i,n)left*rightf(i,n)=ans(i-1)*ans(n-i)i$ans(n)=\\sum _{i=1}^n f(i,n)$ans(i)=ans(0) * ans(n-1) + ans(1) * ans(n-2) +  + ans(n-1) * ans(0)ans(0)=ans(1)=1</li><li>139:f[i]==trueikf[i-k]f[i]dfsijs[i:j]0len(s)</li><li>174:0</li><li>312:dp()f[x,y]if[x,i-1]+num[i-1]*num[i]*num[i+1]+f[i+1,y]i,i</li><li>338:[1,num]1nn/21nn/211<br>$$<br>f(x)=<br>\\begin{cases}<br>f(n) &amp; x=2n \\\\<br>f(n)+1 &amp; x=2n+1 \\\\<br>\\end{cases}<br>$$</li><li>397:21:<br>$$<br>f(x)=<br>\\begin{cases}<br>f(n)+1 &amp; x=2n \\\\<br>min(f(2n+2)+1,f(2n)+1) &amp; x=2n+1 \\\\<br>\\end{cases}<br>$$<br>$min(f(2n)+1,f(n+1)+2)$1n<br><br>If n % 4 = 3 and n != 3, then f(n) = f(n + 1) + 1.<br>If n % 4 = 1 or n = 3, then f(n) = f(n - 1) + 1.<br><a href=\"https://discuss.leetcode.com/topic/59350/python-o-log-n-time-o-1-space-with-explanation-and-proof\" target=\"_blank\" rel=\"noopener\"></a></li><li>472:139139ii-1top solutiontrie<a href=\"http://thinkwee.top/2017/05/02/trie/#more\">Python</a></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>247:()ipythonmap</li></ul><h1 id=\"Poj\"><a href=\"#Poj\" class=\"headerlink\" title=\"Poj\"></a>Poj</h1><ul><li><a href=\"https://github.com/thinkwee/Poj_Test\" target=\"_blank\" rel=\"noopener\">C++</a></li><li>1062:Dijkstra</li><li>1068:</li><li>1094:</li><li>1328:</li><li>1753:</li><li>1789:Prim</li><li>1860:bellman-ford</li><li>2109:</li><li>2965:</li><li>3259:bellman-ford</li><li>3295:</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"http://code.bupt.edu.cn/contest/650/\" target=\"_blank\" rel=\"noopener\">2017pre</a></li><li>A,0Leetcode</li><li>D,poj</li><li>F,</li><li>G,bfs</li><li>H,flyod-1</li><li>I,</li></ul><h1 id=\"hiho\"><a href=\"#hiho\" class=\"headerlink\" title=\"hiho\"></a>hiho</h1><ul><li>hiho<a href=\"offer\">^1</a></li><li>1505(i, j, p, q)i, j, p, qi &lt; j, p &lt; q, Ai + Aj = Ap + Aq2sumsum[i]i</li><li>1506nmdp[i][j]ij:dp[i][j]=dp[i-1][j-1]a[i]+dp[i-1]<a href=\"1.0-a[i]\">j</a>;a[i]ij=0</li><li>15071.2.2dfsdfsnn2dfs2O(n)</li><li>1515ABq,yxx,ys,d[root of y]=d[x]-d[y]-s</li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Algorithm ","path":"2017/03/27/oj/","eyeCatchImage":null,"excerpt":"<hr><p><br>","date":"2017-03-27T11:47:54.000Z","pv":0,"totalPV":0,"categories":"","tags":["code","python","c++","algorithm"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","author":"Thinkwee","date":"2017-01-16T04:01:00.000Z","_content":"***\n\nwordpress\nGitHub Pages,jsGitHub\n\nGitHubPagesGitHubgithub.io\nHexorepository\nrepositorybranch\nmasterhexo\nhexohexo\n\n-\t\t2017.2.8md\n-\t\t2017.2.10mathjax cdn,(blog2.0)\n-\t\t2017.2.13,(blog3.0)\n-\t\t2017.3.30\n-\t\t2017.12.27\n-\t\t2018.7.6\n<!--more-->\n\n# \n-\tNode.js\n-\tgit\n-\tnotepad++markdown()\n-\tchromeMPic()geogebra()\n\n# GitHub&Hexo\nhexojeykellruby,node.js,hexo\n\n-\tgithub\n-\trepository.github.io\"\n-\trepositoryhexohexo\n-\tgit bash cd\n-\t npm install hexohexo initnpm installnpm install hexo-deployer-git\n-\tHexo      _config.ymldeploymaster, \n-\thttps://.github.io/\n-\thexogithubHexodeploymaster,hexomasterhexo\n\n\n\n**Git BashHexo,hexo**\n\n# Hexo\nHexo\n\n _config.yml\n package.json\n scaffolds\n source\n|    _drafts\n|    _posts\n themes\n\n-\tconfig.ymlurlgit\n-\t_posts\n-\ttheme\n-\tconfig.yml\n *\ttitle: \n *\tsubtitle: \t\n *\tdescription: \t\n *\tauthor: \t\n *\tlanguage: zh-Hans\tlanguage\n *\ttimezone: Asia/Shanghai \n *\turl: https://.github.io/\n *\ttype: git\n *\trepo: https://github.com//.github.io.git\n *\t**branch: master**\n\n# Hexo\n\n-\tgit add .  ()\n-\tgit commit -m \"\" (commit)\n-\tgit push origin hexo (github)\n****\n-\tpullpush,GitHub\n-\tpermission denied /.git/configUrl,sshhtmlhttps://www.github.com//.github.io.git\n-\trefusing to merge unrelated histories git pull origin hexo --allow-unrelated-historiesush\n**HexomasterHexo**\n\n\n# Hexo \n\n-\thexo clean \n-\thexo ghexo generate  cleangenerate\n-\thexo shexo server localhost:4000crtl+c\n-\thexo new\"\" _post\n-\thexo dhexo deployclean&generateGitHub Pages\n****\n-\t#npm install hexo-deployer-git --savegit\n-\thexotags:#\n-\tnextgenerateserverserver -s\n\n# Hexo(Windows)\n-\t****:chrome app**(), 1078**,\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192945202.jpg)\n-\t**hexo admin**:hexo-admin\n```Github\nnpm install --save hexo-admin\nhexo server -d\nopen http://localhost:4000/admin/\n```\n*http://localhost:4000/admin/*GUI**,mdmathjax,bug,**,\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192926032.jpg)\n-\thexo admin\n-\t**Typora**:markdown**Typora****word():html,**\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170208/204701798.jpg)\n-\tMacMouSublime\n-\tnotepad++,notepad++\n\n\n\n# \n-\tHexoGitHubcloneconfig.ymltheme\n-\tconfig.ymlGitHubreadme\n\n# \n-\tMarkdown,htmllatex\n\n# \n-\t\n-\tak,sk,chromeak,skmarkdownMPic\n\n# \n-\t$$latex\n-\tmathjax: true\n-\thexomarked.jsmathjax\\\\\\\\\\marked.js\n-\tcdn:\n```\nmathjax:\n  enable: true\n  per_page: true\n  cdn: //cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML\n  ```\n\n# \n-\t1\n-\tcategory\n-\tcategories: \n-\ttags: tags: [1,2....],****\t\n\n# \n-\tnext\n-\tnextconfiggoogle fonts,host//fonts.css.network\n\n# \n- \n```Git\n\tnpm install --save hexo-generator-index\n\tnpm install --save hexo-generator-archive\n\tnpm install --save hexo-generator-tag\n```\n-\tconfig.yml\n```Markdown\n\tindex_generator:\n\tper_page: 5\n\n\tarchive_generator:\n\tper_page: 20\n\tyearly: true\n\tmonthly: true\n\n\ttag_generator:\n\tper_page: 10\n```\n-\tindex, archivetag\n\n# \n-\t~~nextduoshou_shortname~~\n-\tleancloudgitcommentDisqusvaline\n\n# \n-\thexohtml\n\t[hexo-all-minifier](https://github.com/chenzhutian/hexo-all-minifier)\n\n# \n-\tNetcan_Spacetheme[Hexo](http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/)\n\n# cnpm\n-\tcnpm\n\n# RSS\n-\thexo-generator-feedrss:[hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed)\n\n# \n\nhexo:\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113838583.JPG)\n\nmaster\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113915677.JPG)\n\n# \n-\tclonehexo\n *\tclonehexo initconfig.yml\n *\ttheme!themerepositoryclonegitrepository1repository.git\n *\thexo-deployer-git\n *\tnextnpm install\n *\t\n *\t2github\n *\tmodule\n\n# \n-\t[HEXO](https://www.vincentqin.tech/posts/build-a-website-using-hexo/)\n-\tthemerepository[hexo-git-backup](https://github.com/coneycode/hexo-git-backup)\n\n","source":"_posts/setupmywebsite.md","raw":"title: \ntags:\n  - web\n  - hexo\n  - github\ncategories:\n  - \nauthor: Thinkwee\ndate: 2017-01-16 12:01:00\nphoto: http://ojtdnrpmt.bkt.clouddn.com/17-1-16/64914668-file_1484548577493_a7af.png\n---\n***\n\nwordpress\nGitHub Pages,jsGitHub\n\nGitHubPagesGitHubgithub.io\nHexorepository\nrepositorybranch\nmasterhexo\nhexohexo\n\n-\t\t2017.2.8md\n-\t\t2017.2.10mathjax cdn,(blog2.0)\n-\t\t2017.2.13,(blog3.0)\n-\t\t2017.3.30\n-\t\t2017.12.27\n-\t\t2018.7.6\n<!--more-->\n\n# \n-\tNode.js\n-\tgit\n-\tnotepad++markdown()\n-\tchromeMPic()geogebra()\n\n# GitHub&Hexo\nhexojeykellruby,node.js,hexo\n\n-\tgithub\n-\trepository.github.io\"\n-\trepositoryhexohexo\n-\tgit bash cd\n-\t npm install hexohexo initnpm installnpm install hexo-deployer-git\n-\tHexo      _config.ymldeploymaster, \n-\thttps://.github.io/\n-\thexogithubHexodeploymaster,hexomasterhexo\n\n\n\n**Git BashHexo,hexo**\n\n# Hexo\nHexo\n\n _config.yml\n package.json\n scaffolds\n source\n|    _drafts\n|    _posts\n themes\n\n-\tconfig.ymlurlgit\n-\t_posts\n-\ttheme\n-\tconfig.yml\n *\ttitle: \n *\tsubtitle: \t\n *\tdescription: \t\n *\tauthor: \t\n *\tlanguage: zh-Hans\tlanguage\n *\ttimezone: Asia/Shanghai \n *\turl: https://.github.io/\n *\ttype: git\n *\trepo: https://github.com//.github.io.git\n *\t**branch: master**\n\n# Hexo\n\n-\tgit add .  ()\n-\tgit commit -m \"\" (commit)\n-\tgit push origin hexo (github)\n****\n-\tpullpush,GitHub\n-\tpermission denied /.git/configUrl,sshhtmlhttps://www.github.com//.github.io.git\n-\trefusing to merge unrelated histories git pull origin hexo --allow-unrelated-historiesush\n**HexomasterHexo**\n\n\n# Hexo \n\n-\thexo clean \n-\thexo ghexo generate  cleangenerate\n-\thexo shexo server localhost:4000crtl+c\n-\thexo new\"\" _post\n-\thexo dhexo deployclean&generateGitHub Pages\n****\n-\t#npm install hexo-deployer-git --savegit\n-\thexotags:#\n-\tnextgenerateserverserver -s\n\n# Hexo(Windows)\n-\t****:chrome app**(), 1078**,\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192945202.jpg)\n-\t**hexo admin**:hexo-admin\n```Github\nnpm install --save hexo-admin\nhexo server -d\nopen http://localhost:4000/admin/\n```\n*http://localhost:4000/admin/*GUI**,mdmathjax,bug,**,\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192926032.jpg)\n-\thexo admin\n-\t**Typora**:markdown**Typora****word():html,**\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170208/204701798.jpg)\n-\tMacMouSublime\n-\tnotepad++,notepad++\n\n\n\n# \n-\tHexoGitHubcloneconfig.ymltheme\n-\tconfig.ymlGitHubreadme\n\n# \n-\tMarkdown,htmllatex\n\n# \n-\t\n-\tak,sk,chromeak,skmarkdownMPic\n\n# \n-\t$$latex\n-\tmathjax: true\n-\thexomarked.jsmathjax\\\\\\\\\\marked.js\n-\tcdn:\n```\nmathjax:\n  enable: true\n  per_page: true\n  cdn: //cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML\n  ```\n\n# \n-\t1\n-\tcategory\n-\tcategories: \n-\ttags: tags: [1,2....],****\t\n\n# \n-\tnext\n-\tnextconfiggoogle fonts,host//fonts.css.network\n\n# \n- \n```Git\n\tnpm install --save hexo-generator-index\n\tnpm install --save hexo-generator-archive\n\tnpm install --save hexo-generator-tag\n```\n-\tconfig.yml\n```Markdown\n\tindex_generator:\n\tper_page: 5\n\n\tarchive_generator:\n\tper_page: 20\n\tyearly: true\n\tmonthly: true\n\n\ttag_generator:\n\tper_page: 10\n```\n-\tindex, archivetag\n\n# \n-\t~~nextduoshou_shortname~~\n-\tleancloudgitcommentDisqusvaline\n\n# \n-\thexohtml\n\t[hexo-all-minifier](https://github.com/chenzhutian/hexo-all-minifier)\n\n# \n-\tNetcan_Spacetheme[Hexo](http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/)\n\n# cnpm\n-\tcnpm\n\n# RSS\n-\thexo-generator-feedrss:[hexo-generator-feed](https://github.com/hexojs/hexo-generator-feed)\n\n# \n\nhexo:\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113838583.JPG)\n\nmaster\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113915677.JPG)\n\n# \n-\tclonehexo\n *\tclonehexo initconfig.yml\n *\ttheme!themerepositoryclonegitrepository1repository.git\n *\thexo-deployer-git\n *\tnextnpm install\n *\t\n *\t2github\n *\tmodule\n\n# \n-\t[HEXO](https://www.vincentqin.tech/posts/build-a-website-using-hexo/)\n-\tthemerepository[hexo-git-backup](https://github.com/coneycode/hexo-git-backup)\n\n","slug":"setupmywebsite","published":1,"updated":"2018-07-23T01:28:38.518Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/17-1-16/64914668-file_1484548577493_a7af.png"],"comments":1,"layout":"post","link":"","_id":"cjmd072de002eqcw6hub4nmxr","content":"<hr><p>wordpress<br>GitHub Pages,jsGitHub<br><br>GitHubPagesGitHubgithub.io<br>Hexorepository<br>repositorybranch<br>masterhexo<br>hexohexo<br></p><ul><li>2017.2.8md</li><li>2017.2.10mathjax cdn,(blog2.0)</li><li>2017.2.13,(blog3.0)</li><li>2017.3.30</li><li>2017.12.27</li><li>2018.7.6<a id=\"more\"></a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Node.js</li><li>git</li><li>notepad++markdown()</li><li>chromeMPic()geogebra()</li></ul><h1 id=\"GitHub-amp-Hexo\"><a href=\"#GitHub-amp-Hexo\" class=\"headerlink\" title=\"GitHub&amp;Hexo\"></a>GitHub&amp;Hexo</h1><p>hexojeykellruby,node.js,hexo<br></p><ul><li>github</li><li>repository.github.io</li><li>repositoryhexohexo</li><li>git bash cd</li><li> npm install hexohexo initnpm installnpm install hexo-deployer-git</li><li>Hexo _config.ymldeploymaster, </li><li>https://.github.io/</li><li>hexogithubHexodeploymaster,hexomasterhexo</li></ul><p><strong>Git BashHexo,hexo</strong></p><h1 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h1><p>Hexo</p><p> _config.yml<br> package.json<br> scaffolds<br> source<br>|  _drafts<br>|  _posts<br> themes</p><ul><li>config.ymlurlgit</li><li>_posts</li><li>theme</li><li>config.yml<ul><li>title: </li><li>subtitle: </li><li>description: </li><li>author: </li><li>language: zh-Hans language</li><li>timezone: Asia/Shanghai </li><li>url: https://.github.io/</li><li>type: git</li><li>repo: <a href=\"https://github.com//.github.io.git\" target=\"_blank\" rel=\"noopener\">https://github.com//.github.io.git</a></li><li><strong>branch: master</strong></li></ul></li></ul><h1 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h1><p></p><ul><li>git add . ()</li><li>git commit -m  (commit)</li><li>git push origin hexo (github)<br><strong></strong></li><li>pullpush,GitHub</li><li>permission denied /.git/configUrl,sshhtml<a href=\"https://www.github.com//.github.io.git\" target=\"_blank\" rel=\"noopener\">https://www.github.com//.github.io.git</a></li><li>refusing to merge unrelated histories git pull origin hexo allow-unrelated-historiesush<br><strong>HexomasterHexo</strong></li></ul><h1 id=\"Hexo-\"><a href=\"#Hexo-\" class=\"headerlink\" title=\"Hexo \"></a>Hexo </h1><p></p><ul><li>hexo clean </li><li>hexo ghexo generate  cleangenerate</li><li>hexo shexo server localhost:4000crtl+c</li><li>hexo new _post</li><li>hexo dhexo deployclean&amp;generateGitHub Pages<br><strong></strong></li><li>#npm install hexo-deployer-git savegit</li><li>hexotags:#</li><li>nextgenerateserverserver -s</li></ul><h1 id=\"Hexo-Windows\"><a href=\"#Hexo-Windows\" class=\"headerlink\" title=\"Hexo(Windows)\"></a>Hexo(Windows)</h1><ul><li><strong></strong>:chrome app<strong>(), 1078</strong>,<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192945202.jpg\" alt=\"mark\"></li><li><strong>hexo admin</strong>:hexo-admin<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-admin</span><br><span class=\"line\">hexo server -d</span><br><span class=\"line\">open http://localhost:4000/admin/</span><br></pre></td></tr></table></figure></li></ul><p><em><a href=\"http://localhost:4000/admin/\" target=\"_blank\" rel=\"noopener\">http://localhost:4000/admin/</a></em>GUI<strong>,mdmathjax,bug,</strong>,<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192926032.jpg\" alt=\"mark\"></p><ul><li>hexo admin</li><li><strong>Typora</strong>:markdown<strong>Typora</strong><strong>word():html,</strong><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170208/204701798.jpg\" alt=\"mark\"></li><li>MacMouSublime</li><li>notepad++,notepad++</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>HexoGitHubcloneconfig.ymltheme</li><li>config.ymlGitHubreadme</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Markdown,htmllatex</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li>ak,sk,chromeak,skmarkdownMPic</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>$$latex</li><li>mathjax: true</li><li>hexomarked.jsmathjax\\\\\\\\\\marked.js</li><li>cdn:<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mathjax:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  per_page: true</span><br><span class=\"line\">  cdn: //cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>1</li><li>category</li><li>categories: </li><li>tags: tags: [1,2.],<strong></strong></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>next</li><li>nextconfiggoogle fonts,host//fonts.css.network</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-generator-index</span><br><span class=\"line\">npm install --save hexo-generator-archive</span><br><span class=\"line\">npm install --save hexo-generator-tag</span><br></pre></td></tr></table></figure></li><li><p>config.yml</p><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">index_generator:</span><br><span class=\"line\">per_page: 5</span><br><span class=\"line\"></span><br><span class=\"line\">archive_generator:</span><br><span class=\"line\">per_page: 20</span><br><span class=\"line\">yearly: true</span><br><span class=\"line\">monthly: true</span><br><span class=\"line\"></span><br><span class=\"line\">tag_generator:</span><br><span class=\"line\">per_page: 10</span><br></pre></td></tr></table></figure></li><li><p>index, archivetag</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><del>nextduoshou_shortname</del></li><li>leancloudgitcommentDisqusvaline</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>hexohtml<br><a href=\"https://github.com/chenzhutian/hexo-all-minifier\" target=\"_blank\" rel=\"noopener\">hexo-all-minifier</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Netcan_Spacetheme<a href=\"http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/\" target=\"_blank\" rel=\"noopener\">Hexo</a></li></ul><h1 id=\"cnpm\"><a href=\"#cnpm\" class=\"headerlink\" title=\"cnpm\"></a>cnpm</h1><ul><li>cnpm</li></ul><h1 id=\"RSS\"><a href=\"#RSS\" class=\"headerlink\" title=\"RSS\"></a>RSS</h1><ul><li>hexo-generator-feedrss:<a href=\"https://github.com/hexojs/hexo-generator-feed\" target=\"_blank\" rel=\"noopener\">hexo-generator-feed</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>hexo:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113838583.JPG\" alt=\"mark\"></p><p>master<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113915677.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>clonehexo<ul><li>clonehexo initconfig.yml</li><li>theme!themerepositoryclonegitrepository1repository.git</li><li>hexo-deployer-git</li><li>nextnpm install</li><li></li><li>2github</li><li>module</li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"https://www.vincentqin.tech/posts/build-a-website-using-hexo/\" target=\"_blank\" rel=\"noopener\">HEXO</a></li><li>themerepository<a href=\"https://github.com/coneycode/hexo-git-backup\" target=\"_blank\" rel=\"noopener\">hexo-git-backup</a></li></ul>","site":{"data":{}},"excerpt":"<hr><p>wordpress<br>GitHub Pages,jsGitHub<br><br>GitHubPagesGitHubgithub.io<br>Hexorepository<br>repositorybranch<br>masterhexo<br>hexohexo<br></p><ul><li>2017.2.8md</li><li>2017.2.10mathjax cdn,(blog2.0)</li><li>2017.2.13,(blog3.0)</li><li>2017.3.30</li><li>2017.12.27</li><li>2018.7.6","more":"</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Node.js</li><li>git</li><li>notepad++markdown()</li><li>chromeMPic()geogebra()</li></ul><h1 id=\"GitHub-amp-Hexo\"><a href=\"#GitHub-amp-Hexo\" class=\"headerlink\" title=\"GitHub&amp;Hexo\"></a>GitHub&amp;Hexo</h1><p>hexojeykellruby,node.js,hexo<br></p><ul><li>github</li><li>repository.github.io</li><li>repositoryhexohexo</li><li>git bash cd</li><li> npm install hexohexo initnpm installnpm install hexo-deployer-git</li><li>Hexo _config.ymldeploymaster, </li><li>https://.github.io/</li><li>hexogithubHexodeploymaster,hexomasterhexo</li></ul><p><strong>Git BashHexo,hexo</strong></p><h1 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h1><p>Hexo</p><p> _config.yml<br> package.json<br> scaffolds<br> source<br>|  _drafts<br>|  _posts<br> themes</p><ul><li>config.ymlurlgit</li><li>_posts</li><li>theme</li><li>config.yml<ul><li>title: </li><li>subtitle: </li><li>description: </li><li>author: </li><li>language: zh-Hans language</li><li>timezone: Asia/Shanghai </li><li>url: https://.github.io/</li><li>type: git</li><li>repo: <a href=\"https://github.com//.github.io.git\" target=\"_blank\" rel=\"noopener\">https://github.com//.github.io.git</a></li><li><strong>branch: master</strong></li></ul></li></ul><h1 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h1><p></p><ul><li>git add . ()</li><li>git commit -m  (commit)</li><li>git push origin hexo (github)<br><strong></strong></li><li>pullpush,GitHub</li><li>permission denied /.git/configUrl,sshhtml<a href=\"https://www.github.com//.github.io.git\" target=\"_blank\" rel=\"noopener\">https://www.github.com//.github.io.git</a></li><li>refusing to merge unrelated histories git pull origin hexo allow-unrelated-historiesush<br><strong>HexomasterHexo</strong></li></ul><h1 id=\"Hexo-\"><a href=\"#Hexo-\" class=\"headerlink\" title=\"Hexo \"></a>Hexo </h1><p></p><ul><li>hexo clean </li><li>hexo ghexo generate  cleangenerate</li><li>hexo shexo server localhost:4000crtl+c</li><li>hexo new _post</li><li>hexo dhexo deployclean&amp;generateGitHub Pages<br><strong></strong></li><li>#npm install hexo-deployer-git savegit</li><li>hexotags:#</li><li>nextgenerateserverserver -s</li></ul><h1 id=\"Hexo-Windows\"><a href=\"#Hexo-Windows\" class=\"headerlink\" title=\"Hexo(Windows)\"></a>Hexo(Windows)</h1><ul><li><strong></strong>:chrome app<strong>(), 1078</strong>,<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192945202.jpg\" alt=\"mark\"></li><li><strong>hexo admin</strong>:hexo-admin<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-admin</span><br><span class=\"line\">hexo server -d</span><br><span class=\"line\">open http://localhost:4000/admin/</span><br></pre></td></tr></table></figure></li></ul><p><em><a href=\"http://localhost:4000/admin/\" target=\"_blank\" rel=\"noopener\">http://localhost:4000/admin/</a></em>GUI<strong>,mdmathjax,bug,</strong>,<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170203/192926032.jpg\" alt=\"mark\"></p><ul><li>hexo admin</li><li><strong>Typora</strong>:markdown<strong>Typora</strong><strong>word():html,</strong><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170208/204701798.jpg\" alt=\"mark\"></li><li>MacMouSublime</li><li>notepad++,notepad++</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>HexoGitHubcloneconfig.ymltheme</li><li>config.ymlGitHubreadme</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Markdown,htmllatex</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li>ak,sk,chromeak,skmarkdownMPic</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>$$latex</li><li>mathjax: true</li><li>hexomarked.jsmathjax\\\\\\\\\\marked.js</li><li>cdn:<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mathjax:</span><br><span class=\"line\">  enable: true</span><br><span class=\"line\">  per_page: true</span><br><span class=\"line\">  cdn: //cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span><br></pre></td></tr></table></figure></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>1</li><li>category</li><li>categories: </li><li>tags: tags: [1,2.],<strong></strong></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>next</li><li>nextconfiggoogle fonts,host//fonts.css.network</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-generator-index</span><br><span class=\"line\">npm install --save hexo-generator-archive</span><br><span class=\"line\">npm install --save hexo-generator-tag</span><br></pre></td></tr></table></figure></li><li><p>config.yml</p><figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">index_generator:</span><br><span class=\"line\">per_page: 5</span><br><span class=\"line\"></span><br><span class=\"line\">archive_generator:</span><br><span class=\"line\">per_page: 20</span><br><span class=\"line\">yearly: true</span><br><span class=\"line\">monthly: true</span><br><span class=\"line\"></span><br><span class=\"line\">tag_generator:</span><br><span class=\"line\">per_page: 10</span><br></pre></td></tr></table></figure></li><li><p>index, archivetag</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><del>nextduoshou_shortname</del></li><li>leancloudgitcommentDisqusvaline</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>hexohtml<br><a href=\"https://github.com/chenzhutian/hexo-all-minifier\" target=\"_blank\" rel=\"noopener\">hexo-all-minifier</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Netcan_Spacetheme<a href=\"http://www.netcan666.com/2015/11/22/%E8%A7%A3%E5%86%B3Hexo%E7%BD%AE%E9%A1%B6%E9%97%AE%E9%A2%98/\" target=\"_blank\" rel=\"noopener\">Hexo</a></li></ul><h1 id=\"cnpm\"><a href=\"#cnpm\" class=\"headerlink\" title=\"cnpm\"></a>cnpm</h1><ul><li>cnpm</li></ul><h1 id=\"RSS\"><a href=\"#RSS\" class=\"headerlink\" title=\"RSS\"></a>RSS</h1><ul><li>hexo-generator-feedrss:<a href=\"https://github.com/hexojs/hexo-generator-feed\" target=\"_blank\" rel=\"noopener\">hexo-generator-feed</a></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p>hexo:<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113838583.JPG\" alt=\"mark\"></p><p>master<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/20170121/113915677.JPG\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>clonehexo<ul><li>clonehexo initconfig.yml</li><li>theme!themerepositoryclonegitrepository1repository.git</li><li>hexo-deployer-git</li><li>nextnpm install</li><li></li><li>2github</li><li>module</li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><a href=\"https://www.vincentqin.tech/posts/build-a-website-using-hexo/\" target=\"_blank\" rel=\"noopener\">HEXO</a></li><li>themerepository<a href=\"https://github.com/coneycode/hexo-git-backup\" target=\"_blank\" rel=\"noopener\">hexo-git-backup</a></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"","path":"2017/01/16/setupmywebsite/","eyeCatchImage":null,"excerpt":"<hr><p>wordpress<br>GitHub Pages,jsGitHub<br><br>GitHubPagesGitHubgithub.io<br>Hexorepository<br>repositorybranch<br>masterhexo<br>hexohexo<br></p><ul><li>2017.2.8md</li><li>2017.2.10mathjax cdn,(blog2.0)</li><li>2017.2.13,(blog3.0)</li><li>2017.3.30</li><li>2017.12.27</li><li>2018.7.6","date":"2017-01-16T04:01:00.000Z","pv":0,"totalPV":0,"categories":"","tags":["web","hexo","github"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-08-09T02:03:46.000Z","mathjax":true,"html":true,"_content":"***\n\n\n\n\n<!--more-->\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/1lg8jI0Bfe.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/dg79KfJ6LG.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/BiH0Ae7hf3.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/5mH2Lc8EKA.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/GEebi0EGfA.jpg?imageslim)\n# k\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lBbBE0iAbd.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/diCeKIIKjd.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/LDadChj6HF.jpg?imageslim)\n# \n-\tGBDT\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/6Hee6Cgh7I.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/D4agk9eK5e.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/mF6BD8AFm8.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Kb0chj4hBI.jpg?imageslim)\n# \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ADGijmf5lh.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/j2eFgF2JL9.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/g2H4e4kfKL.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/2G6eFkEAF2.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/iBafKl6LLc.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/0eckEhF2ID.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/9A8mffeIe5.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lk4KHEA8f4.jpg?imageslim)\n# \n-\tXGBoost\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/AAFA9K0D8g.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/a39G37jjCH.jpg?imageslim)\n# EM\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/4EaGEHG3fC.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/fi8EcEa2Li.jpg?imageslim)\n\n-\tEMkjkresponsibility$n_k$kresponsibility$$N$GMMresponsibility\n-\tresponsibilityEM\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/B8a4fcL3F8.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/KfH43akdkI.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ggL7E50ckI.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/E9EFhCgL5E.jpg?imageslim)\n# \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Bk5Bj6dfEg.jpg?imageslim)\n","source":"_posts/statistical-handwriting.md","raw":"---\ntitle: \ndate: 2018-08-09 10:03:46\ncategories: \ntags:\n- code\n- machine learning\n- statistical learning\n- math\n\nmathjax: true\nhtml: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180809/8mFd81eem2.PNG\n---\n***\n\n\n\n\n<!--more-->\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/1lg8jI0Bfe.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/dg79KfJ6LG.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/BiH0Ae7hf3.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/5mH2Lc8EKA.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/GEebi0EGfA.jpg?imageslim)\n# k\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lBbBE0iAbd.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/diCeKIIKjd.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/LDadChj6HF.jpg?imageslim)\n# \n-\tGBDT\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/6Hee6Cgh7I.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/D4agk9eK5e.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/mF6BD8AFm8.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Kb0chj4hBI.jpg?imageslim)\n# \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ADGijmf5lh.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/j2eFgF2JL9.jpg?imageslim)\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/g2H4e4kfKL.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/2G6eFkEAF2.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/iBafKl6LLc.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/0eckEhF2ID.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/9A8mffeIe5.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lk4KHEA8f4.jpg?imageslim)\n# \n-\tXGBoost\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/AAFA9K0D8g.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/a39G37jjCH.jpg?imageslim)\n# EM\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/4EaGEHG3fC.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/fi8EcEa2Li.jpg?imageslim)\n\n-\tEMkjkresponsibility$n_k$kresponsibility$$N$GMMresponsibility\n-\tresponsibilityEM\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/B8a4fcL3F8.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/KfH43akdkI.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ggL7E50ckI.jpg?imageslim)\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/E9EFhCgL5E.jpg?imageslim)\n# \n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Bk5Bj6dfEg.jpg?imageslim)\n","slug":"statistical-handwriting","published":1,"updated":"2018-08-28T09:43:30.992Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180809/8mFd81eem2.PNG"],"comments":1,"layout":"post","link":"","_id":"cjmd072dg002jqcw6br15sstp","content":"<hr><p><br><br></p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/1lg8jI0Bfe.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/dg79KfJ6LG.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/BiH0Ae7hf3.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/5mH2Lc8EKA.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/GEebi0EGfA.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lBbBE0iAbd.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/diCeKIIKjd.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/LDadChj6HF.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>GBDT<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/6Hee6Cgh7I.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/D4agk9eK5e.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/mF6BD8AFm8.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Kb0chj4hBI.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ADGijmf5lh.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/j2eFgF2JL9.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/g2H4e4kfKL.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/2G6eFkEAF2.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/iBafKl6LLc.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/0eckEhF2ID.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/9A8mffeIe5.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lk4KHEA8f4.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>XGBoost<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/AAFA9K0D8g.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/a39G37jjCH.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/4EaGEHG3fC.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/fi8EcEa2Li.jpg?imageslim\" alt=\"mark\"></p><ul><li>EMkjkresponsibility$n_k$kresponsibility$$N$GMMresponsibility</li><li>responsibilityEM</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/B8a4fcL3F8.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/KfH43akdkI.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ggL7E50ckI.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/E9EFhCgL5E.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Bk5Bj6dfEg.jpg?imageslim\" alt=\"mark\"></li></ul>","site":{"data":{}},"excerpt":"<hr><p><br><br></p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/1lg8jI0Bfe.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/dg79KfJ6LG.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/BiH0Ae7hf3.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/5mH2Lc8EKA.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/GEebi0EGfA.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"k\"><a href=\"#k\" class=\"headerlink\" title=\"k\"></a>k</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lBbBE0iAbd.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/diCeKIIKjd.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/LDadChj6HF.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>GBDT<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/6Hee6Cgh7I.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/D4agk9eK5e.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/mF6BD8AFm8.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Kb0chj4hBI.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ADGijmf5lh.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/j2eFgF2JL9.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/g2H4e4kfKL.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/2G6eFkEAF2.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/iBafKl6LLc.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/0eckEhF2ID.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/9A8mffeIe5.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/lk4KHEA8f4.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>XGBoost<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/AAFA9K0D8g.jpg?imageslim\" alt=\"mark\"></li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/a39G37jjCH.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"EM\"><a href=\"#EM\" class=\"headerlink\" title=\"EM\"></a>EM</h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/4EaGEHG3fC.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/fi8EcEa2Li.jpg?imageslim\" alt=\"mark\"></p><ul><li>EMkjkresponsibility$n_k$kresponsibility$$N$GMMresponsibility</li><li>responsibilityEM</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/B8a4fcL3F8.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/KfH43akdkI.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/ggL7E50ckI.jpg?imageslim\" alt=\"mark\"></p><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/E9EFhCgL5E.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180809/Bk5Bj6dfEg.jpg?imageslim\" alt=\"mark\"></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Tue Aug 28 2018 17:43:30 GMT+0800 ()","title":"","path":"2018/08/09/statistical-handwriting/","eyeCatchImage":null,"excerpt":"<hr><p><br><br></p>","date":"2018-08-09T02:03:46.000Z","pv":0,"totalPV":0,"categories":"","tags":["math","code","machine learning","statistical learning"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"","date":"2018-07-04T07:58:59.000Z","mathjax":true,"html":true,"_content":"\nseq2seq\n\n\n<!--more-->\n\n# \n-\tNatural Language ProcessinNLP\n-\t288\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/H60Ak44CGg.jpg?imageslim)\n\n# \n##\t\n-\tRecurrent Neural NetworkRNN\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EJdEd3A25h.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lEfFHL4Ie3.jpg?imageslim)\n\n##\tLSTMGRU\n-\tRNN RNN \n-\tLSTMLSTM\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jAe0lJ2KeD.jpg?imageslim)\n-\tGRULSTMGRU  1 GRU  LSTM \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jLgI1a8LcJ.jpg?imageslim)\n\n##\t\n-\tword2vec\n-\tWord VectorWord EmbeddingDistributed RepresentationOne-hot Representation V  V  1 0 1\n V  $\\sqrt[k] V$ k  4 1  0 (Neural Network Language ModelNNLM) NNLM \n-\tword2vecskipgram\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekGC6f2lmi.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/mk1I5cG56K.jpg?imageslim)\n-\tMikolovNNLM Word2Vec  Skip Gram )  CBOW  CBOW Skip Gram  2-1  Wtotal  Skip Gram  4  Wtotal  CBOW \n-\tWord2Vec Word Embedding MatrixEmbedding Look Up Softmax \n-\t Word2Vec  SoftmaxHierarchical SoftmaxNoise Contrastive Estimation\n\n##\t\n-\t NLP Alignment\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8HFdB4k4i3.jpg?imageslim)\n\n##\t\n-\tseq2seqRNNRNNRNNCNN\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GGL6KGmj64.jpg?imageslim)\n-\t\n\t-\t\n\t-\tLSTM  GRU \n\t-\t RNN 3-1  8  RNN 5  3 RNN  RNN \n\n## \n-\t01mask\n\n# \n-\tUNKpadding\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lJ0kcHJgl8.jpg?imageslim)\n-\tembedding lookup\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/7HLld3059D.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8I2DG7I38e.png?imageslim)\n-\t(label)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GHe6CliiHJ.png?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CBaaBiFb64.jpg?imageslim)\n\n# \n-\t\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/j1J086Ikb8.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/6FD34B5ALc.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/b776dIjkI5.jpg?imageslim)\n\n# \n-\tROUGE-F1\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EI71b1h7J1.png?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jkdJI4gmk1.png?imageslim)\n-\t74%\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/d54gL3IlGD.png?imageslim)\n-\tbatch\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/J8cB6f566i.png?imageslim)\n\n# \n-\tunkunk)unkROUGEROUGEROUGE\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/204g2F7645.png?imageslim)\n-\t...... ...... ............\n\t-\t\n\t-\t-\n\t-\t\n\t-\t\n\t ROUGE-1  ROUGE-L  30 ROUGE \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Em35i3Ah6J.png?imageslim)\n\n# \n-\tgithub-\t[Abstract_Summarization_Tensorflow](https://github.com/thinkwee/Abstract_Summarization_Tensorflow)\n-\tUbuntu 16.04\n-\tTensorflow 1.6\n-\tCUDA 9.0\n-\tCudnn 7.1.2\n-\tGigawords30\n-\tGTX106634\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CEglkLLcD2.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/BAbBd73m7L.JPG)\n\n","source":"_posts/seq2seq-summarization.md","raw":"---\ntitle: \ndate: 2018-07-04 15:58:59\ntags:\n  - abstractive summarization\n  - seq2seq\n  - machinelearning\n  -\trnn\n  -\tnlp\n  - lstm\n  - gru\ncategories:\n  - \nmathjax: true\nhtml: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180704/27AhFDi986.png?imageslim\n---\n\nseq2seq\n\n\n<!--more-->\n\n# \n-\tNatural Language ProcessinNLP\n-\t288\n\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/H60Ak44CGg.jpg?imageslim)\n\n# \n##\t\n-\tRecurrent Neural NetworkRNN\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EJdEd3A25h.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lEfFHL4Ie3.jpg?imageslim)\n\n##\tLSTMGRU\n-\tRNN RNN \n-\tLSTMLSTM\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jAe0lJ2KeD.jpg?imageslim)\n-\tGRULSTMGRU  1 GRU  LSTM \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jLgI1a8LcJ.jpg?imageslim)\n\n##\t\n-\tword2vec\n-\tWord VectorWord EmbeddingDistributed RepresentationOne-hot Representation V  V  1 0 1\n V  $\\sqrt[k] V$ k  4 1  0 (Neural Network Language ModelNNLM) NNLM \n-\tword2vecskipgram\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekGC6f2lmi.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/mk1I5cG56K.jpg?imageslim)\n-\tMikolovNNLM Word2Vec  Skip Gram )  CBOW  CBOW Skip Gram  2-1  Wtotal  Skip Gram  4  Wtotal  CBOW \n-\tWord2Vec Word Embedding MatrixEmbedding Look Up Softmax \n-\t Word2Vec  SoftmaxHierarchical SoftmaxNoise Contrastive Estimation\n\n##\t\n-\t NLP Alignment\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8HFdB4k4i3.jpg?imageslim)\n\n##\t\n-\tseq2seqRNNRNNRNNCNN\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GGL6KGmj64.jpg?imageslim)\n-\t\n\t-\t\n\t-\tLSTM  GRU \n\t-\t RNN 3-1  8  RNN 5  3 RNN  RNN \n\n## \n-\t01mask\n\n# \n-\tUNKpadding\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lJ0kcHJgl8.jpg?imageslim)\n-\tembedding lookup\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/7HLld3059D.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8I2DG7I38e.png?imageslim)\n-\t(label)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GHe6CliiHJ.png?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CBaaBiFb64.jpg?imageslim)\n\n# \n-\t\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/j1J086Ikb8.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/6FD34B5ALc.jpg?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/b776dIjkI5.jpg?imageslim)\n\n# \n-\tROUGE-F1\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EI71b1h7J1.png?imageslim)\n-\t\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jkdJI4gmk1.png?imageslim)\n-\t74%\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/d54gL3IlGD.png?imageslim)\n-\tbatch\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/J8cB6f566i.png?imageslim)\n\n# \n-\tunkunk)unkROUGEROUGEROUGE\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/204g2F7645.png?imageslim)\n-\t...... ...... ............\n\t-\t\n\t-\t-\n\t-\t\n\t-\t\n\t ROUGE-1  ROUGE-L  30 ROUGE \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Em35i3Ah6J.png?imageslim)\n\n# \n-\tgithub-\t[Abstract_Summarization_Tensorflow](https://github.com/thinkwee/Abstract_Summarization_Tensorflow)\n-\tUbuntu 16.04\n-\tTensorflow 1.6\n-\tCUDA 9.0\n-\tCudnn 7.1.2\n-\tGigawords30\n-\tGTX106634\n\n# \n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CEglkLLcD2.JPG)\n![mark](http://ojtdnrpmt.bkt.clouddn.com/blog/180704/BAbBd73m7L.JPG)\n\n","slug":"seq2seq-summarization","published":1,"updated":"2018-07-23T01:28:38.518Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180704/27AhFDi986.png?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072dh002mqcw6vp0xmfap","content":"<p>seq2seq<br></p><a id=\"more\"></a><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Natural Language ProcessinNLP</li><li>288</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/H60Ak44CGg.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Recurrent Neural NetworkRNN</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EJdEd3A25h.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lEfFHL4Ie3.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"LSTMGRU\"><a href=\"#LSTMGRU\" class=\"headerlink\" title=\"LSTMGRU\"></a>LSTMGRU</h2><ul><li>RNN RNN </li><li>LSTMLSTM<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jAe0lJ2KeD.jpg?imageslim\" alt=\"mark\"></li><li>GRULSTMGRU  1 GRU  LSTM <br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jLgI1a8LcJ.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>word2vec</li><li>Word VectorWord EmbeddingDistributed RepresentationOne-hot Representation V  V  1 0 1<br> V  $\\sqrt[k] V$ k  4 1  0 (Neural Network Language ModelNNLM) NNLM </li><li>word2vecskipgram<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekGC6f2lmi.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/mk1I5cG56K.jpg?imageslim\" alt=\"mark\"></li><li>MikolovNNLM Word2Vec  Skip Gram )  CBOW  CBOW Skip Gram  2-1  Wtotal  Skip Gram  4  Wtotal  CBOW </li><li>Word2Vec Word Embedding MatrixEmbedding Look Up Softmax </li><li> Word2Vec  SoftmaxHierarchical SoftmaxNoise Contrastive Estimation</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li> NLP Alignment<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8HFdB4k4i3.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>seq2seqRNNRNNRNNCNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GGL6KGmj64.jpg?imageslim\" alt=\"mark\"></li><li><ul><li></li><li>LSTM  GRU </li><li> RNN 3-1  8  RNN 5  3 RNN  RNN </li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>01mask</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>UNKpadding<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lJ0kcHJgl8.jpg?imageslim\" alt=\"mark\"></li><li>embedding lookup<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/7HLld3059D.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8I2DG7I38e.png?imageslim\" alt=\"mark\"></li><li>(label)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GHe6CliiHJ.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CBaaBiFb64.jpg?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/j1J086Ikb8.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/6FD34B5ALc.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/b776dIjkI5.jpg?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>ROUGE-F1<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EI71b1h7J1.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jkdJI4gmk1.png?imageslim\" alt=\"mark\"></li><li>74%<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/d54gL3IlGD.png?imageslim\" alt=\"mark\"></li><li>batch<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/J8cB6f566i.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>unkunk)unkROUGEROUGEROUGE<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/204g2F7645.png?imageslim\" alt=\"mark\"></li><li>  <ul><li></li><li>-</li><li></li><li><br> ROUGE-1  ROUGE-L  30 ROUGE <br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Em35i3Ah6J.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>github- <a href=\"https://github.com/thinkwee/Abstract_Summarization_Tensorflow\" target=\"_blank\" rel=\"noopener\">Abstract_Summarization_Tensorflow</a></li><li>Ubuntu 16.04</li><li>Tensorflow 1.6</li><li>CUDA 9.0</li><li>Cudnn 7.1.2</li><li>Gigawords30</li><li>GTX106634</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CEglkLLcD2.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/BAbBd73m7L.JPG\" alt=\"mark\"></p>","site":{"data":{}},"excerpt":"<p>seq2seq<br></p>","more":"<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>Natural Language ProcessinNLP</li><li>288</li></ul><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/H60Ak44CGg.jpg?imageslim\" alt=\"mark\"></p><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>Recurrent Neural NetworkRNN</li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EJdEd3A25h.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lEfFHL4Ie3.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"LSTMGRU\"><a href=\"#LSTMGRU\" class=\"headerlink\" title=\"LSTMGRU\"></a>LSTMGRU</h2><ul><li>RNN RNN </li><li>LSTMLSTM<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jAe0lJ2KeD.jpg?imageslim\" alt=\"mark\"></li><li>GRULSTMGRU  1 GRU  LSTM <br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jLgI1a8LcJ.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>word2vec</li><li>Word VectorWord EmbeddingDistributed RepresentationOne-hot Representation V  V  1 0 1<br> V  $\\sqrt[k] V$ k  4 1  0 (Neural Network Language ModelNNLM) NNLM </li><li>word2vecskipgram<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/ekGC6f2lmi.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/mk1I5cG56K.jpg?imageslim\" alt=\"mark\"></li><li>MikolovNNLM Word2Vec  Skip Gram )  CBOW  CBOW Skip Gram  2-1  Wtotal  Skip Gram  4  Wtotal  CBOW </li><li>Word2Vec Word Embedding MatrixEmbedding Look Up Softmax </li><li> Word2Vec  SoftmaxHierarchical SoftmaxNoise Contrastive Estimation</li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li> NLP Alignment<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8HFdB4k4i3.jpg?imageslim\" alt=\"mark\"></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>seq2seqRNNRNNRNNCNN<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GGL6KGmj64.jpg?imageslim\" alt=\"mark\"></li><li><ul><li></li><li>LSTM  GRU </li><li> RNN 3-1  8  RNN 5  3 RNN  RNN </li></ul></li></ul><h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul><li>01mask</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>UNKpadding<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/lJ0kcHJgl8.jpg?imageslim\" alt=\"mark\"></li><li>embedding lookup<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/7HLld3059D.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/8I2DG7I38e.png?imageslim\" alt=\"mark\"></li><li>(label)<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/GHe6CliiHJ.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CBaaBiFb64.jpg?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/j1J086Ikb8.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/6FD34B5ALc.jpg?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/b776dIjkI5.jpg?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>ROUGE-F1<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/EI71b1h7J1.png?imageslim\" alt=\"mark\"></li><li><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/jkdJI4gmk1.png?imageslim\" alt=\"mark\"></li><li>74%<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/d54gL3IlGD.png?imageslim\" alt=\"mark\"></li><li>batch<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/J8cB6f566i.png?imageslim\" alt=\"mark\"></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>unkunk)unkROUGEROUGEROUGE<br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/204g2F7645.png?imageslim\" alt=\"mark\"></li><li>  <ul><li></li><li>-</li><li></li><li><br> ROUGE-1  ROUGE-L  30 ROUGE <br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/Em35i3Ah6J.png?imageslim\" alt=\"mark\"></li></ul></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>github- <a href=\"https://github.com/thinkwee/Abstract_Summarization_Tensorflow\" target=\"_blank\" rel=\"noopener\">Abstract_Summarization_Tensorflow</a></li><li>Ubuntu 16.04</li><li>Tensorflow 1.6</li><li>CUDA 9.0</li><li>Cudnn 7.1.2</li><li>Gigawords30</li><li>GTX106634</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/CEglkLLcD2.JPG\" alt=\"mark\"><br><img src=\"http://ojtdnrpmt.bkt.clouddn.com/blog/180704/BAbBd73m7L.JPG\" alt=\"mark\"></p>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"","path":"2018/07/04/seq2seq-summarization/","eyeCatchImage":null,"excerpt":"<p>seq2seq<br></p>","date":"2018-07-04T07:58:59.000Z","pv":0,"totalPV":0,"categories":"","tags":["abstractive summarization","machinelearning","nlp","seq2seq","rnn","lstm","gru"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Python","date":"2017-05-02T02:09:19.000Z","_content":"***\nPythonPython\n\n<!--more-->\n\n# (trie)\n-\t\n-\t\n-\tcount++None\n\n# \n-\tleetcode472\n-\ttrie\n\t```Python\n\t\ttrie = {}\n\t```\n-\ttrie\n\t```Python\n\t\tdef insert(trie, w):\n\t\t\tfor c in w:\n\t\t\t\ttrie = trie.setdefault(c, {})  # if c not in trie then set trie[c]={}\n\t\t\ttrie[None] = w\n\t```\n\t\n\tNone(,\n\t[\"cat\", \"cats\",\"dog\", \"rat\"]\n-\ttrie\n\t```Python\n\t\tdef prefixs(trie, w, lo):\n\t\t\tfor i in range(lo, len(w)):\n\t\t\t\ttrie = trie.get(w[i])\n\t\t\t\tif trie is None:\n\t\t\t\t\tbreak\n\t\t\t\tprefix = trie.get(None)\n\t\t\tif prefix:\n\t\t\t\tyield i + 1, prefix\n\t```\n\twiloitriei+1\n\ttrie\n\t\n# \n-\tlltrie[i:l]\n-\t\n-\t\n\t\t\t\t","source":"_posts/trie.md","raw":"---\ntitle: Python\ndate: 2017-05-02 10:09:19\ntags:\n-\tcode\n-\tpython\ncategories:\n-\tPython\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/20170502/101155629.JPG\n---\n***\nPythonPython\n\n<!--more-->\n\n# (trie)\n-\t\n-\t\n-\tcount++None\n\n# \n-\tleetcode472\n-\ttrie\n\t```Python\n\t\ttrie = {}\n\t```\n-\ttrie\n\t```Python\n\t\tdef insert(trie, w):\n\t\t\tfor c in w:\n\t\t\t\ttrie = trie.setdefault(c, {})  # if c not in trie then set trie[c]={}\n\t\t\ttrie[None] = w\n\t```\n\t\n\tNone(,\n\t[\"cat\", \"cats\",\"dog\", \"rat\"]\n-\ttrie\n\t```Python\n\t\tdef prefixs(trie, w, lo):\n\t\t\tfor i in range(lo, len(w)):\n\t\t\t\ttrie = trie.get(w[i])\n\t\t\t\tif trie is None:\n\t\t\t\t\tbreak\n\t\t\t\tprefix = trie.get(None)\n\t\t\tif prefix:\n\t\t\t\tyield i + 1, prefix\n\t```\n\twiloitriei+1\n\ttrie\n\t\n# \n-\tlltrie[i:l]\n-\t\n-\t\n\t\t\t\t","slug":"trie","published":1,"updated":"2018-07-23T01:28:38.518Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/20170502/101155629.JPG"],"comments":1,"layout":"post","link":"","_id":"cjmd072dj002pqcw61zo6vmeo","content":"<hr><p>PythonPython</p><a id=\"more\"></a><h1 id=\"-trie\"><a href=\"#-trie\" class=\"headerlink\" title=\"(trie)\"></a>(trie)</h1><ul><li></li><li></li><li>count++None</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>leetcode472</li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trie = &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert</span><span class=\"params\">(trie, w)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> w:</span><br><span class=\"line\">\t\ttrie = trie.setdefault(c, &#123;&#125;)  <span class=\"comment\"># if c not in trie then set trie[c]=&#123;&#125;</span></span><br><span class=\"line\">\ttrie[<span class=\"keyword\">None</span>] = w</span><br></pre></td></tr></table></figure><p><br>None(,<br>[cat, cats,dog, rat]</p></li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">prefixs</span><span class=\"params\">(trie, w, lo)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(lo, len(w)):</span><br><span class=\"line\">\t\ttrie = trie.get(w[i])</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> trie <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\tprefix = trie.get(<span class=\"keyword\">None</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> prefix:</span><br><span class=\"line\">\t\t<span class=\"keyword\">yield</span> i + <span class=\"number\">1</span>, prefix</span><br></pre></td></tr></table></figure><p>wiloitriei+1<br>trie</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>lltrie[i:l]</li><li></li><li></li></ul>","site":{"data":{}},"excerpt":"<hr><p>PythonPython</p>","more":"<h1 id=\"-trie\"><a href=\"#-trie\" class=\"headerlink\" title=\"(trie)\"></a>(trie)</h1><ul><li></li><li></li><li>count++None</li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>leetcode472</li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trie = &#123;&#125;</span><br></pre></td></tr></table></figure></li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">insert</span><span class=\"params\">(trie, w)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> c <span class=\"keyword\">in</span> w:</span><br><span class=\"line\">\t\ttrie = trie.setdefault(c, &#123;&#125;)  <span class=\"comment\"># if c not in trie then set trie[c]=&#123;&#125;</span></span><br><span class=\"line\">\ttrie[<span class=\"keyword\">None</span>] = w</span><br></pre></td></tr></table></figure><p><br>None(,<br>[cat, cats,dog, rat]</p></li><li><p>trie</p><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">prefixs</span><span class=\"params\">(trie, w, lo)</span>:</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> range(lo, len(w)):</span><br><span class=\"line\">\t\ttrie = trie.get(w[i])</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> trie <span class=\"keyword\">is</span> <span class=\"keyword\">None</span>:</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">break</span></span><br><span class=\"line\">\t\tprefix = trie.get(<span class=\"keyword\">None</span>)</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> prefix:</span><br><span class=\"line\">\t\t<span class=\"keyword\">yield</span> i + <span class=\"number\">1</span>, prefix</span><br></pre></td></tr></table></figure><p>wiloitriei+1<br>trie</p></li></ul><h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><ul><li>lltrie[i:l]</li><li></li><li></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Python","path":"2017/05/02/trie/","eyeCatchImage":null,"excerpt":"<hr><p>PythonPython</p>","date":"2017-05-02T02:09:19.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["code","python"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"Tensorflow","date":"2018-01-10T01:15:39.000Z","mathjax":true,"_content":"\n-\ttensorflow \n-\t\n-\tStanford CS20SI\n\n<!--more-->\n\n# CS20SI\n-\t[Tensorflow_Learn](https://github.com/thinkwee/Tensorflow_Learn)\n-\tsessionopgraph\n-\tsummarytensorboard\n-\tB17[CS20SI - Tensorflow for Deep Learning Research](https://www.bilibili.com/video/av15898988/)\n-\t\n\n# TF\n-\t\n-\tint() argument must be a string, a bytes-like object or a number, not 'Tensor'\n -\t,tensortensor\n -\tevaltensor.Variable.eval()\n-\tAttempting to use uninitialized value\n -\trunsess.run(tf.global_variables_initializer())\n -\tbuild graphtf.variable\n-\tnested tuple\n -\ttf.unstack()\n -\tfor i in variable\n-\ttensor object is not iterable\n -\ttensorfor i in tensor tensor[i]\n -\tnp.function()\n-\tseq2seqLuongAttention\n -\tseq2seqattention_wrapper\n -\t0\n ```Python\n decoder_initial_state = cell.zero_state(batch_size, dtype).clone(cell_state=encoder_state) \n ```\n\n\n","source":"_posts/tensorflowtutorial.md","raw":"---\ntitle: Tensorflow\ndate: 2018-01-10 09:15:39\ntags:\n\t- tensorflow\n\t- machinelearning\n\t- code\ncategories:\n\t- \nmathjax: true\nphoto: http://ojtdnrpmt.bkt.clouddn.com/blog/180307/el4J0a52f0.jpg?imageslim\n---\n\n-\ttensorflow \n-\t\n-\tStanford CS20SI\n\n<!--more-->\n\n# CS20SI\n-\t[Tensorflow_Learn](https://github.com/thinkwee/Tensorflow_Learn)\n-\tsessionopgraph\n-\tsummarytensorboard\n-\tB17[CS20SI - Tensorflow for Deep Learning Research](https://www.bilibili.com/video/av15898988/)\n-\t\n\n# TF\n-\t\n-\tint() argument must be a string, a bytes-like object or a number, not 'Tensor'\n -\t,tensortensor\n -\tevaltensor.Variable.eval()\n-\tAttempting to use uninitialized value\n -\trunsess.run(tf.global_variables_initializer())\n -\tbuild graphtf.variable\n-\tnested tuple\n -\ttf.unstack()\n -\tfor i in variable\n-\ttensor object is not iterable\n -\ttensorfor i in tensor tensor[i]\n -\tnp.function()\n-\tseq2seqLuongAttention\n -\tseq2seqattention_wrapper\n -\t0\n ```Python\n decoder_initial_state = cell.zero_state(batch_size, dtype).clone(cell_state=encoder_state) \n ```\n\n\n","slug":"tensorflowtutorial","published":1,"updated":"2018-07-23T01:28:38.518Z","photos":["http://ojtdnrpmt.bkt.clouddn.com/blog/180307/el4J0a52f0.jpg?imageslim"],"comments":1,"layout":"post","link":"","_id":"cjmd072dk002tqcw6gtkb4urj","content":"<ul><li>tensorflow </li><li></li><li>Stanford CS20SI</li></ul><a id=\"more\"></a><h1 id=\"CS20SI\"><a href=\"#CS20SI\" class=\"headerlink\" title=\"CS20SI\"></a>CS20SI</h1><ul><li><a href=\"https://github.com/thinkwee/Tensorflow_Learn\" target=\"_blank\" rel=\"noopener\">Tensorflow_Learn</a></li><li>sessionopgraph</li><li>summarytensorboard</li><li>B17<a href=\"https://www.bilibili.com/video/av15898988/\" target=\"_blank\" rel=\"noopener\">CS20SI - Tensorflow for Deep Learning Research</a></li><li></li></ul><h1 id=\"TF\"><a href=\"#TF\" class=\"headerlink\" title=\"TF\"></a>TF</h1><ul><li></li><li>int() argument must be a string, a bytes-like object or a number, not Tensor<ul><li>,tensortensor</li><li>evaltensor.Variable.eval()</li></ul></li><li>Attempting to use uninitialized value<ul><li>runsess.run(tf.global_variables_initializer())</li><li>build graphtf.variable</li></ul></li><li>nested tuple<ul><li>tf.unstack()</li><li>for i in variable</li></ul></li><li>tensor object is not iterable<ul><li>tensorfor i in tensor tensor[i]</li><li>np.function()</li></ul></li><li>seq2seqLuongAttention<ul><li>seq2seqattention_wrapper</li><li>0<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">decoder_initial_state = cell.zero_state(batch_size, dtype).clone(cell_state=encoder_state)</span><br></pre></td></tr></table></figure></li></ul></li></ul>","site":{"data":{}},"excerpt":"<ul><li>tensorflow </li><li></li><li>Stanford CS20SI</li></ul>","more":"<h1 id=\"CS20SI\"><a href=\"#CS20SI\" class=\"headerlink\" title=\"CS20SI\"></a>CS20SI</h1><ul><li><a href=\"https://github.com/thinkwee/Tensorflow_Learn\" target=\"_blank\" rel=\"noopener\">Tensorflow_Learn</a></li><li>sessionopgraph</li><li>summarytensorboard</li><li>B17<a href=\"https://www.bilibili.com/video/av15898988/\" target=\"_blank\" rel=\"noopener\">CS20SI - Tensorflow for Deep Learning Research</a></li><li></li></ul><h1 id=\"TF\"><a href=\"#TF\" class=\"headerlink\" title=\"TF\"></a>TF</h1><ul><li></li><li>int() argument must be a string, a bytes-like object or a number, not Tensor<ul><li>,tensortensor</li><li>evaltensor.Variable.eval()</li></ul></li><li>Attempting to use uninitialized value<ul><li>runsess.run(tf.global_variables_initializer())</li><li>build graphtf.variable</li></ul></li><li>nested tuple<ul><li>tf.unstack()</li><li>for i in variable</li></ul></li><li>tensor object is not iterable<ul><li>tensorfor i in tensor tensor[i]</li><li>np.function()</li></ul></li><li>seq2seqLuongAttention<ul><li>seq2seqattention_wrapper</li><li>0<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">decoder_initial_state = cell.zero_state(batch_size, dtype).clone(cell_state=encoder_state)</span><br></pre></td></tr></table></figure></li></ul></li></ul>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"Tensorflow","path":"2018/01/10/tensorflowtutorial/","eyeCatchImage":null,"excerpt":"<ul><li>tensorflow </li><li></li><li>Stanford CS20SI</li></ul>","date":"2018-01-10T01:15:39.000Z","pv":0,"totalPV":0,"categories":"","tags":["machinelearning","code","tensorflow"],"internalLinks":[],"keywords":[],"keywordsLength":0}},{"title":"DataFrame","date":"2017-02-04T13:02:51.000Z","_content":"\npandasDataFrame\ncsvmd:[Tables Generator](http://www.tablesgenerator.com/)\n\n<!--more-->\n### \n|  |  |\n|:---:|:---:|\n|T|\tTranspose index and columns at\tFast label-based scalar accessor|\n|axes|\tReturn a list with the row axis labels and column axis labels as the only members.|\n|blocks\t|Internal property, property synonym for as_blocks()|\n|dtypes\t|Return the dtypes in this object.|\n|empty\t|True if NDFrame is entirely empty [no items], meaning any of the axes are of length 0.|\n|ftypes\t|Return the ftypes (indication of sparse/dense and dtype) in this object.|\n|iat|\tFast integer location scalar accessor.|\n|iloc|\tPurely integer-location based indexing for selection by position.|\n|is_copy| |\t\n|ix|\tA primarily label-location based indexer, with integer position fallback.|\n|loc|\tPurely label-location based indexer for selection by label.|\n|ndim|\tNumber of axes / array dimensions|\n|shape|\tReturn a tuple representing the dimensionality of the DataFrame.|\n|size|\tnumber of elements in the NDFrame|\n|style|\tProperty returning a Styler object containing methods for building a styled HTML representation fo the DataFrame.|\n|values|\tNumpy representation of NDFrame|\n\n### \n|                                             |                                                                                                                                                                                                                                |\n|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| abs()                                             | Return an object with absolute value takenonly applicable to objects that are all numeric.                                                                                                                                        |\n| add(other[,?axis,?level,?fill_value])             | Addition of dataframe and other, element-wise (binary operator?add).                                                                                                                                                               |\n| add_prefix(prefix)                                | Concatenate prefix string with panel items names.                                                                                                                                                                                  |\n| add_suffix(suffix)                                | Concatenate suffix string with panel items names.                                                                                                                                                                                  |\n| align(other[,?join,?axis,?level,?copy,?...])      | Align two object on their axes with the                                                                                                                                                                                            |\n| all([axis,?bool_only,?skipna,?level])             | Return whether all elements are True over requested axis                                                                                                                                                                           |\n| any([axis,?bool_only,?skipna,?level])             | Return whether any element is True over requested axis                                                                                                                                                                             |\n| append(other[,?ignore_index,?verify_integrity])   | Append rows of?other?to the end of this frame, returning a new object.                                                                                                                                                             |\n| apply(func[,?axis,?broadcast,?raw,?reduce,?args]) | Applies function along input axis of DataFrame.                                                                                                                                                                                    |\n| applymap(func)                                    | Apply a function to a DataFrame that is intended to operate elementwise, i.e.                                                                                                                                                      |\n| as_blocks([copy])                                 | Convert the frame to a dict of dtype -> Constructor Types that each has a homogeneous dtype.                                                                                                                                       |\n| as_matrix([columns])                              | Convert the frame to its Numpy-array representation.                                                                                                                                                                               |\n| asfreq(freq[,?method,?how,?normalize])            | Convert TimeSeries to specified frequency.                                                                                                                                                                                         |\n| asof(where[,?subset])                             | The last row without any NaN is taken (or the last row without                                                                                                                                                                     |\n| assign(\\*\\*kwargs)                                | Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones.                                                                                                      |\n| astype(dtype[,?copy,?raise_on_error])             | Cast object to input numpy.dtype                                                                                                                                                                                                   |\n| at_time(time[,?asof])                             | Select values at particular time of day (e.g.                                                                                                                                                                                      |\n| between_time(start_time,?end_time[,?...])         | Select values between particular times of the day (e.g., 9:00-9:30 AM).                                                                                                                                                            |\n| bfill([axis,?inplace,?limit,?downcast])           | Synonym for NDFrame.fillna(method=bfill)                                                                                                                                                                                         |\n| bool()                                            | Return the bool of a single element PandasObject.                                                                                                                                                                                  |\n| boxplot([column,?by,?ax,?fontsize,?rot,?...])     | Make a box plot from DataFrame column optionally grouped by some columns or                                                                                                                                                        |\n| clip([lower,?upper,?axis])                        | Trim values at input threshold(s).                                                                                                                                                                                                 |\n| clip_lower(threshold[,?axis])                     | Return copy of the input with values below given value(s) truncated.                                                                                                                                                               |\n| clip_upper(threshold[,?axis])                     | Return copy of input with values above given value(s) truncated.                                                                                                                                                                   |\n| combine(other,?func[,?fill_value,?overwrite])     | Add two DataFrame objects and do not propagate NaN values, so if for a                                                                                                                                                             |\n| combineAdd(other)                                 | DEPRECATED.                                                                                                                                                                                                                        |\n| combineMult(other)                                | DEPRECATED.                                                                                                                                                                                                                        |\n| combine_first(other)                              | Combine two DataFrame objects and default to non-null values in frame calling the method.                                                                                                                                          |\n| compound([axis,?skipna,?level])                   | Return the compound percentage of the values for the requested axis                                                                                                                                                                |\n| consolidate([inplace])                            | Compute NDFrame with consolidated internals (data of each dtype grouped together in a single ndarray).                                                                                                                           |\n| convert_objects([convert_dates,?...])             | Deprecated.                                                                                                                                                                                                                        |\n| copy([deep])                                      | Make a copy of this objects data.                                                                                                                                                                                                  |\n| corr([method,?min_periods])                       | Compute pairwise correlation of columns, excluding NA/null values                                                                                                                                                                  |\n| corrwith(other[,?axis,?drop])                     | Compute pairwise correlation between rows or columns of two DataFrame objects.                                                                                                                                                     |\n| count([axis,?level,?numeric_only])                | Return Series with number of non-NA/null observations over requested axis.                                                                                                                                                         |\n| cov([min_periods])                                | Compute pairwise covariance of columns, excluding NA/null values                                                                                                                                                                   |\n| cummax([axis,?skipna])                            | Return cumulative max over requested axis.                                                                                                                                                                                         |\n| cummin([axis,?skipna])                            | Return cumulative minimum over requested axis.                                                                                                                                                                                     |\n| cumprod([axis,?skipna])                           | Return cumulative product over requested axis.                                                                                                                                                                                     |\n| cumsum([axis,?skipna])                            | Return cumulative sum over requested axis.                                                                                                                                                                                         |\n| describe([percentiles,?include,?exclude])         | Generate various summary statistics, excluding NaN values.                                                                                                                                                                         |\n| diff([periods,?axis])                             | 1st discrete difference of object                                                                                                                                                                                                  |\n| div(other[,?axis,?level,?fill_value])             | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| divide(other[,?axis,?level,?fill_value])          | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| dot(other)                                        | Matrix multiplication with DataFrame or Series objects                                                                                                                                                                             |\n| drop(labels[,?axis,?level,?inplace,?errors])      | Return new object with labels in requested axis removed.                                                                                                                                                                           |\n| drop_duplicates(\\*args,?\\*\\*kwargs)               | Return DataFrame with duplicate rows removed, optionally only                                                                                                                                                                      |\n| dropna([axis,?how,?thresh,?subset,?inplace])      | Return object with labels on given axis omitted where alternately any                                                                                                                                                              |\n| duplicated(\\*args,?\\*\\*kwargs)                    | Return boolean Series denoting duplicate rows, optionally only                                                                                                                                                                     |\n| eq(other[,?axis,?level])                          | Wrapper for flexible comparison methods eq                                                                                                                                                                                         |\n| equals(other)                                     | Determines if two NDFrame objects contain the same elements.                                                                                                                                                                       |\n| eval(expr[,?inplace])                             | Evaluate an expression in the context of the calling DataFrame instance.                                                                                                                                                           |\n| ewm([com,?span,?halflife,?alpha,?...])            | Provides exponential weighted functions                                                                                                                                                                                            |\n| expanding([min_periods,?freq,?center,?axis])      | Provides expanding transformations.                                                                                                                                                                                                |\n| ffill([axis,?inplace,?limit,?downcast])           | Synonym for NDFrame.fillna(method=ffill)                                                                                                                                                                                         |\n| fillna([value,?method,?axis,?inplace,?...])       | Fill NA/NaN values using the specified method                                                                                                                                                                                      |\n| filter([items,?like,?regex,?axis])                | Subset rows or columns of dataframe according to labels in the specified index.                                                                                                                                                    |\n| first(offset)                                     | Convenience method for subsetting initial periods of time series data based on a date offset.                                                                                                                                      |\n| first_valid_index()                               | Return label for first non-NA/null value                                                                                                                                                                                           |\n| floordiv(other[,?axis,?level,?fill_value])        | Integer division of dataframe and other, element-wise (binary operator?floordiv).                                                                                                                                                  |\n| from_csv(path[,?header,?sep,?index_col,?...])     | Read CSV file (DISCOURAGED, please use?pandas.read_csv()?instead).                                                                                                                                                                 |\n| from_dict(data[,?orient,?dtype])                  | Construct DataFrame from dict of array-like or dicts                                                                                                                                                                               |\n| from_items(items[,?columns,?orient])              | Convert (key, value) pairs to DataFrame.                                                                                                                                                                                           |\n| from_records(data[,?index,?exclude,?...])         | Convert structured or record ndarray to DataFrame                                                                                                                                                                                  |\n| ge(other[,?axis,?level])                          | Wrapper for flexible comparison methods ge                                                                                                                                                                                         |\n| get(key[,?default])                               | Get item from object for given key (DataFrame column, Panel slice, etc.).                                                                                                                                                          |\n| get_dtype_counts()                                | Return the counts of dtypes in this object.                                                                                                                                                                                        |\n| get_ftype_counts()                                | Return the counts of ftypes in this object.                                                                                                                                                                                        |\n| get_value(index,?col[,?takeable])                 | Quickly retrieve single value at passed column and index                                                                                                                                                                           |\n| get_values()                                      | same as values (but handles sparseness conversions)                                                                                                                                                                                |\n| groupby([by,?axis,?level,?as_index,?sort,?...])   | Group series using mapper (dict or key function, apply given function to group, return result as series) or by a series of columns.                                                                                                |\n| gt(other[,?axis,?level])                          | Wrapper for flexible comparison methods gt                                                                                                                                                                                         |\n| head([n])                                         | Returns first n rows                                                                                                                                                                                                               |\n| hist(data[,?column,?by,?grid,?xlabelsize,?...])   | Draw histogram of the DataFrames series using matplotlib / pylab.                                                                                                                                                                 |\n| icol(i)                                           | DEPRECATED.                                                                                                                                                                                                                        |\n| idxmax([axis,?skipna])                            | Return index of first occurrence of maximum over requested axis.                                                                                                                                                                   |\n| idxmin([axis,?skipna])                            | Return index of first occurrence of minimum over requested axis.                                                                                                                                                                   |\n| iget_value(i,?j)                                  | DEPRECATED.                                                                                                                                                                                                                        |\n| info([verbose,?buf,?max_cols,?memory_usage,?...]) | Concise summary of a DataFrame.                                                                                                                                                                                                    |\n| insert(loc,?column,?value[,?allow_duplicates])    | Insert column into DataFrame at specified location.                                                                                                                                                                                |\n| interpolate([method,?axis,?limit,?inplace,?...])  | Interpolate values according to different methods.                                                                                                                                                                                 |\n| irow(i[,?copy])                                   | DEPRECATED.                                                                                                                                                                                                                        |\n| isin(values)                                      | Return boolean DataFrame showing whether each element in the DataFrame is contained in values.                                                                                                                                     |\n| isnull()                                          | Return a boolean same-sized object indicating if the values are null.                                                                                                                                                              |\n| iteritems()                                       | Iterator over (column name, Series) pairs.                                                                                                                                                                                         |\n| iterkv(\\*args,?\\*\\*kwargs)                        | iteritems alias used to get around 2to3. Deprecated                                                                                                                                                                                |\n| iterrows()                                        | Iterate over DataFrame rows as (index, Series) pairs.                                                                                                                                                                              |\n| itertuples([index,?name])                         | Iterate over DataFrame rows as namedtuples, with index value as first element of the tuple.                                                                                                                                        |\n| join(other[,?on,?how,?lsuffix,?rsuffix,?sort])    | Join columns with other DataFrame either on index or on a key column.                                                                                                                                                              |\n| keys()                                            | Get the info axis (see Indexing for more)                                                                                                                                                                                        |\n| kurt([axis,?skipna,?level,?numeric_only])         | Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).                                                                                                                    |\n| kurtosis([axis,?skipna,?level,?numeric_only])     | Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).                                                                                                                    |\n| last(offset)                                      | Convenience method for subsetting final periods of time series data based on a date offset.                                                                                                                                        |\n| last_valid_index()                                | Return label for last non-NA/null value                                                                                                                                                                                            |\n| le(other[,?axis,?level])                          | Wrapper for flexible comparison methods le                                                                                                                                                                                         |\n| lookup(row_labels,?col_labels)                    | Label-based fancy indexing function for DataFrame.                                                                                                                                                                               |\n| lt(other[,?axis,?level])                          | Wrapper for flexible comparison methods lt                                                                                                                                                                                         |\n| mad([axis,?skipna,?level])                        | Return the mean absolute deviation of the values for the requested axis                                                                                                                                                            |\n| mask(cond[,?other,?inplace,?axis,?level,?...])    | Return an object of same shape as self and whose corresponding entries are from self where cond is False and otherwise are from other.                                                                                             |\n| max([axis,?skipna,?level,?numeric_only])          | This method returns the maximum of the values in the object.                                                                                                                                                                       |\n| mean([axis,?skipna,?level,?numeric_only])         | Return the mean of the values for the requested axis                                                                                                                                                                               |\n| median([axis,?skipna,?level,?numeric_only])       | Return the median of the values for the requested axis                                                                                                                                                                             |\n| memory_usage([index,?deep])                       | Memory usage of DataFrame columns.                                                                                                                                                                                                 |\n| merge(right[,?how,?on,?left_on,?right_on,?...])   | Merge DataFrame objects by performing a database-style join operation by columns or indexes.                                                                                                                                       |\n| min([axis,?skipna,?level,?numeric_only])          | This method returns the minimum of the values in the object.                                                                                                                                                                       |\n| mod(other[,?axis,?level,?fill_value])             | Modulo of dataframe and other, element-wise (binary operator?mod).                                                                                                                                                                 |\n| mode([axis,?numeric_only])                        | Gets the mode(s) of each element along the axis selected.                                                                                                                                                                          |\n| mul(other[,?axis,?level,?fill_value])             | Multiplication of dataframe and other, element-wise (binary operator?mul).                                                                                                                                                         |\n| multiply(other[,?axis,?level,?fill_value])        | Multiplication of dataframe and other, element-wise (binary operator?mul).                                                                                                                                                         |\n| ne(other[,?axis,?level])                          | Wrapper for flexible comparison methods ne                                                                                                                                                                                         |\n| nlargest(n,?columns[,?keep])                      | Get the rows of a DataFrame sorted by the?n?largest values of?columns.                                                                                                                                                             |\n| notnull()                                         | Return a boolean same-sized object indicating if the values are not null.                                                                                                                                                          |\n| nsmallest(n,?columns[,?keep])                     | Get the rows of a DataFrame sorted by the?n?smallest values of?columns.                                                                                                                                                            |\n| pct_change([periods,?fill_method,?limit,?freq])   | Percent change over given number of periods.                                                                                                                                                                                       |\n| pipe(func,?\\*args,?\\*\\*kwargs)                    | Apply func(self, *args, **kwargs)                                                                                                                                                                                                  |\n| pivot([index,?columns,?values])                   | Reshape data (produce a pivot table) based on column values.                                                                                                                                                                     |\n| pivot_table(data[,?values,?index,?columns,?...])  | Create a spreadsheet-style pivot table as a DataFrame.                                                                                                                                                                             |\n| plot                                              | alias of?FramePlotMethods                                                                                                                                                                                                          |\n| pop(item)                                         | Return item and drop from frame.                                                                                                                                                                                                   |\n| pow(other[,?axis,?level,?fill_value])             | Exponential power of dataframe and other, element-wise (binary operator?pow).                                                                                                                                                      |\n| prod([axis,?skipna,?level,?numeric_only])         | Return the product of the values for the requested axis                                                                                                                                                                            |\n| product([axis,?skipna,?level,?numeric_only])      | Return the product of the values for the requested axis                                                                                                                                                                            |\n| quantile([q,?axis,?numeric_only,?interpolation])  | Return values at the given quantile over requested axis, a la numpy.percentile.                                                                                                                                                    |\n| query(expr[,?inplace])                            | Query the columns of a frame with a boolean expression.                                                                                                                                                                            |\n| radd(other[,?axis,?level,?fill_value])            | Addition of dataframe and other, element-wise (binary operator?radd).                                                                                                                                                              |\n| rank([axis,?method,?numeric_only,?...])           | Compute numerical data ranks (1 through n) along axis.                                                                                                                                                                             |\n| rdiv(other[,?axis,?level,?fill_value])            | Floating division of dataframe and other, element-wise (binary operator?rtruediv).                                                                                                                                                 |\n| reindex([index,?columns])                         | Conform DataFrame to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.                                                                                                     |\n| reindex_axis(labels[,?axis,?method,?level,?...])  | Conform input object to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.                                                                                                  |\n| reindex_like(other[,?method,?copy,?limit,?...])   | Return an object with matching indices to myself.                                                                                                                                                                                  |\n| rename([index,?columns])                          | Alter axes input function or functions.                                                                                                                                                                                            |\n| rename_axis(mapper[,?axis,?copy,?inplace])        | Alter index and / or columns using input function or functions.                                                                                                                                                                    |\n| reorder_levels(order[,?axis])                     | Rearrange index levels using input order.                                                                                                                                                                                          |\n| replace([to_replace,?value,?inplace,?limit,?...]) | Replace values given in to_replace with value.                                                                                                                                                                                 |\n| resample(rule[,?how,?axis,?fill_method,?...])     | Convenience method for frequency conversion and resampling of time series.                                                                                                                                                         |\n| reset_index([level,?drop,?inplace,?...])          | For DataFrame with multi-level index, return new DataFrame with labeling information in the columns under the index names, defaulting to level_0, level_1, etc.                                                                |\n| rfloordiv(other[,?axis,?level,?fill_value])       | Integer division of dataframe and other, element-wise (binary operator?rfloordiv).                                                                                                                                                 |\n| rmod(other[,?axis,?level,?fill_value])            | Modulo of dataframe and other, element-wise (binary operator?rmod).                                                                                                                                                                |\n| rmul(other[,?axis,?level,?fill_value])            | Multiplication of dataframe and other, element-wise (binary operator?rmul).                                                                                                                                                        |\n| rolling(window[,?min_periods,?freq,?center,?...]) | Provides rolling window calculcations.                                                                                                                                                                                             |\n| round([decimals])                                 | Round a DataFrame to a variable number of decimal places.                                                                                                                                                                          |\n| rpow(other[,?axis,?level,?fill_value])            | Exponential power of dataframe and other, element-wise (binary operator?rpow).                                                                                                                                                     |\n| rsub(other[,?axis,?level,?fill_value])            | Subtraction of dataframe and other, element-wise (binary operator?rsub).                                                                                                                                                           |\n| rtruediv(other[,?axis,?level,?fill_value])        | Floating division of dataframe and other, element-wise (binary operator?rtruediv).                                                                                                                                                 |\n| sample([n,?frac,?replace,?weights,?...])          | Returns a random sample of items from an axis of object.                                                                                                                                                                           |\n| select(crit[,?axis])                              | Return data corresponding to axis labels matching criteria                                                                                                                                                                         |\n| select_dtypes([include,?exclude])                 | Return a subset of a DataFrame including/excluding columns based on their?dtype.                                                                                                                                                   |\n| sem([axis,?skipna,?level,?ddof,?numeric_only])    | Return unbiased standard error of the mean over requested axis.                                                                                                                                                                    |\n| set_axis(axis,?labels)                            | public verson of axis assignment                                                                                                                                                                                                   |\n| set_index(keys[,?drop,?append,?inplace,?...])     | Set the DataFrame index (row labels) using one or more existing columns.                                                                                                                                                           |\n| set_value(index,?col,?value[,?takeable])          | Put single value at passed column and index                                                                                                                                                                                        |\n| shift([periods,?freq,?axis])                      | Shift index by desired number of periods with an optional time freq                                                                                                                                                                |\n| skew([axis,?skipna,?level,?numeric_only])         | Return unbiased skew over requested axis                                                                                                                                                                                           |\n| slice_shift([periods,?axis])                      | Equivalent to?shift?without copying data.                                                                                                                                                                                          |\n| sort([columns,?axis,?ascending,?inplace,?...])    | DEPRECATED: use?DataFrame.sort_values()                                                                                                                                                                                            |\n| sort_index([axis,?level,?ascending,?...])         | Sort object by labels (along an axis)                                                                                                                                                                                              |\n| sort_values(by[,?axis,?ascending,?inplace,?...])  | Sort by the values along either axis                                                                                                                                                                                               |\n| sortlevel([level,?axis,?ascending,?inplace,?...]) | Sort multilevel index by chosen axis and primary level.                                                                                                                                                                            |\n| squeeze(\\*\\*kwargs)                               | Squeeze length 1 dimensions.                                                                                                                                                                                                       |\n| stack([level,?dropna])                            | Pivot a level of the (possibly hierarchical) column labels, returning a DataFrame (or Series in the case of an object with a single level of column labels) having a hierarchical index with a new inner-most level of row labels. |\n| std([axis,?skipna,?level,?ddof,?numeric_only])    | Return sample standard deviation over requested axis.                                                                                                                                                                              |\n| sub(other[,?axis,?level,?fill_value])             | Subtraction of dataframe and other, element-wise (binary operator?sub).                                                                                                                                                            |\n| subtract(other[,?axis,?level,?fill_value])        | Subtraction of dataframe and other, element-wise (binary operator?sub).                                                                                                                                                            |\n| sum([axis,?skipna,?level,?numeric_only])          | Return the sum of the values for the requested axis                                                                                                                                                                                |\n| swapaxes(axis1,?axis2[,?copy])                    | Interchange axes and swap values axes appropriately                                                                                                                                                                                |\n| swaplevel([i,?j,?axis])                           | Swap levels i and j in a MultiIndex on a particular axis                                                                                                                                                                           |\n| tail([n])                                         | Returns last n rows                                                                                                                                                                                                                |\n| take(indices[,?axis,?convert,?is_copy])           | Analogous to ndarray.take                                                                                                                                                                                                          |\n| to_clipboard([excel,?sep])                        | Attempt to write text representation of object to the system clipboard This can be pasted into Excel, for example.                                                                                                                 |\n| to_csv([path_or_buf,?sep,?na_rep,?...])           | Write DataFrame to a comma-separated values (csv) file                                                                                                                                                                             |\n| to_dense()                                        | Return dense representation of NDFrame (as opposed to sparse)                                                                                                                                                                      |\n| to_dict([orient])                                 | Convert DataFrame to dictionary.                                                                                                                                                                                                   |\n| to_excel(excel_writer[,?sheet_name,?na_rep,?...]) | Write DataFrame to a excel sheet                                                                                                                                                                                                   |\n| to_gbq(destination_table,?project_id[,?...])      | Write a DataFrame to a Google BigQuery table.                                                                                                                                                                                      |\n| to_hdf(path_or_buf,?key,?\\*\\*kwargs)              | Write the contained data to an HDF5 file using HDFStore.                                                                                                                                                                           |\n| to_html([buf,?columns,?col_space,?header,?...])   | Render a DataFrame as an HTML table.                                                                                                                                                                                               |\n| to_json([path_or_buf,?orient,?date_format,?...])  | Convert the object to a JSON string.                                                                                                                                                                                               |\n| to_latex([buf,?columns,?col_space,?header,?...])  | Render a DataFrame to a tabular environment table.                                                                                                                                                                                 |\n| to_msgpack([path_or_buf,?encoding])               | msgpack (serialize) object to input file path                                                                                                                                                                                      |\n| to_panel()                                        | Transform long (stacked) format (DataFrame) into wide (3D, Panel) format.                                                                                                                                                          |\n| to_period([freq,?axis,?copy])                     | Convert DataFrame from DatetimeIndex to PeriodIndex with desired                                                                                                                                                                   |\n| to_pickle(path)                                   | Pickle (serialize) object to input file path.                                                                                                                                                                                      |\n| to_records([index,?convert_datetime64])           | Convert DataFrame to record array.                                                                                                                                                                                                 |\n| to_sparse([fill_value,?kind])                     | Convert to SparseDataFrame                                                                                                                                                                                                         |\n| to_sql(name,?con[,?flavor,?schema,?...])          | Write records stored in a DataFrame to a SQL database.                                                                                                                                                                             |\n| to_stata(fname[,?convert_dates,?...])             | A class for writing Stata binary dta files from array-like objects                                                                                                                                                                 |\n| to_string([buf,?columns,?col_space,?header,?...]) | Render a DataFrame to a console-friendly tabular output.                                                                                                                                                                           |\n| to_timestamp([freq,?how,?axis,?copy])             | Cast to DatetimeIndex of timestamps, at?beginning?of period                                                                                                                                                                        |\n| to_xarray()                                       | Return an xarray object from the pandas object.                                                                                                                                                                                    |\n| transpose(\\*args,?\\*\\*kwargs)                     | Transpose index and columns                                                                                                                                                                                                        |\n| truediv(other[,?axis,?level,?fill_value])         | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| truncate([before,?after,?axis,?copy])             | Truncates a sorted NDFrame before and/or after some particular index value.                                                                                                                                                        |\n| tshift([periods,?freq,?axis])                     | Shift the time index, using the indexs frequency if available.                                                                                                                                                                    |\n| tz_convert(tz[,?axis,?level,?copy])               | Convert tz-aware axis to target time zone.                                                                                                                                                                                         |\n| tz_localize(\\*args,?\\*\\*kwargs)                   | Localize tz-naive TimeSeries to target time zone.                                                                                                                                                                                  |\n| unstack([level,?fill_value])                      | Pivot a level of the (necessarily hierarchical) index labels, returning a DataFrame having a new level of column labels whose inner-most level consists of the pivoted index labels.                                               |\n| update(other[,?join,?overwrite,?...])             | Modify DataFrame in place using non-NA values from passed DataFrame.                                                                                                                                                               |\n| var([axis,?skipna,?level,?ddof,?numeric_only])    | Return unbiased variance over requested axis.                                                                                                                                                                                      |\n| where(cond[,?other,?inplace,?axis,?level,?...])   | Return an object of same shape as self and whose corresponding entries are from self where cond is True and otherwise are from other.                                                                                              |\n| xs(key[,?axis,?level,?drop_level])                | Returns a cross-section (row(s) or column(s)) from the Series/DataFrame.                                                                                                                                                           |","source":"_posts/pandas-func.md","raw":"---\ntitle: DataFrame\ndate: 2017-02-04 21:02:51\ntags: [math,machinelearning,python,code]\ncategories: Python\n---\n\npandasDataFrame\ncsvmd:[Tables Generator](http://www.tablesgenerator.com/)\n\n<!--more-->\n### \n|  |  |\n|:---:|:---:|\n|T|\tTranspose index and columns at\tFast label-based scalar accessor|\n|axes|\tReturn a list with the row axis labels and column axis labels as the only members.|\n|blocks\t|Internal property, property synonym for as_blocks()|\n|dtypes\t|Return the dtypes in this object.|\n|empty\t|True if NDFrame is entirely empty [no items], meaning any of the axes are of length 0.|\n|ftypes\t|Return the ftypes (indication of sparse/dense and dtype) in this object.|\n|iat|\tFast integer location scalar accessor.|\n|iloc|\tPurely integer-location based indexing for selection by position.|\n|is_copy| |\t\n|ix|\tA primarily label-location based indexer, with integer position fallback.|\n|loc|\tPurely label-location based indexer for selection by label.|\n|ndim|\tNumber of axes / array dimensions|\n|shape|\tReturn a tuple representing the dimensionality of the DataFrame.|\n|size|\tnumber of elements in the NDFrame|\n|style|\tProperty returning a Styler object containing methods for building a styled HTML representation fo the DataFrame.|\n|values|\tNumpy representation of NDFrame|\n\n### \n|                                             |                                                                                                                                                                                                                                |\n|---------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| abs()                                             | Return an object with absolute value takenonly applicable to objects that are all numeric.                                                                                                                                        |\n| add(other[,?axis,?level,?fill_value])             | Addition of dataframe and other, element-wise (binary operator?add).                                                                                                                                                               |\n| add_prefix(prefix)                                | Concatenate prefix string with panel items names.                                                                                                                                                                                  |\n| add_suffix(suffix)                                | Concatenate suffix string with panel items names.                                                                                                                                                                                  |\n| align(other[,?join,?axis,?level,?copy,?...])      | Align two object on their axes with the                                                                                                                                                                                            |\n| all([axis,?bool_only,?skipna,?level])             | Return whether all elements are True over requested axis                                                                                                                                                                           |\n| any([axis,?bool_only,?skipna,?level])             | Return whether any element is True over requested axis                                                                                                                                                                             |\n| append(other[,?ignore_index,?verify_integrity])   | Append rows of?other?to the end of this frame, returning a new object.                                                                                                                                                             |\n| apply(func[,?axis,?broadcast,?raw,?reduce,?args]) | Applies function along input axis of DataFrame.                                                                                                                                                                                    |\n| applymap(func)                                    | Apply a function to a DataFrame that is intended to operate elementwise, i.e.                                                                                                                                                      |\n| as_blocks([copy])                                 | Convert the frame to a dict of dtype -> Constructor Types that each has a homogeneous dtype.                                                                                                                                       |\n| as_matrix([columns])                              | Convert the frame to its Numpy-array representation.                                                                                                                                                                               |\n| asfreq(freq[,?method,?how,?normalize])            | Convert TimeSeries to specified frequency.                                                                                                                                                                                         |\n| asof(where[,?subset])                             | The last row without any NaN is taken (or the last row without                                                                                                                                                                     |\n| assign(\\*\\*kwargs)                                | Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones.                                                                                                      |\n| astype(dtype[,?copy,?raise_on_error])             | Cast object to input numpy.dtype                                                                                                                                                                                                   |\n| at_time(time[,?asof])                             | Select values at particular time of day (e.g.                                                                                                                                                                                      |\n| between_time(start_time,?end_time[,?...])         | Select values between particular times of the day (e.g., 9:00-9:30 AM).                                                                                                                                                            |\n| bfill([axis,?inplace,?limit,?downcast])           | Synonym for NDFrame.fillna(method=bfill)                                                                                                                                                                                         |\n| bool()                                            | Return the bool of a single element PandasObject.                                                                                                                                                                                  |\n| boxplot([column,?by,?ax,?fontsize,?rot,?...])     | Make a box plot from DataFrame column optionally grouped by some columns or                                                                                                                                                        |\n| clip([lower,?upper,?axis])                        | Trim values at input threshold(s).                                                                                                                                                                                                 |\n| clip_lower(threshold[,?axis])                     | Return copy of the input with values below given value(s) truncated.                                                                                                                                                               |\n| clip_upper(threshold[,?axis])                     | Return copy of input with values above given value(s) truncated.                                                                                                                                                                   |\n| combine(other,?func[,?fill_value,?overwrite])     | Add two DataFrame objects and do not propagate NaN values, so if for a                                                                                                                                                             |\n| combineAdd(other)                                 | DEPRECATED.                                                                                                                                                                                                                        |\n| combineMult(other)                                | DEPRECATED.                                                                                                                                                                                                                        |\n| combine_first(other)                              | Combine two DataFrame objects and default to non-null values in frame calling the method.                                                                                                                                          |\n| compound([axis,?skipna,?level])                   | Return the compound percentage of the values for the requested axis                                                                                                                                                                |\n| consolidate([inplace])                            | Compute NDFrame with consolidated internals (data of each dtype grouped together in a single ndarray).                                                                                                                           |\n| convert_objects([convert_dates,?...])             | Deprecated.                                                                                                                                                                                                                        |\n| copy([deep])                                      | Make a copy of this objects data.                                                                                                                                                                                                  |\n| corr([method,?min_periods])                       | Compute pairwise correlation of columns, excluding NA/null values                                                                                                                                                                  |\n| corrwith(other[,?axis,?drop])                     | Compute pairwise correlation between rows or columns of two DataFrame objects.                                                                                                                                                     |\n| count([axis,?level,?numeric_only])                | Return Series with number of non-NA/null observations over requested axis.                                                                                                                                                         |\n| cov([min_periods])                                | Compute pairwise covariance of columns, excluding NA/null values                                                                                                                                                                   |\n| cummax([axis,?skipna])                            | Return cumulative max over requested axis.                                                                                                                                                                                         |\n| cummin([axis,?skipna])                            | Return cumulative minimum over requested axis.                                                                                                                                                                                     |\n| cumprod([axis,?skipna])                           | Return cumulative product over requested axis.                                                                                                                                                                                     |\n| cumsum([axis,?skipna])                            | Return cumulative sum over requested axis.                                                                                                                                                                                         |\n| describe([percentiles,?include,?exclude])         | Generate various summary statistics, excluding NaN values.                                                                                                                                                                         |\n| diff([periods,?axis])                             | 1st discrete difference of object                                                                                                                                                                                                  |\n| div(other[,?axis,?level,?fill_value])             | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| divide(other[,?axis,?level,?fill_value])          | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| dot(other)                                        | Matrix multiplication with DataFrame or Series objects                                                                                                                                                                             |\n| drop(labels[,?axis,?level,?inplace,?errors])      | Return new object with labels in requested axis removed.                                                                                                                                                                           |\n| drop_duplicates(\\*args,?\\*\\*kwargs)               | Return DataFrame with duplicate rows removed, optionally only                                                                                                                                                                      |\n| dropna([axis,?how,?thresh,?subset,?inplace])      | Return object with labels on given axis omitted where alternately any                                                                                                                                                              |\n| duplicated(\\*args,?\\*\\*kwargs)                    | Return boolean Series denoting duplicate rows, optionally only                                                                                                                                                                     |\n| eq(other[,?axis,?level])                          | Wrapper for flexible comparison methods eq                                                                                                                                                                                         |\n| equals(other)                                     | Determines if two NDFrame objects contain the same elements.                                                                                                                                                                       |\n| eval(expr[,?inplace])                             | Evaluate an expression in the context of the calling DataFrame instance.                                                                                                                                                           |\n| ewm([com,?span,?halflife,?alpha,?...])            | Provides exponential weighted functions                                                                                                                                                                                            |\n| expanding([min_periods,?freq,?center,?axis])      | Provides expanding transformations.                                                                                                                                                                                                |\n| ffill([axis,?inplace,?limit,?downcast])           | Synonym for NDFrame.fillna(method=ffill)                                                                                                                                                                                         |\n| fillna([value,?method,?axis,?inplace,?...])       | Fill NA/NaN values using the specified method                                                                                                                                                                                      |\n| filter([items,?like,?regex,?axis])                | Subset rows or columns of dataframe according to labels in the specified index.                                                                                                                                                    |\n| first(offset)                                     | Convenience method for subsetting initial periods of time series data based on a date offset.                                                                                                                                      |\n| first_valid_index()                               | Return label for first non-NA/null value                                                                                                                                                                                           |\n| floordiv(other[,?axis,?level,?fill_value])        | Integer division of dataframe and other, element-wise (binary operator?floordiv).                                                                                                                                                  |\n| from_csv(path[,?header,?sep,?index_col,?...])     | Read CSV file (DISCOURAGED, please use?pandas.read_csv()?instead).                                                                                                                                                                 |\n| from_dict(data[,?orient,?dtype])                  | Construct DataFrame from dict of array-like or dicts                                                                                                                                                                               |\n| from_items(items[,?columns,?orient])              | Convert (key, value) pairs to DataFrame.                                                                                                                                                                                           |\n| from_records(data[,?index,?exclude,?...])         | Convert structured or record ndarray to DataFrame                                                                                                                                                                                  |\n| ge(other[,?axis,?level])                          | Wrapper for flexible comparison methods ge                                                                                                                                                                                         |\n| get(key[,?default])                               | Get item from object for given key (DataFrame column, Panel slice, etc.).                                                                                                                                                          |\n| get_dtype_counts()                                | Return the counts of dtypes in this object.                                                                                                                                                                                        |\n| get_ftype_counts()                                | Return the counts of ftypes in this object.                                                                                                                                                                                        |\n| get_value(index,?col[,?takeable])                 | Quickly retrieve single value at passed column and index                                                                                                                                                                           |\n| get_values()                                      | same as values (but handles sparseness conversions)                                                                                                                                                                                |\n| groupby([by,?axis,?level,?as_index,?sort,?...])   | Group series using mapper (dict or key function, apply given function to group, return result as series) or by a series of columns.                                                                                                |\n| gt(other[,?axis,?level])                          | Wrapper for flexible comparison methods gt                                                                                                                                                                                         |\n| head([n])                                         | Returns first n rows                                                                                                                                                                                                               |\n| hist(data[,?column,?by,?grid,?xlabelsize,?...])   | Draw histogram of the DataFrames series using matplotlib / pylab.                                                                                                                                                                 |\n| icol(i)                                           | DEPRECATED.                                                                                                                                                                                                                        |\n| idxmax([axis,?skipna])                            | Return index of first occurrence of maximum over requested axis.                                                                                                                                                                   |\n| idxmin([axis,?skipna])                            | Return index of first occurrence of minimum over requested axis.                                                                                                                                                                   |\n| iget_value(i,?j)                                  | DEPRECATED.                                                                                                                                                                                                                        |\n| info([verbose,?buf,?max_cols,?memory_usage,?...]) | Concise summary of a DataFrame.                                                                                                                                                                                                    |\n| insert(loc,?column,?value[,?allow_duplicates])    | Insert column into DataFrame at specified location.                                                                                                                                                                                |\n| interpolate([method,?axis,?limit,?inplace,?...])  | Interpolate values according to different methods.                                                                                                                                                                                 |\n| irow(i[,?copy])                                   | DEPRECATED.                                                                                                                                                                                                                        |\n| isin(values)                                      | Return boolean DataFrame showing whether each element in the DataFrame is contained in values.                                                                                                                                     |\n| isnull()                                          | Return a boolean same-sized object indicating if the values are null.                                                                                                                                                              |\n| iteritems()                                       | Iterator over (column name, Series) pairs.                                                                                                                                                                                         |\n| iterkv(\\*args,?\\*\\*kwargs)                        | iteritems alias used to get around 2to3. Deprecated                                                                                                                                                                                |\n| iterrows()                                        | Iterate over DataFrame rows as (index, Series) pairs.                                                                                                                                                                              |\n| itertuples([index,?name])                         | Iterate over DataFrame rows as namedtuples, with index value as first element of the tuple.                                                                                                                                        |\n| join(other[,?on,?how,?lsuffix,?rsuffix,?sort])    | Join columns with other DataFrame either on index or on a key column.                                                                                                                                                              |\n| keys()                                            | Get the info axis (see Indexing for more)                                                                                                                                                                                        |\n| kurt([axis,?skipna,?level,?numeric_only])         | Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).                                                                                                                    |\n| kurtosis([axis,?skipna,?level,?numeric_only])     | Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).                                                                                                                    |\n| last(offset)                                      | Convenience method for subsetting final periods of time series data based on a date offset.                                                                                                                                        |\n| last_valid_index()                                | Return label for last non-NA/null value                                                                                                                                                                                            |\n| le(other[,?axis,?level])                          | Wrapper for flexible comparison methods le                                                                                                                                                                                         |\n| lookup(row_labels,?col_labels)                    | Label-based fancy indexing function for DataFrame.                                                                                                                                                                               |\n| lt(other[,?axis,?level])                          | Wrapper for flexible comparison methods lt                                                                                                                                                                                         |\n| mad([axis,?skipna,?level])                        | Return the mean absolute deviation of the values for the requested axis                                                                                                                                                            |\n| mask(cond[,?other,?inplace,?axis,?level,?...])    | Return an object of same shape as self and whose corresponding entries are from self where cond is False and otherwise are from other.                                                                                             |\n| max([axis,?skipna,?level,?numeric_only])          | This method returns the maximum of the values in the object.                                                                                                                                                                       |\n| mean([axis,?skipna,?level,?numeric_only])         | Return the mean of the values for the requested axis                                                                                                                                                                               |\n| median([axis,?skipna,?level,?numeric_only])       | Return the median of the values for the requested axis                                                                                                                                                                             |\n| memory_usage([index,?deep])                       | Memory usage of DataFrame columns.                                                                                                                                                                                                 |\n| merge(right[,?how,?on,?left_on,?right_on,?...])   | Merge DataFrame objects by performing a database-style join operation by columns or indexes.                                                                                                                                       |\n| min([axis,?skipna,?level,?numeric_only])          | This method returns the minimum of the values in the object.                                                                                                                                                                       |\n| mod(other[,?axis,?level,?fill_value])             | Modulo of dataframe and other, element-wise (binary operator?mod).                                                                                                                                                                 |\n| mode([axis,?numeric_only])                        | Gets the mode(s) of each element along the axis selected.                                                                                                                                                                          |\n| mul(other[,?axis,?level,?fill_value])             | Multiplication of dataframe and other, element-wise (binary operator?mul).                                                                                                                                                         |\n| multiply(other[,?axis,?level,?fill_value])        | Multiplication of dataframe and other, element-wise (binary operator?mul).                                                                                                                                                         |\n| ne(other[,?axis,?level])                          | Wrapper for flexible comparison methods ne                                                                                                                                                                                         |\n| nlargest(n,?columns[,?keep])                      | Get the rows of a DataFrame sorted by the?n?largest values of?columns.                                                                                                                                                             |\n| notnull()                                         | Return a boolean same-sized object indicating if the values are not null.                                                                                                                                                          |\n| nsmallest(n,?columns[,?keep])                     | Get the rows of a DataFrame sorted by the?n?smallest values of?columns.                                                                                                                                                            |\n| pct_change([periods,?fill_method,?limit,?freq])   | Percent change over given number of periods.                                                                                                                                                                                       |\n| pipe(func,?\\*args,?\\*\\*kwargs)                    | Apply func(self, *args, **kwargs)                                                                                                                                                                                                  |\n| pivot([index,?columns,?values])                   | Reshape data (produce a pivot table) based on column values.                                                                                                                                                                     |\n| pivot_table(data[,?values,?index,?columns,?...])  | Create a spreadsheet-style pivot table as a DataFrame.                                                                                                                                                                             |\n| plot                                              | alias of?FramePlotMethods                                                                                                                                                                                                          |\n| pop(item)                                         | Return item and drop from frame.                                                                                                                                                                                                   |\n| pow(other[,?axis,?level,?fill_value])             | Exponential power of dataframe and other, element-wise (binary operator?pow).                                                                                                                                                      |\n| prod([axis,?skipna,?level,?numeric_only])         | Return the product of the values for the requested axis                                                                                                                                                                            |\n| product([axis,?skipna,?level,?numeric_only])      | Return the product of the values for the requested axis                                                                                                                                                                            |\n| quantile([q,?axis,?numeric_only,?interpolation])  | Return values at the given quantile over requested axis, a la numpy.percentile.                                                                                                                                                    |\n| query(expr[,?inplace])                            | Query the columns of a frame with a boolean expression.                                                                                                                                                                            |\n| radd(other[,?axis,?level,?fill_value])            | Addition of dataframe and other, element-wise (binary operator?radd).                                                                                                                                                              |\n| rank([axis,?method,?numeric_only,?...])           | Compute numerical data ranks (1 through n) along axis.                                                                                                                                                                             |\n| rdiv(other[,?axis,?level,?fill_value])            | Floating division of dataframe and other, element-wise (binary operator?rtruediv).                                                                                                                                                 |\n| reindex([index,?columns])                         | Conform DataFrame to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.                                                                                                     |\n| reindex_axis(labels[,?axis,?method,?level,?...])  | Conform input object to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.                                                                                                  |\n| reindex_like(other[,?method,?copy,?limit,?...])   | Return an object with matching indices to myself.                                                                                                                                                                                  |\n| rename([index,?columns])                          | Alter axes input function or functions.                                                                                                                                                                                            |\n| rename_axis(mapper[,?axis,?copy,?inplace])        | Alter index and / or columns using input function or functions.                                                                                                                                                                    |\n| reorder_levels(order[,?axis])                     | Rearrange index levels using input order.                                                                                                                                                                                          |\n| replace([to_replace,?value,?inplace,?limit,?...]) | Replace values given in to_replace with value.                                                                                                                                                                                 |\n| resample(rule[,?how,?axis,?fill_method,?...])     | Convenience method for frequency conversion and resampling of time series.                                                                                                                                                         |\n| reset_index([level,?drop,?inplace,?...])          | For DataFrame with multi-level index, return new DataFrame with labeling information in the columns under the index names, defaulting to level_0, level_1, etc.                                                                |\n| rfloordiv(other[,?axis,?level,?fill_value])       | Integer division of dataframe and other, element-wise (binary operator?rfloordiv).                                                                                                                                                 |\n| rmod(other[,?axis,?level,?fill_value])            | Modulo of dataframe and other, element-wise (binary operator?rmod).                                                                                                                                                                |\n| rmul(other[,?axis,?level,?fill_value])            | Multiplication of dataframe and other, element-wise (binary operator?rmul).                                                                                                                                                        |\n| rolling(window[,?min_periods,?freq,?center,?...]) | Provides rolling window calculcations.                                                                                                                                                                                             |\n| round([decimals])                                 | Round a DataFrame to a variable number of decimal places.                                                                                                                                                                          |\n| rpow(other[,?axis,?level,?fill_value])            | Exponential power of dataframe and other, element-wise (binary operator?rpow).                                                                                                                                                     |\n| rsub(other[,?axis,?level,?fill_value])            | Subtraction of dataframe and other, element-wise (binary operator?rsub).                                                                                                                                                           |\n| rtruediv(other[,?axis,?level,?fill_value])        | Floating division of dataframe and other, element-wise (binary operator?rtruediv).                                                                                                                                                 |\n| sample([n,?frac,?replace,?weights,?...])          | Returns a random sample of items from an axis of object.                                                                                                                                                                           |\n| select(crit[,?axis])                              | Return data corresponding to axis labels matching criteria                                                                                                                                                                         |\n| select_dtypes([include,?exclude])                 | Return a subset of a DataFrame including/excluding columns based on their?dtype.                                                                                                                                                   |\n| sem([axis,?skipna,?level,?ddof,?numeric_only])    | Return unbiased standard error of the mean over requested axis.                                                                                                                                                                    |\n| set_axis(axis,?labels)                            | public verson of axis assignment                                                                                                                                                                                                   |\n| set_index(keys[,?drop,?append,?inplace,?...])     | Set the DataFrame index (row labels) using one or more existing columns.                                                                                                                                                           |\n| set_value(index,?col,?value[,?takeable])          | Put single value at passed column and index                                                                                                                                                                                        |\n| shift([periods,?freq,?axis])                      | Shift index by desired number of periods with an optional time freq                                                                                                                                                                |\n| skew([axis,?skipna,?level,?numeric_only])         | Return unbiased skew over requested axis                                                                                                                                                                                           |\n| slice_shift([periods,?axis])                      | Equivalent to?shift?without copying data.                                                                                                                                                                                          |\n| sort([columns,?axis,?ascending,?inplace,?...])    | DEPRECATED: use?DataFrame.sort_values()                                                                                                                                                                                            |\n| sort_index([axis,?level,?ascending,?...])         | Sort object by labels (along an axis)                                                                                                                                                                                              |\n| sort_values(by[,?axis,?ascending,?inplace,?...])  | Sort by the values along either axis                                                                                                                                                                                               |\n| sortlevel([level,?axis,?ascending,?inplace,?...]) | Sort multilevel index by chosen axis and primary level.                                                                                                                                                                            |\n| squeeze(\\*\\*kwargs)                               | Squeeze length 1 dimensions.                                                                                                                                                                                                       |\n| stack([level,?dropna])                            | Pivot a level of the (possibly hierarchical) column labels, returning a DataFrame (or Series in the case of an object with a single level of column labels) having a hierarchical index with a new inner-most level of row labels. |\n| std([axis,?skipna,?level,?ddof,?numeric_only])    | Return sample standard deviation over requested axis.                                                                                                                                                                              |\n| sub(other[,?axis,?level,?fill_value])             | Subtraction of dataframe and other, element-wise (binary operator?sub).                                                                                                                                                            |\n| subtract(other[,?axis,?level,?fill_value])        | Subtraction of dataframe and other, element-wise (binary operator?sub).                                                                                                                                                            |\n| sum([axis,?skipna,?level,?numeric_only])          | Return the sum of the values for the requested axis                                                                                                                                                                                |\n| swapaxes(axis1,?axis2[,?copy])                    | Interchange axes and swap values axes appropriately                                                                                                                                                                                |\n| swaplevel([i,?j,?axis])                           | Swap levels i and j in a MultiIndex on a particular axis                                                                                                                                                                           |\n| tail([n])                                         | Returns last n rows                                                                                                                                                                                                                |\n| take(indices[,?axis,?convert,?is_copy])           | Analogous to ndarray.take                                                                                                                                                                                                          |\n| to_clipboard([excel,?sep])                        | Attempt to write text representation of object to the system clipboard This can be pasted into Excel, for example.                                                                                                                 |\n| to_csv([path_or_buf,?sep,?na_rep,?...])           | Write DataFrame to a comma-separated values (csv) file                                                                                                                                                                             |\n| to_dense()                                        | Return dense representation of NDFrame (as opposed to sparse)                                                                                                                                                                      |\n| to_dict([orient])                                 | Convert DataFrame to dictionary.                                                                                                                                                                                                   |\n| to_excel(excel_writer[,?sheet_name,?na_rep,?...]) | Write DataFrame to a excel sheet                                                                                                                                                                                                   |\n| to_gbq(destination_table,?project_id[,?...])      | Write a DataFrame to a Google BigQuery table.                                                                                                                                                                                      |\n| to_hdf(path_or_buf,?key,?\\*\\*kwargs)              | Write the contained data to an HDF5 file using HDFStore.                                                                                                                                                                           |\n| to_html([buf,?columns,?col_space,?header,?...])   | Render a DataFrame as an HTML table.                                                                                                                                                                                               |\n| to_json([path_or_buf,?orient,?date_format,?...])  | Convert the object to a JSON string.                                                                                                                                                                                               |\n| to_latex([buf,?columns,?col_space,?header,?...])  | Render a DataFrame to a tabular environment table.                                                                                                                                                                                 |\n| to_msgpack([path_or_buf,?encoding])               | msgpack (serialize) object to input file path                                                                                                                                                                                      |\n| to_panel()                                        | Transform long (stacked) format (DataFrame) into wide (3D, Panel) format.                                                                                                                                                          |\n| to_period([freq,?axis,?copy])                     | Convert DataFrame from DatetimeIndex to PeriodIndex with desired                                                                                                                                                                   |\n| to_pickle(path)                                   | Pickle (serialize) object to input file path.                                                                                                                                                                                      |\n| to_records([index,?convert_datetime64])           | Convert DataFrame to record array.                                                                                                                                                                                                 |\n| to_sparse([fill_value,?kind])                     | Convert to SparseDataFrame                                                                                                                                                                                                         |\n| to_sql(name,?con[,?flavor,?schema,?...])          | Write records stored in a DataFrame to a SQL database.                                                                                                                                                                             |\n| to_stata(fname[,?convert_dates,?...])             | A class for writing Stata binary dta files from array-like objects                                                                                                                                                                 |\n| to_string([buf,?columns,?col_space,?header,?...]) | Render a DataFrame to a console-friendly tabular output.                                                                                                                                                                           |\n| to_timestamp([freq,?how,?axis,?copy])             | Cast to DatetimeIndex of timestamps, at?beginning?of period                                                                                                                                                                        |\n| to_xarray()                                       | Return an xarray object from the pandas object.                                                                                                                                                                                    |\n| transpose(\\*args,?\\*\\*kwargs)                     | Transpose index and columns                                                                                                                                                                                                        |\n| truediv(other[,?axis,?level,?fill_value])         | Floating division of dataframe and other, element-wise (binary operator?truediv).                                                                                                                                                  |\n| truncate([before,?after,?axis,?copy])             | Truncates a sorted NDFrame before and/or after some particular index value.                                                                                                                                                        |\n| tshift([periods,?freq,?axis])                     | Shift the time index, using the indexs frequency if available.                                                                                                                                                                    |\n| tz_convert(tz[,?axis,?level,?copy])               | Convert tz-aware axis to target time zone.                                                                                                                                                                                         |\n| tz_localize(\\*args,?\\*\\*kwargs)                   | Localize tz-naive TimeSeries to target time zone.                                                                                                                                                                                  |\n| unstack([level,?fill_value])                      | Pivot a level of the (necessarily hierarchical) index labels, returning a DataFrame having a new level of column labels whose inner-most level consists of the pivoted index labels.                                               |\n| update(other[,?join,?overwrite,?...])             | Modify DataFrame in place using non-NA values from passed DataFrame.                                                                                                                                                               |\n| var([axis,?skipna,?level,?ddof,?numeric_only])    | Return unbiased variance over requested axis.                                                                                                                                                                                      |\n| where(cond[,?other,?inplace,?axis,?level,?...])   | Return an object of same shape as self and whose corresponding entries are from self where cond is True and otherwise are from other.                                                                                              |\n| xs(key[,?axis,?level,?drop_level])                | Returns a cross-section (row(s) or column(s)) from the Series/DataFrame.                                                                                                                                                           |","slug":"pandas-func","published":1,"updated":"2018-07-23T01:28:38.502Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjmd072dk002xqcw6fhwjjsvj","content":"<p>pandasDataFrame<br>csvmd:<a href=\"http://www.tablesgenerator.com/\" target=\"_blank\" rel=\"noopener\">Tables Generator</a></p><a id=\"more\"></a><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table><thead><tr><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th></tr></thead><tbody><tr><td style=\"text-align:center\">T</td><td style=\"text-align:center\">Transpose index and columns at Fast label-based scalar accessor</td></tr><tr><td style=\"text-align:center\">axes</td><td style=\"text-align:center\">Return a list with the row axis labels and column axis labels as the only members.</td></tr><tr><td style=\"text-align:center\">blocks</td><td style=\"text-align:center\">Internal property, property synonym for as_blocks()</td></tr><tr><td style=\"text-align:center\">dtypes</td><td style=\"text-align:center\">Return the dtypes in this object.</td></tr><tr><td style=\"text-align:center\">empty</td><td style=\"text-align:center\">True if NDFrame is entirely empty [no items], meaning any of the axes are of length 0.</td></tr><tr><td style=\"text-align:center\">ftypes</td><td style=\"text-align:center\">Return the ftypes (indication of sparse/dense and dtype) in this object.</td></tr><tr><td style=\"text-align:center\">iat</td><td style=\"text-align:center\">Fast integer location scalar accessor.</td></tr><tr><td style=\"text-align:center\">iloc</td><td style=\"text-align:center\">Purely integer-location based indexing for selection by position.</td></tr><tr><td style=\"text-align:center\">is_copy</td><td style=\"text-align:center\"></td></tr><tr><td style=\"text-align:center\">ix</td><td style=\"text-align:center\">A primarily label-location based indexer, with integer position fallback.</td></tr><tr><td style=\"text-align:center\">loc</td><td style=\"text-align:center\">Purely label-location based indexer for selection by label.</td></tr><tr><td style=\"text-align:center\">ndim</td><td style=\"text-align:center\">Number of axes / array dimensions</td></tr><tr><td style=\"text-align:center\">shape</td><td style=\"text-align:center\">Return a tuple representing the dimensionality of the DataFrame.</td></tr><tr><td style=\"text-align:center\">size</td><td style=\"text-align:center\">number of elements in the NDFrame</td></tr><tr><td style=\"text-align:center\">style</td><td style=\"text-align:center\">Property returning a Styler object containing methods for building a styled HTML representation fo the DataFrame.</td></tr><tr><td style=\"text-align:center\">values</td><td style=\"text-align:center\">Numpy representation of NDFrame</td></tr></tbody></table><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>abs()</td><td>Return an object with absolute value takenonly applicable to objects that are all numeric.</td></tr><tr><td>add(other[,?axis,?level,?fill_value])</td><td>Addition of dataframe and other, element-wise (binary operator?add).</td></tr><tr><td>add_prefix(prefix)</td><td>Concatenate prefix string with panel items names.</td></tr><tr><td>add_suffix(suffix)</td><td>Concatenate suffix string with panel items names.</td></tr><tr><td>align(other[,?join,?axis,?level,?copy,?])</td><td>Align two object on their axes with the</td></tr><tr><td>all([axis,?bool_only,?skipna,?level])</td><td>Return whether all elements are True over requested axis</td></tr><tr><td>any([axis,?bool_only,?skipna,?level])</td><td>Return whether any element is True over requested axis</td></tr><tr><td>append(other[,?ignore_index,?verify_integrity])</td><td>Append rows of?other?to the end of this frame, returning a new object.</td></tr><tr><td>apply(func[,?axis,?broadcast,?raw,?reduce,?args])</td><td>Applies function along input axis of DataFrame.</td></tr><tr><td>applymap(func)</td><td>Apply a function to a DataFrame that is intended to operate elementwise, i.e.</td></tr><tr><td>as_blocks([copy])</td><td>Convert the frame to a dict of dtype -&gt; Constructor Types that each has a homogeneous dtype.</td></tr><tr><td>as_matrix([columns])</td><td>Convert the frame to its Numpy-array representation.</td></tr><tr><td>asfreq(freq[,?method,?how,?normalize])</td><td>Convert TimeSeries to specified frequency.</td></tr><tr><td>asof(where[,?subset])</td><td>The last row without any NaN is taken (or the last row without</td></tr><tr><td>assign(**kwargs)</td><td>Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones.</td></tr><tr><td>astype(dtype[,?copy,?raise_on_error])</td><td>Cast object to input numpy.dtype</td></tr><tr><td>at_time(time[,?asof])</td><td>Select values at particular time of day (e.g.</td></tr><tr><td>between_time(start_time,?end_time[,?])</td><td>Select values between particular times of the day (e.g., 9:00-9:30 AM).</td></tr><tr><td>bfill([axis,?inplace,?limit,?downcast])</td><td>Synonym for NDFrame.fillna(method=bfill)</td></tr><tr><td>bool()</td><td>Return the bool of a single element PandasObject.</td></tr><tr><td>boxplot([column,?by,?ax,?fontsize,?rot,?])</td><td>Make a box plot from DataFrame column optionally grouped by some columns or</td></tr><tr><td>clip([lower,?upper,?axis])</td><td>Trim values at input threshold(s).</td></tr><tr><td>clip_lower(threshold[,?axis])</td><td>Return copy of the input with values below given value(s) truncated.</td></tr><tr><td>clip_upper(threshold[,?axis])</td><td>Return copy of input with values above given value(s) truncated.</td></tr><tr><td>combine(other,?func[,?fill_value,?overwrite])</td><td>Add two DataFrame objects and do not propagate NaN values, so if for a</td></tr><tr><td>combineAdd(other)</td><td>DEPRECATED.</td></tr><tr><td>combineMult(other)</td><td>DEPRECATED.</td></tr><tr><td>combine_first(other)</td><td>Combine two DataFrame objects and default to non-null values in frame calling the method.</td></tr><tr><td>compound([axis,?skipna,?level])</td><td>Return the compound percentage of the values for the requested axis</td></tr><tr><td>consolidate([inplace])</td><td>Compute NDFrame with consolidated internals (data of each dtype grouped together in a single ndarray).</td></tr><tr><td>convert_objects([convert_dates,?])</td><td>Deprecated.</td></tr><tr><td>copy([deep])</td><td>Make a copy of this objects data.</td></tr><tr><td>corr([method,?min_periods])</td><td>Compute pairwise correlation of columns, excluding NA/null values</td></tr><tr><td>corrwith(other[,?axis,?drop])</td><td>Compute pairwise correlation between rows or columns of two DataFrame objects.</td></tr><tr><td>count([axis,?level,?numeric_only])</td><td>Return Series with number of non-NA/null observations over requested axis.</td></tr><tr><td>cov([min_periods])</td><td>Compute pairwise covariance of columns, excluding NA/null values</td></tr><tr><td>cummax([axis,?skipna])</td><td>Return cumulative max over requested axis.</td></tr><tr><td>cummin([axis,?skipna])</td><td>Return cumulative minimum over requested axis.</td></tr><tr><td>cumprod([axis,?skipna])</td><td>Return cumulative product over requested axis.</td></tr><tr><td>cumsum([axis,?skipna])</td><td>Return cumulative sum over requested axis.</td></tr><tr><td>describe([percentiles,?include,?exclude])</td><td>Generate various summary statistics, excluding NaN values.</td></tr><tr><td>diff([periods,?axis])</td><td>1st discrete difference of object</td></tr><tr><td>div(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>divide(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>dot(other)</td><td>Matrix multiplication with DataFrame or Series objects</td></tr><tr><td>drop(labels[,?axis,?level,?inplace,?errors])</td><td>Return new object with labels in requested axis removed.</td></tr><tr><td>drop_duplicates(*args,?**kwargs)</td><td>Return DataFrame with duplicate rows removed, optionally only</td></tr><tr><td>dropna([axis,?how,?thresh,?subset,?inplace])</td><td>Return object with labels on given axis omitted where alternately any</td></tr><tr><td>duplicated(*args,?**kwargs)</td><td>Return boolean Series denoting duplicate rows, optionally only</td></tr><tr><td>eq(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods eq</td></tr><tr><td>equals(other)</td><td>Determines if two NDFrame objects contain the same elements.</td></tr><tr><td>eval(expr[,?inplace])</td><td>Evaluate an expression in the context of the calling DataFrame instance.</td></tr><tr><td>ewm([com,?span,?halflife,?alpha,?])</td><td>Provides exponential weighted functions</td></tr><tr><td>expanding([min_periods,?freq,?center,?axis])</td><td>Provides expanding transformations.</td></tr><tr><td>ffill([axis,?inplace,?limit,?downcast])</td><td>Synonym for NDFrame.fillna(method=ffill)</td></tr><tr><td>fillna([value,?method,?axis,?inplace,?])</td><td>Fill NA/NaN values using the specified method</td></tr><tr><td>filter([items,?like,?regex,?axis])</td><td>Subset rows or columns of dataframe according to labels in the specified index.</td></tr><tr><td>first(offset)</td><td>Convenience method for subsetting initial periods of time series data based on a date offset.</td></tr><tr><td>first_valid_index()</td><td>Return label for first non-NA/null value</td></tr><tr><td>floordiv(other[,?axis,?level,?fill_value])</td><td>Integer division of dataframe and other, element-wise (binary operator?floordiv).</td></tr><tr><td>from_csv(path[,?header,?sep,?index_col,?])</td><td>Read CSV file (DISCOURAGED, please use?pandas.read_csv()?instead).</td></tr><tr><td>from_dict(data[,?orient,?dtype])</td><td>Construct DataFrame from dict of array-like or dicts</td></tr><tr><td>from_items(items[,?columns,?orient])</td><td>Convert (key, value) pairs to DataFrame.</td></tr><tr><td>from_records(data[,?index,?exclude,?])</td><td>Convert structured or record ndarray to DataFrame</td></tr><tr><td>ge(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods ge</td></tr><tr><td>get(key[,?default])</td><td>Get item from object for given key (DataFrame column, Panel slice, etc.).</td></tr><tr><td>get_dtype_counts()</td><td>Return the counts of dtypes in this object.</td></tr><tr><td>get_ftype_counts()</td><td>Return the counts of ftypes in this object.</td></tr><tr><td>get_value(index,?col[,?takeable])</td><td>Quickly retrieve single value at passed column and index</td></tr><tr><td>get_values()</td><td>same as values (but handles sparseness conversions)</td></tr><tr><td>groupby([by,?axis,?level,?as_index,?sort,?])</td><td>Group series using mapper (dict or key function, apply given function to group, return result as series) or by a series of columns.</td></tr><tr><td>gt(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods gt</td></tr><tr><td>head([n])</td><td>Returns first n rows</td></tr><tr><td>hist(data[,?column,?by,?grid,?xlabelsize,?])</td><td>Draw histogram of the DataFrames series using matplotlib / pylab.</td></tr><tr><td>icol(i)</td><td>DEPRECATED.</td></tr><tr><td>idxmax([axis,?skipna])</td><td>Return index of first occurrence of maximum over requested axis.</td></tr><tr><td>idxmin([axis,?skipna])</td><td>Return index of first occurrence of minimum over requested axis.</td></tr><tr><td>iget_value(i,?j)</td><td>DEPRECATED.</td></tr><tr><td>info([verbose,?buf,?max_cols,?memory_usage,?])</td><td>Concise summary of a DataFrame.</td></tr><tr><td>insert(loc,?column,?value[,?allow_duplicates])</td><td>Insert column into DataFrame at specified location.</td></tr><tr><td>interpolate([method,?axis,?limit,?inplace,?])</td><td>Interpolate values according to different methods.</td></tr><tr><td>irow(i[,?copy])</td><td>DEPRECATED.</td></tr><tr><td>isin(values)</td><td>Return boolean DataFrame showing whether each element in the DataFrame is contained in values.</td></tr><tr><td>isnull()</td><td>Return a boolean same-sized object indicating if the values are null.</td></tr><tr><td>iteritems()</td><td>Iterator over (column name, Series) pairs.</td></tr><tr><td>iterkv(*args,?**kwargs)</td><td>iteritems alias used to get around 2to3. Deprecated</td></tr><tr><td>iterrows()</td><td>Iterate over DataFrame rows as (index, Series) pairs.</td></tr><tr><td>itertuples([index,?name])</td><td>Iterate over DataFrame rows as namedtuples, with index value as first element of the tuple.</td></tr><tr><td>join(other[,?on,?how,?lsuffix,?rsuffix,?sort])</td><td>Join columns with other DataFrame either on index or on a key column.</td></tr><tr><td>keys()</td><td>Get the info axis (see Indexing for more)</td></tr><tr><td>kurt([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).</td></tr><tr><td>kurtosis([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).</td></tr><tr><td>last(offset)</td><td>Convenience method for subsetting final periods of time series data based on a date offset.</td></tr><tr><td>last_valid_index()</td><td>Return label for last non-NA/null value</td></tr><tr><td>le(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods le</td></tr><tr><td>lookup(row_labels,?col_labels)</td><td>Label-based fancy indexing function for DataFrame.</td></tr><tr><td>lt(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods lt</td></tr><tr><td>mad([axis,?skipna,?level])</td><td>Return the mean absolute deviation of the values for the requested axis</td></tr><tr><td>mask(cond[,?other,?inplace,?axis,?level,?])</td><td>Return an object of same shape as self and whose corresponding entries are from self where cond is False and otherwise are from other.</td></tr><tr><td>max([axis,?skipna,?level,?numeric_only])</td><td>This method returns the maximum of the values in the object.</td></tr><tr><td>mean([axis,?skipna,?level,?numeric_only])</td><td>Return the mean of the values for the requested axis</td></tr><tr><td>median([axis,?skipna,?level,?numeric_only])</td><td>Return the median of the values for the requested axis</td></tr><tr><td>memory_usage([index,?deep])</td><td>Memory usage of DataFrame columns.</td></tr><tr><td>merge(right[,?how,?on,?left_on,?right_on,?])</td><td>Merge DataFrame objects by performing a database-style join operation by columns or indexes.</td></tr><tr><td>min([axis,?skipna,?level,?numeric_only])</td><td>This method returns the minimum of the values in the object.</td></tr><tr><td>mod(other[,?axis,?level,?fill_value])</td><td>Modulo of dataframe and other, element-wise (binary operator?mod).</td></tr><tr><td>mode([axis,?numeric_only])</td><td>Gets the mode(s) of each element along the axis selected.</td></tr><tr><td>mul(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?mul).</td></tr><tr><td>multiply(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?mul).</td></tr><tr><td>ne(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods ne</td></tr><tr><td>nlargest(n,?columns[,?keep])</td><td>Get the rows of a DataFrame sorted by the?n?largest values of?columns.</td></tr><tr><td>notnull()</td><td>Return a boolean same-sized object indicating if the values are not null.</td></tr><tr><td>nsmallest(n,?columns[,?keep])</td><td>Get the rows of a DataFrame sorted by the?n?smallest values of?columns.</td></tr><tr><td>pct_change([periods,?fill_method,?limit,?freq])</td><td>Percent change over given number of periods.</td></tr><tr><td>pipe(func,?*args,?**kwargs)</td><td>Apply func(self, <em>args, *</em>kwargs)</td></tr><tr><td>pivot([index,?columns,?values])</td><td>Reshape data (produce a pivot table) based on column values.</td></tr><tr><td>pivot_table(data[,?values,?index,?columns,?])</td><td>Create a spreadsheet-style pivot table as a DataFrame.</td></tr><tr><td>plot</td><td>alias of?FramePlotMethods</td></tr><tr><td>pop(item)</td><td>Return item and drop from frame.</td></tr><tr><td>pow(other[,?axis,?level,?fill_value])</td><td>Exponential power of dataframe and other, element-wise (binary operator?pow).</td></tr><tr><td>prod([axis,?skipna,?level,?numeric_only])</td><td>Return the product of the values for the requested axis</td></tr><tr><td>product([axis,?skipna,?level,?numeric_only])</td><td>Return the product of the values for the requested axis</td></tr><tr><td>quantile([q,?axis,?numeric_only,?interpolation])</td><td>Return values at the given quantile over requested axis, a la numpy.percentile.</td></tr><tr><td>query(expr[,?inplace])</td><td>Query the columns of a frame with a boolean expression.</td></tr><tr><td>radd(other[,?axis,?level,?fill_value])</td><td>Addition of dataframe and other, element-wise (binary operator?radd).</td></tr><tr><td>rank([axis,?method,?numeric_only,?])</td><td>Compute numerical data ranks (1 through n) along axis.</td></tr><tr><td>rdiv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?rtruediv).</td></tr><tr><td>reindex([index,?columns])</td><td>Conform DataFrame to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.</td></tr><tr><td>reindex_axis(labels[,?axis,?method,?level,?])</td><td>Conform input object to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.</td></tr><tr><td>reindex_like(other[,?method,?copy,?limit,?])</td><td>Return an object with matching indices to myself.</td></tr><tr><td>rename([index,?columns])</td><td>Alter axes input function or functions.</td></tr><tr><td>rename_axis(mapper[,?axis,?copy,?inplace])</td><td>Alter index and / or columns using input function or functions.</td></tr><tr><td>reorder_levels(order[,?axis])</td><td>Rearrange index levels using input order.</td></tr><tr><td>replace([to_replace,?value,?inplace,?limit,?])</td><td>Replace values given in to_replace with value.</td></tr><tr><td>resample(rule[,?how,?axis,?fill_method,?])</td><td>Convenience method for frequency conversion and resampling of time series.</td></tr><tr><td>reset_index([level,?drop,?inplace,?])</td><td>For DataFrame with multi-level index, return new DataFrame with labeling information in the columns under the index names, defaulting to level_0, level_1, etc.</td></tr><tr><td>rfloordiv(other[,?axis,?level,?fill_value])</td><td>Integer division of dataframe and other, element-wise (binary operator?rfloordiv).</td></tr><tr><td>rmod(other[,?axis,?level,?fill_value])</td><td>Modulo of dataframe and other, element-wise (binary operator?rmod).</td></tr><tr><td>rmul(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?rmul).</td></tr><tr><td>rolling(window[,?min_periods,?freq,?center,?])</td><td>Provides rolling window calculcations.</td></tr><tr><td>round([decimals])</td><td>Round a DataFrame to a variable number of decimal places.</td></tr><tr><td>rpow(other[,?axis,?level,?fill_value])</td><td>Exponential power of dataframe and other, element-wise (binary operator?rpow).</td></tr><tr><td>rsub(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?rsub).</td></tr><tr><td>rtruediv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?rtruediv).</td></tr><tr><td>sample([n,?frac,?replace,?weights,?])</td><td>Returns a random sample of items from an axis of object.</td></tr><tr><td>select(crit[,?axis])</td><td>Return data corresponding to axis labels matching criteria</td></tr><tr><td>select_dtypes([include,?exclude])</td><td>Return a subset of a DataFrame including/excluding columns based on their?dtype.</td></tr><tr><td>sem([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return unbiased standard error of the mean over requested axis.</td></tr><tr><td>set_axis(axis,?labels)</td><td>public verson of axis assignment</td></tr><tr><td>set_index(keys[,?drop,?append,?inplace,?])</td><td>Set the DataFrame index (row labels) using one or more existing columns.</td></tr><tr><td>set_value(index,?col,?value[,?takeable])</td><td>Put single value at passed column and index</td></tr><tr><td>shift([periods,?freq,?axis])</td><td>Shift index by desired number of periods with an optional time freq</td></tr><tr><td>skew([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased skew over requested axis</td></tr><tr><td>slice_shift([periods,?axis])</td><td>Equivalent to?shift?without copying data.</td></tr><tr><td>sort([columns,?axis,?ascending,?inplace,?])</td><td>DEPRECATED: use?DataFrame.sort_values()</td></tr><tr><td>sort_index([axis,?level,?ascending,?])</td><td>Sort object by labels (along an axis)</td></tr><tr><td>sort_values(by[,?axis,?ascending,?inplace,?])</td><td>Sort by the values along either axis</td></tr><tr><td>sortlevel([level,?axis,?ascending,?inplace,?])</td><td>Sort multilevel index by chosen axis and primary level.</td></tr><tr><td>squeeze(**kwargs)</td><td>Squeeze length 1 dimensions.</td></tr><tr><td>stack([level,?dropna])</td><td>Pivot a level of the (possibly hierarchical) column labels, returning a DataFrame (or Series in the case of an object with a single level of column labels) having a hierarchical index with a new inner-most level of row labels.</td></tr><tr><td>std([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return sample standard deviation over requested axis.</td></tr><tr><td>sub(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?sub).</td></tr><tr><td>subtract(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?sub).</td></tr><tr><td>sum([axis,?skipna,?level,?numeric_only])</td><td>Return the sum of the values for the requested axis</td></tr><tr><td>swapaxes(axis1,?axis2[,?copy])</td><td>Interchange axes and swap values axes appropriately</td></tr><tr><td>swaplevel([i,?j,?axis])</td><td>Swap levels i and j in a MultiIndex on a particular axis</td></tr><tr><td>tail([n])</td><td>Returns last n rows</td></tr><tr><td>take(indices[,?axis,?convert,?is_copy])</td><td>Analogous to ndarray.take</td></tr><tr><td>to_clipboard([excel,?sep])</td><td>Attempt to write text representation of object to the system clipboard This can be pasted into Excel, for example.</td></tr><tr><td>to_csv([path_or_buf,?sep,?na_rep,?])</td><td>Write DataFrame to a comma-separated values (csv) file</td></tr><tr><td>to_dense()</td><td>Return dense representation of NDFrame (as opposed to sparse)</td></tr><tr><td>to_dict([orient])</td><td>Convert DataFrame to dictionary.</td></tr><tr><td>to_excel(excel_writer[,?sheet_name,?na_rep,?])</td><td>Write DataFrame to a excel sheet</td></tr><tr><td>to_gbq(destination_table,?project_id[,?])</td><td>Write a DataFrame to a Google BigQuery table.</td></tr><tr><td>to_hdf(path_or_buf,?key,?**kwargs)</td><td>Write the contained data to an HDF5 file using HDFStore.</td></tr><tr><td>to_html([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame as an HTML table.</td></tr><tr><td>to_json([path_or_buf,?orient,?date_format,?])</td><td>Convert the object to a JSON string.</td></tr><tr><td>to_latex([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame to a tabular environment table.</td></tr><tr><td>to_msgpack([path_or_buf,?encoding])</td><td>msgpack (serialize) object to input file path</td></tr><tr><td>to_panel()</td><td>Transform long (stacked) format (DataFrame) into wide (3D, Panel) format.</td></tr><tr><td>to_period([freq,?axis,?copy])</td><td>Convert DataFrame from DatetimeIndex to PeriodIndex with desired</td></tr><tr><td>to_pickle(path)</td><td>Pickle (serialize) object to input file path.</td></tr><tr><td>to_records([index,?convert_datetime64])</td><td>Convert DataFrame to record array.</td></tr><tr><td>to_sparse([fill_value,?kind])</td><td>Convert to SparseDataFrame</td></tr><tr><td>to_sql(name,?con[,?flavor,?schema,?])</td><td>Write records stored in a DataFrame to a SQL database.</td></tr><tr><td>to_stata(fname[,?convert_dates,?])</td><td>A class for writing Stata binary dta files from array-like objects</td></tr><tr><td>to_string([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame to a console-friendly tabular output.</td></tr><tr><td>to_timestamp([freq,?how,?axis,?copy])</td><td>Cast to DatetimeIndex of timestamps, at?beginning?of period</td></tr><tr><td>to_xarray()</td><td>Return an xarray object from the pandas object.</td></tr><tr><td>transpose(*args,?**kwargs)</td><td>Transpose index and columns</td></tr><tr><td>truediv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>truncate([before,?after,?axis,?copy])</td><td>Truncates a sorted NDFrame before and/or after some particular index value.</td></tr><tr><td>tshift([periods,?freq,?axis])</td><td>Shift the time index, using the indexs frequency if available.</td></tr><tr><td>tz_convert(tz[,?axis,?level,?copy])</td><td>Convert tz-aware axis to target time zone.</td></tr><tr><td>tz_localize(*args,?**kwargs)</td><td>Localize tz-naive TimeSeries to target time zone.</td></tr><tr><td>unstack([level,?fill_value])</td><td>Pivot a level of the (necessarily hierarchical) index labels, returning a DataFrame having a new level of column labels whose inner-most level consists of the pivoted index labels.</td></tr><tr><td>update(other[,?join,?overwrite,?])</td><td>Modify DataFrame in place using non-NA values from passed DataFrame.</td></tr><tr><td>var([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return unbiased variance over requested axis.</td></tr><tr><td>where(cond[,?other,?inplace,?axis,?level,?])</td><td>Return an object of same shape as self and whose corresponding entries are from self where cond is True and otherwise are from other.</td></tr><tr><td>xs(key[,?axis,?level,?drop_level])</td><td>Returns a cross-section (row(s) or column(s)) from the Series/DataFrame.</td></tr></tbody></table>","site":{"data":{}},"excerpt":"<p>pandasDataFrame<br>csvmd:<a href=\"http://www.tablesgenerator.com/\" target=\"_blank\" rel=\"noopener\">Tables Generator</a></p>","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table><thead><tr><th style=\"text-align:center\"></th><th style=\"text-align:center\"></th></tr></thead><tbody><tr><td style=\"text-align:center\">T</td><td style=\"text-align:center\">Transpose index and columns at Fast label-based scalar accessor</td></tr><tr><td style=\"text-align:center\">axes</td><td style=\"text-align:center\">Return a list with the row axis labels and column axis labels as the only members.</td></tr><tr><td style=\"text-align:center\">blocks</td><td style=\"text-align:center\">Internal property, property synonym for as_blocks()</td></tr><tr><td style=\"text-align:center\">dtypes</td><td style=\"text-align:center\">Return the dtypes in this object.</td></tr><tr><td style=\"text-align:center\">empty</td><td style=\"text-align:center\">True if NDFrame is entirely empty [no items], meaning any of the axes are of length 0.</td></tr><tr><td style=\"text-align:center\">ftypes</td><td style=\"text-align:center\">Return the ftypes (indication of sparse/dense and dtype) in this object.</td></tr><tr><td style=\"text-align:center\">iat</td><td style=\"text-align:center\">Fast integer location scalar accessor.</td></tr><tr><td style=\"text-align:center\">iloc</td><td style=\"text-align:center\">Purely integer-location based indexing for selection by position.</td></tr><tr><td style=\"text-align:center\">is_copy</td><td style=\"text-align:center\"></td></tr><tr><td style=\"text-align:center\">ix</td><td style=\"text-align:center\">A primarily label-location based indexer, with integer position fallback.</td></tr><tr><td style=\"text-align:center\">loc</td><td style=\"text-align:center\">Purely label-location based indexer for selection by label.</td></tr><tr><td style=\"text-align:center\">ndim</td><td style=\"text-align:center\">Number of axes / array dimensions</td></tr><tr><td style=\"text-align:center\">shape</td><td style=\"text-align:center\">Return a tuple representing the dimensionality of the DataFrame.</td></tr><tr><td style=\"text-align:center\">size</td><td style=\"text-align:center\">number of elements in the NDFrame</td></tr><tr><td style=\"text-align:center\">style</td><td style=\"text-align:center\">Property returning a Styler object containing methods for building a styled HTML representation fo the DataFrame.</td></tr><tr><td style=\"text-align:center\">values</td><td style=\"text-align:center\">Numpy representation of NDFrame</td></tr></tbody></table><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>abs()</td><td>Return an object with absolute value takenonly applicable to objects that are all numeric.</td></tr><tr><td>add(other[,?axis,?level,?fill_value])</td><td>Addition of dataframe and other, element-wise (binary operator?add).</td></tr><tr><td>add_prefix(prefix)</td><td>Concatenate prefix string with panel items names.</td></tr><tr><td>add_suffix(suffix)</td><td>Concatenate suffix string with panel items names.</td></tr><tr><td>align(other[,?join,?axis,?level,?copy,?])</td><td>Align two object on their axes with the</td></tr><tr><td>all([axis,?bool_only,?skipna,?level])</td><td>Return whether all elements are True over requested axis</td></tr><tr><td>any([axis,?bool_only,?skipna,?level])</td><td>Return whether any element is True over requested axis</td></tr><tr><td>append(other[,?ignore_index,?verify_integrity])</td><td>Append rows of?other?to the end of this frame, returning a new object.</td></tr><tr><td>apply(func[,?axis,?broadcast,?raw,?reduce,?args])</td><td>Applies function along input axis of DataFrame.</td></tr><tr><td>applymap(func)</td><td>Apply a function to a DataFrame that is intended to operate elementwise, i.e.</td></tr><tr><td>as_blocks([copy])</td><td>Convert the frame to a dict of dtype -&gt; Constructor Types that each has a homogeneous dtype.</td></tr><tr><td>as_matrix([columns])</td><td>Convert the frame to its Numpy-array representation.</td></tr><tr><td>asfreq(freq[,?method,?how,?normalize])</td><td>Convert TimeSeries to specified frequency.</td></tr><tr><td>asof(where[,?subset])</td><td>The last row without any NaN is taken (or the last row without</td></tr><tr><td>assign(**kwargs)</td><td>Assign new columns to a DataFrame, returning a new object (a copy) with all the original columns in addition to the new ones.</td></tr><tr><td>astype(dtype[,?copy,?raise_on_error])</td><td>Cast object to input numpy.dtype</td></tr><tr><td>at_time(time[,?asof])</td><td>Select values at particular time of day (e.g.</td></tr><tr><td>between_time(start_time,?end_time[,?])</td><td>Select values between particular times of the day (e.g., 9:00-9:30 AM).</td></tr><tr><td>bfill([axis,?inplace,?limit,?downcast])</td><td>Synonym for NDFrame.fillna(method=bfill)</td></tr><tr><td>bool()</td><td>Return the bool of a single element PandasObject.</td></tr><tr><td>boxplot([column,?by,?ax,?fontsize,?rot,?])</td><td>Make a box plot from DataFrame column optionally grouped by some columns or</td></tr><tr><td>clip([lower,?upper,?axis])</td><td>Trim values at input threshold(s).</td></tr><tr><td>clip_lower(threshold[,?axis])</td><td>Return copy of the input with values below given value(s) truncated.</td></tr><tr><td>clip_upper(threshold[,?axis])</td><td>Return copy of input with values above given value(s) truncated.</td></tr><tr><td>combine(other,?func[,?fill_value,?overwrite])</td><td>Add two DataFrame objects and do not propagate NaN values, so if for a</td></tr><tr><td>combineAdd(other)</td><td>DEPRECATED.</td></tr><tr><td>combineMult(other)</td><td>DEPRECATED.</td></tr><tr><td>combine_first(other)</td><td>Combine two DataFrame objects and default to non-null values in frame calling the method.</td></tr><tr><td>compound([axis,?skipna,?level])</td><td>Return the compound percentage of the values for the requested axis</td></tr><tr><td>consolidate([inplace])</td><td>Compute NDFrame with consolidated internals (data of each dtype grouped together in a single ndarray).</td></tr><tr><td>convert_objects([convert_dates,?])</td><td>Deprecated.</td></tr><tr><td>copy([deep])</td><td>Make a copy of this objects data.</td></tr><tr><td>corr([method,?min_periods])</td><td>Compute pairwise correlation of columns, excluding NA/null values</td></tr><tr><td>corrwith(other[,?axis,?drop])</td><td>Compute pairwise correlation between rows or columns of two DataFrame objects.</td></tr><tr><td>count([axis,?level,?numeric_only])</td><td>Return Series with number of non-NA/null observations over requested axis.</td></tr><tr><td>cov([min_periods])</td><td>Compute pairwise covariance of columns, excluding NA/null values</td></tr><tr><td>cummax([axis,?skipna])</td><td>Return cumulative max over requested axis.</td></tr><tr><td>cummin([axis,?skipna])</td><td>Return cumulative minimum over requested axis.</td></tr><tr><td>cumprod([axis,?skipna])</td><td>Return cumulative product over requested axis.</td></tr><tr><td>cumsum([axis,?skipna])</td><td>Return cumulative sum over requested axis.</td></tr><tr><td>describe([percentiles,?include,?exclude])</td><td>Generate various summary statistics, excluding NaN values.</td></tr><tr><td>diff([periods,?axis])</td><td>1st discrete difference of object</td></tr><tr><td>div(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>divide(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>dot(other)</td><td>Matrix multiplication with DataFrame or Series objects</td></tr><tr><td>drop(labels[,?axis,?level,?inplace,?errors])</td><td>Return new object with labels in requested axis removed.</td></tr><tr><td>drop_duplicates(*args,?**kwargs)</td><td>Return DataFrame with duplicate rows removed, optionally only</td></tr><tr><td>dropna([axis,?how,?thresh,?subset,?inplace])</td><td>Return object with labels on given axis omitted where alternately any</td></tr><tr><td>duplicated(*args,?**kwargs)</td><td>Return boolean Series denoting duplicate rows, optionally only</td></tr><tr><td>eq(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods eq</td></tr><tr><td>equals(other)</td><td>Determines if two NDFrame objects contain the same elements.</td></tr><tr><td>eval(expr[,?inplace])</td><td>Evaluate an expression in the context of the calling DataFrame instance.</td></tr><tr><td>ewm([com,?span,?halflife,?alpha,?])</td><td>Provides exponential weighted functions</td></tr><tr><td>expanding([min_periods,?freq,?center,?axis])</td><td>Provides expanding transformations.</td></tr><tr><td>ffill([axis,?inplace,?limit,?downcast])</td><td>Synonym for NDFrame.fillna(method=ffill)</td></tr><tr><td>fillna([value,?method,?axis,?inplace,?])</td><td>Fill NA/NaN values using the specified method</td></tr><tr><td>filter([items,?like,?regex,?axis])</td><td>Subset rows or columns of dataframe according to labels in the specified index.</td></tr><tr><td>first(offset)</td><td>Convenience method for subsetting initial periods of time series data based on a date offset.</td></tr><tr><td>first_valid_index()</td><td>Return label for first non-NA/null value</td></tr><tr><td>floordiv(other[,?axis,?level,?fill_value])</td><td>Integer division of dataframe and other, element-wise (binary operator?floordiv).</td></tr><tr><td>from_csv(path[,?header,?sep,?index_col,?])</td><td>Read CSV file (DISCOURAGED, please use?pandas.read_csv()?instead).</td></tr><tr><td>from_dict(data[,?orient,?dtype])</td><td>Construct DataFrame from dict of array-like or dicts</td></tr><tr><td>from_items(items[,?columns,?orient])</td><td>Convert (key, value) pairs to DataFrame.</td></tr><tr><td>from_records(data[,?index,?exclude,?])</td><td>Convert structured or record ndarray to DataFrame</td></tr><tr><td>ge(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods ge</td></tr><tr><td>get(key[,?default])</td><td>Get item from object for given key (DataFrame column, Panel slice, etc.).</td></tr><tr><td>get_dtype_counts()</td><td>Return the counts of dtypes in this object.</td></tr><tr><td>get_ftype_counts()</td><td>Return the counts of ftypes in this object.</td></tr><tr><td>get_value(index,?col[,?takeable])</td><td>Quickly retrieve single value at passed column and index</td></tr><tr><td>get_values()</td><td>same as values (but handles sparseness conversions)</td></tr><tr><td>groupby([by,?axis,?level,?as_index,?sort,?])</td><td>Group series using mapper (dict or key function, apply given function to group, return result as series) or by a series of columns.</td></tr><tr><td>gt(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods gt</td></tr><tr><td>head([n])</td><td>Returns first n rows</td></tr><tr><td>hist(data[,?column,?by,?grid,?xlabelsize,?])</td><td>Draw histogram of the DataFrames series using matplotlib / pylab.</td></tr><tr><td>icol(i)</td><td>DEPRECATED.</td></tr><tr><td>idxmax([axis,?skipna])</td><td>Return index of first occurrence of maximum over requested axis.</td></tr><tr><td>idxmin([axis,?skipna])</td><td>Return index of first occurrence of minimum over requested axis.</td></tr><tr><td>iget_value(i,?j)</td><td>DEPRECATED.</td></tr><tr><td>info([verbose,?buf,?max_cols,?memory_usage,?])</td><td>Concise summary of a DataFrame.</td></tr><tr><td>insert(loc,?column,?value[,?allow_duplicates])</td><td>Insert column into DataFrame at specified location.</td></tr><tr><td>interpolate([method,?axis,?limit,?inplace,?])</td><td>Interpolate values according to different methods.</td></tr><tr><td>irow(i[,?copy])</td><td>DEPRECATED.</td></tr><tr><td>isin(values)</td><td>Return boolean DataFrame showing whether each element in the DataFrame is contained in values.</td></tr><tr><td>isnull()</td><td>Return a boolean same-sized object indicating if the values are null.</td></tr><tr><td>iteritems()</td><td>Iterator over (column name, Series) pairs.</td></tr><tr><td>iterkv(*args,?**kwargs)</td><td>iteritems alias used to get around 2to3. Deprecated</td></tr><tr><td>iterrows()</td><td>Iterate over DataFrame rows as (index, Series) pairs.</td></tr><tr><td>itertuples([index,?name])</td><td>Iterate over DataFrame rows as namedtuples, with index value as first element of the tuple.</td></tr><tr><td>join(other[,?on,?how,?lsuffix,?rsuffix,?sort])</td><td>Join columns with other DataFrame either on index or on a key column.</td></tr><tr><td>keys()</td><td>Get the info axis (see Indexing for more)</td></tr><tr><td>kurt([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).</td></tr><tr><td>kurtosis([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased kurtosis over requested axis using Fishers definition of kurtosis (kurtosis of normal == 0.0).</td></tr><tr><td>last(offset)</td><td>Convenience method for subsetting final periods of time series data based on a date offset.</td></tr><tr><td>last_valid_index()</td><td>Return label for last non-NA/null value</td></tr><tr><td>le(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods le</td></tr><tr><td>lookup(row_labels,?col_labels)</td><td>Label-based fancy indexing function for DataFrame.</td></tr><tr><td>lt(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods lt</td></tr><tr><td>mad([axis,?skipna,?level])</td><td>Return the mean absolute deviation of the values for the requested axis</td></tr><tr><td>mask(cond[,?other,?inplace,?axis,?level,?])</td><td>Return an object of same shape as self and whose corresponding entries are from self where cond is False and otherwise are from other.</td></tr><tr><td>max([axis,?skipna,?level,?numeric_only])</td><td>This method returns the maximum of the values in the object.</td></tr><tr><td>mean([axis,?skipna,?level,?numeric_only])</td><td>Return the mean of the values for the requested axis</td></tr><tr><td>median([axis,?skipna,?level,?numeric_only])</td><td>Return the median of the values for the requested axis</td></tr><tr><td>memory_usage([index,?deep])</td><td>Memory usage of DataFrame columns.</td></tr><tr><td>merge(right[,?how,?on,?left_on,?right_on,?])</td><td>Merge DataFrame objects by performing a database-style join operation by columns or indexes.</td></tr><tr><td>min([axis,?skipna,?level,?numeric_only])</td><td>This method returns the minimum of the values in the object.</td></tr><tr><td>mod(other[,?axis,?level,?fill_value])</td><td>Modulo of dataframe and other, element-wise (binary operator?mod).</td></tr><tr><td>mode([axis,?numeric_only])</td><td>Gets the mode(s) of each element along the axis selected.</td></tr><tr><td>mul(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?mul).</td></tr><tr><td>multiply(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?mul).</td></tr><tr><td>ne(other[,?axis,?level])</td><td>Wrapper for flexible comparison methods ne</td></tr><tr><td>nlargest(n,?columns[,?keep])</td><td>Get the rows of a DataFrame sorted by the?n?largest values of?columns.</td></tr><tr><td>notnull()</td><td>Return a boolean same-sized object indicating if the values are not null.</td></tr><tr><td>nsmallest(n,?columns[,?keep])</td><td>Get the rows of a DataFrame sorted by the?n?smallest values of?columns.</td></tr><tr><td>pct_change([periods,?fill_method,?limit,?freq])</td><td>Percent change over given number of periods.</td></tr><tr><td>pipe(func,?*args,?**kwargs)</td><td>Apply func(self, <em>args, *</em>kwargs)</td></tr><tr><td>pivot([index,?columns,?values])</td><td>Reshape data (produce a pivot table) based on column values.</td></tr><tr><td>pivot_table(data[,?values,?index,?columns,?])</td><td>Create a spreadsheet-style pivot table as a DataFrame.</td></tr><tr><td>plot</td><td>alias of?FramePlotMethods</td></tr><tr><td>pop(item)</td><td>Return item and drop from frame.</td></tr><tr><td>pow(other[,?axis,?level,?fill_value])</td><td>Exponential power of dataframe and other, element-wise (binary operator?pow).</td></tr><tr><td>prod([axis,?skipna,?level,?numeric_only])</td><td>Return the product of the values for the requested axis</td></tr><tr><td>product([axis,?skipna,?level,?numeric_only])</td><td>Return the product of the values for the requested axis</td></tr><tr><td>quantile([q,?axis,?numeric_only,?interpolation])</td><td>Return values at the given quantile over requested axis, a la numpy.percentile.</td></tr><tr><td>query(expr[,?inplace])</td><td>Query the columns of a frame with a boolean expression.</td></tr><tr><td>radd(other[,?axis,?level,?fill_value])</td><td>Addition of dataframe and other, element-wise (binary operator?radd).</td></tr><tr><td>rank([axis,?method,?numeric_only,?])</td><td>Compute numerical data ranks (1 through n) along axis.</td></tr><tr><td>rdiv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?rtruediv).</td></tr><tr><td>reindex([index,?columns])</td><td>Conform DataFrame to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.</td></tr><tr><td>reindex_axis(labels[,?axis,?method,?level,?])</td><td>Conform input object to new index with optional filling logic, placing NA/NaN in locations having no value in the previous index.</td></tr><tr><td>reindex_like(other[,?method,?copy,?limit,?])</td><td>Return an object with matching indices to myself.</td></tr><tr><td>rename([index,?columns])</td><td>Alter axes input function or functions.</td></tr><tr><td>rename_axis(mapper[,?axis,?copy,?inplace])</td><td>Alter index and / or columns using input function or functions.</td></tr><tr><td>reorder_levels(order[,?axis])</td><td>Rearrange index levels using input order.</td></tr><tr><td>replace([to_replace,?value,?inplace,?limit,?])</td><td>Replace values given in to_replace with value.</td></tr><tr><td>resample(rule[,?how,?axis,?fill_method,?])</td><td>Convenience method for frequency conversion and resampling of time series.</td></tr><tr><td>reset_index([level,?drop,?inplace,?])</td><td>For DataFrame with multi-level index, return new DataFrame with labeling information in the columns under the index names, defaulting to level_0, level_1, etc.</td></tr><tr><td>rfloordiv(other[,?axis,?level,?fill_value])</td><td>Integer division of dataframe and other, element-wise (binary operator?rfloordiv).</td></tr><tr><td>rmod(other[,?axis,?level,?fill_value])</td><td>Modulo of dataframe and other, element-wise (binary operator?rmod).</td></tr><tr><td>rmul(other[,?axis,?level,?fill_value])</td><td>Multiplication of dataframe and other, element-wise (binary operator?rmul).</td></tr><tr><td>rolling(window[,?min_periods,?freq,?center,?])</td><td>Provides rolling window calculcations.</td></tr><tr><td>round([decimals])</td><td>Round a DataFrame to a variable number of decimal places.</td></tr><tr><td>rpow(other[,?axis,?level,?fill_value])</td><td>Exponential power of dataframe and other, element-wise (binary operator?rpow).</td></tr><tr><td>rsub(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?rsub).</td></tr><tr><td>rtruediv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?rtruediv).</td></tr><tr><td>sample([n,?frac,?replace,?weights,?])</td><td>Returns a random sample of items from an axis of object.</td></tr><tr><td>select(crit[,?axis])</td><td>Return data corresponding to axis labels matching criteria</td></tr><tr><td>select_dtypes([include,?exclude])</td><td>Return a subset of a DataFrame including/excluding columns based on their?dtype.</td></tr><tr><td>sem([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return unbiased standard error of the mean over requested axis.</td></tr><tr><td>set_axis(axis,?labels)</td><td>public verson of axis assignment</td></tr><tr><td>set_index(keys[,?drop,?append,?inplace,?])</td><td>Set the DataFrame index (row labels) using one or more existing columns.</td></tr><tr><td>set_value(index,?col,?value[,?takeable])</td><td>Put single value at passed column and index</td></tr><tr><td>shift([periods,?freq,?axis])</td><td>Shift index by desired number of periods with an optional time freq</td></tr><tr><td>skew([axis,?skipna,?level,?numeric_only])</td><td>Return unbiased skew over requested axis</td></tr><tr><td>slice_shift([periods,?axis])</td><td>Equivalent to?shift?without copying data.</td></tr><tr><td>sort([columns,?axis,?ascending,?inplace,?])</td><td>DEPRECATED: use?DataFrame.sort_values()</td></tr><tr><td>sort_index([axis,?level,?ascending,?])</td><td>Sort object by labels (along an axis)</td></tr><tr><td>sort_values(by[,?axis,?ascending,?inplace,?])</td><td>Sort by the values along either axis</td></tr><tr><td>sortlevel([level,?axis,?ascending,?inplace,?])</td><td>Sort multilevel index by chosen axis and primary level.</td></tr><tr><td>squeeze(**kwargs)</td><td>Squeeze length 1 dimensions.</td></tr><tr><td>stack([level,?dropna])</td><td>Pivot a level of the (possibly hierarchical) column labels, returning a DataFrame (or Series in the case of an object with a single level of column labels) having a hierarchical index with a new inner-most level of row labels.</td></tr><tr><td>std([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return sample standard deviation over requested axis.</td></tr><tr><td>sub(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?sub).</td></tr><tr><td>subtract(other[,?axis,?level,?fill_value])</td><td>Subtraction of dataframe and other, element-wise (binary operator?sub).</td></tr><tr><td>sum([axis,?skipna,?level,?numeric_only])</td><td>Return the sum of the values for the requested axis</td></tr><tr><td>swapaxes(axis1,?axis2[,?copy])</td><td>Interchange axes and swap values axes appropriately</td></tr><tr><td>swaplevel([i,?j,?axis])</td><td>Swap levels i and j in a MultiIndex on a particular axis</td></tr><tr><td>tail([n])</td><td>Returns last n rows</td></tr><tr><td>take(indices[,?axis,?convert,?is_copy])</td><td>Analogous to ndarray.take</td></tr><tr><td>to_clipboard([excel,?sep])</td><td>Attempt to write text representation of object to the system clipboard This can be pasted into Excel, for example.</td></tr><tr><td>to_csv([path_or_buf,?sep,?na_rep,?])</td><td>Write DataFrame to a comma-separated values (csv) file</td></tr><tr><td>to_dense()</td><td>Return dense representation of NDFrame (as opposed to sparse)</td></tr><tr><td>to_dict([orient])</td><td>Convert DataFrame to dictionary.</td></tr><tr><td>to_excel(excel_writer[,?sheet_name,?na_rep,?])</td><td>Write DataFrame to a excel sheet</td></tr><tr><td>to_gbq(destination_table,?project_id[,?])</td><td>Write a DataFrame to a Google BigQuery table.</td></tr><tr><td>to_hdf(path_or_buf,?key,?**kwargs)</td><td>Write the contained data to an HDF5 file using HDFStore.</td></tr><tr><td>to_html([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame as an HTML table.</td></tr><tr><td>to_json([path_or_buf,?orient,?date_format,?])</td><td>Convert the object to a JSON string.</td></tr><tr><td>to_latex([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame to a tabular environment table.</td></tr><tr><td>to_msgpack([path_or_buf,?encoding])</td><td>msgpack (serialize) object to input file path</td></tr><tr><td>to_panel()</td><td>Transform long (stacked) format (DataFrame) into wide (3D, Panel) format.</td></tr><tr><td>to_period([freq,?axis,?copy])</td><td>Convert DataFrame from DatetimeIndex to PeriodIndex with desired</td></tr><tr><td>to_pickle(path)</td><td>Pickle (serialize) object to input file path.</td></tr><tr><td>to_records([index,?convert_datetime64])</td><td>Convert DataFrame to record array.</td></tr><tr><td>to_sparse([fill_value,?kind])</td><td>Convert to SparseDataFrame</td></tr><tr><td>to_sql(name,?con[,?flavor,?schema,?])</td><td>Write records stored in a DataFrame to a SQL database.</td></tr><tr><td>to_stata(fname[,?convert_dates,?])</td><td>A class for writing Stata binary dta files from array-like objects</td></tr><tr><td>to_string([buf,?columns,?col_space,?header,?])</td><td>Render a DataFrame to a console-friendly tabular output.</td></tr><tr><td>to_timestamp([freq,?how,?axis,?copy])</td><td>Cast to DatetimeIndex of timestamps, at?beginning?of period</td></tr><tr><td>to_xarray()</td><td>Return an xarray object from the pandas object.</td></tr><tr><td>transpose(*args,?**kwargs)</td><td>Transpose index and columns</td></tr><tr><td>truediv(other[,?axis,?level,?fill_value])</td><td>Floating division of dataframe and other, element-wise (binary operator?truediv).</td></tr><tr><td>truncate([before,?after,?axis,?copy])</td><td>Truncates a sorted NDFrame before and/or after some particular index value.</td></tr><tr><td>tshift([periods,?freq,?axis])</td><td>Shift the time index, using the indexs frequency if available.</td></tr><tr><td>tz_convert(tz[,?axis,?level,?copy])</td><td>Convert tz-aware axis to target time zone.</td></tr><tr><td>tz_localize(*args,?**kwargs)</td><td>Localize tz-naive TimeSeries to target time zone.</td></tr><tr><td>unstack([level,?fill_value])</td><td>Pivot a level of the (necessarily hierarchical) index labels, returning a DataFrame having a new level of column labels whose inner-most level consists of the pivoted index labels.</td></tr><tr><td>update(other[,?join,?overwrite,?])</td><td>Modify DataFrame in place using non-NA values from passed DataFrame.</td></tr><tr><td>var([axis,?skipna,?level,?ddof,?numeric_only])</td><td>Return unbiased variance over requested axis.</td></tr><tr><td>where(cond[,?other,?inplace,?axis,?level,?])</td><td>Return an object of same shape as self and whose corresponding entries are from self where cond is True and otherwise are from other.</td></tr><tr><td>xs(key[,?axis,?level,?drop_level])</td><td>Returns a cross-section (row(s) or column(s)) from the Series/DataFrame.</td></tr></tbody></table>","popularPost_tmp_postPath":true,"popularPost_tmp_gaData":{"updated":"Mon Jul 23 2018 09:28:38 GMT+0800 ()","title":"DataFrame","path":"2017/02/04/pandas-func/","eyeCatchImage":null,"excerpt":"<p>pandasDataFrame<br>csvmd:<a href=\"http://www.tablesgenerator.com/\" target=\"_blank\" rel=\"noopener\">Tables Generator</a></p>","date":"2017-02-04T13:02:51.000Z","pv":0,"totalPV":0,"categories":"Python","tags":["math","machinelearning","code","python"],"internalLinks":[],"keywords":[],"keywordsLength":0}}],"PostAsset":[],"PostCategory":[{"post_id":"cjmd072c50001qcw6gskbd9a6","category_id":"cjmd072cc0005qcw6zn9stpak","_id":"cjmd072ck000fqcw6k3is1det"},{"post_id":"cjmd072c90003qcw60txh9z51","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072cn000kqcw6d67f3x4i"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","category_id":"cjmd072cc0005qcw6zn9stpak","_id":"cjmd072cq000pqcw6gor8jym9"},{"post_id":"cjmd072ce0007qcw6rbhpipf9","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072cs000tqcw6q229zj8e"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072ct000vqcw61s611gux"},{"post_id":"cjmd072cf0009qcw6pre1bacp","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072cv000yqcw6utzzc8lk"},{"post_id":"cjmd072cp000oqcw65ode1hfz","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072cw0012qcw6dabnbzbt"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072cy0016qcw6o19zljmy"},{"post_id":"cjmd072cg000aqcw6yd4i21pl","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072cz001aqcw6rh5bin21"},{"post_id":"cjmd072cs000uqcw6wnw7fvpf","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072d0001eqcw6iu1trayv"},{"post_id":"cjmd072cu000xqcw6l4m00fyh","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072d2001iqcw6oddmag4o"},{"post_id":"cjmd072ci000dqcw68lvwmb07","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072d3001mqcw6cqszl4ne"},{"post_id":"cjmd072cj000eqcw6fqw2quk3","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072d5001qqcw6r0j20n06"},{"post_id":"cjmd072d0001dqcw6c7l4tbo5","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd072d6001sqcw69g0qougo"},{"post_id":"cjmd072cm000jqcw667rfquno","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072d8001xqcw6fby6qs62"},{"post_id":"cjmd072d1001hqcw6sweam9cm","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072d90020qcw6d08qwsbi"},{"post_id":"cjmd072d4001pqcw6vvk1cc8m","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072db0025qcw6qpvc5kd0"},{"post_id":"cjmd072cv0011qcw6rzw7215r","category_id":"cjmd072d2001jqcw62y9n0ryl","_id":"cjmd072dc0028qcw610g59nct"},{"post_id":"cjmd072d5001rqcw6f90w9tcn","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072dd002cqcw69ddtuuaq"},{"post_id":"cjmd072d7001wqcw6iml78k1e","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072df002fqcw6n4901adb"},{"post_id":"cjmd072cx0015qcw6cz5y0k9y","category_id":"cjmd072d2001jqcw62y9n0ryl","_id":"cjmd072dg002kqcw6xnjlu5p2"},{"post_id":"cjmd072d8001zqcw67w7br38j","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072di002nqcw6t79wivs7"},{"post_id":"cjmd072da0024qcw6k88en422","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072dk002rqcw6oou3chur"},{"post_id":"cjmd072cy0019qcw6dcpt8kzu","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072dk002uqcw6u87jyxse"},{"post_id":"cjmd072db0027qcw6aj6tcfif","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072dl002yqcw6bxehdwiw"},{"post_id":"cjmd072dg002jqcw6br15sstp","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072dm002zqcw67zopv595"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","category_id":"cjmd072cc0005qcw6zn9stpak","_id":"cjmd072dm0031qcw6lb6hw451"},{"post_id":"cjmd072dd002bqcw60d7j3mpd","category_id":"cjmd072df002hqcw64nmrxvpy","_id":"cjmd072dn0033qcw6n2jwzmpa"},{"post_id":"cjmd072dj002pqcw61zo6vmeo","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072dn0036qcw6xy95xirv"},{"post_id":"cjmd072dk002tqcw6gtkb4urj","category_id":"cjmd072ck000gqcw67f4pnp2m","_id":"cjmd072do0037qcw6710k21zy"},{"post_id":"cjmd072de002eqcw6hub4nmxr","category_id":"cjmd072dj002qqcw6o531jf93","_id":"cjmd072do0039qcw6r5ntc89d"},{"post_id":"cjmd072dk002xqcw6fhwjjsvj","category_id":"cjmd072cz001bqcw6g8q5kys5","_id":"cjmd072do003bqcw6c9x8b85h"},{"post_id":"cjmd072d2001lqcw6y1vijoci","category_id":"cjmd072ci000bqcw61krk319l","_id":"cjmd09ll700021kw6rwwjpdg7"}],"PostTag":[{"post_id":"cjmd072c50001qcw6gskbd9a6","tag_id":"cjmd072cd0006qcw6d8weaaxz","_id":"cjmd072cv0010qcw6fyop4i7q"},{"post_id":"cjmd072c50001qcw6gskbd9a6","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072cx0014qcw6iflt6a5b"},{"post_id":"cjmd072c50001qcw6gskbd9a6","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072cy0018qcw6ijoo3gaa"},{"post_id":"cjmd072c50001qcw6gskbd9a6","tag_id":"cjmd072cn000mqcw6wetadc5r","_id":"cjmd072cz001cqcw6pk0hj2h4"},{"post_id":"cjmd072c50001qcw6gskbd9a6","tag_id":"cjmd072cr000rqcw6opovqozs","_id":"cjmd072d1001gqcw6csqrgc24"},{"post_id":"cjmd072c90003qcw60txh9z51","tag_id":"cjmd072cv000zqcw6yzlq9thu","_id":"cjmd072d2001kqcw6dftt1gdk"},{"post_id":"cjmd072c90003qcw60txh9z51","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072d4001oqcw6uq9tqe9h"},{"post_id":"cjmd072d4001pqcw6vvk1cc8m","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072d7001vqcw6orlyva1j"},{"post_id":"cjmd072d4001pqcw6vvk1cc8m","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072d8001yqcw63arikqqr"},{"post_id":"cjmd072ce0007qcw6rbhpipf9","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072da0023qcw6hczjsl9g"},{"post_id":"cjmd072ce0007qcw6rbhpipf9","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072db0026qcw6wdtx5knj"},{"post_id":"cjmd072d5001rqcw6f90w9tcn","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dc002aqcw6apmsbxxb"},{"post_id":"cjmd072d5001rqcw6f90w9tcn","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072de002dqcw6w8ze14fk"},{"post_id":"cjmd072cf0009qcw6pre1bacp","tag_id":"cjmd072cv000zqcw6yzlq9thu","_id":"cjmd072df002iqcw65lv4cfrn"},{"post_id":"cjmd072cf0009qcw6pre1bacp","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dh002lqcw63ede55ja"},{"post_id":"cjmd072cg000aqcw6yd4i21pl","tag_id":"cjmd072cv000zqcw6yzlq9thu","_id":"cjmd072dk002sqcw6u7giz1c3"},{"post_id":"cjmd072cg000aqcw6yd4i21pl","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dk002vqcw6jsuyrodn"},{"post_id":"cjmd072ci000dqcw68lvwmb07","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dm0032qcw6h5hm5bwu"},{"post_id":"cjmd072ci000dqcw68lvwmb07","tag_id":"cjmd072dk002wqcw6qtnhml2f","_id":"cjmd072dn0034qcw6won8jht8"},{"post_id":"cjmd072cj000eqcw6fqw2quk3","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072do003aqcw6cnr338fq"},{"post_id":"cjmd072cj000eqcw6fqw2quk3","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072dp003cqcw60o5t0vq4"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","tag_id":"cjmd072cd0006qcw6d8weaaxz","_id":"cjmd072dq003fqcw6rlsygbvk"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dq003gqcw6ghq50ck6"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072dq003iqcw64tz9o0ue"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","tag_id":"cjmd072cn000mqcw6wetadc5r","_id":"cjmd072dr003jqcw6ak0twlzm"},{"post_id":"cjmd072cl000iqcw6gj4y2i1c","tag_id":"cjmd072cr000rqcw6opovqozs","_id":"cjmd072dr003lqcw6phuqmj3q"},{"post_id":"cjmd072cm000jqcw667rfquno","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072ds003mqcw6lx84lm47"},{"post_id":"cjmd072cm000jqcw667rfquno","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072ds003oqcw6xs1332ar"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","tag_id":"cjmd072cd0006qcw6d8weaaxz","_id":"cjmd072dt003pqcw6wqx2fnfb"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dt003rqcw6veww7h7q"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072dt003sqcw6rqffslow"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","tag_id":"cjmd072cn000mqcw6wetadc5r","_id":"cjmd072du003uqcw6nehf4aml"},{"post_id":"cjmd072co000nqcw6ejn1yfkb","tag_id":"cjmd072cr000rqcw6opovqozs","_id":"cjmd072du003vqcw6tqnmnf9g"},{"post_id":"cjmd072cp000oqcw65ode1hfz","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dv003xqcw6c9p25sum"},{"post_id":"cjmd072cp000oqcw65ode1hfz","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072dv003yqcw6ht4n48sk"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","tag_id":"cjmd072cd0006qcw6d8weaaxz","_id":"cjmd072dv0040qcw6j5pwdww2"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dv0041qcw6phlljtsn"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072dw0043qcw6258ui2g0"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","tag_id":"cjmd072cn000mqcw6wetadc5r","_id":"cjmd072dw0044qcw6z0rxjegn"},{"post_id":"cjmd072cr000sqcw6ptpwtvbc","tag_id":"cjmd072cr000rqcw6opovqozs","_id":"cjmd072dw0046qcw6azkqv50m"},{"post_id":"cjmd072cs000uqcw6wnw7fvpf","tag_id":"cjmd072du003tqcw66w99htxr","_id":"cjmd072dx0047qcw6fnwpg4g2"},{"post_id":"cjmd072cs000uqcw6wnw7fvpf","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dx0049qcw62v3gq9q6"},{"post_id":"cjmd072cu000xqcw6l4m00fyh","tag_id":"cjmd072du003tqcw66w99htxr","_id":"cjmd072dx004aqcw6dgo9pht1"},{"post_id":"cjmd072cu000xqcw6l4m00fyh","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072dx004cqcw6dmlzzgli"},{"post_id":"cjmd072cv0011qcw6rzw7215r","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dy004dqcw6bl3jnbqo"},{"post_id":"cjmd072cv0011qcw6rzw7215r","tag_id":"cjmd072dv0042qcw6kst2qnud","_id":"cjmd072dy004fqcw6mldyrpcv"},{"post_id":"cjmd072cx0015qcw6cz5y0k9y","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dy004gqcw6ihbhstwe"},{"post_id":"cjmd072cx0015qcw6cz5y0k9y","tag_id":"cjmd072dv0042qcw6kst2qnud","_id":"cjmd072dz004hqcw6cmm2qkib"},{"post_id":"cjmd072cy0019qcw6dcpt8kzu","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072dz004kqcw6vtmrful9"},{"post_id":"cjmd072cy0019qcw6dcpt8kzu","tag_id":"cjmd072dy004eqcw6gwdvaowj","_id":"cjmd072dz004lqcw6r1u0xrsv"},{"post_id":"cjmd072cy0019qcw6dcpt8kzu","tag_id":"cjmd072dz004iqcw6f6pnhfcj","_id":"cjmd072e0004nqcw6cj6rmysp"},{"post_id":"cjmd072d0001dqcw6c7l4tbo5","tag_id":"cjmd072dz004jqcw6o4g6rirf","_id":"cjmd072e0004oqcw6wi89u3pd"},{"post_id":"cjmd072d0001dqcw6c7l4tbo5","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e0004qqcw6uvzehxtf"},{"post_id":"cjmd072d1001hqcw6sweam9cm","tag_id":"cjmd072dz004mqcw6b4ol9vid","_id":"cjmd072e0004sqcw6eithjsi8"},{"post_id":"cjmd072d1001hqcw6sweam9cm","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e1004tqcw6t8vag7cl"},{"post_id":"cjmd072d1001hqcw6sweam9cm","tag_id":"cjmd072e0004pqcw60a9frod2","_id":"cjmd072e1004vqcw65f9m365j"},{"post_id":"cjmd072d7001wqcw6iml78k1e","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e1004wqcw6fqfx2r0f"},{"post_id":"cjmd072d7001wqcw6iml78k1e","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072e2004yqcw6n3bkmqnd"},{"post_id":"cjmd072d7001wqcw6iml78k1e","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072e2004zqcw616ay8yr1"},{"post_id":"cjmd072d7001wqcw6iml78k1e","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072e20051qcw63d7x0ds7"},{"post_id":"cjmd072d8001zqcw67w7br38j","tag_id":"cjmd072dz004mqcw6b4ol9vid","_id":"cjmd072e20052qcw6ri27qaed"},{"post_id":"cjmd072d8001zqcw67w7br38j","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e30054qcw66y3mmp4d"},{"post_id":"cjmd072d8001zqcw67w7br38j","tag_id":"cjmd072e0004pqcw60a9frod2","_id":"cjmd072e30055qcw6y5od35xs"},{"post_id":"cjmd072da0024qcw6k88en422","tag_id":"cjmd072e20050qcw69v5sue83","_id":"cjmd072e50059qcw6ko0naune"},{"post_id":"cjmd072da0024qcw6k88en422","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e5005aqcw6689vju7w"},{"post_id":"cjmd072da0024qcw6k88en422","tag_id":"cjmd072e0004pqcw60a9frod2","_id":"cjmd072e5005cqcw62o5y6x0r"},{"post_id":"cjmd072da0024qcw6k88en422","tag_id":"cjmd072e30056qcw6unc9dagp","_id":"cjmd072e6005dqcw6bslcslce"},{"post_id":"cjmd072da0024qcw6k88en422","tag_id":"cjmd072e30057qcw6fmm9hi3f","_id":"cjmd072e6005fqcw6kyc9vca5"},{"post_id":"cjmd072db0027qcw6aj6tcfif","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072e6005gqcw60vu7v7sg"},{"post_id":"cjmd072db0027qcw6aj6tcfif","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072e6005iqcw66b796ok7"},{"post_id":"cjmd072db0027qcw6aj6tcfif","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072e6005jqcw6n6z13gh7"},{"post_id":"cjmd072db0027qcw6aj6tcfif","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072e7005lqcw601gwuxx7"},{"post_id":"cjmd072dd002bqcw60d7j3mpd","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072e7005mqcw6y6lgs0tq"},{"post_id":"cjmd072dd002bqcw60d7j3mpd","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072e8005oqcw6mklxibnb"},{"post_id":"cjmd072dd002bqcw60d7j3mpd","tag_id":"cjmd072e6005eqcw6awg1l4yt","_id":"cjmd072e8005pqcw62bmh0ncp"},{"post_id":"cjmd072dd002bqcw60d7j3mpd","tag_id":"cjmd072e6005hqcw6ua7rfqfe","_id":"cjmd072e8005qqcw6ug6weeu4"},{"post_id":"cjmd072de002eqcw6hub4nmxr","tag_id":"cjmd072e7005kqcw6xs3yiafq","_id":"cjmd072e9005tqcw6uuxk68nw"},{"post_id":"cjmd072de002eqcw6hub4nmxr","tag_id":"cjmd072e8005nqcw6rq3dh4gq","_id":"cjmd072ea005uqcw67bshnzy5"},{"post_id":"cjmd072de002eqcw6hub4nmxr","tag_id":"cjmd072e9005rqcw6u7u2hnyi","_id":"cjmd072ea005wqcw6593sluv8"},{"post_id":"cjmd072dg002jqcw6br15sstp","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072ea005yqcw6ptpvlzka"},{"post_id":"cjmd072dg002jqcw6br15sstp","tag_id":"cjmd072dk002wqcw6qtnhml2f","_id":"cjmd072ea005zqcw641mgj482"},{"post_id":"cjmd072dg002jqcw6br15sstp","tag_id":"cjmd072ea005vqcw6wrl5my0h","_id":"cjmd072eb0061qcw6s0o7ljiu"},{"post_id":"cjmd072dg002jqcw6br15sstp","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072eb0062qcw61m17ukpz"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072cd0006qcw6d8weaaxz","_id":"cjmd072ec0066qcw6w310q5ca"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072ea005xqcw66i7lq2mm","_id":"cjmd072ec0067qcw68trubimq"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072ed0069qcw6jgdx2b2k"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072eb0060qcw65zps3nqu","_id":"cjmd072ed006aqcw6r8pq0clz"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072cr000rqcw6opovqozs","_id":"cjmd072ed006cqcw6hlv6br9p"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072eb0063qcw68oy69ufq","_id":"cjmd072ed006dqcw6s9a90gn1"},{"post_id":"cjmd072dh002mqcw6vp0xmfap","tag_id":"cjmd072eb0064qcw6v93eb8ml","_id":"cjmd072ee006eqcw6600awpg6"},{"post_id":"cjmd072dj002pqcw61zo6vmeo","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072ee006fqcw6tvup4y57"},{"post_id":"cjmd072dj002pqcw61zo6vmeo","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072ee006gqcw63vne1p7g"},{"post_id":"cjmd072dk002tqcw6gtkb4urj","tag_id":"cjmd072ec0068qcw6zvsj1xjx","_id":"cjmd072ee006hqcw69jyufck8"},{"post_id":"cjmd072dk002tqcw6gtkb4urj","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072ee006iqcw6c5n4k43z"},{"post_id":"cjmd072dk002tqcw6gtkb4urj","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072ee006jqcw6azngq0d8"},{"post_id":"cjmd072dk002xqcw6fhwjjsvj","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd072ee006kqcw6ru71b0w7"},{"post_id":"cjmd072dk002xqcw6fhwjjsvj","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd072ee006lqcw6vxwp9y7h"},{"post_id":"cjmd072dk002xqcw6fhwjjsvj","tag_id":"cjmd072dq003hqcw6q3o5wv4h","_id":"cjmd072ee006mqcw69wokd6d7"},{"post_id":"cjmd072dk002xqcw6fhwjjsvj","tag_id":"cjmd072d0001fqcw62arta76c","_id":"cjmd072ee006nqcw6jwr0vc54"},{"post_id":"cjmd072d2001lqcw6y1vijoci","tag_id":"cjmd072ci000cqcw6k6vqnnm8","_id":"cjmd09ll700011kw6mf4w4y48"},{"post_id":"cjmd072d2001lqcw6y1vijoci","tag_id":"cjmd09qao00031kw65049qx42","_id":"cjmd09qao00041kw6c777u97o"},{"post_id":"cjmd072d2001lqcw6y1vijoci","tag_id":"cjmd072ck000hqcw6bgyqs0ck","_id":"cjmd09uzr00051kw64r1jkr38"}],"Tag":[{"name":"abstractive summarization","_id":"cjmd072cd0006qcw6d8weaaxz"},{"name":"math","_id":"cjmd072ci000cqcw6k6vqnnm8"},{"name":"machinelearning","_id":"cjmd072ck000hqcw6bgyqs0ck"},{"name":"theory","_id":"cjmd072cn000mqcw6wetadc5r"},{"name":"nlp","_id":"cjmd072cr000rqcw6opovqozs"},{"name":"linearalgebra","_id":"cjmd072cv000zqcw6yzlq9thu"},{"name":"code","_id":"cjmd072d0001fqcw62arta76c"},{"name":"machine learning","_id":"cjmd072dk002wqcw6qtnhml2f"},{"name":"python","_id":"cjmd072dq003hqcw6q3o5wv4h"},{"name":"convex optimization","_id":"cjmd072du003tqcw66w99htxr"},{"name":"android","_id":"cjmd072dv0042qcw6kst2qnud"},{"name":"server","_id":"cjmd072dy004eqcw6gwdvaowj"},{"name":"linux","_id":"cjmd072dz004iqcw6f6pnhfcj"},{"name":"dpp","_id":"cjmd072dz004jqcw6o4g6rirf"},{"name":"lda","_id":"cjmd072dz004mqcw6b4ol9vid"},{"name":"mcmc","_id":"cjmd072e0004pqcw60a9frod2"},{"name":"inference","_id":"cjmd072e20050qcw69v5sue83"},{"name":"variational inference","_id":"cjmd072e30056qcw6unc9dagp"},{"name":"em","_id":"cjmd072e30057qcw6fmm9hi3f"},{"name":"c++","_id":"cjmd072e6005eqcw6awg1l4yt"},{"name":"algorithm","_id":"cjmd072e6005hqcw6ua7rfqfe"},{"name":"web","_id":"cjmd072e7005kqcw6xs3yiafq"},{"name":"hexo","_id":"cjmd072e8005nqcw6rq3dh4gq"},{"name":"github","_id":"cjmd072e9005rqcw6u7u2hnyi"},{"name":"statistical learning","_id":"cjmd072ea005vqcw6wrl5my0h"},{"name":"seq2seq","_id":"cjmd072ea005xqcw66i7lq2mm"},{"name":"rnn","_id":"cjmd072eb0060qcw65zps3nqu"},{"name":"lstm","_id":"cjmd072eb0063qcw68oy69ufq"},{"name":"gru","_id":"cjmd072eb0064qcw6v93eb8ml"},{"name":"tensorflow","_id":"cjmd072ec0068qcw6zvsj1xjx"},{"name":"bayes","_id":"cjmd09qao00031kw65049qx42"}]}}